{{InfoBox stack
|{{InfoBox github|markfasheh/duperemove|header=true}}
}}

Duperemove is a [[btrfs]] tool for finding duplicated extents and submitting them to the kernel for deduplication. This article will focus on building and using the {{c|duperemove}} utility from the newest ('live') source code directly out of the git repository. An ebuild is in the main Gentoo repository. Those who would like to quickly install an older version can simply {{c|emerge}} the package.

== Installation ==

=== Prerequisites ===

Duperemove needs a kernel version equal to or greater than 3.13.

Install the following build time dependencies:

{{Emerge|params+=--update|{{=}}dev-db/sqlite:3 {{=}}dev-libs/glib:2}}

=== Get the source ===

{{Cmd
|mkdir ~/code
|cd ~/code
|git clone https://github.com/markfasheh/duperemove.git
}}

=== Compile and install ===

Compile the source using the {{c|make}} command:

{{Cmd
|cd ~/duperemove
|make
}}

At this point the {{c|dupremove}} utility can be ran from the current directory or it can be installed to typical locations on the operating system. To install use the make install command as root:

{{RootCmd|make install}}

== Usage ==

Detailed information can be seen by running {{c|man duperemove}}.

=== Invocation ===

{{RootCmd|./duperemove --help|output=<pre>
duperemove v0.11-dev
Find duplicate extents and print them to stdout

Usage: ./duperemove [-r] [-d] [-h] [--debug] [--hashfile=hashfile] OBJECTS

"OBJECTS" is a list of files (or directories) which we
want to find duplicate extents in. If a directory is
specified, all regular files inside of it will be scanned.

        <switches>
        -r              Enable recursive dir traversal.
        -d              De-dupe the results - only works on btrfs.
        -h              Print numbers in human-readable format.
        --hashfile=FILE Use a file instead of memory for storing hashes.
        --help          Prints this help text.

Please see the duperemove(8) manpage for more options.
</pre>}}

== See also ==

* [[btrfs]] - A next-generation filesystem for Linux.
