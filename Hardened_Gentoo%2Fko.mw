<languages />
강화 젠투(Gentoo Hardened)는 잘 알려진 젠투 리눅스 설치 결과 위에 여러가지 추가 보안 서비스를 제공하는 프로젝트입니다. 각각의  서비스를 따로 선택할 수 있지만, 강화 젠투에서는 PaX, grSecurity, SELinux, TPE 등을 지원하는 툴체인에서 위험성을 덜어주는 여러가지 옵션을 활성화 합니다.

인터넷망에 직접 연결된 서버를 쓰든 유연한 워크스테이션을 쓰든, 여러가지 위험성을 다룰때 최신 보안 패치를 자동으로 단순히 적용하기보단 시스템을 더욱 견고하게 하고 싶어할 것입니다. 시스템의 ''견고화''는 공격이나 기타 위험에 대해 추가적인 대항조치를 취할 뿐만 아니라, 시스템에 취하는 여러 행동을 일반적으로 조합함을 의미합니다.

강화 젠투에는 젠투 시스템을 더욱 견고하게 구축하도록 도와주는 여러가지 활성 프로젝트가 있습니다
* 위치 독립 실행(PIE), 스택 스매싱 보호, 컴파일 타임 버퍼 검사 등의 툴체인(컴파일러, 링커, 등...)의 몇가지 옵션을 활성화합니다.
* 주소 공간 임의 배치, 비 실행 메모리 같은 추가 보호 조치를 지원하는 PaX 확장을 리눅스 커널에서 활성화합니다.
* 추가 chroot 제한, 추가 감사, 프로세스 등...의 기능을 포함한 grSecurity 확장을 리눅스 커널에서 활성화합니다.
* 표준 리눅스 권한 제한 기능을 대폭 향상한 필수 접근 제어 시스템을 제공하는 [[Hardened Gentoo/SELinux|SELinux]] 확장을 리눅스 커널에서 활성화합니다.
* 부당한 방법으로 변경된 시스템을 회복하는 무결성 검정 구조와 같은 [[Integrity]] 관련 기술을 활성화합니다.

물론 이들 확장을 관리하는데 필요한 사용자 영역 유틸리티도 포함됩니다.

== 강화 프로파일로의 전환 ==

강화(hardened) [[profile]]을 선택해서 ''꾸러미 관리자''가 강화 시스템으로 시스템을 빌드하도록 하십시오.

{{RootCmd|eselect profile list}}
{{RootCmd|eselect profile set [number of hardened profile]}}
{{RootCmd|source /etc/profile}}

By choosing the hardened profile, certain package management settings (masks, USE flags, etc) become default for your system.  This applies to many packages, including the toolchain.  The toolchain is used for building/compiling your programs, and includes: the GNU Compiler Collection (GCC), binutils (linker, etc.), and the GNU C library (glibc).  By re-emerging the toolchain, these new default settings will apply to the toolchain, which will allow all future ''package compiling'' to be  done in a hardened way.

{{emerge|params=--oneshot|binutils gcc virtual/libc}}

The above command rebuilt GCC, which can now be used to compile hardened software.  Make sure that the hardened option is selected for GCC.

{{RootCmd|gcc-config -l
|output=<pre>
[1] i686-pc-linux-gnu-4.5.3 *
[2] i686-pc-linux-gnu-4.5.3-hardenednopie
[3] i686-pc-linux-gnu-4.5.3-hardenednopiessp
[4] i686-pc-linux-gnu-4.5.3-hardenednossp
[5] i686-pc-linux-gnu-4.5.3-vanilla
</pre>}}

In the example output above, the hardened GCC profile is the one without a suffix. If you want to disable PIE or SSP, choose the relevant '''hardenedno'''('''pie'''|'''ssp''') or both, '''hardenednopiessp'''. The '''vanilla''' profile is of course the one with hardening disabled. Finally source your new profile settings:

{{RootCmd|source /etc/profile}}

If you use the "prelink" package, remove it, since it isn't compatible with the hardened profile:

{{emerge|params=--depclean|prelink}}

Now you can reinstall all packages with your new hardened toolchain:

{{emerge|params=--emptytree --verbose|@world}}

Install hardened kernel sources, so that the kernel will *manage your running system* in a hardened way (especially using PaX):

{{emerge|hardened-sources}}

Now configure/compile the sources and add the new kernel to your boot manager (ie., GRUB).

== Tips & Tricks ==

=== Hardened Gentoo/Grsecurity chroot ===

If you want to chroot to a copied environment where the CONFIG_GRKERNSEC_CHROOT is enabled you must use the cd grub and change the root(cd) kernel(cd) initrd(cd) setting to from (cd) to (hdx,y).

Now you can install the grub environment.

=== Per Package Hardening Settings ===

{{Warning|This method is not supported by Gentoo.}}

Changing the GCC profile to deal with specific packages can be a pain. A way to avoid this is to set per-package C(XX)FLAGS using [[:/etc/portage/env|package.env]]. Create the file /etc/portage/env/nossp and add to that:

{{File|/etc/portage/env/nossp|Disable SSP|<pre>
CFLAGS="${CFLAGS} -fno-stack-protector"
CXXFLAGS="${CXXFLAGS} -fno-stack-protector"
</pre>}}

To allow for disabling PIE, create and add to {{Path|/etc/portage/env/nopie}}:

{{File|/etc/portage/env/nopie|Disable PIE|<pre>
CFLAGS="${CFLAGS} -nopie"
CXXFLAGS="${CXXFLAGS} -nopie"
LDFLAGS="${LDFLAGS} -nopie"
</pre>}}

Finally add the package you want to disable either PIE or SSP for to /etc/portage/package.env and the relevant /etc/portage/env/<filename>, for this example {{Package|sys-libs/zlib}} is used here:

{{File|/etc/portage/package.env|Disable PIE for sys-libs/zlib|<pre>
sys-libs/zlib nopie
</pre>}}

== See also ==

For more information, check out the following resources:
* [http://www.gentoo.org/proj/en/hardened/ Gentoo Hardened Project]
* [http://www.gentoo.org/proj/en/hardened/selinux/ Gentoo Hardened SELinux Project]
* http://www.gentoo.org/proj/en/hardened/grsecurity.xml
* http://www.gentoo.org/proj/en/hardened/pax-quickstart.xml

== 외부 자원 ==

* http://www.rockfloat.com/howto/gentoo-hardened.html#kernel


[[Category:Security]]
