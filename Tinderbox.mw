'''<big>What do we need</big>'''<br />
Host:
* Sql
* Gentoo tree on git
* /etc/portage on a git
* Portage
* Git
* Irker
Guest:
* Sql
* Gentoo tree
* /etc/portage on a git
* Portage
* Git
* Access to logs, distfiles and bin packages
Web:
* Django
* Sql
* Gentoo tree on git
* /etc/portage on a git
* Portage
* Access to logs
Storage:
* Distfiles
* Bin packages
* Logs
* Gentoo tree
* /etc/portage on a git

'''Need to Know'''
* For web you need to know how to setup django and webserver.
* How to install Gentoo on VM's.
* Setup shared storage.
* Handel and setup SQL
* Host Git repo
* Setup Irker

'''Setup Gentoo tree'''<br />
We need to clone the Gentoo git tree from
https://github.com/gentoo-mirror/gentoo<br />
so it can be use from the host, guest and web.
'''DON'T''' use emerge --sync to sync.

'''Setup /etc/portage'''<br />
The repo should have support for linking.
For the guests repo should dirs be hostname/arch_profile_keyword/etc/portage.
Packages.* should be dirs.<br />
Any file in the packags.* dir should start with 00_
Host should have hostname/base/etc/portage.
The base is for basic setup to use portage API for the host and web code.
{{CodeBox|title=Example base/etc/portage/make.conf|1=
# This is for the base config
CHOST="x86_64-pc-linux-gnu"
ACCEPT_KEYWORDS=""
ARCH="amd64"
FEATURES="-metadata-transfer -news distlocks"
ACCEPT_LICENSE="*"
PORTAGE_TMPDIR=/var/tmp
DISTDIR=/var/cache/portage/distfiles
PORT_LOGDIR="/var/log/portage"
GENTOO_MIRRORS="ftp://ftp.sunet.se/pub/Linux/distributions/gentoo http://distfiles.gentoo.org http://www.ibiblio.org/pub/Linux/distributions/gentoo"
PORTAGE_TMPFS="/dev/shm"
PORTAGE_ELOG_CLASSES=""
PORTAGE_ELOG_SYSTEM=""
PORTDIR_OVERLAY=""
#source /var/cache/layman/make.conf
}}
Base's make.profile should point to gentoo repo's profile/config
The config dir will be created by the host code.
