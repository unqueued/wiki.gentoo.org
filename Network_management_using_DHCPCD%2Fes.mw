<languages />
Este artículo está basado en un [https://forums.gentoo.org/viewtopic-t-965190.html hilo de los foros de Gentoo] y explica como utilizar dhcpcd para la gestión completa de la pila de red.

== Configuración ==

Asegúrese de que se ha instalado [[Dhcpcd|dhcpcd]]. A continuación añádalo al nivel de ejecución por defecto y arranque el servicio:

{{RootCmd
|rc-update add dhcpcd default
|/etc/init.d/dhcpcd start
}}

Esta configuración difiere de las instrucciones por defecto de la configuración de la red en el manual de Gentoo. Tiene la ventaja de que ofrece conmutación automática entre interfaces de red cableadas e inalámbricas.

== Inalámbricas ==

Para acceso inalámbirco, utilizar {{c|wpa_supplicant}}. Bien
* [https://gentoo.org/support/news-items/2016-01-08-some-dhcpcd-hooks-are-now-examples.html copiar el gancho 10-wpa_supplicant] en el directorio {{Path|dhcpcd-hooks}} y reiniciar dhcpcd, o
* configurar [[wpa_supplicant]] con la opción [https://forums.gentoo.org/viewtopic-t-1036958-start-9.html CONFIG_MATCH_IFACE] y lanzarlo como un servicio

Para instalar el gancho:

{{RootCmd|cp /usr/share/dhcpcd/hooks/10-wpa_supplicant /lib/dhcpcd/dhcpcd-hooks|/etc/init.d/dhcpcd restart}}

{{Important|No añadir wpa_supplicant a ningún nivel de ejecución si se está utilizando el gancho.}}

Para utilizar el enfoque {{c|wpa_supplicant}}, leer la [[Wpa_supplicant#Setup_for_dhcpcd_as_network_manager|página sobre wpa_supplicant del wiki de Gentoo]].

== Pruebas ==

Pare {{c|dhcpcd}} y {{c|wpa_supplicant}} y a continuación arranque {{c|dhcpcd}} con la depuración activada y en primer plano para comprobar cómo {{c|dhcpcd}} arranca la conexión.

{{RootCmd|/etc/init.d/dhcpcd stop
|killall wpa_supplicant
|dhcpcd -dB
|output=<pre>
dhcpcd[23772]: version 6.4.5 starting
dhcpcd[23772]: udev: starting
dhcpcd[23772]: dev: loaded udev
...
...
</pre>}}

== Dirección IP estática ==

En el caso en que la tarjeta de interfaz de red se deba configurar con una [[Static_Routing|dirección IP estática]], tecléela en la [[dhcpcd-ui#Usage|interfaz gráfica de usuario]]. Sino se dispone de la [[dhcpcd-ui#Usage|interfaz gráfica de usuario]], se pueden añadir entradas de forma  [http://roy.marples.name/man/html5/dhcpcd.conf.html manual] a {{Path|/etc/dhcpcd.conf}} tal y como se describe en [[Network_management_using_DHCPCD/es#Direcci.C3.B3n_IP_est.C3.A1tica|direcciones IP estáticas]].

== Migración desde los guiones net.* de Gentoo ==

Cuando se migra desde [[netifrc|los guiones net.* de Gentoo]] es muy importante eliminar los guiones {{Path|net.*}} de los niveles de ejecución.

{{Cmd|rc-config list {{!}} grep 'wpa_supplicant\{{!}}dhcpcd\{{!}}net.'|output=<pre>
  net.wlp8s0                default
  dhcpcd                    default</pre>}}

No se debe asignar ningún nivel de ejecución a cualquier coincidencia que comience por <code>net.</code>. En el ejemplo de arriba se necesita eliminar {{Path|net.wlp8s0}}.

{{RootCmd|rc-update del net.wlp8s0
|/etc/init.d/net.wlp8s0 stop}}

Once the network setup works well, it is possible to completely remove the old Gentoo {{Path|net.*}} scripts. To do so, disable the <code>netifrc</code> useflag, re-emerge OpenRC and finally unmerge {{Package|net-misc/netifrc}}:

{{RootCmd|echo 'sys-apps/openrc -netifrc' >> /etc/portage/package.use
|emerge --ask --newuse --oneshot sys-apps/openrc
|emerge --ask --depclean net-misc/netifrc}}

También se pueden eliminar los ficheros y enlaces simbólicos de la configuración anterior:

{{RootCmd|rm /etc/conf.d/net
|rm /etc/init.d/net.*}}

== Servicios dependientes de la red ==

No se permite la manipulación de [[Network_dependent_services|servicios dependientes de la red]] con {{c|dhcpcd}} a partir de la versión 0.16.4 de openrc.

== Interfaz Gráfica de Usuario ==

Se ofrece una [[dhcpcd-ui|interfaz gráfica de usuario para dhcpcd]] en el paquete {{Package|net-misc/dhcpcd-ui}}.

== Véase también ==

* [[Dhcpcd/es|Dhcpcd]]
* [[dhcpcd-ui]]

== Recursos externos ==

* [https://forums.gentoo.org/viewtopic-t-965190-start-93.html Post 93 en los foros de Gentoo :: Ver asunto - TIP: Complete network stack without net.* scripts]


[[Category:Network_management]]
