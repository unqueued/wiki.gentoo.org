{{InfoBox stack
|{{InfoBox homepage|http://smarden.org/runit/|header=true}}
|{{InfoBox wikipedia}}
|{{InfoBox ohloh}}
}}

'''runit''' is an init replacement with service monitoring. It can be used in conjunction with OpenRC as an alternative to sysvinit.

== Installation ==
=== Useflags ===
{{USEflag|package=sys-process/runit
|static
}}

=== Emerge ===

{{emerge|runit}}

== Post-Install Configuration ==
=== As PID 1 ===

Runit can be used as the system init. To do this, simply add <tt>init=/sbin/runit-init</tt> to your bootloader's command line and reboot. You can leave sysvinit installed and go back to it at any time by reverting the change.

Out of the box, runit-init has a very minimal configuration which will only get you to a console login. All of your configured OpenRC services are still accessible though, and they can be automatically started on boot with a simple edit:

{{File|/etc/runit/1|Example runit startup script|<pre>
#!/bin/sh
# system one time tasks

PATH=/sbin:/usr/sbin:/bin:/usr/bin

RUNLEVEL=S /sbin/rc sysinit
RUNLEVEL=S /sbin/rc boot
rc default                  # <-- Add this line

touch /etc/runit/stopit
chmod 0 /etc/runit/stopit
</pre>}}
(If you're making the above change after the first reboot, there's no need to reboot twice for it to take effect - just run "rc default" manually.)

Runit isn't directly compatible with sysvinit's "telinit", "halt", "poweroff", "reboot" and "shutdown" commands, however, it's possible to emulate the interface they need [https://forums.gentoo.org/viewtopic-p-7610342.html#7610342 with a simple script].

=== As a system service ===

Runit can supervise processes without running as init, or even necessarily as root:

{{Cmd|mkdir /path/to/service-dir/}}
{{GenericCmd|(Create your service directories and run scripts here, using the same layout as /etc/runit/runsvdir/all/)}}
{{Cmd|chmod a+x /path/to/service-dir/*/run}}

OpenRC can start this for you using <tt>/etc/init.d/local</tt> (see <tt>/etc/local.d/README</tt> for more details):

{{File|/etc/local.d/runsvdir.start||<pre>
#!/bin/sh
# Remember to add --user if you don't want to run as root!
start-stop-daemon --start --background --make-pidfile \
    --pidfile /run/runsvdir.pid \
    --exec /usr/bin/runsvdir -- /path/to/service-dir/
</pre>}}
{{File|/etc/local.d/runsvdir.stop||<pre>
#!/bin/sh
start-stop-daemon --stop --pidfile /run/runsvdir.pid
</pre>}}

== External Resources ==
* [https://wiki.archlinux.org/index.php/runit Arch Linux Wiki]
* [https://forums.gentoo.org/viewtopic-p-7605220.html Gentoo Forums]

[[Category:Init_systems]]
[[Category:Monitoring]]
