<languages />
{{Metadata|abstract=A frequently used desktop environment is GNOME. This guide tries to describe all aspects of GNOME, including installation, configuration, usage, and more!}}
{{Dated|date=March 23, 2016}}
{{InfoBox stack
|{{InfoBox homepage|http://www.gnome.org/|header=true}}
|{{InfoBox wikipedia}}
}}

A frequently used [[desktop environment]] is GNOME. This guide tries to describe all aspects of GNOME, including installation, configuration, usage, and more!

== 什么是 GNOME? ==

=== 项目 ===

 [http://www.gnome.org GNOME project] 是一个免费的软件项目，它致力于GNOME的发展,Unix / Linux桌面套件和开发平台。 [http://foundation.gnome.org GNOME Foundation] 协调发展和GNOME项目的其他方面。 

=== 软件 ===

GNOME桌面环境和开发平台。这片自由软件的桌面选择几个行业领导者。有趣的是同时针对业务用户、家庭用户和开发人员开发。 

===社区 ===

像任何大的自由软件项目,GNOME有着广泛的用户和开发基地。[http://planet.gnome.org GnomePlanet] 是一个受GNOME黑客和贡献者欢迎的博客汇聚，而 [http://developer.gnome.org Developer.Gnome.Org] is for the GNOME developers. [http://library.gnome.org/users/ GNOME Library] 包含一个巨大的GNOME终端用户资源列表。 [http://worldofgnome.org/ World of GNOME] 也是一个受欢迎的GNOME-related新闻汇聚，

== Prerequisites ==

Before the GNOME install process, first read and follow the instructions in the [[Xorg/Guide|Xorg guide]] to setup a X environment. X is the standard base for all desktop environments in Linux.

== Installation == 

Before installing GNOME, editing the system's USE variables is a good idea. Make sure that <code>X</code>, <code>gtk</code>, and <code>gnome</code> are in the USE variable located in {{Path|/etc/portage/make.conf}}. If support for <code>dbus</code> add it to the USE flags ([[dbus]] is a system message bus GNOME uses extensively). If no KDE support is required, remove <code>qt4</code> and <code>kde</code> from USE. USE flags can be removed by adding a minus sign (<code>-</code>) in front of them. See the example below for the minus sign used properly.

{{FileBox|filename=/etc/portage/make.conf|title=Example USE flags for a GNOME desktop environment|lang=bash|1=
USE="-qt4 -kde X dbus gtk gnome"
}}

增加 <code>branding</code> ，USE flag提供了一个可爱的Gentoo的启动画面而不是默认的GNOME启动画面：

{{RootCmd|echo "gnome-base/gnome-session branding" >> /etc/portage/package.use}}

{{Note|When using the <code>desktop/gnome</code> profile, these USE flags will be set for you. It is possible to check the system profile by running {{c|eselect profile list}}. Modifications can be made by running {{c|eselect profile set <profile-name>}} as root. Be sure to replace "<profile-name>" with the number or name of the desired profile.}}

Once finished, begin the GNOME installation by emerging GNOME: 

{{Emerge|gnome-base/gnome}}

For a ''minimal'' GNOME installation install the {{Package|gnome-base/gnome-light}} package. This option provides a lightweight GNOME installation without pulling in the full GNOME [[desktop environment]]. Most people may need to install additional packages afterwards.

{{Emerge|gnome-base/gnome-light}}

{{Note/zh-cn| {{Package|gnome-base/gnome-light}}包不会依赖{{Package|gnome-extra/gnome-screensaver}}包, 这是需要锁定屏幕。注意屏幕没有它不会锁定。}}

这将需要一段时间，所以你可能要开始阅读这些妈妈给你买的，但你却从来没有打开的书。准备好了？很好，现在更新的环境变量： 

{{RootCmd|env-update && source /etc/profile}}

接下来剩余的服务和用户组将被清除。 

{{RootCmd|/etc/init.d/dbus start
|rc-update add dbus default}}

Verify the <code>plugdev</code> group exists. If it does, it is advisable to make each GNOME user member of that group, but step this is optional (the group is not common anymore). 

{{RootCmd|getent group plugdev|output=<pre>
plugdev:x:104:
</pre>}}

取代 <code><username></code> 在接下来的命令与每一个GNOME用户的用户名:

{{RootCmd|gpasswd -a <username> plugdev}}

===第一印象===

现在是时候看看什么是刚刚构建的。退出root 终端并以普通用户身份登录。下一步骤是配置会话管理器，使用GNOME{{c|startx}} 命令来调用(请看[[Xorg/Guide#Using_startx|using startx]] 在Xorg guide的更多信息)。

{{Cmd|echo "exec gnome-session" > ~/.xinitrc}}

Starting with gnome-base/gnome-session-2.26.2, users will need to prepend the <var>XDG_MENU_PREFIX</var> variable to get the GNOME menus when using the {{Path|~/.xinitrc}} method to start the desktop. If {{Path|~/.xinitrc}} is not being used it will be handled automatically; no additional configuration is needed. 

{{Cmd|sed -i '1i\export XDG_MENU_PREFIX{{=}}gnome-' ~/.xinitrc}}

现在开始运行安装的图形环境{{c|startx}}: 

{{Cmd|startx}}

如果一切顺利GNOME，我们高兴的问候您。祝贺你成功设置GNOME!

你可以进一步配置GNOME。请看这篇文章 [[GNOME/Guide#See_also]] 获取额外的定制信息。

== Removal ==

=== Unmerge ===

A possible way to completely remove a GNOME installation is by explicitly uninstalling the {{Package|gnome-base/gnome}} package, then cleaning the dependencies of that package.

In order to do this sanely make sure the main Portage repository has been synced:

{{RootCmd|emerge --sync}}

Next, run a world update so that the system is fully up-to-date:

{{Emerge|params+=--update --newuse --deep --with-bdeps=y|@world}}

Unmerge the GNOME base package:

{{Emerge|params+=--depclean|gnome-base/gnome}}

Finally, depclean the system:

{{RootCmd|emerge --ask --depclean}}

GNOME should now be removed.

== Troubleshooting ==

=== Extended customization in GNOME 3 ===

For extra configuration options in GNOME 3 install the {{Package|gnome-extra/gnome-tweak-tool}} package. The tweak tool allows customization at a deeper level than the standard Settings frame.

=== Widgets in GNOME 3 ===

By default in Gentoo Gnome 3 does not widgets. For users who wish to obtain widget functionality a separate package is available:

{{Emerge|gnome-extra/gnome-shell-extensions}}

After the Shell Extensions are installed, {{c|eselect}} can be used to control defaults on a global level:

{{RootCmd|eselect gnome-shell-extensions list|output=<pre>
Available extensions (* means enabled for all users by default):
  [1]   alternate-tab@gnome-shell-extensions.gcampax.github.com
  [2]   apps-menu@gnome-shell-extensions.gcampax.github.com
  [3]   auto-move-windows@gnome-shell-extensions.gcampax.github.com
  [4]   drive-menu@gnome-shell-extensions.gcampax.github.com
  [5]   launch-new-instance@gnome-shell-extensions.gcampax.github.com
  [6]   native-window-placement@gnome-shell-extensions.gcampax.github.com
  [7]   places-menu@gnome-shell-extensions.gcampax.github.com
  [8]   screenshot-window-sizer@gnome-shell-extensions.gcampax.github.com
  [9]   user-theme@gnome-shell-extensions.gcampax.github.com
  [10]  window-list@gnome-shell-extensions.gcampax.github.com
  [11]  windowsNavigator@gnome-shell-extensions.gcampax.github.com
  [12]  workspace-indicator@gnome-shell-extensions.gcampax.github.com
</pre>}}

== 另请参阅 ==

* The [[GNOME/gdm|GDM article]] describes how to setup the GNOME Display Manager to automatically boot into a graphical environment (rather than starting a GNOME session through {{c|startx}}).

== 外部资源 ==

* http://worldofgnome.org/ GNOME博客的世界。

* https://github.com/dantrell/gentoo-project-gnome-without-systemd - 安装GNOME，但不依赖 Systemd


[[Category:GNOME]]

{{Migrated|originalauthors=Lars Strojny, nightmorph}}
