<languages />

{{Lowercase title}}
{{InfoBox stack
|{{InfoBox homepage|https://ext4.wiki.kernel.org/index.php/Main_Page|header=true}}
|{{InfoBox wikipedia}}
|{{InfoBox manpage|man5/ext4.5}}
}}

'''ext4'''(4番目の [[Extended File System|extended file system]])は[[Article description::オープンソースのディスク[[filesystem/ja|ファイルシステム]]で、extended filesystem シリーズの最新バージョンです。]]これは多くの Linux システムで主要なファイルシステムとして使用されていることから、Linux でサポートされている中でほぼ間違いなく最も安定し、かつ十分にテストされたファイルシステムとなっています。

== インストール ==

=== カーネル ===

ext4 をサポートするには、以下のカーネルオプションを有効にしてください:

{{KernelBox|title=ext4 サポートを有効にする|1=
File systems  --->
   <*> The Extended 4 (ext4) filesystem
}}

ext4 のオプション機能をサポートするには: 

{{KernelBox|title=ext4 のオプション機能を有効にする|1=
File systems  --->
   [*]   Ext4 POSIX Access Control Lists
   [*]   Ext4 Security Labels
   [ ]   EXT4 debugging support
}}

{| class="table table-striped table-condensed"
|+ ext4 のオプション機能サポートの定義
|-
! オプション
! 説明
|-
| Ext4 POSIX Access Control Lists
| [[Wikipedia:Access control list#Filesystem ACLs|ACL]] パーミッションを有効にします。
|-
| Ext4 Security Labels
| POSIX ケイパビリティーのサポートを有効にします。
|-
| EXT4 debugging support
| ('''非推奨''') ext4のデバッグの際に使用します(上級ユーザー用)。
|}

==== 大容量ドライブのサポート ====

システムに大容量のディスク(2TB 以上)があり、かつ 32bit({{Keyword|x86}})のカーネルが使われている場合、以下のオプションを有功にする必要があります:

{{KernelBox|title=大容量ドライブを {{Keyword|x86}} カーネルで有効化する|1=
-*- Enable the block layer  --->
    [*]   Support for large (2TB+) block devices and files
}}

=== USE フラグ ===

{{Package|sys-fs/e2fsprogs}} パッケージがこのファイルシステムについて作業をするためのユーティリティーを含んでいます。Gentoo Linux では {{Package|sys-fs/e2fsprogs}} は ''system'' セットの一部になっているので、既にシステムにインストールされているはずです。

{{USEflag|package=sys-fs/e2fsprogs}}

=== emerge ===

After setting the USE flag update the system so the changes take effect:

{{Emerge|params+=--changed-use --deep|@world}}

== Usage ==

=== Creation ===

{{Warning|The {{c|mkfs.ext4}} command irreversibly destroys any content of the partition it is told to format. Be sure to select the right partition!}}

To create an ext4 filesystem on the {{Path|/dev/sda1}} partition:

{{RootCmd|mkfs.ext4 /dev/sda1}}

Please replace {{Path|/dev/sda1}} with the actual partition to format.

By default, 5% of available disk space is reserved for the ''root'' user. This is usually a good thing for the partition where the {{Path|/}} directory is mounted, but it may be not desirable on other partitions. To lose reserve disk space for the root user use {{c|mkfs.ext4}}'s <code>-m 0</code> option:

{{RootCmd|mkfs.ext4 -m 0 /dev/sda1}}

== See also ==

* {{See also|JFS}}
* {{See also|Btrfs}}
* {{See also|XFS}}
* {{See also|F2FS}}

== External resources ==

* [https://ext4.wiki.kernel.org The second, third, and fourth extended file system wiki]

[[Category:Filesystems]]
