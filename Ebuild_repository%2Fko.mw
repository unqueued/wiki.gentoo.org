<languages />
{{InfoBox stack
|{{InfoBox gdoc|Overlays|text=Overlays Gentoo Project|header=true}}
}}

Within Gentoo Linux, users already have one [https://gitweb.gentoo.org/repo/gentoo.git/tree/ "main" package repository], in the past synonymously referred to as [https://devmanual.gentoo.org/general-concepts/tree/ the "Portage tree"], although this term should be phased out since [[Package Manager Specification|package managers]] other than [[Portage]] can interact with package repositories in Gentoo. The [https://gitweb.gentoo.org/repo/gentoo.git/tree/ main repository] contains all the software packages (called ebuilds) maintained by Gentoo developers. Additional package trees are usually hosted by ''repositories''. Users can add such additional repositories to the tree that are "laid over" the main tree - hence the name, overlays.

== 저장소 ==

Package repositories are nothing more (or less) than a [[Repository format|set of files]] (ebuilds, metadata files, ChangeLog entries ...). These can be pulled in from public repositories ([[Project:Portage/Sync#Portage_configuration|git, cvs, svn ...]]) or downloaded as tarballs and extracted manually onto the system. It is advised to use managed repositories by trusted third parties; any installed overlay will cause Portage to look through the overlaid files when deciding which software to install. If compromised code is in the overlay, then compromised packages could be installed on the system.

The now default approach for handling repositories is through {{Path|[[:/etc/portage/repos.conf]]}} which, like many other Portage related locations, can be a directory as well.

Repository definitions inside {{Path|/etc/portage/repos.conf/}} also inform Portage if and how the repository can be updated. With it, calling {{c|emerge --sync}} will automatically update the repositories as well.

A deprecated, yet still supported method is to use the <var>PORTDIR_OVERLAY</var> variable inside {{Path|/etc/portage/make.conf}}. This variable can point to one or more additional locations on the file system where repositories are available. The use of the {{Path|[[:/etc/portage/repos.conf]]/}} directory is highly preferred.

더 많은 정보는 [[:/etc/portage/repos.conf|/etc/portage/repos.conf]]와 [[Project:Portage/Sync#Operation|Portage/Sync article]] 게시글을 참고하십시오.

=== 우선순위 ===

Each overlay has its unique priority. This makes sure that in the case of a specific version being found in several overlays, the resolution is unambiguous. Ebuilds from overlays with higher priority numbers (for example 60) take precedence over ebuilds from overlays with lower priorities (such as 50).

The list of overlays with their priorities can be obtained through the output of the following commands (look for the "Repositories" string):

{{Cmd|emerge --info --verbose}}

{{Cmd|portageq repos_config /}}

기본 젠투 포티지 트리는 -1000 우선순위를 갖습니다. 이는 다른 오버레이에 보통 할당하는 우선순위보다 훨씬 높은 우선순위를 배당한다는 의미입니다. 오버레이를 포티지 트리 "위에 눕혀놓은" 방식으로 설계했기 때문에 이런 동작은 기본입니다.

== 지원 도구 ==

오버레이를 지원하거나 오버레이에 붙는 도구는 여러가지가 있습니다.

=== Layman ===

{{c|layman}} 프로그램은 여러 추가 오버레이를 쉽게 관리하고 업데이트할 수 있게 합니다. 공개 오버레이를 조회하고, 가입하거나, 탈퇴하며, 이들 저장소를 업데이트할 수 있는 명령줄 프로그램입니다. 

It supports both the {{Path|[[Layman#Using_.27make.conf.27_method_.28older_method.29|make.conf]]}} as well as {{Path|[[Layman#Using_.27repos.conf.27_method_.28default_method_for_app-portage.2Flayman-2.3.0_or_later_.29|repos.conf]]}} method.
* When using the {{Path|[[Layman#Using_.27make.conf.27_method_.28older_method.29|make.conf]]}} method, {{c|layman}} manages a dedicated configuration file which should be sourced in by {{Path|make.conf}}
* When using {{Path|[[Layman#Using_.27repos.conf.27_method_.28default_method_for_app-portage.2Flayman-2.3.0_or_later_.29|repos.conf]]}}, {{c|layman}} manages the {{Path|[[Layman#Using_.27repos.conf.27_method_.28default_method_for_app-portage.2Flayman-2.3.0_or_later_.29|/etc/portage/repos.conf/layman.conf]]}} file directly

더 많은 정보는 [[Layman]]<sup style="color: #ff0077">en</sup>과 [[Project:Portage/Sync#Layman_configuration|Layman 설정]]<sup style="color: #ff0077">en</sup>을 참고하십시오

=== emaint ===

See [[Project:Portage/Sync#Operation]] and {{c|man 1 emaint}}.

=== eix ===

{{c|eix-sync}} is a wrapper starting {{c|emerge --sync}} (which in turn starts {{c|emaint sync --auto}}) followed by {{c|eix-update}}.  For further details see the [[Eix]] article and {{c|man 1 eix}}.

== 모범 사례 ==

=== 캐시 만들기 ===

거대 오버레이를 설치하면, 포티지에서 의존성 확인과 같은 작업을 처리하는데 오랜 시간이 걸릴 수 있습니다. 보통 오버레이가 메타데이터 캐시를 보유하고 있지 않기 때문입니다.

Generate a local metadata cache by running {{c|emerge --regen}} after syncing the overlays:

{{RootCmd
|layman -S
|( ulimit -n 4096 && emerge --regen )}}

{{c|emerge --regen}} 작업은 오랜 시간이 걸리니 주의하십시오. rsync 사용자(대부분의 포티지 사용자)라면 서버측 캐시를 활용하여 rsync 업데이트를 수행하므로 추천하지 않습니다. rsync 사용자는 간단하게 {{c|emerge --sync}} 명령(또는 {{c|eix-sync}})을 실행하여 캐시를 다시 만들면 됩니다. 대규모 오버레이 사용자에 한해서만 {{c|emerge --regen}} 을 시도하시면 되겠습니다.

=== 안전하지 않은 오버레이 가리기 ===

알 수 없는 저질의 큰 규모의 오버레이를 활용한다면 전체 오버레이에 강 마스크를 지정하는 것이 좋은 방법입니다.

{{FileBox|filename=/etc/portage/package.mask|title=오버레이의 모든 꾸러미에 마스크 설정|lang=bash|1=
*/*::overlay-name
}}

그 다음 설치할 꾸러미의 마스크를 해제하십시오.

{{FileBox|filename=/etc/portage/package.unmask|title=오버레이의 별도 꾸러미 마스크 해제|lang=bash|1=
foo/bar::overlay-name
}}

== 추가 참조 ==

* [[Project:Overlays]]<sup style="color: #ff0077">en</sup> - 오버레이 지원 공식 젠투 프로젝트.
* [[Project:Overlays/Overlays_Guide]]<sup style="color: #ff0077">en</sup> - 오버레이 프로젝트에서 작성한 사용자 안내서.
* [[Project:Overlays/Dev_Guide|젠투 오버레이 개발자 안내서]]<sup style="color: #ff0077">en</sup>

== 외부 자료 ==

* https://overlays.gentoo.org
* https://github.com/gentoo/


[[Category:Portage]]
