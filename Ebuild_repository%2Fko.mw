<languages />
{{InfoBox stack
|{{InfoBox gdoc|Overlays|text=Overlays Gentoo Project|header=true}}
}}

젠투 리눅스의 모든 사용자에게는 기본적으로 "포티지 트리"라는 주 패키지 저장소가 주어집니다. 이 저장소는 젠투 개발자들이 관리하는 모든 소프트웨어 패키지(이빌드로 불리기도 하는)들을 포함하고 있습니다. 
또한, 사용자들은 이 주 저장소와 더불어 오버레이라고 불리는 추가 저장소들을 함께 사용할 수 있습니다.

사실 패키지 저장소는 단순히 여러 파일 모음에 지나지 않습니다. 따라서, git이나 svn 등을 이용하여 공개된 저장소에서 받아오거나, 타르볼을 다운로드 받아 직접 해제를 하는 것만으로도 쉽게 오버레이를 추가할 수 있습니다. 하지만 신뢰할만한 사람/단체들이 검증한, 잘 관리되는 오버레이들만 추가할 것을 권장합니다. 만약, 오버레이에 취약점이 포함된 패키지를 포함하고 있다면, 당신의 시스템을 위험에 빠트릴 수도 있습니다.

== 저장소 ==

Additional package trees are usually hosted by ''repositories''. These are overlays that are ready to be incorporated on Gentoo systems. The now default approach for handling repositories is through {{Path|[[:/etc/portage/repos.conf]]}} which, like many other Portage related locations, can be a directory as well.

A deprecated, yet still supported method is to use the <code>PORTDIR_OVERLAY</code> variable inside {{Path|/etc/portage/make.conf}}. This variable can point to one or more additional locations on the file system where repositories are available. The use of the {{Path|/etc/portage/repos.conf/}} directory is highly preferred.

Repository definitions inside {{Path|/etc/portage/repos.conf/}} also inform Portage if and how the repository can be updated. With it, calling <tt>emerge --sync</tt> will automatically update the repositories as well.

For more information, see [[:/etc/portage/repos.conf|/etc/portage/repos.conf]] and the [[Project:Portage/Sync#Operation|Portage/Sync article]].

=== Priorities ===

각각의 오버레이에는 유일의 우선순위가 있습니다. 여러 오버레이에 특정 버전을 발견했을 경우 확인하며, 해결 방법은 혼란스럽지 않습니다. 높은 우선순위를 지닌 오버레이의 이빌드는 낮은 우선순위를 가진 오버레이의 이빌드보다 우선합니다.

The list of overlays with their priorities can be obtained through the output of the following command (look for the "Repositories" string):

{{Cmd|emerge --info --verbose}}

The default Gentoo Portage tree will have a priority of -1000. That means that all other overlays generally take precedence as they are assigned a higher priority. That is the default behavior, because overlays are designed to "lay over/on top" of the portage tree.

== Supporting tools ==

A number of tools support or integrate with overlays.

=== Layman ===

The <tt>layman</tt> application makes it easier to manage and update multiple additional overlays. It is a command-line application 
through which publicly available overlays can be listed, subscribed to and unsubscribed from, as well as update those repositories. 

It supports both the {{Path|[[Layman#Using_.27make.conf.27_method_.28older_method.29|make.conf]]}} as well as {{Path|[[Layman#Using_.27repos.conf.27_method_.28default_method_for_app-portage.2Flayman-2.3.0_or_later_.29|repos.conf]]}} method.
* When using the {{Path|[[Layman#Using_.27make.conf.27_method_.28older_method.29|make.conf]]}} method, <tt>layman</tt> manages a dedicated configuration file which should be sourced in by {{Path|make.conf}}
* When using {{Path|[[Layman#Using_.27repos.conf.27_method_.28default_method_for_app-portage.2Flayman-2.3.0_or_later_.29|repos.conf]]}}, <tt>layman</tt> manages the {{Path|[[Layman#Using_.27repos.conf.27_method_.28default_method_for_app-portage.2Flayman-2.3.0_or_later_.29|/etc/portage/repos.conf/layman.conf]]}} file directly

For more information, see [[Layman]] and [[Project:Portage/Sync#Layman_configuration]].

=== emaint ===

See [[Project:Portage/Sync#Operation]] and <kbd>man 1 emaint</kbd>.

=== eix ===

<tt>eix-sync</tt> is a wrapper starting <tt>emerge --sync</tt> (which in turn starts <tt>emaint sync --auto</tt>) followed by <tt>eix-update</tt>.  For further details see the [[Eix]] article and <kbd>man 1 eix</kbd>.

== Best practices ==

=== 캐시 만들기 ===

거대 오버레이를 설치하면, 포티지에서 의존성 확인과 같은 작업을 처리하는데 오랜 시간이 걸릴 수 있습니다. 보통 오버레이가 메타데이터 캐시를 보유하고 있지 않기 때문입니다.

Generate a local metadata cache by running <tt>emerge --regen</tt> after syncing the overlays:

{{RootCmd|layman -S
|emerge --regen}}

Be careful, because <tt>emerge --regen</tt> takes a lot of time and it's not recommended for rsync users as rsync updates the cache using server-side caches (most of users of portage are rsync users). Rsync users should simply run <tt>emerge --sync</tt> (or <tt>eix-sync</tt>) to regenerate the cache. It's probably only users of very large overlays should try <tt>emerge --regen</tt>.

=== Masking when using unsafe overlays ===

알 수 없는 저질의 큰 규모의 오버레이를 활용한다면 전체 오버레이에 강 마스크를 지정하는 것이 좋은 방법입니다.

{{FileBox|filename=/etc/portage/package.mask|title=Mask all packages in an overlay|lang=bash|1=
*/*::overlay-name
}}

After that unmask the packages that will be installed.

{{FileBox|filename=/etc/portage/package.unmask|title=Unmask a specific package in an overlay|lang=bash|1=
foo/bar::overlay-name
}}

== See also ==

* [[Project:Overlays]] - The official Gentoo project for overlays support.
* [[Project:Overlays/User_Guide]] - A user guide written by the Overlay project.
* [[Project:Overlays/Dev_Guide|Developers' Guide To Gentoo Overlays]]

== External resources ==

* https://overlays.gentoo.org


[[Category:Portage]]
