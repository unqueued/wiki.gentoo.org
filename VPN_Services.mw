VPN services are offered by several companies. They allow users to protect their privacy and security while using the Internet. Guides to using various service providers on Gentoo are below.

== Private Internet Access ==
https://www.privateinternetaccess.com/

The following will auto-start [[OpenVPN|openvpn]] upon boot:

# Buy a subscription and log in
# {{RootCmd|echo "net-vpn/openvpn passwordsave examples" >> /etc/portage/package.use # optional}}
# {{Emerge|openvpn}}
# Go to https://www.privateinternetaccess.com/pages/client-control-panel and locate the "PPTP/L2TP/SOCKS Username and Password"
# Generate Username/Password if they are not there
# In the next step, replace USERNAME and PASSWORD with the located or generated ones. {{RootCmd|cd /etc/openvpn|echo "USERNAME" >> login.conf|echo "PASSWORD" >> login.conf}}
# Download the privateinternetaccess configurations and certificates. {{RootCmd|mkdir -p pia|cd pia|wget https://www.privateinternetaccess.com/openvpn/openvpn.zip|unzip openvpn.zip|cp US\ East.ovpn ../openvpn.conf # replace with your desired region|cd ..|ln -s pia/ca.rsa.2048.crt|ln -s pia/crl.rsa.2048.pem}}
# Modify the configuration file and permissions. {{RootCmd|echo "auth-nocache" >> openvpn.conf|echo "auth-user-pass login.conf" >> openvpn.conf|chmod 600 openvpn.conf login.conf pia/*|chmod 700 pia}}
# Start the service and add to default runlevel. {{RootCmd|/etc/init.d/openvpn start|rc-update add openvpn # don't use this line if you don't want openvpn upon boot}}

If [[OpenVPN|Openvpn]] doesn't connect you would want to add www.privateinternetaccess.com's DNS servers to your {{Path|/etc/resolv.conf.head}} file. 
Create '/etc/resolv.conf.head' file if it doesn't already exist, edit the file by adding the two DNS servers: 
{{FileBox|filename=/etc/resolv.conf.head|
nameserver 209.222.18.222
nameserver 209.222.18.218}}
Go to www.privateinternetaccess.com's to make sure you entered the correct DNS servers:
* Click on 'Client Support Tab' and scroll down to 'DNS leak protection' section 
Save and Reboot.

== Free VPN ==
https://freevpn.me/

# Go to https://freevpn.me/accounts/ and click on "Download OpenVPN Certificate Bundle". You will get a zip file with the ovpn configuration files for all the Free VPN servers. .ovpn files are [[OpenVPN|Openvpn]] configuration files with the client configuration at the beginning of the file, followed by inlined certificates. Choose one of these servers and copy the corresponding directory into {{Path|/etc/openvpn}} (You can use mc for that kind of task). I renamed the directory in order to get rid of the spaces in its name.
# On the website, click on the left menu to choose the server you want. When done click on "Accounts", as example https://freevpn.me/accounts/ . On that page, you can read the user and password needed for that server in the Open VPN section. In the console do, as example for freevpn.me using udp on port 40000:
# To not get prompted for the username and password: {{RootCmd|cd /etc/openvpn/1-FreeVPN.me-FR}} {{RootCmd|echo "username" > auth}} {{RootCmd|echo "password" >> auth}} and change the line: {{FileBox|filename=/etc/openvpn/1-FreeVPN.me-FR/FreeVPN.me-UDP-40000.ovpn|
auth-user-pass}} into {{FileBox|filename=/etc/openvpn/1-FreeVPN.me-FR/FreeVPN.me-UDP-40000.ovpn|
auth-user-pass /etc/openvpn/1-FreeVPN.me-FR/auth}}
# You can test it with: {{RootCmd|openvpn FreeVPN.me-UDP-40000.ovpn}}
# In order to run it at boot time, follow one of the methods described here: [[OpenVPN#Gentoo_specifics]]

=== Troubleshooting ===
It [[OpenVPN|Openvpn]] fail to connect with something like: {{RootCmd|openvpn FreeVPN.me-UDP-53.ovpn
...
TLS Error: TLS key negotiation failed to occur within 60 seconds (check your network connectivity)}}
it can be a firewall blocking you, but other vpn servers will fails too in that case. It other vpn servers are working, just try another configuration file. At that time of writing, FreeVPN.me-UDP-53 fails with that error, but FreeVPN.me-UDP-40000 is running just fine.

==Troubleshooting==

The above setup requires that root has write permission on /etc/resolv.conf. To make sure this is the case run 

{{RootCmd|lsattr /etc/resolv.conf}} 

If the output looks like this 

{{RootCmd|lsattr /etc/resolv.conf|output=<pre>
----i---------e---- /etc/resolv.conf
</pre>}}

than, since "i" means that the file has the immutable bit, not even the root can write on it. To change that just run 

{{RootCmd|chattr -i /etc/resolv.conf}}

and reboot.
