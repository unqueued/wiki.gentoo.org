<languages />

{{Metadata|abstract=Tento průvodce by měl uživatelům  pomoci přizpůsobit distribuci Gentoo Linux jakémukoli evropskému místnímu nastavení. Jako vzorový příklad je použita němčina, neboť se jedná o překlad německé dokumentace. Obsahuje též konfiguraci umožňující použití symbolu eura.}}

== Časové pásmo ==

In order to keep the system time properly according to the present location, the timezone needs to be set.  Instructions how to do this for [[System_time#OpenRC|OpenRC based systems]] and [[System_time#systemd|systemd based systems]] can be found in the [[System_time|system time]] article.

== Systém locale ==

=== Co je to locale? ===

A locale is a set of information that most programs use for determining country and language specific settings. The locales and their data are part of the system library and can be found at {{Path|/usr/share/i18n/locales/}} on most systems. A locale name is generally named <code>ab_CD</code> where <code>ab</code> is your two (or three) letter language code (as specified in ISO-639) and <code>CD</code> is your two letter country code (as specified in ISO-3166). Variants are often appended to locale names, e.g. <code>en_GB.UTF-8</code> or <code>de_DE@euro</code>. Please explore [http://en.wikipedia.org/wiki/Locale Wikipedia] to read more about locales and related articles.

=== Proměnné prostředí vztahující se k locales ===

Proměnné řídící různé složky nastavení locale jsou vypsány v tabulce níže. Každá z nich může obsahovat název jednoho locale ve výše uvedeném formátu <code>ab_CD</code>. 

{| class="table table-striped" style="text-align: left;" 
|- 
! scope=col width=25% | Variable name
! scope=col width=75% | Explanation
|- 
| <var>LANG</var>
| Defines all locale settings at once, while allowing further individual customization via the LC_* settings below.
|- 
| <var>LC_COLLATE</var>
| Define alphabetical ordering of strings. This affects e.g. output of sorted directory listing.
|- 
| <var>LC_CTYPE</var>
| Define the character handling properties for the system. This determines which characters are seen as part of alphabet, numeric and so on. This also determines the character set used, if applicable.
|- 
| <var>LC_MESSAGES</var>
| Programs' localizations stored in {{Path|/usr/share/locale/}} for applications that use message based localization scheme (majority of Gnu programs, see next chapters for closer information which do, and how to get the programs, that don't, to work).
|- 
| <var>LC_MONETARY</var>
| Defines currency units and formatting of currency type numeric values.
|- 
| <var>LC_NUMERIC</var>
| Defines formatting of numeric values which aren't monetary. Affects things such as thousand separator and decimal separator.
|- 
| <var>LC_TIME</var>
| Defines formatting of dates and times.
|- 
| <var>LC_PAPER</var>
| Defines default paper size.
|- 
| <var>LC_ALL</var>
| A special variable for overriding all other settings.
|-
|}

{{Note/cs|Některé programy jsou tak, že očekávají tradiční anglické abecední řazení, zatímco jiná locale, třeba estonské, používají řazení jiné. Z tohoto důvodu se doporučuje u nastavení na úrovni celého systému výslovně stanovit LC_COLLATE na C}}

{{Warning|Using <var>LC_ALL</var> is strongly discouraged as it automatically overrides all other <var>LC_*</var> variables (<var>LANG</var> is not affected). This means that changes made by other means will be hidden until <var>LC_ALL</var> is set to a null string. It is probably best not to set it in a startup file.}}

Uživatelé nejčastěji nastavují jako globální pouze proměnnou LANG.

=== Generování specifických locale ===

Ve svém systému budete patrně potřebovat pouze jedno nebo dvě locale. Ty jenž budete potřebovat můžete určit pomocí {{Path|/etc/locale.gen}}. 

{{Code|Adding locales to /etc/locale.gen|<pre>
en_GB ISO-8859-1
en_GB.UTF-8 UTF-8
de_DE ISO-8859-1
de_DE@euro ISO-8859-15
</pre>
}}

The next step is to run {{c|locale-gen}}. It will generate all the locales specified in the {{Path|/etc/locale.gen}} file and write them to the locale-archive ({{Path|/usr/lib/locale/locale-archive}}). 

{{RootCmd|locale-gen|output=<pre>
 * Generating 4 locales (this might take a while) with 1 jobs
 *  (1/4) Generating en_GB.ISO-8859-1 ...                       [ ok ]
 *  (2/4) Generating en_GB.UTF-8 ...                            [ ok ]
 *  (3/4) Generating de_DE.ISO-8859-1 ...                       [ ok ]
 *  (4/4) Generating de_DE.ISO-8859-15@euro ...                 [ ok ]
 * Generation complete
</pre>}}

{{Note/cs|Program <code>locale-gen</code> je dostupný od <code>glibc-2.3.6-r4</code> výše. Pokud máte starší verzi glibc, měli byste ji aktualizovat.}}

Dostupnost vámi zvolených locale můžete ověřit spuštěním <code>locale -a</code>.

{{Cmd|locale -a|output=<pre>
C
POSIX
de_DE
de_DE.iso88591
de_DE.iso885915@euro
de_DE@euro
deutsch
en_GB
en_GB.iso88591
en_GB.utf8
german
</pre>}}

The {{Path|/usr/lib/locale/locale-archive}} file can be displayed using the strings command.

{{Cmd|strings /usr/lib/locale/locale-archive {{!}} less}}

=== Nastavení locale ===

==== OpenRC ==== 

When using OpenRC locale settings are stored in environment variables. These are typically set in the {{Path|/etc/env.d/02locale}} (for system-wide settings) and {{Path|~/.bashrc}} (for user-specific settings) file.  More details can be found in the [[UTF-8#Setting_the_locale|UTF-8]] article.  The system wide settings ({{Path|/etc/env.d/02locale}}) can be managed through {{c|eselect locale}}. For instance, to set the <var>LANG</var> variable to the <code>C</code> value:

{{RootCmd|eselect locale list|output=<pre>
Available targets for the LANG variable:
  [1]   C 
  [2]   POSIX
  [3]   en_US
  [4]   en_US.iso885915
  [5]   en_US.utf8
  [ ]   (free form)
</pre>}}

{{RootCmd|eselect locale set 1}}

samozřejmě můžete soubor upravit ručně a odlišit od sebe jednotlivé proměnné.

{{FileBox|filename=/etc/env.d/02locale|title=Setting the default system locale in /etc/env.d/02locale|lang=bash|1=
LANG="de_DE.UTF-8"
LC_COLLATE="C"
}}

{{Note/cs|Proměnnou LANG nastavte na <code>de_DE@euro</code>, pokud chcete použít symbol eura v rámci locale, které není založeno na UTF-8.}}

Je možné a zejména v poněkud tradičnějším UNIXovém prostředí vcelku běžné, ponechat globální nastavení nezměněné, tj. locale "<code>C</code>". Uživatelé mohou jimi upřednostňované locale nastavit ve svém RC souboru: 

{{FileBox|filename=~/.bashrc|title=Setting the user locale|lang=bash|1=
export LANG="de_DE.UTF-8"
export LC_COLLATE="C"
}}

Dalším způsobem nastavení systému je ponechání výchozího locale C, avšak se současným povolením znakové sady UTF-8. Této možnosti lze dosáhnout použitím následujícího nastavení v souboru {{Path|/etc/env.d/02locale}}: 

{{Code|Použití tradičního locale C současně s UTF-8|<pre>
LC_CTYPE=de_DE.UTF-8
</pre>
}}

Při využití výše uvedeného úryvku uživatelé uvidí lokalizované názvy souborů jak se patří, aniž by byli nuceni používat vámi upřednostňovaný jazyk. 

Jakmile jste nastavili správné locale, nezapomeňte aktualizovat proměnné prostředí, aby váš systém zaznamenal provedenou změnu.

Pro celosystémové výchozí locale:

{{RootCmd|env-update && source /etc/profile}}

Pro uživatelské locale:

{{Cmd|source ~/.bashrc}}

Po té je potřeba zabít X server stisknutím kláves {{Key|Ctrl}}+{{Key|Alt}}+{{Key|Backspace}}, odhlásit se a po té se znovu přihlásit pod svým uživatelským jménem. 

Nyní ověřte, že se změny projevily: 

{{Cmd|locale}}

==== systemd ====

Pokud používáte systemd, měli byste nastavit locale příkazem <code>localectl</code>. Projděte si seznam dostupných locale pomocí:

{{RootCmd|localectl list-locales}}

Pak nastavte locale, které chcete:

{{RootCmd|<nowiki>localectl set-locale LANG=de_DE.utf8</nowiki>}}

Nakonec zkontrolujte zda je výsledek správný:

{{RootCmd|<nowiki>localectl | grep "System Locale"</nowiki>|output=<pre>
   System Locale: LANG=de_DE.utf8
</pre>}}

== Rozložení kláves v konzoli ==

=== OpenRC ===

Rozložení kláves používané v konzoli se nastavuje v {{Path|/etc/conf.d/keymaps}} v proměnné <code>keymap</code>. Platné hodnoty lze nalézt {{Path|/usr/share/keymaps/VAŠE_ARCH/}}. {{Path|i386}} obsahuje další podskupiny rozložení ({{Path|qwerty/}}, {{Path|azerty/}}, atd.). Některé jazyky mají více možností rozložení, proto můžete různě experimentovat, než naleznete to, které vašim potřebám vyhovuje nejvíc. 

{{FileBox|filename=/etc/conf.d/keymaps|title=Setting the console keymap|lang=bash|1=
keymap="de"
#keymap="de-latin1"
#keymap="de-latin1-nodeadkeys"
}}

=== systemd ===

V případě systemd se rozložení kláves konzole nastavuje příkazem <code>localectl</code>. Najprve zjistěte jaká je nabídka rozložení kláves:

{{RootCmd|localectl list-keymaps}}

Po té nastavte rozložení jaké chcete:

{{RootCmd|localectl set-keymap it}}

Nakonec zkontrolujte, zda bylo rozložení kláves nastaveno správně:

{{RootCmd|<nowiki>localectl | grep "VC Keymap"</nowiki>|output=<pre>
       VC Keymap: it
</pre>}}

== Rozložení kláves X serveru ==

=== OpenRC ===

The keyboard layout to be used by the X server is specified in {{Path|/etc/X11/xorg.conf.d/30-keyboard.conf}} by the <var>XkbLayout</var> option. For details visit the [[Xorg/Guide#Configuring_the_keyboard|Xorg guide]].

=== systemd ===

V případě systemd můžete rozložení kláves X11 serveru nastavit příkazem <code>localectl</code>. Nejprve zjistěte jaká rozložení klávesnice X11 jsou k dispozici:

{{RootCmd|localectl list-x11-keymap-layouts}}

Po té nastavte rozložení kláves X11 jaké chcete:

{{RootCmd|localectl set-x11-keymap it}}

Nakonec zkontrolujte, zda bylo rozložení kláves X11 nastaveno správně:

{{RootCmd|<nowiki>localectl | grep "X11 Layout"</nowiki>|output=<pre>
      X11 Layout: it
</pre>}}

== Symbol eura v konzoli ==

=== OpenRC ===

Pokud chcete, aby vaše konzole zobrazovala symbol eura, musíte nastavit proměnnou <code>consolefont</code> v souboru {{Path|/etc/conf.d/consolefont}} dle souboru, který najdete v {{Path|/usr/share/consolefonts/}} (bez koncovky <code>.psfu.gz</code>). Font <code>lat9w-16</code> obsahuje symbol eura. 

{{Code|Nastavení fontu konzole|<pre>
consolefont="lat9w-16"
</pre>
}}

Ověřte si, že <code>consolefont</code> je aktivován v runlevelu boot: 

{{RootCmd|rc-update -v show {{!}} grep consolefont}}

Pokud není u <code>consolefont</code> vypsán žádný runlevel, přidejte jej do příslušné úrovně: 

{{RootCmd|rc-update add consolefont boot}}

== Symbol eura v X ==

=== Většina programů ===

Nastavení euro symbolu tak, aby v X fungoval správně, je poněkud těžší. Nejprve změňte definice <code>fixed</code> a <code>variable</code> v {{Path|/usr/share/fonts/misc/fonts.alias}} tak, aby končily <code>iso8859-15</code> namísto <code>iso8859-1</code>. 

{{Code|Nastavení výchozích fontů X|<pre>
fixed        -misc-fixed-medium-r-semicondensed--13-120-75-75-c-60-iso8859-15
variable     -*-helvetica-bold-r-normal-*-*-120-*-*-*-*-iso8859-15
</pre>
}}

Některé aplikace používají své vlastní fonty a těm budete muset sdělit, že chcete použít font se symbolem eura, zvlášť. Můžete tak učinit na úrovni jednotlivých uživatelů v {{Path|.Xdefaults}} (tento soubor můžete nakopírovat do {{Path|/etc/skel/}}, čímž bude využit i u nových uživatelů) nebo na globální úrovni u jakékoli aplikace prostřednictvím souboru v {{Path|/usr/share/app-defaults/}} (např. xterm). U těchto souborů musíte zpravidla změnit již existující řádek spíše než doplňovat nový. Změnit font xtermu tak lze takto: 

{{Cmd|echo 'XTerm*font: fixed' >> ~/.Xresources 
|xrdb -merge ~/.Xresources}}

=== Symbol eura v (X)Emacs ===

Pro použití symbolu eura v (X)Emacs, doplňte do {{Path|.Xdefaults}} následující: 

{{Code|nastavení fontu v emacs|<pre>
Emacs.default.attributeFont: -*-courier-medium-r-*-*-*-120-*-*-*-*-iso8859-15
</pre>
}}

V případě XEmacs (nikoli prostý Emacs), je nutné udělat ještě něco málo navíc. Do {{Path|/home/user/.xemacs/init.el}} přidejte: 

{{Code|nastavení fontu xemacs|<pre>
(define-key global-map '(EuroSign) '[€])
</pre>
}}

== NLS ==

For message based localization to work in programs that support it and have the <code>nls</code> (Native language support) USE flag, you will probably need to have the programs compiled with this flag set. Message strings are installed in {{Path|/usr/share/locale/<locale>/LC_MESSAGES/<package>.mo}} files. Most of the programs using nls also need the gettext library to extract and use localized messages. Of course, Portage will automatically install it when needed.

Po nastavení USE proměnné <code>nls</code>, bude potřeba přeinstalovat některé balíčky:

{{Emerge|params+=--newuse --deep --with-bdeps=y|@world}}

== LINGUAS ==

There is also an additional localization variable called <var>[https://devmanual.gentoo.org/general-concepts/linguas/ LINGUAS]</var>, which affects the localization files that get installed in gettext-based programs, and decides which GUI language packs should be downloaded and installed for some specific software packages, such as [[Firefox]], [[Thunderbird]], [[KDE#Localization|kde-base/kde-l10n]] or [[LibreOffice|app-office/libreoffice-l10n]]. The variable takes in ''space''-separated list of language codes, and a suggested place to set it is {{Path|[[:/etc/portage/make.conf]]}}: 

{{RootCmd|nano -w /etc/portage/make.conf|output=<pre>
## (Doplňte proměnnou LINGUAS. V případě němčiny, finštiny a angličtiny:)
LINGUAS="de fi en"
</pre>}}

With <code>LINGUAS=""</code>, most ebuilds would install only the packages' default language but none of the <code>LC_MESSAGES</code> files. They would also not download and install any of the further language packs. For instance, the currently stable [[LibreOffice|app-office/libreoffice]] receives further language support through {{Package|app-office/libreoffice-l10n}} which supports download and installation of the language packs defined in <code>LINGUAS</code>. Since the origin language of libreoffice is <code>en_US</code>, it does not have <code>en_US</code> flag in {{Package|app-office/libreoffice-l10n}}. So with <code>LINGUAS=""</code>, libreoffice still supports <code>en_US</code>.

To see the status of GUI translation, hyphenation, spell checking and other localisations on your language, please refer to the [https://translations.documentfoundation.org/ LibreOffice translation web site].

For finer grained control it can be set per package in {{Path|[[:/etc/portage/package.use]]}}: 

{{FileBox|filename=/etc/portage/package.use|lang=bash|1=
www-client/firefox linguas_de linguas_pt_BR linguas_en_GB
}}

A list of installed programs making use of the <var>LINGUAS</var> variable and their supported languages can be shown as follows:

{{Cmd|eix -I -U linguas}}

A list of <var>LINGUAS</var> values that can be used is provided as {{Path|/usr/portage/profiles/desc/linguas.desc}}: 

{{Cmd|grep -i french /usr/portage/profiles/desc/linguas.desc|output=<pre>
fr - French locale
fr_CA - French locale for Canada
fr_FR - French locale for France
</pre>
}}

After setting the <code>linguas</code> USE flag it may be necessary to re-emerge some packages:

{{Emerge|params+=--newuse --deep --with-bdeps=y|@world}}

== See also ==


* [[Handbook:AMD64/Installation/Base#Configure_locales|Configuring locales]] (Gentoo Handbooks)
* [[Evdev#Keyboard_layout|Keyboard layout]] inside the Evdev article
* [[X resources]]

== External resources == 

* [http://www.gnu.org/software/libc/manual/html_node/Locales.html Locales and Internationalization] (gnu.org)

[[Category:Localization]] {{Migrated|originalauthors=Alexander Holler, Steven Lucy, Benny Chuang, Lars Weiler, Tobias Scherbaum, Flammie Pirinen, nightmorph, klondike}}
