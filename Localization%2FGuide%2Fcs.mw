<languages />

<div class="mw-translate-fuzzy">
{{Metadata|abstract=Tento průvodce by měl uživatelům  pomoci přizpůsobit distribuci Gentoo Linux jakémukoli evropskému místnímu nastavení. Jako vzorový příklad je použita němčina, neboť se jedná o překlad německé dokumentace. Obsahuje též konfiguraci umožňující použití symbolu eura.}}
</div>

== Časové pásmo ==

<div class="mw-translate-fuzzy">
Za účelem udržení správného údaje o čase je nutné nastavit časové pásmo tak, aby váš systém věděl, kde se nachází.
</div>

== Systém locale ==

=== Co je to locale? ===

<div class="mw-translate-fuzzy">
Locale jsou soubory informací, které většina programů používá k určení toho, jaké nastavení zvolit s ohledem na daný stát a použitý jazyk. Jednotlivé locale a jim odpovídající sady dat jsou součástí systémové knihovny a na většině systémů je lze najít v {{Path|/usr/share/locale}}. Název locale má většinou podobu <code>ab_CD</code>, přičemž <code>ab</code> označuje dvou (či tří) písmenný kód jazyka (dle ISO-639) a <code>CD</code> označuje dvoupísmenný kód státu (vyjádřený v ISO-3166). K názvu mohou být dále připojeny jejich varianty, např. <code>en_GB.UTF-8</code> nebo <code>de_DE@euro</code>. Více informací o locale si prosím vyhledejte na [http://cs.wikipedia.org/wiki/Locale Wikipedii] a v souvisejících článcích.
</div>

=== Proměnné prostředí vztahující se k locales ===

Proměnné řídící různé složky nastavení locale jsou vypsány v tabulce níže. Každá z nich může obsahovat název jednoho locale ve výše uvedeném formátu <code>ab_CD</code>. 

<div class="mw-translate-fuzzy">
{| class="wikitable" style="text-align: left;" 
|- 
! Název proměnné
! Popis
|- 
| LANG
| Definuje všechna nastavení locale naráz, avšak současně umožňuje jeho další individuální přizpůsobení pomocí nastavení LC_* uvedených níže.
|- 
| LC_COLLATE
| Definuje abecední řazení řetězců. Tím je ovlivněno např. řazení ve výpisu adresářů.
|- 
| LC_CTYPE
| Definuje to, jakým způsobem nakládá systém se znaky. Určuje které znaky jsou považovány za součást abecedy, které jsou numerické apod. Je-li to možné, určuje rovněž použitou znakovou sadu.
|- 
| LC_MESSAGES
| Určuje místní nastavení programů používajících "message based" lokalizaci (což je většina Gnu aplikací, viz další kapitola, v níž jsou uvedeny bližší informace o tom, které programy to jsou, a jak dále zprovoznit lokalizaci u těch, které tento mechanismus nepoužívají).
|- 
| LC_MONETARY
| Definuje měnové jednotky a formátování číselných hodnot vyjadřujících peněžní částky.
|- 
| LC_NUMERIC
| Definuje formátování číselných hodnot, které nevyjadřují peněžní hodnotu. Ovlivňuje zejména podobu oddělovače tisíců nebo desetinné čárky.
|- 
| LC_TIME
| Definuje formátování údajů a data a času.
|- 
| LC_PAPER
| Definuje výchozí formát papíru.
|- 
| LC_ALL
| Zvláštní proměnná pomocí níž lze změnit všechna ostatní nastavení.
|-
|}
</div>

<div class="mw-translate-fuzzy">
{{Note/cs|Některé programy jsou tak, že očekávají tradiční anglické abecední řazení, zatímco jiná locale, třeba estonské, používají řazení jiné. Z tohoto důvodu se doporučuje u nastavení na úrovni celého systému výslovně stanovit LC_COLLATE na C}}
</div>

<div class="mw-translate-fuzzy">
{{Warning/cs|Použití LC_ALL se silně nedoporučuje, neboť může být později přebito. Promennou používejte pouze pro testování a "nikdy" ji nenastavujte ve spouštěcích souborech.}}
</div>

<div class="mw-translate-fuzzy">
Uživatelé nejčastěji nastavují jako globální pouze proměnnou LANG.
</div>

<div class="mw-translate-fuzzy">
=== Generování specifických locale ===
</div>

<div class="mw-translate-fuzzy">
Ve svém systému budete patrně potřebovat pouze jedno nebo dvě locale. Ty jenž budete potřebovat můžete určit pomocí {{Path|/etc/locale.gen}}.
</div> 

{{Code|Adding locales to /etc/locale.gen|<pre>
en_GB ISO-8859-1
en_GB.UTF-8 UTF-8
de_DE ISO-8859-1
de_DE@euro ISO-8859-15
</pre>
}}

{{Note|Use an <code>@euro</code> value from {{Path|/usr/share/i18n/SUPPORTED/}} as the locale when using the Euro currency symbol (€) on non UTF-8 based locales.}}

<div class="mw-translate-fuzzy">
Následně spusťe <code>locale-gen</code>. Tím vygenerujte veškeré locale vypsané v souboru {{Path|/etc/locale.gen}}.
</div> 

{{RootCmd|locale-gen|output=<pre>
 * Generating 4 locales (this might take a while) with 1 jobs
 *  (1/4) Generating en_GB.ISO-8859-1 ...                       [ ok ]
 *  (2/4) Generating en_GB.UTF-8 ...                            [ ok ]
 *  (3/4) Generating de_DE.ISO-8859-1 ...                       [ ok ]
 *  (4/4) Generating de_DE.ISO-8859-15@euro ...                 [ ok ]
 * Generation complete
</pre>}}

<div class="mw-translate-fuzzy">
Dostupnost vámi zvolených locale můžete ověřit spuštěním <code>locale -a</code>.
</div>

{{Cmd|locale -a|output=<pre>
C
POSIX
de_DE
de_DE.iso88591
de_DE.iso885915@euro
de_DE@euro
deutsch
en_GB
en_GB.iso88591
en_GB.utf8
german
</pre>}}

The {{Path|/usr/lib/locale/locale-archive}} file can be shown by {{c|localedef}}.

{{Cmd|localedef --list-archive}}

Its raw content can be displayed using the {{c|strings}} command.

{{Cmd|strings /usr/lib/locale/locale-archive {{!}} less}}

=== Nastavení locale ===

==== OpenRC ==== 

<div class="mw-translate-fuzzy">
Pokud používáte OpenRC, nastavení locale je uchováno v proměnných prostředí. Ty jsou typicky nastavovány v souborech {{Path|/etc/env.d/02locale}} (nastavení pro celý systém) a {{Path|/.bashrc}} (uživatelské nastavení) a je možné je spravovat pomocí <code>eselect locale</code>. Například nastavení proměnné <code>LANG</code> na hodnotu <code>C</code> proveďte takto:
</div>

{{RootCmd|eselect locale list|output=<pre>
Available targets for the LANG variable:
  [1]   C 
  [2]   POSIX
  [3]   en_US
  [4]   en_US.iso885915
  [5]   en_US.utf8
  [ ]   (free form)
</pre>}}

{{RootCmd|eselect locale set 1}}

<div class="mw-translate-fuzzy">
samozřejmě můžete soubor upravit ručně a odlišit od sebe jednotlivé proměnné.
</div>

<div class="mw-translate-fuzzy">
{{Code|Nastavení výchozího systémového locale v  /etc/env.d/02locale|<pre>
LANG="de_DE.UTF-8"
LC_COLLATE="C"
</pre>
}}
</div>

In some cases users may notice glitchy non-English representation in some applications like Krusader (https://bugs.kde.org/show_bug.cgi?id=371582). Removing or commenting the <code>LC_ALL=""</code> line from {{Path|/etc/env.d/02locale}} should fix the problem.

<div class="mw-translate-fuzzy">
Je možné a zejména v poněkud tradičnějším UNIXovém prostředí vcelku běžné, ponechat globální nastavení nezměněné, tj. locale "<code>C</code>". Uživatelé mohou jimi upřednostňované locale nastavit ve svém RC souboru:
</div> 

<div class="mw-translate-fuzzy">
{{Code|Nastavení uživatelského locale v ~/.bashrc|<pre>
export LANG="de_DE.UTF-8"
export LC_COLLATE="C"
</pre>
}}
</div>

<div class="mw-translate-fuzzy">
Dalším způsobem nastavení systému je ponechání výchozího locale C, avšak se současným povolením znakové sady UTF-8. Této možnosti lze dosáhnout použitím následujícího nastavení v souboru {{Path|/etc/env.d/02locale}}:
</div> 

{{Code|Použití tradičního locale C současně s UTF-8|<pre>
LC_CTYPE=de_DE.UTF-8
</pre>
}}

<div class="mw-translate-fuzzy">
Při využití výše uvedeného úryvku uživatelé uvidí lokalizované názvy souborů jak se patří, aniž by byli nuceni používat vámi upřednostňovaný jazyk.
</div> 

<div class="mw-translate-fuzzy">
Jakmile jste nastavili správné locale, nezapomeňte aktualizovat proměnné prostředí, aby váš systém zaznamenal provedenou změnu.
</div>

Pro celosystémové výchozí locale:

{{RootCmd|env-update && source /etc/profile}}

Pro uživatelské locale:

{{Cmd|source ~/.bashrc}}

<div class="mw-translate-fuzzy">
Po té je potřeba zabít X server stisknutím kláves {{Key|Ctrl}}+{{Key|Alt}}+{{Key|Backspace}}, odhlásit se a po té se znovu přihlásit pod svým uživatelským jménem.
</div> 

Nyní ověřte, že se změny projevily: 

{{Cmd|locale}}

==== systemd ====

<div class="mw-translate-fuzzy">
Pokud používáte systemd, měli byste nastavit locale příkazem <code>localectl</code>. Projděte si seznam dostupných locale pomocí:
</div>

{{RootCmd|localectl list-locales}}

<div class="mw-translate-fuzzy">
Pak nastavte locale, které chcete:
</div>

{{RootCmd|<nowiki>localectl set-locale LANG=de_DE.utf8</nowiki>}}

Nakonec zkontrolujte zda je výsledek správný:

{{RootCmd|<nowiki>localectl | grep "System Locale"</nowiki>|output=<pre>
   System Locale: LANG=de_DE.utf8
</pre>}}

== Rozložení kláves v konzoli ==

=== OpenRC ===

<div class="mw-translate-fuzzy">
Rozložení kláves používané v konzoli se nastavuje v {{Path|/etc/conf.d/keymaps}} v proměnné <code>keymap</code>. Platné hodnoty lze nalézt {{Path|/usr/share/keymaps/VAŠE_ARCH/}}. {{Path|i386}} obsahuje další podskupiny rozložení ({{Path|qwerty/}}, {{Path|azerty/}}, atd.). Některé jazyky mají více možností rozložení, proto můžete různě experimentovat, než naleznete to, které vašim potřebám vyhovuje nejvíc.
</div> 

<div class="mw-translate-fuzzy">
{{Code|Nastavení rozložení v pro konzoli|<pre>
keymap="de"
#keymap="de-latin1"
#keymap="de-latin1-nodeadkeys"
</pre>
}}
</div>

=== systemd ===

<div class="mw-translate-fuzzy">
V případě systemd se rozložení kláves konzole nastavuje příkazem <code>localectl</code>. Najprve zjistěte jaká je nabídka rozložení kláves:
</div>

{{RootCmd|localectl list-keymaps}}

<div class="mw-translate-fuzzy">
Po té nastavte rozložení jaké chcete:
</div>

{{RootCmd|localectl set-keymap it}}

Nakonec zkontrolujte, zda bylo rozložení kláves nastaveno správně:

{{RootCmd|<nowiki>localectl | grep "VC Keymap"</nowiki>|output=<pre>
       VC Keymap: it
</pre>}}

== Rozložení kláves X serveru ==

=== OpenRC ===

<div class="mw-translate-fuzzy">
Rozložení kláves používané v X serveru se stanovuje v souboru {{Path|/etc/X11/xorg.conf}} volbou <code>XkbLayout</code>.
</div>

=== systemd ===

<div class="mw-translate-fuzzy">
V případě systemd můžete rozložení kláves X11 serveru nastavit příkazem <code>localectl</code>. Nejprve zjistěte jaká rozložení klávesnice X11 jsou k dispozici:
</div>

{{RootCmd|localectl list-x11-keymap-layouts}}

<div class="mw-translate-fuzzy">
Po té nastavte rozložení kláves X11 jaké chcete:
</div>

{{RootCmd|localectl set-x11-keymap it}}

Nakonec zkontrolujte, zda bylo rozložení kláves X11 nastaveno správně:

{{RootCmd|<nowiki>localectl | grep "X11 Layout"</nowiki>|output=<pre>
      X11 Layout: it
</pre>}}

<div class="mw-translate-fuzzy">
== NLS ==
</div>

<div class="mw-translate-fuzzy">
Aby fungovala "message based" lokalizace v programech, které ji podporují, budete je muset zkompilovat s nastavením USE proměnné  <code>nls</code>. Většina programů používajících nls bude také potřebovat knihovnu gettext, aby mohla extrahovat a používat lokalizované zprávy. Portage ji samozřejmě automaticky nainstaluje jakmile bude potřeba.
</div>

<div class="mw-translate-fuzzy">
Po nastavení USE proměnné <code>nls</code>, bude potřeba přeinstalovat některé balíčky:
</div>

<div class="mw-translate-fuzzy">
{{Emerge|params+=--newuse --deep --with-bdeps=y|@world}}
</div>

== LINGUAS ==

{{Warning|LINGUAS causes packages to implicitly skip locales. When using it, the package manager cannot determine which locales were omitted. Do not use LINGUAS if you intend to redistribute binary packages.}}

There is also an additional <var>LINGUAS</var> variable that is used by some gettext-based build systems to control which localization files are built and installed. The variable takes in ''space''-separated list of language codes, and a suggested place to set it is {{Path|[[:/etc/portage/make.conf|/etc/portage/make.conf]]}}: 

{{RootCmd|nano -w /etc/portage/make.conf|output=<pre>
## (Doplňte proměnnou LINGUAS. V případě němčiny, finštiny a angličtiny:)
LINGUAS="de fi en"
</pre>}}

Note that there is a large difference between <var>LINGUAS</var> being unset and being set to an empty value: with <code>LINGUAS=""</code>, most ebuilds would install only the packages' default language but none of the <code>LC_MESSAGES</code> files.

== L10N ==

A <var>USE_EXPAND</var> variable called <var>L10N</var> decides which extra localization support will be installed. This is commonly used for downloads of additional language packs by packages. Similar to <var>LINGUAS</var>, the variable takes a space separated list of language tags, and it can be set in {{Path|/etc/portage/make.conf}}:

{{RootCmd|nano -w /etc/portage/make.conf|output=<pre>
## (Add in the L10N variable. For instance, for German and Brazilian Portuguese:)
L10N="de pt-BR"
</pre>}}

To set it per-package, edit {{Path|[[:/etc/portage/package.use]]}} and prefix the requested language packs with "l10n_", as shown in the next example:

{{FileBox|filename=/etc/portage/package.use|lang=bash|1=
app-text/aspell l10n_de l10n_pt-BR
}}

Note that while the common two letter language codes (like <code>de</code> or <code>fr</code>) are identical in <var>LINGUAS</var> and <var>L10N</var>, more complex entries have a different syntax because <var>L10N</var> uses [https://www.w3.org/International/articles/language-tags/ IETF language tags] (aka BCP 47). For example, <code>pt_BR</code> and <code>sr@latin</code> in <var>LINGUAS</var> become <code>pt-BR</code> and <code>sr-Latn</code> in <var>L10N</var>, respectively.

A list of <var>L10N</var> values that can be used is provided as {{Path|/usr/portage/profiles/desc/l10n.desc}}:

{{Cmd|grep -i portuguese /usr/portage/profiles/desc/l10n.desc|output=<pre>
pt - Portuguese
pt-BR - Portuguese (Brazil)
pt-PT - Portuguese (Portugal)
</pre>}}

After setting the <var>L10N</var> <var>USE_EXPAND</var> variable it may be necessary to re-emerge some packages:

{{Emerge|params+=--changed-use --deep --with-bdeps=y|@world}}

== See also ==


* [[Handbook:AMD64/Installation/Base#Configure_locales|Configuring locales]] (Gentoo Handbook)
* [[Evdev#Keyboard_layout|Keyboard layout]] inside the Evdev article
* [[X resources]]
* {{See also|Localization/Guide/The Euro symbol}}

== External resources == 

* [https://www.gnu.org/software/libc/manual/html_node/Locales.html Locales and Internationalization] (gnu.org)
* [https://gentoo.org/support/news-items/2016-06-23-l10n-use_expand.html L10N USE_EXPAND variable replacing LINGUAS]
* [https://blogs.gentoo.org/mgorny/2016/05/16/how-linguas-are-thrice-wrong/ Michał Górny: How LINGUAS are thrice wrong!]
* [https://archives.gentoo.org/gentoo-dev/message/a08ea09c2c8e534fd9bc1146703c66ff <nowiki>[gentoo-dev] [RFC] How to deal with LINGUAS mess?</nowiki>]
* [https://archives.gentoo.org/gentoo-dev/message/41e09d1ddc8b30abb9f9d21d205b7b82 <nowiki>[gentoo-dev] [RFC] Masterplan for solving LINGUAS problems</nowiki>]

== References ==

{{reflist}}


[[Category:Localization]] {{Migrated|originalauthors=Alexander Holler, Steven Lucy, Benny Chuang, Lars Weiler, Tobias Scherbaum, Flammie Pirinen, {{Dev|nightmorph}}, {{Dev|klondike}}}}
