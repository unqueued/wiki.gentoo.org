<languages />


{{Metadata|abstract=This guide will walk through the steps needed to setup a streaming radio server with SHOUTcast Server and SHOUTcast Trans.}}

Ce guide vous guide à travers les différentes étapes nécessaires à l'installation et la configuration d'un serveur de diffusion en flux pour la radio avec  SHOUTcast serveur et SHOUTcast Trans.

== Configurer un serveur SHOUTcast  ==

=== Installer les fichiers  ===

Le serveur SHOUTcast se trouve dans media-sound/SHOUTcast-serveur-bin. Vous pouvez l'installer avec la commande suivante : 

{{Emerge|shoutcast-server-bin}}

Le serveur SHOUTcast est maintenant installé. La prochaine étape sera de le configurer. 

=== Configurer le serveur SHOUTcast  ===

Le fichier de configuration est {{Path|/etc/shoutcast/sc_serv.conf}}. Assurez-vous d'être reconnu en tant qu'utilisateur ''root'', et ouvrez le fichier de configuration avec votre éditeur favori. J'ai choisi vi dans ce cas. 

{{RootCmd|vi /etc/shoutcast/sc_serv.conf}}

Ceci affichera le fichier de configuration du serveur SHOUTcast. Vous pouvez y observer les différentes options à définir. Jetons-y un coup d'œil. 

===  Options obligatoires ===

{{CodeBox|title=Setting the user limit|lang=ini|1=
; MaxUser.  The maximum number of simultaneous listeners allowed.
; Compute a reasonable value for your available upstream bandwidth (i.e. if
; you have 256kbps upload DSL, and want to broadcast at 24kbps, you would
; choose 256kbps/24kbps=10 maximum listeners.)  Setting this value higher
; only wastes RAM and screws up your broadcast when more people connect
; than you can support.
MaxUser=10
}}

C'est ici que le nombre maximum d'utilisateurs est défini. Comme le titre le suggère, il n'est pas raisonnable de définir 100 utilisateurs avec une bande passante montante de 256 kbps (c'est ce que j'ai défini, car ma bande montante est environ celle-là). Si vous faites tourner un serveur SHOUTcast pour servir un LAN, vous pouvez probablement définir une valeur TRÈS supérieure (facilement jusqu'à 100). Rappelez-vous de ne pas exagérer, quelque soit votre bande passante. La bande passante coûte à vote FAI et certains couperont votre compte, vous factureront des prix élevés, ou les deux. 

{{CodeBox|title=Setting the password|lang=ini|1=
; Password.  While SHOUTcast never asks a listener for a password, a
; password is required to transport audio stream to the server, and to perform
; administration via the web interface to this server.  This password should
; consist of only letters and numbers, and it's the same password that your
; broadcaster will need to enter in the SHOUTcast Source Plug-in for Winamp.
; THIS VALUE CANNOT BE BLANK.
Password=a_hard_to_crack_password
}}

C'est ici que vous définissez votre mot de passe. Le mot de passe lui-même est du texte en clair. Pour des raisons de sécurité, il est FORTEMENT recommandé que vous n'utilisiez pas des mots de passe qui sont utilisés pour accéder à des composants critiques du système ou à d'autres informations sensibles. Rendez-le aussi aléatoire que possible, avec une combinaison de chiffres et de lettres. Ce mot de passe sera celui que SHOUTcast Trans (ou tout autre fournisseur de contenu) utilisera pour se connecter et fournir le contenu du flux diffusé. 

{{CodeBox|title=Setting up your listening port|lang=ini|1=
; PortBase. This is the port number your server will run on.  The
; value, and the value + 1 must be available.  If you get a fatal error when
; the DNAS is setting up a socket on startup, make sure nothing else on the
; machine is running on the same port (telnet localhost port number -- if you
; get connection refused then you're clear to use that port).  Ports less than 1024
; may require root privileges on *nix machines.  The default port is 8000.
PortBase=8000
}}

Cette valeur définit le port par lequel les utilisateurs  se connecteront à votre serveur SHOUTcast. La valeur par défaut est 8000., car c'est ce que la plupart des programmes comprenant un serveurs mp3  utilisent par défaut (Audacious, winamp, etc.). Comme dit précédemment, si vous voulez utiliser un numéro de port inférieur à 1024, vous devez être ''root''. Néanmoins, je vous recommande fortement de ne pas utiliser un numéro de port inférieur à 1024 pour votre serveur SHOUTcast. 

{{CodeBox|title=Setting up logging|lang=ini|1=
; LogFile: file to use for logging. Can be '/dev/null' or 'none'
; or empty to turn off logging. The default is ./sc_serv.log
; on *nix systems or sc_serv_dir\sc_serv.log on win32.
; Note: on win32 systems if no path is specified the location is
; in the same directory as the executable, on *nix systems it is in the
; current directory.
LogFile=/var/log/SHOUTcast.log
}}

Ceci définit l'emplacement de fichier de journalisation du serveur SHOUTcast. L'ebuild le définit à /dev/null, c'est pourquoi vous devez le changer pour avoir une journalisation réelle. Je le défini dans l'emplacement de base /var/log. Vous pouvez choisir ce que vous voulez. 

{{CodeBox|title=Enabling real time stats|lang=ini|1=
; RealTime displays a status line that is updated every second
; with the latest information on the current stream (*nix and win32
; console systems only)
RealTime=0
}}

Ceci affiche des informations sur la chanson courante vers la sortie standard toutes les secondes. Ceci est désactivé par l'ebuild de manière à ce que le démon SHOUTcast puisse tourner aussi silencieusement que possible. Mettez ceci à 1 si vous voulez cette mise à jour toutes les secondes. Néanmoins, nous recommandons d'utiliser plutôt la page d'état. 

{{CodeBox|title=Enabling real time logging|lang=ini|1=
; ScreenLog controls whether logging is printed to the screen or not
; on *nix and win32 console systems. It is useful to disable this when
; running servers in background without their own terminals. Default is 1
ScreenLog=0
}}

Ceci est désactivé par défaut dans l'ebuild pour que le démon tourne aussi silencieusement que possible. Ceci journalisera tous les événements (connexions, déconnexions, etc.) sur la sortie standard au moment où ils se produisent en temps réel. Néanmoins, comme le fichier de journalisation fait la même chose, nous recommandons de plutôt utiliser ceci. 

{{CodeBox|title=Setting the last number of songs displayed|lang=ini|1=
; ShowLastSongs specifies how many songs to list in the /played.html
; page.  The default is 10.  Acceptable entries are 1 to 20.
ShowLastSongs=10
}}

Tout comme elle l'indique, cette valeur définit combien des chansons jouées le plus récemment /played.html affichera. Si vous mettez plus que 20, vous pouvez envisager de faire plus de café. 

{{CodeBox|title=Setting up filesystem modification logging|lang=ini|1=
; TchLog decides whether or not the DNAS log file should track yp
; directory touches.  Adds and removes still appear regardless of
; this setting.
; Default is yes
; TchLog=yes
}}

Ce réglage active ou désactive la journalisation des modifications de répertoires par le DNAS (Distributed Network Audio Server ou SHOUTcast en raccourci). Ceci est recommandé à ceux qui veulent avoir la journalisation la plus sûre possible. Les utilisateur occasionnels ou de base n'ont pas besoin de ça. 

{{CodeBox|title=Enabling http request logging|lang=ini|1=
; WebLog decides whether or not hits to http:// on this DNAS will
; be logged.  Most people leave this off because the DSP plug-in
; uses http:// calls to update titles and get the listener count,
; which takes up a lot of log space eventually.  If you want to
; see people making hits on your admin.cgi or index pages, turn
; this back on.  Note that this setting does NOT affect XML stats
; counters for hits to http:// pages.
; Default is no.
; WebLog=no
}}

Ceci spécifie si voulez ou pas journaliser les accès au serveur HTTP de SHOUTcast. Encore une fois, ce n'est recommandé que pour ceux qui veulent la journalisation la plus sûre possible, mais pas pour les utilisateurs standards. 

{{CodeBox|title=Enabling W3C Logging|lang=ini|1=
; W3CEnable turns on W3C Logging.  W3C logs contain httpd-like accounts
; of every track played for every listener, including byte counts those listeners
; took.  This data can be parsed with tools like Analog and WebTrends, or given
; to third parties like Arbitron and Measurecast for their reporting systems.
; Default is Yes (enabled).
W3CEnable=Yes
  
; W3CLog describes the name of the log file for W3C logging.  Default log file is
; sc_w3c.log, in the same directory wherever the DNAS gets started from.
W3CLog=/dev/null
}}

The first option enables W3C logging. This type of logging can be easily parsed by the programs listed. This is highly recommended for those who wish to have the most in depth statistics possible. The second option specifies where to store the W3C log. This is set to {{Path|/dev/null}} by the ebuild.

=== Configuration du réseau ===

{{CodeBox|title=Setting the source IP|lang=ini|1=
; SrcIP, the interface to listen for source connections on (or to make relay
; connections on if relaying). Can and usually will be ANY or 127.0.0.1
; (Making it 127.0.0.1 will keep other machines from being able to
; broadcast using your SHOUTcast Server )
SrcIP=ANY
}}

La variable SrcIP définit à partir de quelle adresse  IP le flux arrive. Ce peut être un autre serveur (relais), l'hôte local (normal), ou  toute autre adresse IP que votre interface prend en charge. La régler à localhost empêche tout autre serveur d'utiliser votre serveur SHOUTcast comme source de diffusion. La valeur par défaut est ANY et fera que votre serveur diffusera depuis une source à n'importe quelle adresse IP. Pour des raisons de sécurité, il vaut mieux définir cette variable à quelque chose de spécifique. 

{{CodeBox|title=Setting the destination IP|lang=ini|1=
; DestIP, IP to listen for clients on (and to contact yp.SHOUTcast.com)
; can and usually will be be ANY. If your machine has multiple IP addresses,
; set this to the one you want it to be accessed by.
DestIP=ANY
}}

Ceci détermine quelle adresse IP sur votre interface vous mettez à la disposition des utilisateurs pour se connecter. Elle peut être, l'hôte local (si vous êtes anti-social et voulez diffuser seulement par vous-même), une adresse privée (par exemple, 192.168.0.101, pour le réseau local), ou votre adresse IP externe (par exemple, 209.204.249.201 pour diffuser vers un réseau étendu, mais pas un réseau local). Dans la plupart des cas, vous pouvez atteindre votre propre flux en utilisant 127.0.0.1 au lieu de ce qui est listé ici. ANY vous laisse votre serveur SHOUTcast se lier à n'importe quelle adresse sur toutes les interfaces disponibles. 

{{CodeBox|title=Setting proxy/yp.SHOUTcast.com port|lang=ini|1=
; Yport, port to connect to yp.SHOUTcast.com on. For people behind caching
; web proxies, change this to the alternate port (666 is what it might be,
; check www.SHOUTcast.com if you have problems). Otherwise, leave this at 80.
; We're actively working on re-opening port 666, but as of release the only
; working port is port 80.
Yport=80
}}

Cette variable a  2 fonctions. Premièrement, c'est le port sur lequel se connecter à  yp.SHOUTcast.com with. yp.SHOUTcast.com est la page ''nullsoft'' des serveurs publics ainsi les utilisateurs connaissent sur quel port écouter en réception. Les utilisateurs peuvent chercher votre station depuis cette page. Deuxièmement,  elle sert pour les mandataire Web. Définissez-la à la valeur de port que vous utilisez pour des connexions par des mandataires, et définissez votre DestIP à votre mandataire pour la diffusion. 

{{CodeBox|title=Setting up reverse DNS|lang=ini|1=
; NameLookups.  Specify 1 to perform reverse DNS on connections.
; This option may increase the time it takes to connect to your
; server if your DNS server is slow.  Default is 0 (off).
NameLookups=0
}}

Cette option spécifie si vous voulez, ou pas, pratiquer le DNS inverse sur les clients. Ceci partira d'une adresse IP pour essayer de trouver le nom d'hôte correspondant. Utilisez cette fonction à des fins de connexion pour créer un rapport plus détaillé. 

{{CodeBox|title=Setting up relaying|lang=ini|1=
; RelayPort and RelayServer specify that you want to be a relay server.
; Relay servers act as clients to another server, and rebroadcast.
; Set RelayPort to 0, RelayServer to empty, or just leave these commented
; out to disable relay mode.
; RelayPort=8000
; RelayServer=192.168.1.58
}}

Ceci indique que vous agissez comme un serveur relais. Les serveurs relais sont souvent utilisés pour prendre une connexion à bande étroite qui peut seulement diffuser vers un seul client, et utiliser sa propre bande, plus large, pour servir plus de clients. RelayPort spécifie le port et l'adresse IP du serveur SHOUTcast que vous voulez relayer. Laisser ceci en commentaire si vous n'envisagez pas d'utiliser votre serveur comme un relais. 

=== Configuration du serveur ===

{{CodeBox|title=Setting the admin password|lang=ini|1=
; AdminPassword.  This password (if specified) changes the
; behavior of Password to be a broadcast-only password, and
; limits HTTP administration tasks to the password specified
; here.  The broadcaster, with the password above, can still
; log in and view connected users, but only the AdminPassword
; will grant the right to kick, ban, and specify reserve hosts.
; The default is undefined (Password allows control for both
; source and admin)
; AdminPassword=adminpass
}}

Définir cela créera un diffuseur et un administrateur. Le diffuseur pourra se connecter avec Password, et voir les connexions. Néanmoins, si cette personne veut évincer/bannir/administrer le serveur, elle devra avoir le mot de passe d'administration. Cette option crée des rôles plus spécifiques pour votre serveur. Ceci est recommandé par exemple quand l'administrateur système n'est pas la même personne que le diffuseur. 

{{CodeBox|title=Setting up auto user disconnect|lang=ini|1=
; AutoDumpUsers controls whether listeners are disconnected if the source
; stream disconnects. The default is 0.
AutoDumpUsers=0
}}

Ceci spécifie si les utilisateurs sont évincés, ou pas, lorsque le flux se déconnecte pour une raison ou pour une autre. Ceci est défini à 0, de manière à ce que les clients définissent leur propre temps d'attente, ou essayent de maintenir un flux en tampon. Utilisez ceci si vous vous attendez à de courtes interruptions à tout moment. 

{{CodeBox|title=Setting up the source timeout|lang=ini|1=
; AutoDumpSourceTime specifies how long, in seconds, the source stream is
; allowed to be idle before the server disconnects it. 0 will let the source
; stream idle indefinitely before disconnecting. The default is 30.
AutoDumpSourceTime=30
}}

Ceci spécifie quand le serveur SHOUTcast arrêtera d'attendre qu'une source (essentiellement un serveur relais) émette un flux. De 30 à 60 secondes devrait être une valeur raisonnable. 

{{CodeBox|title=Setting up the content directory|lang=ini|1=
; ContentDir specifies the directory location on disk of where to stream
; on-demand content from. Subdirectories are supported as of DNAS 1.8.2.
; Default is ./content/, meaning a directory named content in the same directory
; as where sc_serv was invoked from.
ContentDir=/opt/SHOUTcast/content/
}}

The ContentDir spécifie où placer le contenu à servir à la demande. Par exemple, si vous voulez diffuser une annonce aux employés, vous pourriez utiliser ce répertoire. L'ebuild du  serveur SHOUTcast  le définit à  {{Path|/opt/SHOUTcast/content}} pour vous. Pour l'utiliser , mettez un mp3 dans le répertoire content, puis pointer votre navigateur sur <code>http://example.com:[port]/content/mp3name.pls</code> . Le serveur SHOUTcast créera automatiquement une liste de flux compatible  média de flux pour le  mp3, et le diffusera à la demande. Utilisez cela comme une alternative à SHOUTcast Trans pour diffuser des sources média. 

{{CodeBox|title=Setting up an intro file|lang=ini|1=
; IntroFile can specify a mp3 file that will be streamed to listeners right
; when they connect before they hear the live stream.
; Note that the intro file MUST be the same sample rate/channels as the
; live stream in order for this to work properly. Although bit rate CAN
; vary, you can use '%d' to specify the bit rate in the filename
; (i.e. C:\intro%d.mp3 would be C:\intro64.mp3 if you are casting at 64kbps).
; The default is no IntroFile
; IntroFile=c:\intro%d.mp3
}}

Ceci vous permet de configurer un fichier d'introduction. À chaque fois que des utilisateurs se connectent, ils entendent ce fichier. Comme il est indiqué, la fréquence de bits du flux et la fréquence de bit de la chanson doivent correspondre, sinon ça ne marchera pas. Vous pouvez néanmoins, mettre quelque chose comme intro128.mp3 et intro64.mp3 ;cela jouera  intro128.mp3 à ceux qui se connectent à un flux à 128 kbps, et intro64 à ceux qui se connectent à un flux 64 kbps. 

{{CodeBox|title=Setting up a back file|lang=ini|1=
; BackupFile can specify a mp3 file that will be streamed to listeners over
; and over again when the source stream disconnects. AutoDumpUsers must be
; 0 to use this feature. When the source stream reconnects, the listeners
; are rejoined into the live broadcast.
; Note that the backup file MUST be the same sample rate/channels as the
; live stream in order for this to work properly. Although bit rate CAN
; vary, you can use '%d' to specify the bit rate in the filename
; (i.e. C:\backup%d.mp3 would be C:\backup32.mp3 if you are casting at 32kbps).
; The default is no BackupFile
; BackupFile=C:\intro%d.mp3
}}

Ceci est identique à ce qui a été vu plus haut, mais sera joué lorsque le flux source se terminera, plutôt que lorsque les utilisateurs se déconnectent.  Cela ne marchera que si  AutoDumpUsers est mis à 0. 

{{CodeBox|title=Setting up a title format|lang=ini|1=
; TitleFormat specifies a format string for what title is sent to the listener.
; For example, a string of 'Justin Radio' forces the title 'Justin Radio' even
; when the source changes the title. You can use up to one '%s' in the string
; which lets you contain the title from the source. For example, if your
; TitleFormat is 'Justin Radio: %s', and the source plug-in's title is
; 'Billy plays the blues', then the net title is
; 'Justin Radio: Billy plays the blues'. Note: only works on non-relay servers.
; The default is no format string.
TitleFormat=Chris Gentoo Beats: %s
}}

Ceci définit un titre non variable pour votre serveur SHOUTcast. Utilisez ceci si votre flux source diffère de celui du nom de votre serveur SHOUTcast. Ça ne marche pas avec des serveurs relais. 

{{CodeBox|title=Setting up a URL format|lang=ini|1=
; URLFormat specifies a format string for what URL is sent to the listener.
; Behaves like TitleFormat (see above).
; The default is no format string.
; URLFormat=http://www.server.com/redirect.cgi?url=%s
}}

Ceci ressemble à  TitleFormat, sauf que l'URL présentée ci-dessus est utilisée à la place de l'URL du flux source. 

{{CodeBox|title=Setting up the public status of a source stream|lang=ini|1=
; PublicServer can be always, never, or default (the default, heh)
; Any setting other than default will override the public status
; of the source plug-in or of a SHOUTcast Server that is being relayed.
PublicServer=default
}}

Ceci spécifie si, oui ou non, vous voulez être répertorié comme un serveur public, même si votre plug-in serveur/source est déjà répertorié en tant que tel. 

{{CodeBox|title=Allowing relaying|lang=ini|1=
; AllowRelay determines whether or not other SHOUTcast Servers will be
; permitted to relay this server.  The default is Yes.
AllowRelay=Yes
}}

AllowRelay détermine si les autres serveurs sont autorisés à relayer vos contenus. Si vous pensez que vous n'utiliserez jamais le relayage, mettez cette variable à No. 

{{CodeBox|title=Allowing relays to publically display the source|lang=ini|1=
; AllowPublicRelay, when set to No, will tell any relaying servers not
; to list the server in the SHOUTcast directory (non-public), provided
; the relaying server's Public flag is set to default.  The default is
; Yes.
AllowPublicRelay=Yes
}}

AllowPublicRelay spécifie si vous voulez, ou pas, que votre serveur soit répertorié dans le répertoire public de SHOUTcast si le serveur qui vous relaie est déjà répertorié. Notez que la variable PublicServer  peut prévaloir sur ce réglage. 

{{CodeBox|title=Setting MetaInterval|lang=ini|1=
; MetaInterval specifies how often, in bytes, meta data sent.
; You should really leave this at the default of 32768, but the option is
; provided anyway.
MetaInterval=32768
}}

Laissez simplement cela en l'état. 

=== Configuration des accès ===

{{CodeBox|title=Setting the max listener time|lang=ini|1=
; ListenerTimer is a value in minutes of maximum permitted time for
; a connected listener.  If someone is connected for longer than this
; amount of time, in minutes, they are disconnected.  When undefined,
; there is no limit defined.  Default is undefined.
; ListenerTimer=600
}}

Je ne suis pas certain que vous ayez besoin de cela. De base, si un auditeur est connecté trop longtemps, déconnectez-le. La seule raison que j'y vois, c'est d'évincer les gens qui sont restés connectés sans écouter. La valeur est donnée en minutes 

{{CodeBox|title=Setting up the ban file|lang=ini|1=
; BanFile is the text file sc_serv reads and writes to/from
; for the list of clients prohibited to connect to this
; server.  It's automatically generated via the web
; interface.
; BanFile=sc_serv.ban
}}

Ceci est le nom de fichier de la liste des clients bannis de votre serveur. La valeur par défaut est ''sc_serv.ban'', mais vous pouvez utiliser le nom de votre choix dans ce réglage : 

{{CodeBox|title=Setting the Rip list|lang=ini|1=
; RipFile is the text file sc_serv reads and writes to/from
; for the list of client IP addresses which are *ALWAYS* permitted
; to connect to this server (useful for relay servers).
; This file is automatically generated via the web
; interface.  Note that if your server is FULL, and someone
; from a Reserved IP connects, the DNAS will force the person
; listening for the longest time off to make room for the new
; connection.
; RipFile=sc_serv.rip
}}

Aussi déprimant qu'il puisse paraître, Rip signifie ''IP réservée''. Utilisez cela pour vos amis ou pour d'autres personnes à qui vous voulez donner priorité sur l'utilisateur lambda. Si vous êtes en train de diffuser aux nombre maximum d'utilisateurs possible, et que l'un de vos utilisateurs ''rip'' essaie de se connecter, il évincera la personne qui écoutait depuis le plus longtemps. 

{{CodeBox|title=Setup if Rip only users can access your server|lang=ini|1=
; RipOnly, when set to Yes, will only allow IP addresses listed in the Reserved
; IP list to connect and relay.  All other connections for listening will be denied.
; This is really only useful for servers whose sole purpose is to provide the
; primary feed to all public relays.  Setting this value to Yes also forces the
; server into Private mode, since listing this server in the directory would
; be pointless.  Default is No.
; RipOnly=No
}}

Ceci autorise seulement les membres Rip à se connecter à votre serveur SHOUTcast. Vous pouvez, soit utiliser cela pour des flux radio privés, soit l'utiliser pour que seuls certains relais soient capables d'accéder à votre flux. 

=== Configuration de masse ===

{{CodeBox|title=Setting Unique variables|lang=ini|1=
; Unique: assigns a variable name for use in any configuration item which points to a
; file.  Useful for servers running lots of SHOUTcast Servers that have similar
; configuration parameters, excepting log file names, ban file names, etc.  Any
; parameter that takes a pathname can include the character $, which will
; substitute $ for the variable assigned here.  Keep in mind that the unique
; variable can only be used after it is defined, so don't try to use a unique
; variable substitution in a path before you define it.  For example, you
; could set:
; Unique=my_server
; and then define Log=/usr/local/SHOUTcast/$.log in an included configuration
; file.  Default is Unique=$, so that by default any file with $ in the name
; won't substitute anything at all.
}}

Fondamentalement, si vous exécutez beaucoup de serveurs SHOUTcast, ce serait vraiment rébarbatif de changer tous les fichiers log/ban/etc. en quelque chose d'unique pour chacune des configurations. Au lieu de cela, vous pouvez définir Unique à ''quelque chose'', et $ sera remplacé par ce quelque chose. Par exemple, si un fichier possède une définition de Unique =Jazz et une autre Unique=Rock, alors Log=/var/log/$.log produira /var/log/Jaz.log dans un fichier de configuration, et /var/log/Rock.log dans l'autre. Ce qui facilite la configuration de multiples serveurs qui ont des configuration similaires. 

{{CodeBox|title=Setting up common configure variables|lang=ini|1=
; Include: instructs the sc_serv to read from the named configuration file,
; *at the point of insertion of the Include statement*, and process as though
; the included file was part of itself.  Note that all configuration parameters
; in the DNAS configuration file are processed first to last, so if an item is defined
; twice in a configuration, the last item to process will be the one that takes
; effect.  For this reason, it's usually a good idea to use the Includes first
; in a configuration file.
; example:
; Include=/usr/local/SHOUTcast/common.conf
; Default is not applicable.
}}

Si vous exécutez plusieurs serveurs SHOUTcast et voulez utiliser des variables de configuration similaires sans les redéfinir à chaque fois, vous pouvez pointer vers un fichier qui contient ces variables similaires à l'aide d'un Include. 

=== Optimisation de la configuration ===

{{CodeBox|title=Setup number of CPU's utilized|lang=ini|1=
; CpuCount is used to explicitly limit the DNAS to dominating a finite
; amount of processors in multiprocessor systems.  By default,
; SHOUTcast creates one thread for every processor it detects in the
; host system, and assigns listeners equally across all the threads.
; In the event SHOUTcast doesn't correctly determine the number of
; CPUs in your host, or if you for whatever reason want to force
; the DNAS to not use other processors, you can say so here.
; Default behavior is to use as many processors as the DNAS detects on
; your system.
; CpuCount=1
}}

On multiple CPU systems, use this setting to force the SHOUTcast Server to utilize CpuCount # of processors. The default to assign one thread to each processor, and have listeners across all the threads. If you set this lower than your total processor count, this will leave processors free to do other things. 

{{CodeBox|title=Setup data submission gap|lang=ini|1=
; Sleep defines the granularity of the client threads for sending data.
; DNAS 1.7.0, per client thread, will send up to 1,024 bytes of data
; per socket (or less depending on the window available), and then
; sleep for the provided duration before repeating the whole process.
; Note that making this value smaller will vastly increase CPU usage on
; your machine.  Increasing reduces CPU, but increasing this value too far
; will cause skips.  The value which seems most optimal for 128kbps
; streaming is 833 (833 microseconds per client poll) on our test labs.
; We wouldn't recommend setting it any lower than 100, or any higher than
; 1,024.  If you have a slower machine, set this number lower to fix
; skips.
; Default value is 833.
; Sleep=833
}}

The SHOUTcast Server will use the sleep value in determining the gap between sending data. The higher the value, the longer the gap, the lower the value, the shorter the gap and the more CPU usage SHOUTcast Server will take up. On slower systems, as it states, you might want to lower this so that the SHOUTcast Servers sends data more and more frequently to users. Best to leave as is. 

{{CodeBox|title=Setup XML output|lang=ini|1=
; CleanXML strips some whitespace and line feeds from XML output which
; confuses some (poorly written) XML parsers.  If you get XML rendering errors,
; try turning this on.  Default is No (off).
; CleanXML=No
}}

Probably don't need to worry about this setting to much unless you use custom XML parsers to create custom statistics for you server. If the XML parser cannot handle whitespace and line feeds in XML, set this to Yes, and all should work. 

=== Configuration Conclusion ===

Your SHOUTcast Server should now be configured. For businesses that are using SHOUTcast, I recommend turning on WC3 logging, as it can be easily parsed, and used for creating custom statistics. You should also enable the AdministratorPassword. You might also wish to enable some of the mass configuration options if you're creating multiple SHOUTcast Servers. 

With the configuration setup, we'll now work on getting SHOUTcast up and running. We'll start with simple on demand streaming for a simple startup, then work on SHOUTcast Trans later (as it is somewhat more involved). 

== Getting started with SHOUTcast Server ==

=== Setting up on demand streaming ===

On demand streaming, as shown in the configuration chapter, automatically sets up on demand play lists for mp3 files in the content directory. The SHOUTcast server ebuild has a directory setup in /opt/SHOUTcast/content for all your on demand mp3's. Let's get started by creating a simple on demand streaming mp3. 

First we'll need to get an mp3 from somewhere and put it in the content directory. We'll take this sample.mp3 file from an /Mp3 directory I have created. 

{{RootCmd|cp sample.mp3 /opt/SHOUTcast/content/
|cd /opt/SHOUTcast/content/
|ls|output=<pre>
sample.mp3
</pre>
}}

OK, so the file is copied over now. Now we'll need to startup our SHOUTcast Server so the file can be accessed. 

{{RootCmd|/etc/init.d/shoutcast start|output=<pre>
 * Starting Shoutcast Server...
*******************************************************************************
** SHOUTcast Distributed Network Audio Server
** Copyright (C) 1998-2004 Nullsoft, Inc.  All Rights Reserved.
** Use "sc_serv filename.ini" to specify an ini file.
*******************************************************************************
                                                                         [ ok ]
</pre>
}}

The little banner is there to make sure that nothing dies right away (i.e. so you know your server actually started). Your SHOUTcast Server is now started! Because of the nature of on demand content, you will ONLY be able to access it from a browser. MPlayer or anything else won't be able to stream it as is. I use kmplayer in order to access the stream directly from my browser. You can see the result on the next image. 

Some people have Audacious setup to handle their audio mime types, so your browser may spawn Audacious up in order to play the resulting streaming content. Now that you are able to work with on demand content, we'll now work on using SHOUTcast Trans to create a true streaming radio server. 

== Setting up SHOUTcast Trans ==

=== SHOUTcast Trans introduction ===

SHOUTcast Trans stands for SHOUTcast Trans(coder), as it is able to transcode mp3's to lower or higher bit rates. SHOUTcast Trans works by streaming mp3's from a play list specified in the configuration file. We'll begin to setup the configuration for SHOUTcast Trans, so that we can have a real to goodness streaming radio station. We'll begin by opening the configuration file for SHOUTcast Trans, which just so happens to be located in /etc/shoutcast/sc_trans.conf. 

{{Emerge|shoutcast-trans-bin}}

{{RootCmd|vi /etc/shoutcast/sc_trans.conf}}

Now that we have the SHOUTcast Trans configuration file open, we'll begin to setup the streaming source. 

=== Configuring SHOUTcast Trans ===

{{CodeBox|title=Setting up the playlist|lang=ini|1=
; PlaylistFile (required EVEN IF RELAYING) - play list file (to create, use
; find /path/to/mp3/directory -type f -name "*.mp3" > playlist_filename.lst
PlaylistFile=/opt/SHOUTcast/playlists/playlist.lst
}}

This setting tells SHOUTcast where to find its streaming media content from. This setting requires an existing file, so let's go ahead and create a play list. I'll create one real quick from my /Mp3 directory referred to earlier. 

{{Cmd|find /Mp3 -type f -name "*.mp3" > /opt/SHOUTcast/playlists/playlist.lst}}

Now that the play list is setup, we point the configuration file to it, and SHOUTcast Trans will now know what files to stream. 

{{CodeBox|title=Setting the server IP and port|lang=ini|1=
; Serverip/ServerPort are the target server to send to
Serverip=127.0.0.1
ServerPort=8000
}}

This setting decides where to send the streaming content. In this guide, it will be the SHOUTcast Server's IP and port that you setup previously (DestIP and PortBase). 

{{CodeBox|title=Setting the SHOUTcast Server password|lang=ini|1=
; Password is the password on the sc_serv you're sending to.
Password=password_you_setup_in_sc_serv.conf
}}

The is the same password that you setup in the SHOUTcast Server configuration. 

{{CodeBox|title=Setting up your stream information|lang=ini|1=
; StreamTitle/URL/Genre define the data that appears on the directory and in the
; stream info.
StreamTitle=Chris Gentoo Beats
StreamURL=http://www.gentoo.org
Genre=JPOP Electronica And More!
}}

This sets up the title of your stream (i.e. Radio One), the URL (i.e. http://www.radio-one.com), and the Genre (i.e. Electronica Trance Tribal). 

{{CodeBox|title=Setting up your logfile|lang=ini|1=
; Logfile optionally denotes a text file to log sc_Trans to.  a kill -HUP
; will force a close and re-open of this file (but will also cease logging to
; the console)
LogFile=/var/log/sc_Trans.log
}}

This will point to the log file for SHOUTcast Trans. All your logging goes here. 

{{CodeBox|title=Setting up shuffling|lang=ini|1=
; Shuffle the play list
Shuffle=1
}}

Decide on whether or not you want your play list to play random songs from your list each time. Most will set this to 1. If you're going to be accepting song requests, set this to 0 and I'll explain how to do that later on. 

{{CodeBox|title=Setting up the stream|lang=ini|1=
; Bitrate/SampleRate/Channels recommended values:
; 8kbps 8000/11025/1
; 16kbps 16000/11025/1
; 24kbps 24000/22050/1
; 32kbps 32000/22050/1
; 64kbps mono 64000/44100/1
; 64kbps stereo 64000/22050/2
; 96kbps stereo 96000/44100/2
; 128kbps stereo 128000/44100/2
Bitrate=128000
SampleRate=44100
Channels=2
; Quality is from 1-10. 1 is best, 10 is fastest.
Quality=1
}}

Bitrate sets up the bit rate for your stream. This can be from 8000 (8kbps) to 128000 (128kbps). SampleRate sets the sampling rate of the stream. This can be anything from 11025 (11025kHz) to 44100 (44100kHz). Channels sets how many channels your stream will broadcast. This can be anything from 1 (mono) to 2 (stereo). Quality sets the stream quality. This is somewhat still controlled by the Bitrate/SampleRate/Channels. This is where you deal with how compressed the stream is. 1 gives you best quality, 10 gives you the best speed. Keep your connection in mind when you set these values! Use the guide given in order to figure out what your mp3's should be streamed at. 

{{CodeBox|title=Setting up crossfading|lang=ini|1=
; Mode=0 for none, 1 for 100/100->100/0, 2 for 0/100->100/0
CrossfadeMode=1
; Length is ms.
CrossfadeLength=8000
}}

This sets up song cross fading. Setting this to 0 will disable cross fading. If you set it to 1, Song 1 will fade out and Song 2 will fade in. If you set it to 2, Song 1 will fade in and Song 2 will fade out. The length is how long in ms the cross fade occurs. 

{{CodeBox|title=Enabling ID3 usage|lang=ini|1=
UseID3=1
}}

This decides whether or not you wish to use the ID3 tag for information about the mp3. 

{{CodeBox|title=Setting up public status|lang=ini|1=
; Public determines whether or not this station will show up in the directory
Public=0
}}

This sets up whether or not streams should be publicly listed when relaying to a server. Remember PublicServer in sc_serv.conf can over-ride this! 

{{CodeBox|title=Setting up user interaction|lang=ini|1=
; Put stuff here for user interaction (AOL IM, ICQ, IRC)
AIM=AIMHandle
ICQ=
IRC=SHOUTcast
}}

This sets up the information on how to reach you (the DJ). You can setup AIM or ICQ channels for song requests/anything. You can setup your own IRC channel as well, so that you can interact with multiple users at once. 

=== SHOUTcast Trans Setup Conclusion ===

Your SHOUTcast Trans is now ready to stream to your SHOUTcast Server! We'll now get started on streaming your mp3's. 

== Getting Started With SHOUTcast Trans ==

=== Starting up SHOUTcast Trans ===

As I most often use SHOUTcast Trans with SHOUTcast Server, I tend to startup SHOUTcast Trans, which in turns starts up SHOUTcast for you (much easier). So we'll go ahead and get SHOUTcast Trans started. 

{{RootCmd|/etc/init.d/shoutcast_trans start|output=<pre>
 * Starting Shoutcast Server...
*******************************************************************************
** SHOUTcast Distributed Network Audio Server
** Copyright (C) 1998-2004 Nullsoft, Inc.  All Rights Reserved.
** Use "sc_serv filename.ini" to specify an ini file.
*******************************************************************************
                                                  [ ok ]
* Starting Shoutcast Trans...                     [ ok ]
</pre>
}}

=== Listening to the SHOUTcast Trans stream ===

Now that SHOUTcast Trans is started, we'll start listening to the stream. I use MPlayer in this example to play the stream. 

{{Cmd|mplayer -cache 1024 http://127.0.0.1:8000/|output=<pre>
...
Playing http://127.0.0.1:8000/.
Connecting to server 127.0.0.1[127.0.0.1]:8000 ...
Name   : Chris Gentoo Beats
Genre  : JPOP Electronica And More!
Website: http://www.gentoo.org
Public : no
Bitrate: 128kbit/s
Cache size set to 1024 KBytes
Connected to server: 127.0.0.1
Cache fill:  9.38% (98304 bytes)    Audio file detected.
==========================================================================
Opening audio decoder: [mp3lib] MPEG layer-2, layer-3
MP3lib: init layer2 and 3 finished, tables done
mpg123: Can't rewind stream by 156 bits!
AUDIO: 44100 Hz, 2 ch, 16 bit (0x10), ratio: 16000->176400 (128.0 kbit)
Selected audio codec: [mp3] afm:mp3lib (mp3lib MPEG layer-2, layer-3)
==========================================================================
Checking audio filter chain for 44100Hz/2ch/16bit -> 44100Hz/2ch/16bit...
AF_pre: af format: 2 bps, 2 ch, 44100 hz, little endian signed int
AF_pre: 44100Hz 2ch Signed 16-bit (Little-Endian)
AO: [oss] 44100Hz 2ch Signed 16-bit (Little-Endian) (2 bps)
Building audio filter chain for 44100Hz/2ch/16bit -> 44100Hz/2ch/16bit...
Video: no video
Starting playback...
</pre>
}}

This was somewhat clipped. The -cache variable was put in to over-ride my somewhat larger buffering settings. And voilÃ ! You're now listening to streaming media! In the next chapter, we'll show you how to do a little bit more with your SHOUTcast Server. 

== Advanced SHOUTcast Usage ==

=== Business Usage ===

Businesses can use SHOUTcast in a number of ways: 

# Use on demand content streaming to make more interesting daily announcements.
# Have streaming public announcements available as they happen, let your clients know what's going on, on the spot! Then archive them as on demand content streaming for future reference.
# Do interviews as streaming media and archive them as on demand content streaming.

There are more possibilities on how to utilize SHOUTcast Server for businesses. Use live streaming media instead of boring old text! 

=== DJ-ing with SHOUTcast ===

SHOUTcast Server is one of the most popular servers for both new and veteran DJs alike. For those just starting, there are a few ways to increase the user experience of your SHOUTcast Server. Having an intro song is very key. It gives the users an idea of what your station is all about. Be sure to include this! Post your server on yp.SHOUTcast.com (described in the SHOUTcast Server configuration section) so that everyone knows where you are. One of the most unique things is to be able to take requests. To set up requesting, first turn Shuffle off in sc_Trans.conf. Have about, I'd say, 10 or so songs ready to get you started. Then start requesting song requests in the middle. When someone requests a song, simple add it to the end of your play list, and then you can use this script here to control what SHOUTcast Trans does with your play list: 

{{CodeBox|title=djcontrol|lang=bash|1=
#!/bin/bash
 
case "$1" in
  "reload")
    kill -s USR1 `cat /var/run/SHOUTcast_Trans.pid`
    ;;
  "next")
    kill -s WINCH `cat /var/run/SHOUTcast_Trans.pid`
    ;;
  *)
    echo "Invalid command"
    ;;
esac
}}

When you've added the song to the play list, you need to tell SHOUTcast Trans that your play list has changed with the new request entry. 

{{Cmd|djcontrol reload}}

You should now let the users know after what song the requests will start. Or if you want, you can keep skipping with: 

{{Cmd|djcontrol next}}

Be careful not to skip too much, as there is no previous control. Once you hit their song, the requesting begins. I'd get about 5 or so requests before you start requesting. This way you don't run all the way back to the beginning. If you start to lack in requests and expect that your request hour is over with, then simply copy your next session's play list over the requests play list and reload the play list. Once the current song is over, it will go back to the new play list. 

=== Conclusion ===

That ends it for the SHOUTcast Server and SHOUTcast Trans tutorial. I hope you benefited from the information here and please email me any comments or suggestions for this page! Enjoy your new streaming SHOUTcast Server! 

{{Migrated|originalauthors=Chris White, Shyam Mani}}
