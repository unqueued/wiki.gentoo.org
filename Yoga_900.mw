{{InfoBox stack
|{{InfoBox wikipedia|Lenovo_Yoga#Yoga_900|header=true}}
}}
Still working on installation, wiki will come soon.
[[File:Lenovo_Yoga_13.jpg|350px|right]]

== Hardware Lenovo Yoga 900-13ISK ==
=== Laptop Specifications ===

{| class="table"
|-
! style="text-align:center;" | Device
! style="text-align:center;" | Model
! style="text-align:center;" | Works
! style="text-align:center;" | Notes
|-
| Intel® Core™ i7
| Intel Core i7 (6th Gen) 6500U / 2.5 GHz 
| {{Yes}}
| 
|-
| Intel® HD Graphics
| 520
| {{Yes}}
| by default i915 driver will be used, need USE change to use i965 idriver instead
|-
| samsung 13.3"3200×1800 touchscreen
| Wide QXGA+ (WQXGA+) 3200×1800, 16:9 aspect ratio 
| {{Yes}}
| intel_backlight works, PPI of 276.05, touchscreen not working (yet)
|-
| Wireless Intel Corporation Wireless 8260 (rev 3a)
| 
| {{Yes}}
|  
|-
| Bluetooth
| 
| {{Yes}}
| 
|-
| Sound
| 
| {{Yes}}
| 
|-
| Camera
| 
| {{Yes}}
| 
|-
| Card Reader
|
| {{No}}
| dmesg warning mmc0: Unknown controller version (3). You may experience problems.
|-
| Touchscreen
|
| {{Partial}}
| multitouch not working
|-
| Touchpad
|
| {{Partial}}
| some multitouch support (two finger scrolling ok) monotouch ok, left and right click ok, touch click ko
|}

==== Forum ====

see https://forums.gentoo.org/viewtopic-p-8223726.html#8223726 for intallation discussion

== Configuration details ==

=== host bridge ===
{{RootCmd|lspci -nn -k|output=
<pre>
00:00.0 Host bridge [0600]: Intel Corporation Xeon E3-1200 v5/E3-1500 v5/6th Gen Core Processor Host Bridge/DRAM Registers [8086:1904] (rev 08)
	Subsystem: Lenovo Xeon E3-1200 v5/E3-1500 v5/6th Gen Core Processor Host Bridge/DRAM Registers [17aa:3800]
	Kernel driver in use: skl_uncore
</pre>
}}
{{KernelBox|1=
.config - Linux/x86 4.9.95-gentoo Kernel Configuration
 → 
}}
=== Graphics ===

{{RootCmd|lspci -nn -k|output=
<pre>
00:02.0 VGA compatible controller [0300]: Intel Corporation HD Graphics 520 [8086:1916] (rev 07)
	Subsystem: Lenovo HD Graphics 520 [17aa:3800]
	Kernel driver in use: i915
</pre>
}}
{{KernelBox|1=
.config - Linux/x86 4.9.95-gentoo Kernel Configuration
 → 
}}

See [[Intel]].

==== Feature support ====

{| class="table"
|-
! style="text-align:center;" | Chipset
! style="text-align:center;" | OpenGL
! style="text-align:center;" | OpenGL ES
! style="text-align:center;" | OpenCL
! style="text-align:center;" | [[VAAPI]]
! style="text-align:center;" | USE
|-
| Ivy Bridge
| {{Yes|3.1}}
| {{Yes|2.0 (3.0)<sup>1</sup>}}
| {{Yes|1.1<sup>2</sup>}}
| {{Yes}}
| VIDEO_CARDS="intel i965"
|}


=== pcie bus ===

{{RootCmd|lspci -nn -k|output=
<pre>
00:1c.0 PCI bridge [0604]: Intel Corporation Sunrise Point-LP PCI Express Root Port #5 [8086:9d14] (rev f1)
	Kernel driver in use: pcieport
00:1c.5 PCI bridge [0604]: Intel Corporation Sunrise Point-LP PCI Express Root Port #6 [8086:9d15] (rev f1)
	Kernel driver in use: pcieport
</pre>
}}
{{KernelBox|1=
.config - Linux/x86 4.9.95-gentoo Kernel Configuration
 → 
}}

=== USB Bus ===
{{RootCmd|lspci -nn -k|output=
<pre>
00:14.0 USB controller [0c03]: Intel Corporation Sunrise Point-LP USB 3.0 xHCI Controller [8086:9d2f] (rev 21)
	Subsystem: Lenovo Sunrise Point-LP USB 3.0 xHCI Controller [17aa:3800]
	Kernel driver in use: xhci_hcd
</pre>
}}
{{KernelBox|1=
.config - Linux/x86 4.9.95-gentoo Kernel Configuration
 → 
}}

=== SMBus ===

{{RootCmd|lspci -nn -k|output=
<pre>
00:1f.4 SMBus [0c05]: Intel Corporation Sunrise Point-LP SMBus [8086:9d23] (rev 21)
	Subsystem: Lenovo Sunrise Point-LP SMBus [17aa:3800]
	Kernel driver in use: i801_smbus
	Kernel modules: i2c_i801
</pre>
}}
{{KernelBox|1=
.config - Linux/x86 4.9.95-gentoo Kernel Configuration
 → 
}}


=== ISA bus ===

{{RootCmd|lspci -nn -k|output=
<pre>
00:1f.0 ISA bridge [0601]: Intel Corporation Sunrise Point-LP LPC Controller [8086:9d48] (rev 21)
	Subsystem: Lenovo Sunrise Point-LP LPC Controller [17aa:3800]
</pre>
}}
{{KernelBox|1=
.config - Linux/x86 4.9.95-gentoo Kernel Configuration
 → 
}}

=== Power Management Controler ===
{{RootCmd|lspci -nn -k|output=
<pre>
00:04.0 Signal processing controller [1180]: Intel Corporation Xeon E3-1200 v5/E3-1500 v5/6th Gen Core Processor Thermal Subsystem [8086:1903] (rev 08)
	Subsystem: Lenovo Xeon E3-1200 v5/E3-1500 v5/6th Gen Core Processor Thermal Subsystem [17aa:3800]
00:14.2 Signal processing controller [1180]: Intel Corporation Sunrise Point-LP Thermal subsystem [8086:9d31] (rev 21)
	Subsystem: Lenovo Sunrise Point-LP Thermal subsystem [17aa:3800]
00:1f.2 Memory controller [0580]: Intel Corporation Sunrise Point-LP PMC [8086:9d21] (rev 21)
	Subsystem: Lenovo Sunrise Point-LP PMC [17aa:3800]


</pre>
}}
{{KernelBox|1=
.config - Linux/x86 4.9.95-gentoo Kernel Configuration
→ Device Drivers → Generic Thermal sysfs driver → ACPI INT340X thermal drivers
<M> ACPI INT340X thermal drivers  
<M> ACPI INT3406 display thermal driver
 → Device Drivers → Generic Thermal sysfs driver
<M>   Intel PCH Thermal Reporting Driver
 → Device Drivers → X86 Platform Specific Device Drivers 
[*]   Intel PMC Core driver 

}}

=== SATA SSD ===

{{RootCmd|lspci -nn -k|output=
<pre>
00:17.0 SATA controller [0106]: Intel Corporation Sunrise Point-LP SATA Controller [AHCI mode] [8086:9d03] (rev 21)
	Subsystem: Lenovo Sunrise Point-LP SATA Controller [AHCI mode] [17aa:3800]
	Kernel driver in use: ahci
</pre>
}}
{{KernelBox|1=
.config - Linux/x86 4.9.95-gentoo Kernel Configuration
 → 
}}
{{Note|some issue when formating with ext4 with <pre>inline_data</pre>}}

{{Note| formating with <pre>has_journal,extent,huge_file,flex_bg,uninit_bg,64bit,dir_nlink,extra_isize</pre> seems to not create issues with mount options <pre>rw,noatime,defaults,errors=remount-ro</pre>}}


=== Display ===

Backlight control through brightness buttons works without modification on X


=== Wireless ===

==== Method 1: Using the kernel driver ====

'''Step 1ː''' Configure and compile kernel 

{{RootCmd|lspci -nn -k|output=
<pre>
01:00.0 Network controller [0280]: Intel Corporation Wireless 8260 [8086:24f3] (rev 3a)
	Subsystem: Intel Corporation Wireless 8260 [8086:1130]
	Kernel driver in use: iwlwifi
	Kernel modules: iwlwifi
</pre>
}}
{{KernelBox|1=
.config - Linux/x86 4.9.95-gentoo Kernel Configuration
 → Device Drivers → Network device support → Wireless LAN

<M>     Intel Wireless WiFi Next Gen AGN - Wireless-N/Advanced-N/Ultimate-N (iwlwifi)    
      <M>       Intel Wireless WiFi DVM Firmware support    
      <M>       Intel Wireless WiFi MVM Firmware support  
      [ ]       Enable broadcast filtering (NEW)  
      [*]       Enable runtime power management mode for PCIe devices  
      Debugging Options  --->     

}}

{{Note|1=<pre>rfkill: exports duplicate symbol rfkill_alloc (owned by kernel)</pre>}}

'''Step 2:''' The gentoo package {{Package|sys-kernel/linux-firmware}} is required.
{{emerge|sys-kernel/linux-firmware}}

=== sound ===
{{RootCmd|lspci -nn -k|output=
<pre>
00:1f.3 Audio device [0403]: Intel Corporation Sunrise Point-LP HD Audio [8086:9d70] (rev 21)
	Subsystem: Lenovo Sunrise Point-LP HD Audio [17aa:3800]
	Kernel driver in use: snd_hda_intel
	Kernel modules: snd_hda_intel, snd_soc_skl
</pre>
}}
{{KernelBox|1=
.config - Linux/x86 4.9.95-gentoo Kernel Configuration
 → to complete
→ Device Drivers → Generic Driver Options
-*- Userspace firmware loading support
[*]   Include in-kernel firmware blobs in kernel binary
(i915/skl_dmc_ver1_26.bin) External firmware blobs to build into the kernel binary
(/lib/firmware) Firmware blobs root directory
}}
{{Note|1=
<pre>
soundcore: exports duplicate symbol register_sound_dsp (owned by kernel)
</pre>}}
{{Note|1=The gentoo package {{Package|sys-kernel/linux-firmware}} is required.
{{emerge|sys-kernel/linux-firmware}}
}}


=== bluetooth ===
{{RootCmd|lsusb -t|output=
<pre>
/:  Bus 02.Port 1: Dev 1, Class=root_hub, Driver=xhci_hcd/6p, 5000M
/:  Bus 01.Port 1: Dev 1, Class=root_hub, Driver=xhci_hcd/12p, 480M
    |__ Port 7: Dev 4, If 0, Class=Wireless, Driver=btusb, 12M
    |__ Port 7: Dev 4, If 1, Class=Wireless, Driver=btusb, 12M </pre>
}}
{{KernelBox|1=
 .config - Linux/x86 4.9.95-gentoo Kernel Configuration
 → Search (CONFIG_BT_HCIBTUSB) 

 Symbol: BT_HCIBTUSB [=m]
 Type  : tristate
 Prompt: HCI USB driver
 Location:
  │     -> Networking support (NET [=y])  
  │       -> Bluetooth subsystem support (BT [=m])│  
  │ (1)     -> Bluetooth device drivers│  
  │   Defined at drivers/bluetooth/Kconfig:21│  
  │   Depends on: NET [=y] && BT [=m] && USB [=y]│  
  │   Selects: BT_INTEL [=m]
}}

working under command line (net-wireless/bluez-tools) could pair to an android phone

https://wiki.gentoo.org/wiki/Bluetooth

https://wiki.archlinux.org/index.php/bluetooth

=== misc ===
{{RootCmd|lspci -nn -k|output=
<pre>
00:16.0 Communication controller [0780]: Intel Corporation Sunrise Point-LP CSME HECI #1 [8086:9d3a] (rev 21)
	Subsystem: Lenovo Sunrise Point-LP CSME HECI [17aa:3800]
	Kernel driver in use: mei_me
</pre>
}}
{{KernelBox|1=
.config - 
}}
{{Note| https://www.kernel.org/doc/Documentation/misc-devices/mei/mei.txt Intel Management Engine (Intel ME) is an isolated and protected computing
resource (Co-processor) residing inside certain Intel chipsets.
}}



=== Touchpad and TouchScreen ===
{{RootCmd|lspci -nn -k|output=
<pre>
00:15.0 Signal processing controller [1180]: Intel Corporation Sunrise Point-LP Serial IO I2C Controller #0 [8086:9d60] (rev 21)
	Subsystem: Lenovo Sunrise Point-LP Serial IO I2C Controller [17aa:3800]
	Kernel driver in use: intel-lpss
	Kernel modules: intel_lpss_pci
00:15.1 Signal processing controller [1180]: Intel Corporation Sunrise Point-LP Serial IO I2C Controller #1 [8086:9d61] (rev 21)
	Subsystem: Lenovo Sunrise Point-LP Serial IO I2C Controller [17aa:3800]
	Kernel driver in use: intel-lpss
	Kernel modules: intel_lpss_pci
00:15.3 Signal processing controller [1180]: Intel Corporation Sunrise Point-LP Serial IO I2C Controller #3 [8086:9d63] (rev 21)
	Subsystem: Lenovo Sunrise Point-LP Serial IO I2C Controller [17aa:3800]
	Kernel driver in use: intel-lpss
	Kernel modules: intel_lpss_pci
</pre>
}}
{{KernelBox|1=
.config - Linux/x86 4.9.95-gentoo Kernel Configuration
 → Device Drivers → Multifunction device drivers
<M> Intel Low Power Subsystem support in PCI mode
}}
{{Note|1=<pre>i2c_hid i2c-ITE8396:00: error in i2c_hid_init_report size:19 / ret_size:18</pre>}}

=== SDCARD ===
{{RootCmd|lspci -nn -k|output=
<pre>
02:00.0 SD Host controller [0805]: O2 Micro, Inc. Device [1217:8620] (rev 01)
	Subsystem: Lenovo Device [17aa:3800]
	Kernel driver in use: sdhci-pci
	Kernel modules: sdhci_pci
</pre>
}}
{{KernelBox|1=
.config - 
}}
{{Note| https://www.kernel.org/doc/Documentation/misc-devices/mei/mei.txt Intel Management Engine (Intel ME) is an isolated and protected computing
resource (Co-processor) residing inside certain Intel chipsets.
}}

=== webcam ===
{{RootCmd|lsusb -t|output=
<pre>  
    |__ Port 6: Dev 3, If 0, Class=Video, Driver=uvcvideo, 480M
    |__ Port 6: Dev 3, If 1, Class=Video, Driver=uvcvideo, 480M
}}
{{KernelBox|1=
.config - Linux/x86 4.9.95-gentoo Kernel Configuration
 → Device Drivers → Multimedia support → 
[*]   Cameras/video grabbers support
[*]   Media USB Adapters  --->
       <M>   USB Video Class (UVC) 
       [*]     UVC input events device support
}}
{{Note| https://www.kernel.org/doc/Documentation/misc-devices/mei/mei.txt Intel Management Engine (Intel ME) is an isolated and protected computing
resource (Co-processor) residing inside certain Intel chipsets.
}}
=== driver summary ===

{{RootCmd|lsmod|output=
<pre>
Module                  Size  Used by
rndis_host              6042  0
cdc_ether               5952  1 rndis_host
usbnet                 19420  2 rndis_host,cdc_ether
hid_sensor_custom       9581  0
hid_rmi                12131  0
hid_multitouch         10824  0
hid_sensor_hub          8052  1 hid_sensor_custom
x86_pkg_temp_thermal     5061  0
i2c_designware_platform     6569  0
i2c_designware_core     8595  1 i2c_designware_platform
coretemp                5916  0
kvm_intel             175541  0
kvm                   486500  1 kvm_intel
irqbypass               2808  1 kvm
i2c_i801               17075  0
serio_raw               4529  0
pcspkr                  2099  0
i2c_smbus               3169  1 i2c_i801
sdhci_pci              17009  0
sdhci                  33656  1 sdhci_pci
mmc_core              103624  2 sdhci,sdhci_pci
uas                    13231  0
mei_me                 20170  0
intel_lpss_pci          5134  0
intel_lpss              4641  1 intel_lpss_pci
mei                    53075  1 mei_me
mfd_core                4051  2 hid_sensor_hub,intel_lpss
efivarfs                5279  1
fuse                   81009  1
ext2                   62637  0
hid_sunplus             1720  0
hid_sony               14813  0
hid_samsung             3181  0
hid_pl                  2670  0
hid_petalynx            2265  0
hid_monterey            1848  0
hid_microsoft           3754  0
hid_logitech_dj        10229  0
hid_logitech           24781  0
hid_gyration            2947  0
hid_ezkey               1649  0
hid_cypress             2105  0
hid_chicony             2753  0
hid_cherry              1784  0
hid_belkin              1853  0
hid_apple               5564  0
hid_a4tech              2001  0</pre>
}}

{{RootCmd|lsusb -t|output=
<pre>
/:  Bus 02.Port 1: Dev 1, Class=root_hub, Driver=xhci_hcd/6p, 5000M
/:  Bus 01.Port 1: Dev 1, Class=root_hub, Driver=xhci_hcd/12p, 480M
    |__ Port 1: Dev 2, If 0, Class=Human Interface Device, Driver=usbhid, 1.5M
    |__ Port 6: Dev 3, If 0, Class=Video, Driver=uvcvideo, 480M
    |__ Port 6: Dev 3, If 1, Class=Video, Driver=uvcvideo, 480M
    |__ Port 7: Dev 4, If 0, Class=Wireless, Driver=btusb, 12M
    |__ Port 7: Dev 4, If 1, Class=Wireless, Driver=btusb, 12M </pre>
}}
[[Category:Laptops]]
