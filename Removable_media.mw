[[Mount]]ing removable media, like CDs, DVDs, USB drives or memory cards, needs special handling, because most often you want a regular user to be able to mount ad-hoc an unknown device.

== Prerequisites ==
* Kernel support for your [[:Category:Storage devices|storage device]].
* Kernel support for your [[filesystem]].

== Groups ==

See https://wiki.gentoo.org/wiki/Udisks#Groups

== UUIDs and labels ==

Normally your storage devices are identified by their device file, e.g. {{Path|/dev/sd*}}. Alternatively you use instead their '''UUID''' ('''U'''niversally '''U'''nique '''Id'''entifier) ({{Path|/dev/disk/by-uuid/*}}) or '''label''' ({{Path|/dev/disk/by-label/*}}). In comparison to device files UUIDs and labels are persistent and will never change because of asynchronous detection. The UUID is generated automatically during filesystem creation. The label can be specified at filesystem creation or changed afterwards.

Use {{c|tree /dev/disk/}} or {{c|blkid}} (part of {{Package|sys-apps/util-linux}}) to show all storage devices and their UUIDs and labels or use {{c|lsblk}} with options for more information:

{{Cmd|tree /dev/disk/}}

{{Cmd|/sbin/blkid|output=<pre>
/dev/sda1: LABEL="Gentoo" UUID="339df6e7-91a8-4cf9-a43f-7f7b3db533c6" TYPE="ext4"
</pre>}}

{{Cmd|lsblk -o name,fstype,mountpoint,label,uuid,parttype,partuuid,owner,group,mode}}

== Mounting removable media ==

For [[mount|mounting]] as a normal user without root privileges the device needs an entry with the user option in [[fstab#UUIDs_and_labels|{{Path|/etc/fstab}}]].

Plug the removable medium to the computer then run {{c|tree /dev/disk/}} or {{c|blkid}}.

{{Cmd|/sbin/blkid|output=<pre>
/dev/sda1: UUID="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" TYPE="ext2" PARTUUID="xxxxxxxx-xx"
/dev/sda3: LABEL="System Reserved" UUID="XXXXXXXXXXXXXXXX" TYPE="ntfs" PARTUUID="xxxxxxxx-xx"
/dev/sda4: UUID="XXXXXXXXXXXXXXXX" TYPE="ntfs" PARTUUID="xxxxxxxx-xx"
/dev/sda5: UUID="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" TYPE="swap" PARTUUID="xxxxxxxx-xx"
/dev/sda6: UUID="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" TYPE="reiserfs" PARTUUID="xxxxxxxx-xx"
/dev/sdb1: UUID="A0C1-98A1" TYPE="vfat"
</pre>}}

The {{Path|/dev/sdb1}} line displays the [[Device_file#UUIDs_and_labels|UUID]] A0C1-98A1 to be added to {{Path|/etc/fstab}}.  Let's call it "pendrive" and create a mountpoint for it and add an entry in {{Path|/etc/fstab}}.  

{{RootCmd|mkdir /mnt/pendrive
|chmod 777 /mnt/pendrive}}

{{FileBox|filename=/etc/fstab|<pre>
# <fs>                  <mountpoint>    <type>          <opts>                                  <dump/pass>
...
UUID=A0C1-98A1          /mnt/pendrive   vfat            noauto,rw,user                              0 0
</pre>}}

With the user option in this entry, it can be mounted / unmounted by normal users. 

{{Cmd|mount /mnt/pendrive}}

To see what is mounted, run {{c|mount}} without arguments or {{c|lsblk}}:

{{Cmd|mount|output=<pre>
/dev/sdb1 on /mnt/pendrive type vfat (rw,nosuid,nodev,noexec,relatime,uid=1000,gid=1000,fmask=0022,dmask=0022,codepage=437,iocharset=iso8859-1,shortname=mixed,errors=remount-ro,user=larry)
</pre>}}

{{Cmd|lsblk|output=<pre>
NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sdb      8:16   1  3.8G  0 disk 
└─sdb1   8:17   1  3.8G  0 part /mnt/pendrive
</pre>}}

{{Cmd|umount /mnt/pendrive}}

Mounting without the fstab entry can be done by root only.

{{RootCmd|mount UUID{{=}}A0C1-98A1 /mnt/pendrive}}

{{Cmd|mount|output=<pre>
/dev/sdb1 on /mnt/pendrive type vfat (rw,relatime,fmask=0022,dmask=0022,codepage=437,iocharset=iso8859-1,shortname=mixed,errors=remount-ro)
</pre>
}}

For further details see {{c|man 8 mount}}.

Once the device is connected and mounted, you can access it like a normal hard disk. Usual operations like {{c|cp}}, {{c|mv}}, {{c|rm}}, etc work fine. You could also create a filesystem on the device and format it.

== MTP ==

For media using the '''MTP''' ('''M'''edia '''T'''ransfer '''P'''rotocol) protocol see the [[MTP]] article.

== udisks ==
[[udisks]] is a daemon to manage mounting of removable media. It mounts filesystems to subfolders of {{Path|/media}}.

=== KDE ===
[[KDE]] supports udisks with its Solid framework. After plugging in the media shows up:
* in the '''device notifier''' widget
* in the start menu under '''Computer -> Places'''
* in Dolphin in the sidebar under '''Places'''

== See also ==
* [[mount]] - Manual mount.
* [[fstab]] - Automatic mount at boot time.
* [[AutoFS]] - Automatic mount on access.

[[Category:Filesystems]]
