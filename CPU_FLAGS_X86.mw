{{DISPLAYTITLE:CPU_FLAGS_X86}}

The USE flags corresponding to the instruction sets and other features specific to the x86 ({{Keyword|amd64}}) architecture are being moved into a separate USE flag group called <var>CPU_FLAGS_X86</var>.

In order not to lose CPU-specific optimizations, users will be required to update their {{Path|make.conf}} (and {{Path|package.use}}) file. For example, if the following USE flags were present:
{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
USE="mmx mmxext sse sse2 sse3"
}}

Those flags need to be copied into:
{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
CPU_FLAGS_X86="mmx mmxext sse sse2 sse3"
}}

{{Note|The same <var>CPU_FLAGS_X86</var> variable is used both on {{Keyword|x86}} and {{Keyword|amd64}} systems.}}

When in doubt, consult the flag descriptions using one of the commonly available tools, e.g. <code>equery uses</code> from {{Package|app-portage/gentoolkit}}:
{{Cmd|equery uses media-video/ffmpeg}}

Most of the flag names match {{Path|/proc/cpuinfo}} names, with the notable exception of <code>sse3</code> which is called <code>pni</code> in {{Path|/proc/cpuinfo}} (please also
do not confuse it with distinct <code>ssse3</code>).

To help users enable the correct USE flags, a Python script is provided that generates the correct value using {{Path|/proc/cpuinfo}}. It can be found in the {{Package|app-portage/cpuinfo2cpuflags}} package:
{{Emerge|app-portage/cpuinfo2cpuflags}}
{{Cmd|cpuinfo2cpuflags-x86}}

In order to ensure safe migration and maintain compatibility with external repositories, it is recommended to preserve the old USE settings for a period of one year or until no package of interest is still using them.

== See also ==

* [[:/etc/portage/make.conf#CPU_FLAGS_X86]]

== External resources ==

* [https://www.gentoo.org/support/news-items/2015-01-28-cpu_flags_x86-introduction.html CPU_FLAGS_X86 introduction]
