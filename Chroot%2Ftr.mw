<languages />

{{InfoBox stack
|{{InfoBox wikipedia|header=true}}
}}

<div class="mw-translate-fuzzy">
Chroot('''Ch'''ange '''root''' - Kökü değiştir), var olan kök dizinden farklı bir dizini kök dizin kabul ederek, ana sistemden mantıken bağımsız bir izole ortama geçiş yapmayı sağlayan bir Unix sistem aracıdır. Bu ortam "chroot hapishanesi" diye de anılır. Bu hapishanede çalışan kullanıcı, kendisine kök olarak tanımlanmış dizinin dışarısını göremez.
</div>

Chroot'un ana kullanım alanlarından birisi Linux sistemi içerisinde test veya uyumluluk amaçlı farklı bir sistem ortamı yaratmaktır. Sanallaştırma yazılımı gerektirmediği için genelde sanallaştırmaya hafif bir alternatif olarak görülür.

== Prerequisites ==

<div class="mw-translate-fuzzy">
==Ortamın ayarlanması==
</div>

Yeni bir kuruluma başlarken ilk olarak yapmanız gereken işlem chroot olarak kullanılacak dizinin oluşturulmasıdır, örneğin {{Path|/mnt/chrootdizini}}

{{Cmd
|mkdir /mnt/chrootdizini
|cd /mnt/chrootdizini
}}

Farklı bir disk bölümünde zaten var olan bir kurulumu bağlamak isterseniz aşağıdaki komutu çalıştırabilirsiniz. <code><AYGIT></code> yerine kurulumun yapıldığı disk bölümün girdiğinize emin olun:

{{Cmd
|mkdir /mnt/chrootdizini
|mount /dev/AYGIT /mnt/chrootdizini
}}

Zaten bulunduğunuz kök dizinin altında bir kurulum var ise, yukarıdaki adımları uygulamanıza gerek yok.

<div class="mw-translate-fuzzy">
==Yeni kurulum için sistem ve Portage dosyalarını açma==
</div>

<div class="mw-translate-fuzzy">
Yeni bir kurulum yapıyorsanız, sonraki adım stage3 ve Portage sıkıştırılmış dosyalarını indirip chroot dizini içerisine açmaktır. Detaylı bilgi için [http://www.gentoo.org/doc/en/handbook/handbook-amd64.xml?part=1&chap=5 kurulum dökümanı]nın 5a ve 5b bölümlerine göz atınız.
</div>

<div class="mw-translate-fuzzy">
{{RootCmd
|links http://distfiles.gentoo.org/releases/amd64/current-stage3/
|tar xvjpf stage3-*.tar.bz2 -C /mnt/chrotdizini
|links http://distfiles.gentoo.org/snapshots/
|tar xvjf portage-*.tar.bz2 -C /mnt/chrotdizini/usr
}}
</div>

==Yapılandırma==

Chroot'a giriş yapmadan önce bazı dizinleri bağlamamız (mount etmemiz) gerekmekte:

<div class="mw-translate-fuzzy">
{{RootCmd
|mount -o bind /dev /mnt/chrootdizini/dev
|mount -t proc none /mnt/chrootdizini/proc
|mount -o bind /sys /mnt/chrootdizini/sys
|mount -o bind /tmp /mnt/chrootdizini/tmp
}}
</div>

Ayrıca ana sistemden bazı temel yapılandırma dosyalarını da kopyalamalısınız. Bu aşamada yeni kurulum değilse {{Path|make.conf}} dosyasını kopyalamayın:

{{Cmd
|cp /etc/portage/make.conf /mnt/chrootdizini/etc/portage # Yeni kurulum değilse bu adımı es geçin.
|cp /etc/resolv.conf /mnt/chrootdizini/etc
}}

== Usage ==

Artık chroot ortamına giriş yapabiliriz:

<div class="mw-translate-fuzzy">
{{RootCmd
|chroot /mnt/chrootdizini /bin/bash
|env-update
|source /etc/profile
|<nowiki>export PS1="(chroot) $PS1"</nowiki>
}}
</div>

Yeni kurulum sırasında Pportage'ı senkronize edip herşeyin güncel olduğuna emin olun.

<div class="mw-translate-fuzzy">
{{RootCmd
|emerge --sync
}}
</div>

<div class="mw-translate-fuzzy">
Sistem artık hazır. Yeni yazılım kurabilir, yapılandırma değişiklikleri yapabilir ve dilediğiniz paketleri test edebilirsiniz. Chroot altında yaptığınız işlemlerin ana sisteme herhangi bir etkisi olmayacaktır. Ortamdan çıkıp ana sisteme dönmek için <kbd>exit</kbd> komutu verebilir veya {{Key|Ctrl}}+{{Key|D}} kombinasyonunu kullanabilirsiniz. Bağladığınız dizinleri ayırmayı (umount) unutmayın.
</div>

<div class="mw-translate-fuzzy">
==Init betikleri==
</div>

<div class="mw-translate-fuzzy">
Eğer bu işlemi sık yapıyorsanız, chroot için gerekli dizinlerin bağlanmasını init betiği kullanarak hızlandırabilirsiniz:
</div>

<div class="mw-translate-fuzzy">
{{FileBox|filename=/etc/init.d/chrootbagla|lang=bash|1=
#!/sbin/runscript
 
depend() {
   need localmount
   need bootmisc
}
 
start() {
     ebegin "Chroot dizinleri baglaniyor"
     mount -o rbind /dev /mnt/chrootdizini/dev > /dev/null &
     mount -t proc none /mnt/chrootdizini/proc > /dev/null &
     mount -o bind /sys /mnt/chrootdizini/sys > /dev/null &
     mount -o bind /tmp /mnt/chrootdizini/tmp > /dev/null &
     eend $? "Chroot dizinleri baglanirken hata olustu"
}
 
stop() {
     ebegin "Chroot dizinleri ayriliyor"
     umount -f /mnt/chrootdizini/dev > /dev/null &
     umount -f /mnt/chrootdizini/proc > /dev/null &
     umount -f /mnt/chrootdizini/sys > /dev/null &
     umount -f /mnt/chrootdizini/tmp > /dev/null &
     eend $? "Chroot dizinleri ayrilirken hata olustu"
}
}}
</div>

Eğer farklı bir dizin veya disk bölümü kullanıyorsanız gerekli değişiklikleri yapmayı unutmayın.

==Ayrıca bkz.==

<div class="mw-translate-fuzzy">
* [[Project:X86/Chroot Guide|Chroot Belgesi]]
</div>


[[Category:Core system]]
