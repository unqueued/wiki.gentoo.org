<languages />
<translate>
<!--T:72-->
{{Metadata|abstract=GNOME is a popular desktop environment. This guide tries to describe all aspects of GNOME, including installation, configuration, usage, and more!}}
{{Dated|date=March 23, 2016}}
{{InfoBox stack
|{{InfoBox homepage|https://www.gnome.org/|header=true}}
|{{InfoBox wikipedia}}
}}

<!--T:73-->
GNOME is a popular [[desktop environment]]. This guide tries to describe all aspects of GNOME, including installation, configuration, usage, and more!

== What is GNOME? == <!--T:2-->

=== The project === <!--T:3-->

<!--T:4-->
The [https://www.gnome.org/ GNOME project] is a free software project dedicated to the development of GNOME, a Unix/Linux desktop suite and development platform. The [https://www.gnome.org/foundation/ GNOME Foundation] coordinates the development and other aspects of the GNOME Project. 

=== The software === <!--T:5-->

<!--T:6-->
GNOME is a desktop environment and a development platform. This piece of free software is the desktop of choice for several industry leaders. It is interesting both for business users, home users, and developers. 

=== The community === <!--T:7-->

<!--T:8-->
Like with any big free software project, GNOME has an extensive user and development base. [http://planet.gnome.org/ GNOME Planet] is a popular blog aggregator for GNOME hackers and contributors whereas [https://developer.gnome.org/ developer.gnome.org] is for the GNOME developers. [https://help.gnome.org/users/ GNOME Library] contains a huge list of GNOME resources for end users. The [https://plus.google.com/+WorldofGnomeOrg WOGUE] is also a popular aggregator for GNOME-related news.

== Prerequisites == <!--T:74-->

<!--T:75-->
Before the GNOME install process, first read and follow the instructions in the [[Xorg/Guide|Xorg guide]] to setup a X environment. X is the standard base for all desktop environments in Linux. Also, be sure to read and comply with all the settings from the [[systemd|systemd]] article.

<!--T:105-->
{{Note|If the reader does not want to use GNOME with systemd, please read the [[GNOME/GNOME_Without_systemd|GNOME without systemd]] article.}}

== Installation == <!--T:9--> 

<!--T:12-->
Before installing GNOME, editing the system's USE variables is a good idea. Make sure that <code>X</code>, <code>gtk</code>, and <code>gnome</code> are in the USE variable located in {{Path|/etc/portage/make.conf}}. It is recommended to enable support for [[D-Bus]] system-wide. Systemd includes this system message bus. Add <code>systemd</code> to the USE variable as well (D-Bus is a system message bus that GNOME uses extensively). If no KDE support is required, remove <code>qt4</code>, <code>qt5</code> and <code>kde</code> from USE. USE flags can be removed by adding a minus sign (<code>-</code>) in front of them. See the example below for the minus sign used properly.

<!--T:13-->
{{FileBox|filename=/etc/portage/make.conf|title=Example global USE flags for a GNOME desktop environment|lang=bash|1=
USE="-qt4 -qt5 -kde X gtk gnome systemd"
}}

<!--T:14-->
Adding the <code>branding</code> USE flag provides a lovely Gentoo-branded splash screen instead of the default GNOME splash screen:

<!--T:15-->
{{RootCmd|echo "gnome-base/gnome-session branding" >> /etc/portage/package.use}}

<!--T:16-->
{{Note|When using the <code>desktop/gnome/systemd</code> profile, these USE flags will be set automatically. It is possible to check the system profile by running {{c|eselect profile list}}. Modifications can be made by running {{c|eselect profile set <profile-name>}} as root. Be sure to replace "<profile-name>" with the number or name of the desired profile.}}

<!--T:17-->
Once finished, begin the GNOME installation by emerging GNOME: 

<!--T:18-->
{{Emerge|gnome-base/gnome}}

<!--T:19-->
For a ''minimal'' GNOME installation install the {{Package|gnome-base/gnome-light}} package. This option provides a lightweight GNOME installation without pulling in the full GNOME [[desktop environment]]. Most people may need to install additional packages afterwards.

<!--T:20-->
{{Emerge|gnome-base/gnome-light}}

<!--T:21-->
This will take a while, so start reading some books. Done? Great, now update environment variables: 

<!--T:22-->
{{RootCmd|env-update && source /etc/profile}}

<!--T:23-->
Next the remaining services and user groups will be cleaned. 

<!--T:25-->
Verify the <code>plugdev</code> group exists. If it does, it is advisable to make each GNOME user member of that group, but step this is optional (the group is not common anymore). 

<!--T:26-->
{{RootCmd|getent group plugdev|output=<pre>
plugdev:x:104:
</pre>}}

<!--T:27-->
Substitute <code><username></code> in the next command with each GNOME user's user name:

<!--T:28-->
{{RootCmd|gpasswd -a <username> plugdev}}

== First impressions == <!--T:29-->

<!--T:30-->
It is time to take a look at what was just built. Either configure the session manager to run GNOME when the the {{c|startx}} command is invoked (see [[Xorg/Guide#Using_startx|using startx]] in the Xorg guide for more information), or enable the [[GNOME/gdm|GDM service]], for a more convenient way to start Gnome.

=== Enabling GDM === <!--T:87-->

==== Systemd ==== <!--T:88-->

<!--T:89-->
To start GDM upon boot:

<!--T:90-->
{{RootCmd|systemctl enable gdm.service}}

<!--T:91-->
To start GDM immediately, run:

<!--T:92-->
{{RootCmd|systemctl start gdm.service}}

<!--T:93-->
{{Tip|The following command both enables and starts GDM immediately:
{{RootCmd|systemctl enable --now gdm.service}} }}

<!--T:94-->
Another suggestion is to [[NetworkManager#systemd|activate Network Manager]], in case no other network managing service is activated.

==== OpenRC ==== <!--T:95-->

<!--T:96-->
OpenRC provides a script, XDM, to start up display managers. The following edit will set GDM as the default display manager:

<!--T:97-->
{{FileBox|filename=/etc/conf.d/xdm|title=Setting GDM as the default display manager|lang=bash|1=
DISPLAYMANAGER="gdm"
}}

<!--T:98-->
To start GDM on boot, add the XDM init script to the system's default runlevel:

<!--T:99-->
{{RootCmd|rc-update add xdm default}}

<!--T:100-->
To start GDM immediately, run:

<!--T:101-->
{{RootCmd|/etc/init.d/xdm start}}

<!--T:102-->
Again, a good suggestion is to [[NetworkManager#OpenRC|activate Network Manager]], in case no other network managing service is activated.

=== Using startx === <!--T:103-->

<!--T:104-->
Exit the root shell and log in as a regular user. The next step is to configure the session manager to run GNOME when the the {{c|startx}} command is invoked (see [[Xorg/Guide#Using_startx|using startx]] in the Xorg guide for more information).

<!--T:31-->
{{Cmd|echo "exec gnome-session" > ~/.xinitrc}}

<!--T:32-->
Starting with gnome-base/gnome-session-2.26.2, users will need to prepend the <var>XDG_MENU_PREFIX</var> variable to get the GNOME menus when using the {{Path|~/.xinitrc}} method to start the desktop. If {{Path|~/.xinitrc}} is not being used it will be handled automatically; no additional configuration is needed. 

<!--T:33-->
{{Cmd|sed -i '1i\export XDG_MENU_PREFIX{{=}}gnome-' ~/.xinitrc}}

<!--T:34-->
Now start the graphical environment by issuing {{c|startx}}: 

<!--T:35-->
{{Cmd|startx}}

<!--T:36-->
If all goes well GNOME should happily provide a greeting. Congratulations on setting up GNOME!

== Customizing Gnome == <!--T:77-->

<!--T:78-->
For extra configuration options in GNOME 3 install the {{Package|gnome-extra/gnome-tweak-tool}} package. The tweak tool allows customization at a deeper level than the standard Settings frame.

=== Widgets in GNOME 3 === <!--T:79-->

<!--T:80-->
By default in Gentoo Gnome 3 does not support widgets. For users who wish to obtain widget functionality a separate package is available:

<!--T:81-->
{{Emerge|gnome-extra/gnome-shell-extensions}}

<!--T:82-->
After the Shell Extensions are installed, {{c|eselect}} can be used to control defaults on a global level:

<!--T:83-->
{{RootCmd|eselect gnome-shell-extensions list|output=<pre>
Available extensions (* means enabled for all users by default):
  [1]   alternate-tab@gnome-shell-extensions.gcampax.github.com
  [2]   apps-menu@gnome-shell-extensions.gcampax.github.com
  [3]   auto-move-windows@gnome-shell-extensions.gcampax.github.com
  [4]   drive-menu@gnome-shell-extensions.gcampax.github.com
  [5]   launch-new-instance@gnome-shell-extensions.gcampax.github.com
  [6]   native-window-placement@gnome-shell-extensions.gcampax.github.com
  [7]   places-menu@gnome-shell-extensions.gcampax.github.com
  [8]   screenshot-window-sizer@gnome-shell-extensions.gcampax.github.com
  [9]   user-theme@gnome-shell-extensions.gcampax.github.com
  [10]  window-list@gnome-shell-extensions.gcampax.github.com
  [11]  windowsNavigator@gnome-shell-extensions.gcampax.github.com
  [12]  workspace-indicator@gnome-shell-extensions.gcampax.github.com
</pre>}}

=== Enable click-to-install Shell Extensions through the web browser ===

For web browsers such as [[Google Chrome]], [[Chromium]], and [[Vivaldi]] be sure to get the required browser add-on through the Chrome store: https://chrome.google.com/webstore/detail/gphhapmejobijbbhgpjhcjognlahblep

[[Firefox]] users can get it here: https://addons.mozilla.org/firefox/addon/gnome-shell-integration/

[[Opera]] users will have to snag it here: https://addons.opera.com/extensions/details/gnome-shell-integration/

After the add-on has been installed for the browser of choice, a backend must also be emerged:

{{Emerge|gnome-extra/chrome-gnome-shell}}

It should now be possible to install, manage, and uninstall shell extensions at https://extensions.gnome.org/

If things are not working as expected check the [https://wiki.gnome.org/Projects/GnomeShellIntegrationForChrome/Installation upstream installation instructions] for news.

== Removal == <!--T:60-->

=== Unmerge === <!--T:61-->

<!--T:62-->
A possible way to completely remove a GNOME installation is by explicitly uninstalling the {{Package|gnome-base/gnome}} package, then cleaning the dependencies of that package.

<!--T:63-->
In order to do this sanely make sure the main Portage repository has been synced:

<!--T:64-->
{{RootCmd|emerge --sync}}

<!--T:65-->
Next, run a world update so that the system is fully up-to-date:

<!--T:66-->
{{Emerge|params+=--update --newuse --deep --with-bdeps=y|@world}}

<!--T:67-->
Unmerge the GNOME base package:

<!--T:68-->
{{Emerge|params+=--depclean|gnome-base/gnome}}

<!--T:69-->
Finally, depclean the system:

<!--T:70-->
{{RootCmd|emerge --ask --depclean}}

<!--T:71-->
GNOME should now be removed.

== Troubleshooting == <!--T:76-->

=== Oh no something has gone wrong === <!--T:84-->

<!--T:85-->
One source of this error can be the permissions for the video device. When logging in fails and a message appears that says "Oh no, something has gone wrong", then try to become a member of the {{c|video}} group.  Add the user to the video group with {{c|gpasswd}} like so:

<!--T:86-->
{{RootCmd|gpasswd -a <user> video}}

	
== External resources == <!--T:52-->

<!--T:55-->
* https://plus.google.com/+WorldofGnomeOrg - The World of GNOME Google+ page.

<!--T:57-->
* https://github.com/dantrell/gentoo-project-gnome-without-systemd - GNOME without Systemd

</translate>

[[Category:GNOME]]

{{Migrated|originalauthors=Lars Strojny, nightmorph}}
