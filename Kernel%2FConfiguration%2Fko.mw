<languages />

{{Metadata|abstract=이 글에서는 리눅스 커널을 직접 설정하고 설치하는 방법을 설명합니다. 검증된 방법을 찾으신다면, genkernel 글을 살펴보십시오.}}

This article describes the manual configuration and setup of the [[Kernel|Linux kernel]]. For an automatic method see the [[genkernel]] article.

== 심볼릭 링크 설정 ==

{{Path|/usr/src/linux}} 심볼릭 링크는 언제든  현재 사용하는 커널 소스를 가리킵니다. 다음 세가지 방법 중 하나로 끝낼 수 있습니다:

; 1. 활성 ''symlink'' [[USE flag]]로 커널 소스를 설치합니다
: {{Path|/usr/src/linux}}가 가리키는 곳을 새로 설치한 커널 소스로 가도록 합니다. 필요하다면 다음의 수정된 두가지 방식으로 나중에 수정할 수 있습니다:

; 2. '''eselect'''로 심볼릭 링크를 선택합니다:

: {{RootCmd| eselect kernel list |
  |output=Available kernel symlink targets:<br/> &nbsp; [1] linux-3.3.8-gentoo *<br/> &nbsp; [2] linux-3.4.9-gentoo
}}

: 이 출력 내용은 사용할 수 있는 커널 소스를 포함합니다. 별표 기호는 선택한 소스를 나타냅니다. 커널 소스를 바꾸려면 (예: 두번째 항목) 다음처럼 하십시오:

: {{RootCmd|eselect kernel set 2}}

; 3. 직접 심볼릭 링크를 설정합니다:

: {{RootCmd|ln -sf /usr/src/linux-3.4.9-gentoo /usr/src/linux |
  |ls -l /usr/src/linux |
  |output=lrwxrwxrwx 1 root root 11 Aug 29 22:10 /usr/src/linux -> /usr/src/linux-3.4.9-gentoo}}
<!-- The output is the same as the target file in the ln command. -->

=== 설정 파일 ===

커널에서는 자체를 설정할 수 있는 몇가지 도구를 제공합니다:

; '''make config'''
: 텍스트 기반 설정입니다. 옵션은 하나씩 그 다음에 뜹니다. 모든 옵션에 대해 답해야 하며, 앞에서 제시한 옵션의 순서를 뒤바꾸는 접근은 불가능합니다.

; '''make menuconfig'''
; 그래픽 메뉴입니다(텍스트 입력만 가능). 메뉴로 탐색할 수 있으며 원하는 옵션을 바꿀 수 있습니다.

; '''make nconfig'''
; ncurses를 기반으로 하는 그래픽 메뉴입니다. {{Package|sys-libs/ncurses}}를 설치해야 합니다.

; '''make xconfig'''
:  Qt4를 사용하는 그래픽 메뉴입니다. {{Package|dev-qt/qtgui}}를 설치해야 합니다.

; '''make gconfig'''
: GTK+를 사용한 그래픽 메뉴입니다.  {{Package|x11-libs/gtk+}}, {{Package|dev-libs/glib}}, {{Package|gnome-base/libglade}}를 설치해야 합니다.

; '''make oldconfig'''
: 커널 버전간 바뀐 내용을 검토하고 커널에 대한 새 .config 파일로 업데이트합니다.


기타 기본 설정을 만들 몇가지 스크립트도 있습니다. 다음을 보십시오:

{{RootCmd|make help}}

== 설정 ==

이 글에서는 '''make menuconfig'''를 사용하여 설정하는 방법을 설명합니다만, 절차는 다른 메뉴랑 비슷합니다.

{{RootCmd|cd /usr/src/linux
|make menuconfig}}

=== 사용법 ===

In the shown menu the blue bar indicates your position. With the arrow keys {{Key|up}} and {{Key|down}} you can change the position. The arrow keys {{Key|left}} and {{Key|right}} traverse the menu bar in the bottom and define, what happens, when you hit the {{Key|Enter}} key. '''Select''' switches to a sub menu - the menu entries ending with ''--->'' - , while '''Exit''' exits a sub menu. Alternative you can hit the {{Key|Esc}} key twice.

Menu entries, which start with brackets, are drivers or features which can be activated:

; [ ], [*]
: Options in square brackets can be activated or deactivated. The asterisk marks the menu entry as activated. You change the value with the {{Key|space}} key or press {{Key|Y}} ('''Y'''es) to activate or {{Key|N}} ('''N'''o) to deactivate the entry.
: Is the option is activated, the chosen driver will be built into the kernel and will always be available at boot time.

; < >, <M>, <*>
: Options in angle brackets can be activated or deactivated, but also activated as module (indicated by a ''M''). You change the value as before and press key {{Key|M}} for activate as module.
: See the [[Kernel Modules]] article for differentiation.

; {M}, {*}
: Options in curly brackets can be activated or activated as module but not be deactivated, because another driver needs this activated in either way.

; -M-, -*-
: Options between hyphens are activated in the shown way by another driver. There is no choice.


게다가 어떤 항목은 마지막에 이런 표시를 붙였습니다:

; (NEW)
: 이 드라이버는 커널에 새로 도입했으며 충분히 안정하지 않을 수 있습니다.

; (EXPERIMENTAL)
: This driver is experimental and most likely not stable enough.

; (DEPRECATED)
: This driver is deprecated and not needed for most systems.

; (OBSOLETE)
: This driver is obsolete and should not be activated.


Most options have a description, which get by pressing the {{Key|H}} key or choose in the menu bar '''Help'''.

=== 드라이버 선택 ===

[[:Category:Hardware|하드웨어]] 분류의 [[hardware detection|하드웨어 감지]] 글을 보십시오.

=== 모듈 검색 ===
''menuconfig''에서 모듈을 키보드로 검색하려면 {{Key|/}} 키를 사용할 수 있습니다.

=== 젠투 리눅스 일반 설정 활성화 ===

There is a kernel configuration option called <code>CONFIG_GENTOO_LINUX</code> only present in {{Package|sys-kernel/gentoo-sources}} and other [[Project:Kernel|Kernel Project]] maintained kernels. It does nothing on its own, but sets various required configuration options for typical installations.

This setting automatically selects tmpfs and devtmpfs support, which are needed for handling {{Path|/dev}} on Gentoo Linux, but might be expanded in the future to enable other mandatory settings for a Gentoo Linux system. For more information, read the help information available through the kernel configuration system as described earlier in this guide.

== 빌드 ==

커널을 설정한 다음 컴파일해야 합니다:

{{RootCmd|make}}

프로세서 코어가 여러개 있다면 모든 코어가 동작할 수 있게 할 수 있습니다. 이렇게 하려면 '''-j(NUMBER_CORES +1)''' 매개 변수를 추가하십시오. 듀얼 코어 프로세서에 대해서는 다음과 같습니다:

{{RootCmd|make -j3}}

== 설치 ==

드라이버를 모듈로 활성화 했다면, 설치해야 합니다:

{{RootCmd|make modules_install}}

모듈은 {{Path|/lib/modules}}의 하위 디렉터리에 복사합니다.

실제 커널을 설치하려면:

{{RootCmd|make install}}

이 명령은 {{Package|sys-apps/debianutils}} 꾸러미의 일부인 '''/sbin/installkernel''' 을 실행합니다. ''새 커널은 {{Path|/boot/vmlinuz-{version}}}에 설치합니다. {{Path|/boot/vmlinuz}} 심볼릭 링크가 이미 있다면, 새 커널에 대해 만든{{Path|/boot/vmlinuz}} 링크를 만들고 바꾸며, 이전에 설치한 커널은 {{Path|/boot/vmlinuz.old}}로 둡니다.''(''installkernel'' [[man page]]). {{Path|config}}와 {{Path|System.map}}파일과 같습니다. 이 심볼릭 링크는 파일 경로를 바꾸지 않고 새로운 커널을 가리키기 때문에 단순합니다(예: 부트로더 설정에서 쓸 수 있습니다).

== 부트로더 ==

[[bootloader|부트 로더]] 설정을 바꾸어 새 커널로 부팅하도록 고르십시오.

마지막으로 새 커널로 시스템을 다시 부팅하십시오.

[[Category:Kernel]]
