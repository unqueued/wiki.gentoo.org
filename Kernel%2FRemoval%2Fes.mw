<languages />

{{Metadata|abstract=Este artículo describe la eliminación de núcleos antiguos.}}

Este artículo describe la eliminación de [[kernel/es|núcleos]] antiguos

== Eliminar los fuentes del núcleo ==

Después de instalar un nuevo núcleo y comprobar que  funciona correctamente , el núcleo antiguo se puede eliminar. Para eliminar los fuentes del núcleo antiguo. se puede utilizar la opción ''-depclean'' (la forma corta es ''-c'') para eliminar todas las versiones que no se están utilizando de un paquete ranurado (slotted) por ejemplo {{Package|sys-kernel/gentoo-sources}}.

{{Emerge|params+=--depclean|gentoo-sources}}

Be sure to verify that it is not removing the sources for the currently running kernel. (See [[Kernel/Upgrade|kernel upgrade]] article on how to upgrade.)

=== Proteger los fuentes del núcleo ===

Si ha instalado nuevos fuentes del núcleo y lanza ''--depclean'' antes de cambiar a los nuevos fuentes, los fuentes actuales se eliminarán. Seguramente no deseará este cambio si va a trabajar con los fuentes actuales ya que puede necesitarlos, por ejemplo, para actualizar módulos externos del núcleo,. Es por tanto una buena práctica añadir la versión específica del núcleo a su fichero world para protegerlo de las operaciones ''--depclean''.

{{Emerge|params+=--noreplace|gentoo-sources:3.3.8}}

Observe la notación para las ranuras (slots), en la que se utilizan los dos puntos en lugar del guión. Cada versión del núcleo está en su propia ranura.

== Eliminar los sobrantes del núcleo ==

=== Usar eclean-kernel ===

La simple herramienta {{Package|app-admin/eclean-kernel}} se utiliza para la eliminación y limpieza de versiones antiguas del núcleo. Ésta elimina tanto los ficheros construidos como los directorios necesarios para la construcción si no se referencian desde ningún otro núcleo que se conserve.

Por ejemplo, para mantener los últimos tres núcleos:

{{RootCmd|eclean-kernel -n 3}}

=== Eliminación manual ===

Portage however only removes the files it installed - the files generated during the kernel build and installation remain. They can be safely removed.

* When a kernel is built in the source directory, files generated during the build process remain, and are not removed by Portage:

: {{RootCmd|rm -r /usr/src/linux-3.X.Y}}

* During kernel setup, the kernel modules are copied to a sub directory of <tt>/lib/modules/</tt>:

: {{RootCmd|rm -r /lib/modules/3.X.Y}}

* The old files in {{Path|/boot}} can also be removed:

: {{RootCmd|rm /boot/kernel-3.X.Y|rm /boot/System.map-3.X.Y|rm /boot/config-3.X.Y}}

* Lastly, remove all leftover entries from your bootloader's config file.

[[Category:Kernel]]
