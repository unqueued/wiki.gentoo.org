<languages />

{{Lowercase title}}
{{InfoBox stack
|{{InfoBox homepage|https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi|header=true}}
|{{InfoBox gitweb|https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/drivers/net/wireless/intel/iwlwifi/Kconfig|text=gitweb Driver|raw=true}}
}}

'''iwlwifi''' は [https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi#introduction Intel の現行の無線チップ]のための無線ドライバです。

== カーネル ==

動作させるためにはカーネルコンフィグが必要です。ドライバは 802.11a/b/g/n/ac（デバイスによって異なります）をサポートしているので、IEEE 802.11 を有効にする必要があります。

=== IEEE 802.11 ===

{{:Wifi/IEEE 802.11/ja}}

=== iwlwifi デバイスドライバ ===

Intel の[https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi#supported_devices 現行の無線チップ]にはこのドライバを使用してください。次に示すとおり、モジュール <code>&lt;M&gt;</code> として設定してください。加えて、[https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi?s%5b%5d=iwldvm#firmware DVM] または [https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi?s%5b%5d=iwlmvm#firmware MVM] のうち正しいほうを[https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi#firmware ファームウェアの表]の '''Module''' の列を見て選択する必要があります。

{{KernelBox|title=linux-4.9|1=
        Device Drivers  --->
 
        [*] Network device support  --->
 
        --- Network device support
        [*]   Wireless LAN  --->
 
            --- Wireless LAN
            [ ]   ADMtek devices
            [ ]   Atheros/Qualcomm devices
            [ ]   Atmel devices
            [ ]   Broadcom devices
            [ ]   Cisco devices
            [*]   Intel devices
            < >     Intel PRO/Wireless 2100 Network Connection
            < >     Intel PRO/Wireless 2200BG and 2915ABG Network Connection
            < >     Intel Wireless WiFi 4965AGN (iwl4965)
            < >     Intel PRO/Wireless 3945ABG/BG Network Connection (iwl3945)
            <M>     Intel Wireless WiFi Next Gen AGN - Wireless-N/Advanced-N/Ultimate-N (iwlwifi)
            <M>       Intel Wireless WiFi DVM Firmware support
            <M>       Intel Wireless WiFi MVM Firmware support
            [ ]       Enable broadcast filtering (NEW)
            [ ]       Enable runtime power management mode for PCIe devices (NEW)
                      Debugging Options  --->
            [ ]   Intersil devices
            [ ]   Marvell devices
            [ ]   MediaTek devices
            [ ]   Ralink devices
            [ ]   Realtek devices
            [ ]   Redpine Signals Inc devices
            [ ]   STMicroelectronics devices
            [ ]   Texas Instrument devices
            [ ]   ZyDAS devices
            < >   Simulated radio testing tool for mac80211
            < >   Wireless RNDIS USB support
}}

{{Important|In case the driver is built into the kernel (<code>&lt;*&gt;</code>) instead as a module (<code>&lt;M&gt;</code>), also the firmware needs to be built [[Kernel_Modules#Compile-in-kernel_modules_vs_Loadable_kernel_modules_.28LKMs.29|into the kernel]]. See the section [[#When using built-in configuration|When using built-in configuration]].
<br />After changes on kernel configuration do not forget to [[Kernel/Rebuild|rebuild the kernel]].}}

カーネルを再ビルドし、このカーネルで再起動したら、選択は次のように確認できます：

{{Note|{{Path|/proc/config.gz}} 疑似ファイルのサポートは [[Kernel/IKCONFIG_Support]] 機能によって有効になります。}}

{{Cmd|zgrep 'IWLWIFI\{{!}}IWLDVM\{{!}}IWLMVM' /proc/config.gz}}

== ファームウェア ==

Also firmware for the individual device is needed as listed in [https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi#firmware this table]. It is available in {{Package|sys-kernel/linux-firmware}} and in device-specific [https://packages.gentoo.org/packages/search?q=sys-firmware%2Fiwl sys-firmware/iwlxxxx-*ucode] packages.

{{Emerge|sys-kernel/linux-firmware}}

=== カーネルに組み込むための設定 ===

In case the driver is built into the kernel (<code><*></code>) instead as a module (<code><M></code>), also the firmware needs to be built [[Kernel_Modules#Compile-in-kernel_modules_vs_Loadable_kernel_modules_.28LKMs.29|into the kernel]].

{{KernelBox|title=linux-4.1|1=
        Device Drivers  --->
 
            Generic Driver Options  --->
 
            -*- Userspace firmware loading support
            [ ]   Include in-kernel firmware blobs in kernel binary
            (iwlwifi-xxxx.ucode) External firmware blobs to build into the kernel binary
            (/lib64/firmware) Firmware blobs root directory
            [ ] Fallback user-helper invocation for firmware loading
}}

In this case replace <code>iwlwifi-xxxx.ucode</code> with the exact firmware name.  Some attention seems to be needed for <var>FW_LOADER_USER_HELPER_FALLBACK</var>.

== Network device names ==

{{:Eudev/Network device names/en}}

{{:Wifi/Testing/ja}}

=== modprobe と modinfo ===

{{c|modprobe}} should return nothing:

{{RootCmd|modprobe iwlwifi}}

Most information about the driver module can be obtained by {{c|modinfo iwlwifi}}

{{Cmd|modinfo iwlwifi}}

=== lspci ===

{{c|lspci}} should display <code>iwlwifi</code> for both <code>Kernel driver in use:</code> and <code>Kernel modules:</code>.

{{RootCmd|lspci -nnkv {{!}} sed -n '/Network/,/^$/p'|output=<pre>03:00.0 Network controller [0280]: Intel Corporation Centrino Advanced-N 6205 [Taylor Peak] [8086:0082] (rev 34)
        Subsystem: Intel Corporation Centrino Advanced-N 6205 AGN [8086:1321]
        Flags: bus master, fast devsel, latency 0, IRQ 33
        Memory at f7d00000 (64-bit, non-prefetchable) [size=8K]
        Capabilities: [c8] Power Management version 3
        Capabilities: [d0] MSI: Enable+ Count=1/1 Maskable- 64bit+
        Capabilities: [e0] Express Endpoint, MSI 00
        Capabilities: [100] Advanced Error Reporting
        Capabilities: [140] Device Serial Number confidential
        Kernel driver in use: iwlwifi
        Kernel modules: iwlwifi
</pre>}}

The <code>xx:xx.x</code> identifier will be useful for grepping specific information from dmesg.

=== dmesg ===

Check the output of dmesg. Replace <code>03:00.0</code> with the identifier from [[#lspci|lspci]] and <code>wlp</code> with the [[#Network_device_names|network interface name]].

{{Cmd|dmesg {{!}} grep -i -E '03:00.0{{!}}wlp{{!}}iwl{{!}}80211'|output=<pre>
[    1.200902] pci 0000:03:00.0: [8086:0082] type 00 class 0x028000
[    1.201065] pci 0000:03:00.0: reg 0x10: [mem 0xf7d00000-0xf7d01fff 64bit]
[    1.201776] pci 0000:03:00.0: PME# supported from D0 D3hot D3cold
[    1.201999] pci 0000:03:00.0: System wakeup disabled by ACPI
[   18.260461] iwlwifi 0000:03:00.0: enabling device (0100 -> 0102)
[   18.260598] iwlwifi 0000:03:00.0: can't disable ASPM; OS doesn't have ASPM control
[   18.419884] iwlwifi 0000:03:00.0: loaded firmware version 18.168.6.1 op_mode iwldvm
[   18.671329] iwlwifi 0000:03:00.0: CONFIG_IWLWIFI_DEBUG enabled
[   18.671330] iwlwifi 0000:03:00.0: CONFIG_IWLWIFI_DEBUGFS enabled
[   18.671330] iwlwifi 0000:03:00.0: CONFIG_IWLWIFI_DEVICE_TRACING disabled
[   18.671332] iwlwifi 0000:03:00.0: Detected Intel(R) Centrino(R) Advanced-N 6205 AGN, REV=0xB0
[   18.673421] iwlwifi 0000:03:00.0: L1 Enabled - LTR Disabled
[   18.705882] ieee80211 phy0: Selected rate control algorithm 'iwl-agn-rs'
[   18.706468] iwlwifi 0000:03:00.0 wlp3s0: renamed from wlan0
[   23.286871] IPv6: ADDRCONF(NETDEV_UP): wlp3s0: link is not ready
    ......... snip .........
[   48.176954] IPv6: ADDRCONF(NETDEV_UP): wlp3s0: link is not ready
[   92.720710] wlp3s0: authenticate with my WLAN AP
[   92.724440] wlp3s0: send auth to my WLAN AP (try 1/3)
[   92.728436] wlp3s0: authenticated
[   92.728646] wlp3s0: waiting for beacon from my WLAN AP
[   92.821389] wlp3s0: associate with my WLAN AP (try 1/3)
[   92.828148] wlp3s0: RX AssocResp from my WLAN AP (capab=0x431 status=0 aid=4)
[   92.853124] wlp3s0: associated
[   92.853173] IPv6: ADDRCONF(NETDEV_CHANGE): wlp3s0: link becomes ready
</pre>}}

== トラブルシューティング ==

=== Kernel not loaded ===

Check if the correct kernel is loaded. This can be accomplished as follows (depends on the [[Kernel/IKCONFIG Support|IKCONFIG feature]]):

{{Cmd|zgrep CONFIG_IWL /proc/config.gz}}

=== ファームウェアの問題 ===

* For systems using udev or systemd, it is imperative to configure the kernel to load binary blobs. In this case the wireless card's firmware is the firmware that needs loaded. More information on configuring the kernel in this manner can be found in the following thread on the Gentoo forums: [https://forums.gentoo.org/viewtopic-t-1001638.html FW_LOADER_USER_HELPER_FALLBACK].

* [http://z-issue.com/wp/linux-firmware-for-iwlwifi-ucode-failed-with-error-2/ Linux firmware for iwlwifi ucode failed with error -2] from http://z-issue.com/wp/

=== 無線が動作していない ===

* Intel Corporation Wireless 8260 (rev 3a) [https://forums.gentoo.org/viewtopic-t-1040894-highlight-.html can't access the RSA semaphore it is write protected]

== See also ==

* [[Handbook:AMD64/Networking/Wireless]]
* [[wifi]]
* {{See also|wpa_supplicant}}
* [[Network management using DHCPCD]]
* [[netifrc]]
* [[Troubleshooting]]

== 外部の情報 ==

* http://www.linuxwireless.org/en/users/Drivers/iwlwifi
* http://git.kernel.org/cgit/linux/kernel/git/firmware/linux-firmware.git
* https://cateee.net/lkddb/web-lkddb/IWLWIFI.html
* https://wiki.archlinux.org/index.php/Wireless_network_configuration#iwlwifi

[[Category:Network devices]]
[[Category:Intel]]
