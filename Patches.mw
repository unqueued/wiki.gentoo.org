{{InfoBox stack
|{{InfoBox wikipedia|Patch_(computing)|header=true}}
}}

{{Note|This article exists since there was not a section detailing how to actually "create patches". The article on clean patches should eventually be integrated into this article aswell. This article belongs on the user wiki as any user may create their own patches under {{Path|/usr/portage/patches}} and it is not exclusively a "developer thing"}}

This page provides an overview on patches and patching best practices.
The usage of patches by portage and it's ebuilds is covered under [[:/etc/portage/patches|Portage : Patches]] and there is a related stub under  [https://devmanual.gentoo.org/ebuild-writing/misc-files/patches/index.html Developers : Patches]. 

== Creating Patches ==


=== TortoiseGit and Git for Windows ===

Patches generated by [//tortoisegit.org/docs/tortoisegit/tgit-dug-patch.html Tortoise Git] and Git for Windows are padded with additional information that <code>patch</code> does not understand. 

{{FileBox|filename=PATCH.patch|title=Typical Tortoise Git/Git for Windows Patch|1=
From HASH Day Mon DD hh:mm:ss YYYY
From: AUTHOR <AUTHOR@E-MAIL.TLD>
Date: Day, DD MMM YYYY hh:mm:ss +hhmm
Subject: [PATCH] COMMIT MESSAGE

---
 PATH/TO/FILE.EXT  1 +
 1 file changed, 1 insertion(+)

diff --git a/PATH/TO/FILE.EXT b/PATH/TO/FILE.EXT
index HA..SH CODE
--- a/PATH/TO/FILE.EXT
+++ b/PATH/TO/FILE.EXT
@@ -56,6 +56,7 @@ 
+  some new code
-  some old code
-- 
VERSION.windows.REVISION}}

The individual generating the patch has to strip these additional lines to make a viable patch file.

{{FileBox|filename=PATCH.patch|title=Acceptable Tortoise Git/Git for Windows Patch|1=
--- a/PATH/TO/FILE.EXT
+++ b/PATH/TO/FILE.EXT
@@ -56,6 +56,7 @@ 
+  some new code
-  some old code
}}

== Nesting ==

If the file(s) being patched are not unpacked into the root of the working directory, {{Path|PATH/TO/A/FILE}}, but rather some sub-directory of the working directory, {{Path|SOME/OTHER/PATH/TO/A/FILE}}, then the patch must be modified to accommodate it.

{{FileBox|filename=PATCH.patch|1=
--- a/SOME/OTHER/PATH/TO/FILE.EXT
+++ b/SOME/OTHER/PATH/TO/FILE.EXT
...
}}

{{Note|This is necessary for, atleast, Go based ebuilds which nest the source code under the repository path e.g. <nowiki>http://git.com/project/repository</nowiki> gets unpacked into the working directory under {{Path|src/git.com/project/repository}} }}

== See also ==

* {{See also|/etc/portage/patches}} - Discusses how portage uses patches and how one might include them in ones ebuilds or apply them locally upon ones own system.
* [[GLEP:25]] - Technical information about the formal inclusion and usage of patches within portage.

== External resources ==

* How to write [https://dev.gentoo.org/~vapier/clean-patches clean patches] when not using ''git-format-patch''.
* [https://devmanual.gentoo.org/ebuild-writing/misc-files/patches/index.html The developer manual also discusses patches]

== References ==



{{reflist}}

[[Category:Patches]]
