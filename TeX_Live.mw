{{InfoBox stack
|{{InfoBox homepage|https://tug.org/texlive|header=true}}
|{{InfoBox project|TeX}}
|{{InfoBox wikipedia}}
}}

'''TeX Live''' is [[Article description::a complete [[Wikipedia:TeX|TeX]] distribution with several programs to create professional documents.]]

== Installation ==

=== USE flags ===

{{USEflag|package=app-text/texlive}}

=== Emerge ===

Install {{Package|app-text/texlive}}:

{{Emerge|app-text/texlive}}

{{Note|When wanting to merge multiple Doxygen PDF files into one PDF file, or book style PDF preferable for E-Reading devices; it is likely the {{Package|dev-texlive/texlive-latexextra}} package will be needed to be installed. (i.e. {{c|pdflatex refman.tex}})}}



== Upgrading ==
When users try to upgrade TeXLive, they'll meet a failure due to "hard blocking". Here are a solution to overcome it and the reasons behind it.

=== Solution ===
First you need to unmerge some packages in {{Package category|dev-texlive}}: 
{{RootCmd
| 1=qlist -I dev-texlive/texlive-lang > texlive-lang-packages.txt
| 2=# Or if you prefer 'eix' to qlist, do instead:
| 3=eix '-I#' dev-texlive/texlive-lang  > texlive-lang-packages.txt
| 4=# Then 
| 5=emerge --deselect=n --unmerge texlive-latex texlive-basic $(cat texlive-lang-packages.txt) }}
Now you can upgrade:
{{RootCmd
| emerge --ask --oneshot --update app-text/texlive $(cat texlive-lang-packages.txt)}}
Or simply pull in "world":
{{RootCmd
| emerge -uDN1a @world
}}

=== Why this workaround? ===
Some {{c|dev-texlive/texlive-*}} packages ([[#hardBlockers|see below]]) do "hard blocking". For example, {{c|texlive-basic-2016}} hard-blocks {{c|<texlive-basic-2016}}, i.e., older versions of itself. Hard-blocked packages can't be installed simultaneously, even temporarily. But as of 2017, portage can't resolve hard blocks automatically ({{bug|250286}}), and users must handle them manually. They are hard instead of normal blocks because of some file moves. ({{bug|606730#c3|text= bug #606730}})

Thus, to upgrade {{c|texlive-basic}}, users must first unmerge it manually using the above procedure.

=== Some more details ===
Although some language packs have only 2012 versions (e.g. {{c|texlive-langcroatian-2012}}), even for them the above solution (re-emerging them afterwards) works, too. It's because blocking in an ebuild file is in fact ''one-sided'', unlike normal dependency, which is checked at "emerge --depclean": Assume {{c|virtual/src-0.ebuild}} contains {{c|DEPEND{{=}}"!!cat/dest"}}, and {{c|cat/dest-0.ebuild}} has no dependency. Then:

* if you already have {{c|cat/dest}}, then "emerge virtual/src" will fail. However,
* even if you already have {{c|virtual/src}}, "emerge cat/dest" is allowed.

<br /><span id="hardBlockers"></span>Hard blocking is specified in ebuilds by the operator {{c|!!}}. As of 2017, the only ebuilds using the {{c|!!}} operator (in our context) are {{c|texlive-basic}}, {{c|texlive-latex}}, and {{c|texlive-langcjk}}. Packages blocked by them are these three themselves plus {{c|texlive-lang*}}.

== Usage ==

Most of the time users will implement TeX Live through the editor of choice. The following is a list of compilers capable of translating a {{Path|.tex}} document into {{Path|.pdf}} file:

LaTeX:

{{Cmd|pdflatex mydocument.tex}}

XeTeX:

{{Cmd|xelatex mydocument.tex}}

LuaTeX:

{{Cmd|luatex mydocument.tex}}

=== Editors ===

There are several editors users can choose from in Gentoo. To list a few pure TeX editors:

{| class="table table-condensed table-striped"
|-
! Editor !! Package !! Homepage !! Description
|-
| kile || {{Package|app-editors/kile}} || https://kile.sourceforge.net/ || A [[KDE]] based editor, which lets users write in LaTeX code and then compile the document.
|-
| texmaker || {{Package|app-office/texmaker}} || http://www.xm1math.net/texmaker/ || A [[Qt]] based editor, which lets user write in LaTeX code and then compile the document
|-
| texstudio || {{Package|app-office/texstudio}} || http://texstudio.sourceforge.net/ || Free cross-platform LaTeX editor (former texmakerX)
|-
| gummi || {{Package|app-editors/gummi}} || https://github.com/alexandervdm/gummi || GTK+ based editor, which lets users write in LaTeX code and then compile the document
|-
| latexila || {{Package|app-editors/latexila}} || https://wiki.gnome.org/Apps/LaTeXila || [[GNOME]] based editor, which lets users write in LaTeX code and then compile the document
|-
| lyx || {{Package|app-office/lyx}} || https://www.lyx.org/ || Qt based [[Wikipedia:WYSIWYM|WYSIWYM]] editor, users type directly into the LaTeX document and can edit LaTeX code afterwards
|-
| texworks || {{Package|app-editors/texworks}} || https://www.tug.org/texworks/|| Qt based editor, suggested editor by the UK-TUG which lets users write in LaTeX code and then compile the document
|-
| winefish || {{Package|app-text/winefish}} || https://github.com/viettug/winefish || GTK+ based editor, which lets users write in LaTeX code and then compile the document
|-
|}

{{Note|The above table is not a comprehensive list of TeX editors.}}

Most editors support LaTeX syntax highlighting like [[Vim]], [[emacs]] (which supports compilation and previewing), [[gedit]] or [[gleany]] and most development IDE's provide some plugins like {{Package|dev-util/netbeans}}.

=== Programs with LaTeX support ===

* {{Package|net-im/pidgin}} - has a LaTeX plugin to display mathematical formulae.
* {{Package|app-misc/freemind}} - has a LaTeX plugin for inserting formulae in mind maps.

=== Find the Gentoo package that contains a tex package ===

{{Package|app-portage/pfl}} contains a program to search in an online database for a Gentoo package containing a particular file.

{{Emerge|app-portage/pfl}}

{{Cmd|pfl|e-file yhmath.sty|output=<pre> *  dev-texlive/texlive-mathextra
	Available Versions:	2015 2014 
	Description:		TeXLive Mathematics packages
	Matched Files:		/usr/share/texmf-dist/tex/latex/yhmath/yhmath.sty;

[I] dev-texlive/texlive-mathscience
	Available Versions:	2017 2016 
	Last Installed Ver:	2016 (Thu Jul 20 17:41:05 2017)
	Description:		TeXLive Mathematics and science packages
	Matched Files:		/usr/share/texmf-dist/tex/latex/yhmath/yhmath.sty;  </pre>}}

=== eselect pdftex ===

Gentoo would automatically clean out any previous version during upgrade. In order to intentionally install several versions into different [http://devmanual.gentoo.org/general-concepts/slotting/index.html slots] a script exists that enables easy switching:

{{Emerge|app-eselect/eselect-pdftex}}

List available distributions with the following command:

{{RootCmd|eselect pdftex list}}

To set the distribution:

{{RootCmd|eselect pdftex set 1}}

=== texdoc ===

Shows the original TeX documentation by keywords. For example everything about ''article'':

{{Cmd|texdoc article}}

This should open the default PDF viewer with the documentation.

In order to use the {{c|texdoc}} command, the <code>doc</code> USE flag enabled for TeX Live and any other module which users would like documentation available. 

To enable the <code>doc</code> USE flag on any TeX Live module automatically, use a wildcard:

{{RootCmd|echo dev-texlive/* doc >> /etc/portage/package.use}}

A full list of installed TeX modules can be shown with the following command:

{{RootCmd|qlist -C -I texlive}}

To enable the <code>doc</code> USE flag only for certain modules, add them to {{Path|/etc/portage/package.use}}. A quick way of adding them all is by running this command:

{{RootCmd|qlist -C -I texlive {{!}} sed 's/$/ doc/' >> /etc/portage/package.use}}

{{Note|Afterwards edit the USE flags for each module in {{Path|/etc/portage/package.use}} individually}}

== Troubleshooting ==

=== Increase main memory ===

The error message "TeX capacity exceeded, sorry main memory size = xxxxxxxxx" can be prevented by 

1. Change the value of {{c|main_memory}} in file {{Path|/etc/texmf/texmf.d/20sizes.cnf}}. This should persist through all future texliveupgrades.

2. Regenerate the system-wide texmf.cnf 
{{RootCmd
| 1=texmf-update}}

3. Regenerate .fmt files
{{RootCmd
| 1=fmtutil-sys --all}}

== External resources ==

* [https://en.wikibooks.org/wiki/LaTeX Wikibooks LaTeX]

[[Category:Software]]
