<languages />

{{InfoBox stack
|{{InfoBox homepage|http://wireless.kernel.org/|header=true}}
|{{InfoBox wikipedia|Wi-Fi}}
}}

Эта статья описывает настройку сетевых устройств Wifi.

== Wifi во время установки ==

Тем, кому требуется соединение Wifi во время установки Gentoo, следует иметь в виду, что минимальный установочный компакт-диск Gentoo содержит только некоторые драйверы и предоставляет только wpa_cli (не wpa_gui) для настройки соединений WPA/WPA2/Enterprise.

Если минимальный установочный компакт-диск не содержит требуемые драйверы или желательно использование графического интерфейса вместо [[wpa_supplicant]], выберите другой live CD, например, [http://sysresccd.org System Rescue CD]. Имейте в виду, что в случае использования не-Gentoo live CD могут понадобиться [[Installation_alternatives/ru#.D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D1.81_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_.D0.BD.D0.B5_Gentoo_LiveCD|дополнительные действия]].

== Определение аппаратного обеспечения ==

Прежде всего, определите устройства Wifi. Для этого можно воспользоваться командами {{c|[[Hardware detection#lspci|lspci]]}} или {{c|[[Hardware detection#lsusb|lsusb]]}}. 

Если в загруженной Linux-системе (LiveCD/USB) присутствует соединение Wifi:

{{RootCmd|lspci -k}}

Драйвер можно увидеть в строке <code>Kernel driver in use:</code>.

Если в загруженной системе отсутствует соединение Wifi, выведите весь список идентификаторов устройств, присутствующих в системе. Впоследствии этим списком можно воспользоваться для  определения нужного драйвера:

{{RootCmd|lspci -n}}

Скопируйте список идентификаторов PCIID из вывода этой команды и вставьте его здесь: http://kmuto.jp/debian/hcl/.

Устройства USB можно определить похожим образом. Сначала выведите список устройств:

{{Cmd|lsusb}}

Эта команда выводит идентификатор PCI ID, производителя, марку, модель и/или чипсет каждого устройства USB, присоединенного к системе. Из всех этих данных чипсет может дать наиболее важную информацию. Поиск ''linuxwireless.org <чипсет>'' в Google часто является наиболее быстрым способом найти драйвер USB NIC и название прошивки.

Также можно воспользоваться командой {{c|lshw}}:

{{RootCmd|lshw {{!}} grep -i driver}}

Эта команда выводит список драйверов всех устройств, как PCI, так и USB.

== Ядро ==

Теперь, когда драйверы определены, можно приступить к настройке ядра Linux.

=== IEEE 802.11 ===

{{:Wifi/IEEE 802.11/ru}}

=== WEXT ===

Параметр "cfg80211 [https://wireless.wiki.kernel.org/en/developers/documentation/wireless-extensions wireless extensions] compatibility", также известный как WEXT, поддерживает устаревшие [[Handbook:Parts/Networking/Wireless/ru#Wireless_tools|wireless-tools]] и [https://wireless.wiki.kernel.org/en/users/documentation/iw/replace-iwconfig iwconfig].

{{KernelBox|1=
[*] Networking support  --->
    [*] Wireless  --->
        [*]     cfg80211 wireless extensions compatibility
}}

=== Драйвера устройств ===

Далее необходимо включить соответствующие параметры ядра, в зависимости от драйверов и устройств, определенных ранее. [http://forums.gentoo.org/viewtopic-p-7640140.html#7640140 Рекомендуется] собирать [[Kernel_Modules#Compile-in-kernel_modules_vs_Loadable_kernel_modules_.28LKMs.29|драйверы в виде модулей]]. Не забудьте включить поддержку шифра AES, если беспроводная сеть использует шифрование WPA или WPA2.

{{KernelBox|<pre>
    Device Drivers  --->
    [*] Network device support  --->
        [*] Wireless LAN  --->
 
            Select the driver for your Wifi network device, e.g.:
            <M> Broadcom 43xx wireless support (mac80211 stack) (b43)
            [M]    Support for 802.11n (N-PHY) devices
            [M]    Support for low-power (LP-PHY) devices
            [M]    Support for HT-PHY (high throughput) devices
            <M> Intel Wireless WiFi Next Gen AGN - Wireless-N/Advanced-N/Ultimate-N (iwlwifi)
            <M>    Intel Wireless WiFi DVM Firmware support                             
            <M>    Intel Wireless WiFi MVM Firmware support
            <M> Intel Wireless WiFi 4965AGN (iwl4965)
            <M> Intel PRO/Wireless 3945ABG/BG Network Connection (iwl3945)
            <M> Ralink driver support  --->
                <M>   Ralink rt27xx/rt28xx/rt30xx (USB) support (rt2800usb)
 
-*- Cryptographic API --->
    -*- AES cipher algorithms
    -*- AES cipher algorithms (x86_64)
    <*> AES cipher algorithms (AES-NI)
</pre>}}

{{Important|Если драйвер собран не в виде модуля (<code><M></code>), а встроен в ядро (<code><*></code>), прошивку необходимо также [[Kernel_Modules#Compile-in-kernel_modules_vs_Loadable_kernel_modules_.28LKMs.29|встроить в ядро]]. Не забудьте [[Kernel/Rebuild|пересобрать ядро]] после изменения его конфигурации.}}

=== Поддержка LED ===

Для того, чтобы включить LED triggers для различных событий приема и передачи пакетов, соберите ядро со следующими параметрами:

{{KernelBox|<pre>
Device Drivers  --->
    [*] LED Support  --->
        <*>   LED Class Support
 
[*] Networking support  --->
    [*] Wireless  --->
        [*] Enable LED triggers
</pre>
}}

== Firmware ==

In addition to the kernel driver, some chipsets also require firmware. If required, locate it on the following list and install it:

{{Emerge|sys-kernel/linux-firmware}}

<div class="mw-collapsible">
{| class="table table-condensed table-striped"
|-
! Wifi device
! Driver
! Firmware
! Note
|-
| Atheros AR9271 & AR7010 
| ath9k_htc
| {{Package|sys-kernel/linux-firmware}}
|
|-
| Broadcom 43xx wireless support
| b43 / b43legacy
| {{Package|sys-firmware/b43-firmware}}
| Aircrack-ng ready, most probably the best choice [http://wireless.kernel.org/en/users/Drivers/b43#Supported_devices if your bcm43xx device is supported]
|-
| Broadcom PCIe and SDIO/USB devices
| [https://wireless.wiki.kernel.org/en/users/drivers/brcm80211?s%5b%5d=brcmsmac brcmsmac] / [https://wireless.wiki.kernel.org/en/users/drivers/brcm80211?s%5b%5d=brcmfmac brcmfmac]
| {{Package|sys-kernel/linux-firmware}}
| Lacks powersaving, LED support and [http://wireless.kernel.org/en/users/Drivers/brcm80211#To_be_done_for_softmac_driver other features]
|-
| Broadcom 43xx wireless support
| wl
| {{Package|net-wireless/broadcom-sta}}
| Proprietary, no AP or Monitor modes, [http://wireless.kernel.org/en/users/Drivers/b43#Comparison_of_recent_drivers Comparison of bcm43xx drivers]
|-
| Intel PRO/Wireless 2200BG
| ipw2200
| {{Package|sys-firmware/ipw2200-firmware}}
|
|-
| [[Intel Corporation PRO/Wireless 3945ABG|Intel PRO/Wireless 3945ABG/BG]]
| [[Intel_Corporation_PRO/Wireless_3945ABG#Device_driver_iwl3945|iwlegacy]]
| {{Package|sys-kernel/linux-firmware}}
|
|-
| Intel Wireless WiFi 4965AGN
| iwl4965
| {{Package|sys-kernel/linux-firmware}}
|
|-
| All other Intel Wireless devices
| [[iwlwifi]]
| {{Package|sys-kernel/linux-firmware}}
| See the [[iwlwifi]] article for detailed instructions.
|-
| Ralink/MediaTek USB devices
| e.g. [https://wireless.wiki.kernel.org/en/users/drivers/rt2800usb?s%5b%5d=rt2800usb rt2800usb]
| {{Package|sys-kernel/linux-firmware}}
|
|-
| Realtek RTL8191SE & RTL8192SE
| rtl8192se
| {{Package|sys-kernel/linux-firmware}}
|
|}
</div>

If the driver requires firmware but does not appear on the list, it will be necessary to download it manually and place it in {{Path|/lib/firmware}}.

== WPA supplicant ==

Если в беспроводной сети установлены WPA или WPA2, то необходимо использовать {{c|wpa_supplicant}}. Больше информации по настройке беспроводной сети в Gentoo Linux можно прочитать в [[Handbook:AMD64/Networking/Wireless/ru|разделе Беспроводная сеть]] в Gentoo Handbook.

{{:Wifi/Testing/ru}}

=== dmesg ===

If none of these methods work be sure to check {{c|dmesg}} output for errors. It is likely a kernel driver or module has not been loaded properly:

{{Cmd|dmesg}}

== Устранение проблем ==

* [https://forums.gentoo.org/viewtopic-p-7888312.html#7888312 Forum thread: wireless lan can't get ip from access point] which explains about 169.254.x.x ([[wikipedia:Link-local_address|link local address]]) being a wrong IP address
* [https://forums.gentoo.org/viewtopic-p-7647960.html#7647960 Forum thread: iwlwifi fails to load after upgrade to 3.17.0]
* [https://forums.gentoo.org/viewtopic-t-1016976-start-3.html Forum thread: Where is my network !?]

== Смотрите также ==

* [[AC1200 Wireless Adapters]]
* [[Iproute2|iproute2]]

== Внешние ресурсы ==

* https://wiki.archlinux.org/index.php/Wireless_network_configuration


[[Category:Network devices]]
[[Category:Network_management]]
