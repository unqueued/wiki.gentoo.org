== XBMC Autostart ==

=== xinitrc ===
Both methods require you to create an xbmc user and place an .xinitrc:

First create the xbmc user
{{RootCmd|useradd -m -G audio,cdrom,video,cdrw,usb,users xbmc}}


{{File|/home/xbmc/.xinit||<pre>
# .xinitrc
[ -x /usr/bin/nvidia-settings ] && /usr/bin/nvidia-settings -l
/usr/bin/xset s noblank
/usr/bin/xset s off
/usr/bin/xset -dpms
/usr/bin/evilwm &
exec /usr/bin/xbmc
</pre>}}

=== Via inittab ===
This is based on the way the mythtv ebuilds enable the autostart auf the mythtv frontend. But since XBMC is the better fronted, I want XBMC to autostart on boot. :)

Then create the login scripts
{{File|/home/xbmc/.bash_profile||<pre>
/home/xbmc/.bash_profile
# .bash_profile
case "`tty`" in
        *tty9) startx; logout ;;
esac
</pre>}}

Finally add an inittab entry which does the autologin
{{File|/etc/inittab||<pre>
...
c9:2345:respawn:/sbin/mingetty --autologin xbmc tty9
...
</pre>}}

=== With init script ===
{{File|/etc/init.d/xbmc||<pre>
#!/sbin/runscript
# Released under the 2-clause BSD license.

description="Start and stop XBMC"

depend()
{
	need net
}



start()
{
	ebegin "Starting XBMC"
	su - xbmc -c "startx" & > /dev/null
	eend 0
}

stop()
{
	killall xbmc.bin
	eend $?
}
</pre>}}

== Shutdown ==
Allow the xbmc user to issue an shutdown via policykit:

{{File|/etc/polkit-1/localauthority/50-local.d/xbmc.pkla||<pre>
[Actions for xbmc user]
Identity=unix-user:xbmc
Action=org.freedesktop.upower.*;org.freedesktop.consolekit.system.*;top.udisks.*
ResultAny=yes
ResultInactive=yes
ResultActive=yes
</pre>}}

[[category:Multimedia]]
