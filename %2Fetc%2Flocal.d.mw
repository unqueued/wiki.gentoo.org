{{Lowercase title}}

This article describes the setup of scripts in {{Path|/etc/local.d/}} which get executed once during boot or shutdown.

== A word of caution ==

{{Warning|Any scripts in {{Path|/etc/local.d/}} are meant to execute a few commands (e.g. write some value to some file in {{Path|/proc/}}) and terminate.}}

It is a bad idea to abuse this infrastructure to start any other scripts or programs in the background because:

* If the {{Path|/etc/init.d/local}} service script is restarted several times, those scripts or programs will be executed in the background several times, possibly resulting in race conditions.
* A {{Path|*.stop}} script for terminating those processes would have to be also present and may easily fail when e.g. the {{Path|*.start}} script has been executed several times.

For these reasons, it is much more convenient to write a real OpenRC initscript file as described in the [[Handbook:AMD64/Working/Initscripts#Writing_initscripts|OpenRC Initscripts section]] of the Gentoo Handbook.

== Configuration ==

All scripts in {{Path|/etc/local.d/}} with the suffix {{Path|.start}} will be executed at boot time, all scripts with suffix {{Path|.stop}} at shutdown time.

To e.g. output the text ''Hello world!'' at boot time, create the new file {{Path|/etc/local.d/HelloWorld.start}}:

{{FileBox|filename=/etc/local.d/HelloWorld.start|lang=bash|1=
#!/bin/sh
echo "Hello world!"
}}

Afterwards mark the script as executable: 

{{RootCmd|chmod +x /etc/local.d/HelloWorld.start}}

To start the {{Path|local.d}} scripts at boot time, add its init.d script to the default runlevel:

{{RootCmd|rc-update add local default}}

Now start the service by making OpenRC check for stopped services in the default runlevel:

{{RootCmd|rc}}

Or start it explicitly:

{{RootCmd|rc-service local start}}

[[Category:Core system]]
