{{InfoBox stack
|{{InfoBox homepage|http://www.freedesktop.org/wiki/Software/vaapi|header=true}}
|{{InfoBox wikipedia|Video Acceleration API}}
}}
'''VAAPI''' ('''V'''ideo '''A'''cceleration '''API''') provides access to graphics hardware (GPU) acceleration for video processing.

== Hardware support ==
{| class="table table-condensed table-striped"
|-
! Driver
! Chipset
! Formats
|-
| [[intel]]
| Intel GMA X4500HD and newer
| See [https://01.org/linuxgraphics/community/vaapi 01.org - VAAPI &#124; Linux Graphics]
|-
| [[VDPAU]]
| All supported graphics cards
|
|}

== Installation ==
VAAPI support can be enabled system-wide by setting the <code>USE</code> variable to <code>vaapi</code>.
{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
USE="vaapi"
}}
Enabling VAAPI support will pull in the {{Package|x11-libs/libva}} package, which has the following USE flags:
{{USEflag|package=x11-libs/libva
|X
|drm+yes
|egl
|opengl
|vdpau
|dummy+++VIDEO_CARDS setting to build driver for dummy video cards
|fglrx+++VIDEO_CARDS setting to build driver for [[fglrx]] video cards
|intel+++VIDEO_CARDS setting to build driver for [[Intel]] video cards
|nvidia+++VIDEO_CARDS setting to build driver for [[NVidia/nvidia-drivers|nvidia]] video cards
wayland
}}

The system needs to be updated if the <code>USE</code> variable was set to <code>vaapi</code>.
{{Emerge|params+=--changed-use --deep|@world}}

== Usage ==

Run {{c|vainfo}} to check VAAPI support.

{{RootCmd|vainfo|output=<pre>
vainfo: VA-API version: 0.35 (libva 1.3.1)
vainfo: Driver version: Intel i965 driver - 1.3.0
vainfo: Supported profile and entrypoints
      VAProfileMPEG2Simple            :	VAEntrypointVLD
      VAProfileMPEG2Simple            :	VAEntrypointEncSlice
      VAProfileMPEG2Main              :	VAEntrypointVLD
      VAProfileMPEG2Main              :	VAEntrypointEncSlice
      VAProfileH264ConstrainedBaseline:	VAEntrypointVLD
      VAProfileH264ConstrainedBaseline:	VAEntrypointEncSlice
      VAProfileH264Main               :	VAEntrypointVLD
      VAProfileH264Main               :	VAEntrypointEncSlice
      VAProfileH264High               :	VAEntrypointVLD
      VAProfileH264High               :	VAEntrypointEncSlice
      VAProfileVC1Simple              :	VAEntrypointVLD
      VAProfileVC1Main                :	VAEntrypointVLD
      VAProfileVC1Advanced            :	VAEntrypointVLD
      VAProfileNone                   :	VAEntrypointVideoProc
      VAProfileJPEGBaseline           :	VAEntrypointVLD
</pre>}}

== Software support ==
=== VLC ===
VLC supports VAAPI natively. Activate the appropriate setting through the preferences menu (Tools->Preferences->Input/Codecs->Hardware accelerated decoding).

=== mpv ===
mpv also supports the VAAPI acceleration through the command line option <code>--hwdec=vaapi</code>.

=== MPlayer ===
Currently, the main MPlayer branch doesn't support VAAPI. There is a development branch (''hwaccel-vaapi'') available on [https://github.com/gbeauchesne/mplayer-vaapi/ GitHub] that supports VAAPI.

Build the VAAPI enabled MPlayer:
{{Cmd
|git clone -b hwaccel-vaapi https://github.com/gbeauchesne/mplayer-vaapi.git vaapi-mplayer
|cd vaapi-mplayer
|./configure --disable-vdpau --enable-vaapi
|make}}

Install the VAAPI enabled MPlayer (not recommended):
{{RootCmd|make install}}
{{Warning|Be extremely careful when installing anything on your system aside of Portage, since it can conflict with the installed files.}}

Instead, configure {{Package|media-video/smplayer}} to use the VAAPI enabled MPlayer executable (Preferences->General->MPlayer executable). Next, set the output driver (Preferences->General->Output driver->User defined...) to <code>vaapi</code>.

== See also ==
* [[VDPAU]]

[[Category:Multimedia]]
