<languages/>

{{Metadata|abstract=Die Anwendung <tt>efibootmgr</tt> interagiert auf dem System mit der UEFI Firmware und ist ein bekanntes Werkzeug zur Manipulation der EFI Einstellungen zur Erzeugung und Handhabung von Boot-Einträgen die zum Booten von Linux (oder anderen Betriebssystemen) fähig sind.}}

Die Anwendung <tt>efibootmgr</tt> interagiert auf dem System mit der UEFI Firmware und ist ein bekanntes Werkzeug zur Manipulation der EFI Einstellungen zur Erzeugung und Handhabung von Boot-Einträgen die zum Booten von Linux (oder anderen Betriebssystemen) fähig sind.

{{InfoBox stack
|{{InfoBox homepage|https://github.com/vathpela/efibootmgr|header=true}}
}}

== EFIbootmgr ist kein boot-loader ==

Die Anwendung {{Package|sys-boot/efibootmgr}} ist kein Boot-Loader. Es ist ein Werkzeug das mit der EFI Firmware eines Systems interagiert, das selbst als Boot-Loader agiert. Mit der Anwendung <tt>efibootmgr</tt> können Booteinträge erstellt, umstrukturiert und aktualisiert werden.

== Konfiguration ==

Die Applikation {{Package|sys-boot/efibootmgr}} benötigt keinerlei Konfiguration. Alles das benötigt wird ist sie zu installieren.

{{Emerge|sys-boot/efibootmgr}}

Um jedoch die Applikation <tt>efibootmgr</tt> erfolgreich zu nutzen, muss auf das EFI Variablen Dateisystem zugegriffen werden können. Dies erfordert dass das System bereits mit EFI (und nicht durch das BIOS) gebootet ist, andernfalls sind die EFI Variablen selbst nicht zugänglich.

{{RootCmd|mount {{!}} grep efivars|output=<pre>
efivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)
</pre>}}

Wenn es noch nicht gemountet ist (es sollte durch das {{Path|sysfs}} Init-Skript gemountet werden), können Sie es auf diese Weise manuell mounten:

{{RootCmd|mount -t efivars efivars /sys/firmware/efi/efivars}}

== EFI Boot-Einträge handhaben ==

=== Boot-Einträge auflisten ===

Um die aktuellen Boot-Einträge aufzulisten verwenden Sie einfach <tt>efibootmgr</tt>. Verwenden Sie die Option <code>--verbose (-v)</code> um ein paar zusätzliche Informationen zu erhalten:

{{RootCmd|efibootmgr -v|output=<pre>
BootCurrent: 0002
Timeout: 3 seconds
BootOrder: 0003,0003,0002,0000,0004
Boot0000* CD/DVD Drive  BIOS(3,0,00)
Boot0001* Hard Drive    BIOS(2,0,00)
Boot0002* Gentoo        HD(1,800,61800,6d98f360-cb3e-4727-8fed-5ce0c040365d)File(\EFI\boot\bootx64.efi)
Boot0003* Hard Drive    BIOS(2,0,00)P0: ST1500DM003-9YN16G
</pre>}}

=== Boot-Einträge erstellen ===

Um einen EFI Boot-Eintrag zu erstellen werden ein paar Argumente an <tt>efibootmgr</tt> übergeben:

* <code>--create (-c)</code> um einen neuen Eintrag zu erstellen;
* <code>--part (-p)</code> gefolgt von der Partitions-Nummer auf der die EFI Systempartition untergebracht ist;
* <code>--disk (-d)</code> gefolgt von der Festplatte auf der die EFI Systempartition untergebracht ist;
* <code>--label (-L)</code> gefolgt von dem Namen der als Boot-Eintrag verwendet werden soll;
* <code>--loader (-l)</code> gefolgt von dem Pfad des zu bootenden EFI Image

{{Important|Der Pfad des zu bootenden EFI Images ''muss'' {{Key|\}} (Backslash) anstelle von {{Key|/}} (Schrägstrich) als Pfadtrenner verwenden.}}

Beispiel:

{{RootCmd|efibootmgr -c -d /dev/sda -p 2 -L "Gentoo" -l "\efi\boot\bootx64.efi"}}

=== Deleting a boot entry ===

Before deleting an entry, first figure out what ID the entry has.

To delete the Gentoo entry as shown above (which has ''Boot0002'' as the identifier), ask <tt>efibootmgr</tt> to delete the entry with id 2, passing the arguments <code>--bootnum (-b)</code> with the identifier, and <code>--delete-bootnum (-B)</code> to delete the entry:

{{RootCmd|efibootmgr -b 2 -B}}

== See also ==

* [[EFI_stub_kernel|EFI stub kernel]] explains how to configure the Linux kernel to be able to be booted from EFI directly
