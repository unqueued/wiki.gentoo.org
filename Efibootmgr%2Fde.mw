<languages/>
{{InfoBox stack
|{{InfoBox github|rhinstaller/efibootmgr|header=true}}
}}

{{Metadata|abstract=Die Anwendung <tt>efibootmgr</tt> interagiert auf dem System mit der UEFI Firmware und ist ein bekanntes Werkzeug zur Manipulation der EFI Einstellungen zur Erzeugung und Handhabung von Boot-Einträgen die zum Booten von Linux (oder anderen Betriebssystemen) fähig sind.}}

Die Anwendung <tt>efibootmgr</tt> interagiert auf dem System mit der UEFI Firmware und ist ein bekanntes Werkzeug zur Manipulation der EFI Einstellungen zur Erzeugung und Handhabung von Boot-Einträgen die zum Booten von Linux (oder anderen Betriebssystemen) fähig sind.

The {{Package|sys-boot/efibootmgr}} application is '''''not''''' a bootloader. It is a tool that interacts with the EFI firmware of the system, which itself is acting as a bootloader. Using {{c|efibootmgr}} boot entries can be created, reshuffled, edited, and removed.

== Konfiguration ==

=== Kernel ===

In order to boot directly from UEFI, the kernel needs to have <var>CONFIG_EFI</var>, <var>CONFIG_EFI_STUB</var>, and <var>CONFIG_EFI_VARS</var> support enabled:

{{KernelBox|title=Enable EFI stub support|1=
Processor type and features  --->
    [*] EFI runtime service support 
    [*]   EFI stub support
Firmware Drivers  --->
   EFI (Extensible Firmware Interface) Support  --->
       <*> EFI Variable Support via sysfs
}}

=== Emerge ===

Die Applikation {{Package|sys-boot/efibootmgr}} benötigt keinerlei Konfiguration. Alles das benötigt wird ist sie zu installieren.

{{Emerge|sys-boot/efibootmgr}}

== Configuration ==

=== EFI vars ===

Um jedoch die Applikation <tt>efibootmgr</tt> erfolgreich zu nutzen, muss auf das EFI Variablen Dateisystem zugegriffen werden können. Dies erfordert dass das System bereits mit EFI (und nicht durch das BIOS) gebootet ist, andernfalls sind die EFI Variablen selbst nicht zugänglich.

When the system is in EFI mode, run the following command to check for the existence of efivarfs:

{{RootCmd|mount {{!}} grep efivars|output=<pre>
efivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)
</pre>}}

Wenn es noch nicht gemountet ist (es sollte durch das {{Path|sysfs}} Init-Skript gemountet werden), können Sie es auf diese Weise manuell mounten:

{{RootCmd|mount -t efivars efivars /sys/firmware/efi/efivars}}

== EFI Boot-Einträge handhaben ==

=== Boot-Einträge auflisten ===

Um die aktuellen Boot-Einträge aufzulisten verwenden Sie einfach <tt>efibootmgr</tt>. Verwenden Sie die Option <code>--verbose (-v)</code> um ein paar zusätzliche Informationen zu erhalten:

{{RootCmd|efibootmgr -v|output=<pre>
BootCurrent: 0002
Timeout: 3 seconds
BootOrder: 0003,0003,0002,0000,0004
Boot0000* CD/DVD Drive  BIOS(3,0,00)
Boot0001* Hard Drive    BIOS(2,0,00)
Boot0002* Gentoo        HD(1,800,61800,6d98f360-cb3e-4727-8fed-5ce0c040365d)File(\EFI\boot\bootx64.efi)
Boot0003* Hard Drive    BIOS(2,0,00)P0: ST1500DM003-9YN16G
</pre>}}

=== Boot-Einträge erstellen ===

Um einen EFI Boot-Eintrag zu erstellen werden ein paar Argumente an <tt>efibootmgr</tt> übergeben:

* <code>--create (-c)</code> um einen neuen Eintrag zu erstellen;
* <code>--part (-p)</code> gefolgt von der Partitions-Nummer auf der die EFI Systempartition untergebracht ist;
* <code>--disk (-d)</code> gefolgt von der Festplatte auf der die EFI Systempartition untergebracht ist;
* <code>--label (-L)</code> gefolgt von dem Namen der als Boot-Eintrag verwendet werden soll;
* <code>--loader (-l)</code> gefolgt von dem Pfad des zu bootenden EFI Image

{{Important|Der Pfad des zu bootenden EFI Images ''muss'' {{Key|\}} (Backslash) anstelle von {{Key|/}} (Schrägstrich) als Pfadtrenner verwenden.}}

Beispiel:

{{RootCmd|efibootmgr -c -d /dev/sda -p 2 -L "Gentoo" -l "\efi\boot\bootx64.efi"}}

=== Boot-Eintrag löschen ===

Bevor Sie einen Eintrag löschen, finden Sie zuerst heraus welche ID er hat.

Um den oben gezeigten Gentoo-Eintrag zu löschen (der ''Boot0002'' als Kennung besitzt), bitten Sie <tt>efibootmgr</tt> darum den Eintrag mit der ID 2 zu löschen. Übergeben Sie die Argumente <code>--bootnum (-b)</code> mit der Kennung und <code>--delete-bootnum (-B)</code> um den Eintrag zu löschen:

{{RootCmd|efibootmgr -b 2 -B}}

== Removal ==

=== Unmerge ===

{{Unmerge|sys-boot/efibootmgr}}

== Siehe auch ==

* [[EFI_stub_kernel|EFI stub kernel]] explains how to configure the Linux kernel to be able to be booted from EFI directly
* [[Handbook:AMD64/Installation/Bootloader#Alternative:_Using_efibootmgr|Alternative: Using efibootmgr]] in the Gentoo Handbook
