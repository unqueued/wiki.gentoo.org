<languages />
{{InfoBox stack
|{{InfoBox homepage|https://wiki.gentoo.org/wiki/Project:Portage-Tools|header=true}}
|{{InfoBox wikipedia|gentoolkit}}
|{{InfoBox gitweb|gentoolkit.git/}}
}}

{{Metadata|abstract=Gentoolkit est une suite d'outils destinée à faciliter l'administration d'un système Gentoo. Ce document couvre les fondamentaux de certains de ces outils. }}

Gentoolkit est une suite d'outils destinée à faciliter l'administration d'un système Gentoo. Ce document couvre les bases de quelques uns des outils présents dans cette boîte à outils.

== Introduction ==

=== Qu’est-ce que le Gentoolkit ? ===

Gentoo is a unique distribution and presents some complexities that simply do not exist for other distributions. As Gentoo developers and contributors discovered some of these complexities, they also wrote tools to help users and administrators work around them. Many tools have been contributed to the Gentoo project and are included in the {{Package|app-portage/gentoolkit}} package. 

{{Note| À ce jour, il existe deux versions de ''gentoolkit'' : {{Package|app-portage/gentoolkit}} et {{Package|app-portage/gentoolkit-dev}}. Alors que la première contient des scripts d'administration, la seconde contient des scripts destinés à faciliter le développement sur Gentoo. Si vous êtes  développeur, vous pouvez avoir vos scripts inclus dans  {{Package|app-portage/gentoolkit-dev}} en prenant contact avec le mainteneur de ''gentoolkit''.  Ce document ne traite que de  {{Package|app-portage/gentoolkit}}.}}

Gentoolkit contient tout un ensemble d'outils utiles pour vous aider à gérer vos paquets et garder la trace de ce qui se passe sur votre système.  La plupart des utilisateurs — en particuliers ceux qui mettent souvent leur système à jour — tireront un bénéfice à avoir gentoolkit installé.

== Installation ==

=== Emerge ===

Comme pour tout paquet Gentoo, l'installation fait appel à une simple commande <tt>emerge</tt> : 

{{Emerge|app-portage/gentoolkit}}

{{Note|Beaucoup des outils du gentoolkit fournissent des informations importantes sur votre système ou requièrent des privilèges de super-utilisateur. Pour cette raison, certains des programmes ne peuvent être exécutés (ou fonctionner correctement) que s'ils sont lancés par un utilisateur disposant des privilèges du super-utilisateur.}}

=== Trouver de la documentation ===

Toute la documentation dont un outil dispose (autre que les pages de manuel) se trouve dans {{Path|/usr/share/doc/gentoolkit-[version]/[nom_de_l_outil]/}}.

== euse ==

<tt>euse</t> sert à voir, activer et désactiver les options de la variable USE en différents endroits. Pour plus d'information sur les options de la variable USE, se reporter à [[Handbook:X86/Working/USE|USE Flags]]. Consultez <tt>euse -h</tt> pour obtenir une aide complète et toutes les options.

=== Consulter, activer et désactiver des options de la variable USE ===

La commande  <tt>euse -a</tt> lit la configuration actuelle des options activées de la variable USE et les affiche. 

{{Note| <tt>euse</tt> utilise désormais cinq colonnes pour montrer si une option est activée ou non et à quel endroit elle a été activée. Les colonnes sont précisées comme suit : +/-, activé dans l'Environnement, activée dans {{Path|make.Conf}}, activée dans {{Path|make.Defaults}}, et dans {{Path|make.Globals}}. La sortie ressemble à [+ECDG].}}

{{RootCmd|euse -a|output=<pre>
X                   [+ CD ]
aalib               [+    ]
acpi                [+ C  ]
alsa                [+ C  ]
apache2             [+ C  ]
apm                 [+  D ]
avi                 [+  D ]
berkdb              [+  D ]
bitmap-fonts        [+  D ]
bonobo              [+    ]
cdr                 [+ C  ]
crypt               [+ CD ]
cscope              [+ C  ]
cups                [+ CD ]
curl                [+    ]
emboss              [+  D ]
encode              [+  D ]
esd                 [+    ]
fam                 [+    ]
fbcon               [+ C  ]
firefox             [+ C  ]
font-server         [+  D ]
foomaticdb          [+  D ]
fortran             [+  D ]
gd                  [+ C  ]
gdbm                [+  D ]
gif                 [+ CD ]
gimpprint           [+ C  ]
gnome               [+ CD ]
gphoto2             [+    ]
gpm                 [+ CD ]
gstreamer           [+ C  ]
gtk                 [+  D ]
gtkhtml             [+ C  ]
guile               [+    ]
imagemagick         [+    ]
imlib               [+ CD ]
innodb              [+    ]
ipv6                [+  D ]
javascript          [+ C  ]
jpeg                [+ CD ]
kde                 [+  D ]
ldap                [+    ]
libg++              [+ CD ]
libwww              [+ CD ]
mad                 [+ CD ]
mbox                [+ C  ]
md5sum              [+ C  ]
mikmod              [+ CD ]
mmx                 [+ C  ]
motif               [+ CD ]
mp3                 [+    ]
mpeg                [+ CD ]
mpeg4               [+ C  ]
mysql               [+ C  ]
ncurses             [+ CD ]
nls                 [+  D ]
nvidia              [+ C  ]
odbc                [+    ]
offensive           [+    ]
ogg                 [+ CD ]
opengl              [+ CD ]
oss                 [+  D ]
pam                 [+ CD ]
pdflib              [+ CD ]
perl                [+ CD ]
png                 [+ CD ]
python              [+ CD ]
qt                  [+  D ]
quicktime           [+ CD ]
readline            [+ CD ]
ruby                [+    ]
sdl                 [+ CD ]
slang               [+  D ]
spell               [+ CD ]
sse                 [+ C  ]
ssl                 [+ CD ]
svga                [+ CD ]
tcltk               [+ C  ]
tcpd                [+  D ]
tiff                [+ C  ]
truetype            [+ CD ]
usb                 [+ C  ]
vanilla             [+ C  ]
x86                 [+ C  ]
xml                 [+    ]
xosd                [+ C  ]
xv                  [+ CD ]
xvid                [+ C  ]
zlib                [+ CD ]
</pre>
}}

Vous pouvez aussi utiliser la commande <tt>euse -a -g</tt> pour ne consulter que les options globales de la variable USE qui sont activées. La commande  <tt>euse -a -l</tt> permet d'obtenir la même chose pour les options locales de la variable USE. <code>-g</code> et <code>-l</code> sont des sous-options de <tt>euse</t> et nécessitent une option donnée auparavant (comme <code>-a</code>) pour fonctionner correctement. 

{{RootCmd|euse -a -l|output=<pre>
bitmap-fonts        [+  D ]
font-server         [+  D ]
fortran             [+  D ]
gimpprint           [+ C  ]
md5sum              [+ C  ]
mpeg4               [+ C  ]
nvidia              [+ C  ]
offensive           [+    ]
truetype            [+ CD ]
</pre>
}}

On peut également utiliser <tt>euse</tt> pour activer ou désactiver des options de USE. Les commandes à utiliser sont <tt>euse -E nom_option</tt> (activer une option) et  <tt>euse -D nom_option</tt> (désactiver une option). 

{{Warning/fr| n'utilisez pas les commandes <tt>euse -E</tt> ou <tt>euse -D</tt> sans préciser d'option de USE sinon cela activera/désactivera TOUTES les options de USE dans {{Path|/etc/portage/make.conf}}. Même si une sauvegarde est créée sur {{Path|/etc/portage/make.conf.euse_backup}}, faites attention en utilisant  <tt>euse -E</tt> ou <tt>euse -D</tt>.}}

Activer une option de la variable USE :

{{RootCmd|euse -E 3dfx|output=<pre>
/etc/portage/make.conf was modified, a backup copy has been placed at /etc/portage/make.conf.euse_backup
</pre>}}

Le fichier {{Path|/etc/portage/make.conf}} ressemble à ceci après exécution de la commande :

{{FileBox|filename=make.conf|title=Après activation de l'option 3dfx de la variable USE|lang=bash|1=
USE="alsa acpi apache2 -arts cups cdr crypt cscope -doc fbcon \
     firefox gd gif gimpprint gnome gpm gstreamer gtkhtml imlib \
     innodb -java javascript jpeg libg++ libwww mad mbox md5sum \
     mikmod mmx motif mpeg mpeg4 mysql ncurses nvidia \
     ogg odbc offensive opengl pam pdflib perl png python \
     quicktime readline sdl spell sse ssl svga tcltk tiff truetype usb \
     vanilla X xosd xv xvid x86 zlib 3dfx"
}}

Désactiver une option de la variable USE :

{{RootCmd|euse -D 3dfx|output=<pre>
/etc/portage/make.conf was modified, a backup copy has been placed at /etc/portage/make.conf.euse_backup
</pre>}}

De nouveau, le fichier  {{Path|/etc/portage/make.conf}} après la commande :

{{FileBox|filename=make.conf|title=Après désactivation de l'option 3dfx de la variable USE|lang=bash|1=
USE="alsa acpi apache2 -arts cups cdr crypt cscope -doc fbcon \
     firefox gd gif gimpprint gnome gpm gstreamer gtkhtml imlib \
     innodb -java javascript jpeg libg++ libwww mad mbox md5sum \
     mikmod mmx motif mpeg mpeg4 mysql ncurses nvidia \
     ogg odbc offensive opengl pam pdflib perl png python \
     quicktime readline sdl spell sse ssl svga tcltk tiff truetype usb \
     vanilla X xosd xv xvid x86 zlib -3dfx"
}}

{{Note|<tt>euse</t> ne supprime pas réellement les options du fichier make.conf ; il les préfixe simplement avec — (moins) afin de les désactiver. Vous souhaiterez peut-être nettoyer manuellement votre {{Path|make.conf}} pour retirer les options non désirées. Sinon vous pouvez utiliser l'option <code>-P</code> (purge), comme par exemple dans <tt>euse -P 3dfx</tt>}}

== Autres outils ==

=== revdep-rebuild ===

Cet outil est le « reconstructeur des dépendances inverses » de Gentoo. Il examine les paquets installés sur votre système pour trouver ceux qui ne fonctionnent plus à cause de la mise à jour de paquets dont ils dépendent. Il peut aussi installer ces paquets manquants pour vous, mais lorsqu'un paquet ne fonctionne plus avec les versions des dépendances déjà installées, il est conseillé de mettre à jour ce paquet vers une version récente. Si vous spécifiez des options, <tt>revdep-rebuild</tt> les passera à la commande <tt>emerge</tt>, ce qui vous permet d'utiliser l'option <code>--pretend</code> pour consulter la liste des paquets qui seront installés avant de procéder. 

{{RootCmd|revdep-rebuild -p|output=<pre>
 * Configuring search environment for revdep-rebuild
  
 * Checking reverse dependencies
 * Packages containing binaries and libraries broken by a package update
 * will be emerged.
  
 * Collecting system binaries and libraries
 * Generated new 1_files.rr
 * Collecting complete LD_LIBRARY_PATH
 * Generated new 2_ldpath.rr
 * Checking dynamic linking consistency
[ 48% ]  *   broken /usr/lib/gstreamer-0.10/libgsttaglib.la (requires /usr/lib/libtag.la)
[ 64% ]  *   broken /usr/lib/libgdkglext-x11-1.0.la (requires /usr/lib/libGLU.la)
[ 67% ]  *   broken /usr/lib/libgtkglext-x11-1.0.la (requires /usr/lib/libGLU.la)
[ 85% ]  *   broken /usr/lib/python2.6/site-packages/gtk-2.0/gtk/gdkgl/_gdkgl.la (requires /usr/lib/libGLU.la)
 *   broken /usr/lib/python2.6/site-packages/gtk-2.0/gtk/gtkgl/_gtkgl.la (requires /usr/lib/libGLU.la)
[ 97% ]  *   broken /usr/qt/3/lib/libqt-mt.la (requires -lpng)
[ 100% ]
 * Generated new 3_broken.rr
 * Assigning files to packages
 *   /usr/lib/gstreamer-0.10/libgsttaglib.la -> media-plugins/gst-plugins-taglib
 *   /usr/lib/libgdkglext-x11-1.0.la -> x11-libs/gtkglext
 *   /usr/lib/libgtkglext-x11-1.0.la -> x11-libs/gtkglext
 *   /usr/lib/python2.6/site-packages/gtk-2.0/gtk/gdkgl/_gdkgl.la -> dev-python/pygtkglext
 *   /usr/lib/python2.6/site-packages/gtk-2.0/gtk/gtkgl/_gtkgl.la -> dev-python/pygtkglext
 *   /usr/qt/3/lib/libqt-mt.la -> x11-libs/qt
 * Generated new 4_raw.rr and 4_owners.rr
 * Cleaning list of packages to rebuild
 * Generated new 4_pkgs.rr
 * Assigning packages to ebuilds
 * Generated new 4_ebuilds.rr
 * Evaluating package order
 * Generated new 5_order.rr
 * All prepared. Starting rebuild
emerge --oneshot --pretend  dev-python/pygtkglext:0
media-plugins/gst-plugins-taglib:0.10
x11-libs/gtkglext:0
x11-libs/qt:3
  
These are the packages that would be merged, in order:
  
Calculating dependencies... done!
[ebuild   R   ] media-plugins/gst-plugins-taglib-0.10.17
[ebuild   R   ] x11-libs/gtkglext-1.2.0
[ebuild   R   ] x11-libs/qt-3.3.8b-r2
[ebuild   R   ] dev-python/pygtkglext-1.1.0
 * Now you can remove -p (or --pretend) from arguments and re-run revdep-rebuild.
</pre>
}}

Si vous devez reconstruire certains paquets, vous pouvez exécuter <tt>revdep-rebuild</tt> sans l'option <code>-p</code>. Tous les paquets listés seront réinstallés. 

=== glsa-check ===

<tt>[https://www.gentoo.org/support/security/ glsa-check]</tt> sert à garder un œil sur les [https://security.gentoo.org/glsa/ GLSA's] (Gentoo Linux Security Advisories ou encore Recommandations Gentoo Linux sur la sécurité, en français). Les fonctions de glsa-check seront incorporées à <tt>emerge</tt> et <tt>equery</tt> plus tard.

=== eread ===

<tt>eread</tt> est un utilitaire simple qui vous permet de lire les fichiers elog produits par <code>>=portage-2.1</code>. Pour activer l'enregistrement des fichiers elog, paramétrez quelques variables dans votre fichier {{Path|/etc/portage/make.conf}} : 

{{FileBox|filename=make.conf|title=Activer elog|lang=bash|1=
PORTAGE_ELOG_CLASSES="log"
PORTAGE_ELOG_SYSTEM="save"
}}

{{Note|ce n'est qu'un exemple. Pour savoir comment fonctionne le système elog de Portage, veuillez vous référer à la page appropriée de  [[Handbook:X86/Portage/Files#Logging_features|Portage Handbook]].}}

Une fois qu'elog est configuré à votre convenance, lancez simplement <tt>eread</tt> pour visualiser les fichiers d'historique. 

{{Cmd|eread|output=<pre>
This is a list of portage log items. Choose a number to view that file or type
q to quit.
  
1- app-portage:gentoolkit-0.2.4_pre2:20070320-000256.log
2- app-portage:gentoolkit-0.2.4_pre2:20070320-000258.log
3- app-portage:gentoolkit-0.2.4_pre2:20070320-000319.log
4- app-portage:gentoolkit-0.2.3:20070320-000408.log
Choice?
</pre>
}}

Select a number and the file will be displayed using the paging program specified in the PAGER environment variable. If PAGER is not set, it will use <tt>less</tt>. The PAGER environmental variable can be set using <tt>eselect</tt> (module <code>pager</code>).

Après avoir vu le fichier, on vous demandera si vous voulez le supprimer.

=== eclean ===

<tt>eclean</tt> is a tool to remove old source files and old binary packages from the system. 

When building and installing packages, the source files are downloaded and preserved in <code>DISTDIR</code>, usually {{Path|/usr/portage/distfiles}}. This can accumulate several gigabytes of material over time if it is not cleaned periodically. Users should run <tt>eclean-dist</tt> to clean source files from <code>DISTDIR</code>.

It is possible to create archives of installed packages by using <tt>quickpg</tt> or FEATURES="buildpkg". These archived packages are kept in PKGDIR, usually {{Path|/usr/portage/packages}}. When they are no longer needed, or if they are too old, <tt>eclean-pkg</tt> can be ran to remove them from <code>PKGDIR</code>. It is a good way to ensure that any binary packages on the system are only the latest versions. 

For more information on <tt>eclean</tt> and tips on maintaining a cruft-free system, please read <kbd>man eclean</kbd> or check the [[eclean]] article.

== See also ==

* [[equery]]
* [[eclean]]
* [[epkginfo]]

{{Migrated|originalauthors=Matt Butcher, John P. Davis, Erwin, Shyam Mani, Xavier Neys, Karl Trygve, José Luis Rivero, Joshua Saddler, Douglas Anderson}}
