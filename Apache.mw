{{InfoBox stack
|{{InfoBox homepage|http://httpd.apache.org|header=true}}
|{{InfoBox wikipedia|Apache HTTP Server}}
|{{InfoBox gdoc|http://www.gentoo.org/proj/en/apache/doc/upgrading.xml|raw=true|text=Gentoo doc (Upgrading)}}
|
}}
The '''Apache HTTP Server''' is a efficient and extensible web server and the most popular on the Internet.

== Installation ==
{{Note|If you're only updating, check the [http://www.gentoo.org/proj/en/apache/doc/upgrading.xml upgrading guide].}}

{{Emerge|{{Package|www-servers/apache}}}}

=== USE flags ===
{{USEflag|package=www-servers/apache
|debug
|doc
|ldap
|ssl+yes
|static
|suexec
|threads
|APACHE2_MODULES+++See {{Path|/usr/portage/profiles/desc/apache2_modules.desc}}. Enable in your {{Path|make.conf}}.
|APACHE2_MPMS+++See {{Path|/usr/portage/profiles/desc/apache2_mpms.desc}}. Enable in your {{Path|make.conf}}.
}}

=== Support in other packages ===
There is a global USE flag ''apache2'' which enables support for Apache in other packages. This may cause {{Package|www-servers/apache}} to be pulled in automatically if such packages are used.
{{File|/etc/portage/make.conf||<pre>
USE="... apache2 ..."
</pre>}}

After setting this you want to update your system so the changes take effect:
{{Emerge|params+=--changed-use --deep|@world}}

== Configuration ==
Start the Apache server:
{{RootCmd|/etc/init.d/apache2 start}}

Add Apache to the default runlevel:
{{RootCmd|rc-update add apache2 default}}

== Testing ==
Verifying IP interfaces and ports on which apache2 is running on and listening to:
{{RootCmd|netstat -tulpen {{!}} grep apache|output=<pre>
tcp     0     0 0.0.0.0:80      0.0.0.0:*     LISTEN     0     10932720     4544/apache2        
tcp     0     0 0.0.0.0:443     0.0.0.0:*     LISTEN     0     10932716     4544/apache2        
</pre>}}

Testing if a connection to a Apache server is working on localhost:
{{Cmd|telnet localhost 80|output=<pre>
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
</pre>}}
Interrupt the connection test with {{Key|Ctrl}}+{{Key|c}} and {{Key|Enter}}.

== Advanced configuration ==

=== PHP support ===
Install [[PHP]] with enabled ''apache2'' USE flag and enable the PHP module by adding ''-D PHP{version}''. (ie. ''-D PHP5''; Note the suffixed version number is appended to the module name.)
{{File|/etc/conf.d/apache2||<pre>
APACHE2_OPTS="... -D PHP5"
</pre>}}

Restart the Apache service:
{{RootCmd|rc-service apache restart}}


To test, if the PHP module works, create a test page:
{{File|/var/www/localhost/htdocs/index.php||<pre>
<html>
 <body>
  <?php phpinfo(); ?>
 </body>
</html>
</pre>}}
Now open the test page: http://localhost/

== Troubleshooting ==
* [http://www.gentoo.org/proj/en/apache/doc/troubleshooting.xml Troubleshooting guide]
* {{Bug|www-servers/apache|search=package}}

== See also ==
* [[Lighttpd]] - a fast, lightweight web server.

== External resources ==
* [http://articles.slicehost.com/2010/12/2/installing-apache-on-gentoo Slicehost article: Installing Apache on Gentoo]
* [http://articles.slicehost.com/2010/12/3/apache-configuration-files-on-gentoo Slicehost article: Apache configuration files on Gentoo]
* [http://articles.slicehost.com/2010/12/3/configuring-the-apache-mpm-on-gentoo Slicehost article: Configuring the Apache MPM on Gentoo]
* [http://articles.slicehost.com/2010/12/3/apache-configuration-on-gentoo-part-1 Slicehost article: Apache configuration on Gentoo]
* [http://articles.slicehost.com/2010/12/3/apache-virtual-hosts-on-gentoo-part-1 Slicehost article: Apache Virtual Hosts on Gentoo]
* [http://articles.slicehost.com/2010/12/3/enabling-and-using-apache-s-mod_status-on-gentoo Slicehost article: Enabling and using apache's mod_status on Gentoo]
* [http://httpd.apache.org/docs/ apache.org documentation]

[[Category:Server]]
