<languages />
Este artículo proporciona información sobre cómo poner en marcha (el sistema) con '''GRUB2''', sobre la base de configuraciones simples. Para una información más completa, vea [[GRUB2]]. Para una migración de [[GRUB|GRUB Legacy]] a GRUB2, vea [[GRUB2 Migration]].

== Instalar el software de GRUB2 ==

El paquete {{Package|sys-boot/grub}} es un paquete compuesto; tanto grub-0,97 como grub-2.xx se pueden instalar simultáneamente. Sin embargo, mientras que ambas versiones de GRUB se pueden instalar en el sistema al mismo tiempo, sola una versión de GRUB puede estar activa como cargador de arranque del sistema.

Para instalar GRUB2, en primer lugar, establezca la variable <code>GRUB_PLATFORMS</code> en {{Path|make.conf}} (opcional). Si no se configura, GRUB2 intentará averiguar la plataforma que usa el sistema. Se decantará por una plataforma «PC» (que no es UEFI; ver ejemplos a continuación) para la arquitectura X86/AMD64.

{{FileBox|filename=/etc/portage/make.conf|title=Ejemplo de GRUB_PLATFORMS|lang=bash|1=
# PC estándar (BIOS)
GRUB_PLATFORMS="pc"
 
# UEFI sobre amd64
GRUB_PLATFORMS="efi-64"
 
# UEFI y PC
GRUB_PLATFORMS="efi-64 pc"
}}

Después de que se haya establecido la variable, instale el software:

{{emerge|sys-boot/grub:2}}

== Activar el gestor de arranque GRUB2 ==

Monte {{Path|/boot}}, si procede:

{{RootCmd|mount /boot}}

When using an EFI platform, make sure that the [[EFI System Partition]] is available (mounted) at {{Path|/boot/efi}}. This can either be through a specific mount point (at {{Path|/boot/efi}}) or by having an entire {{Path|/boot}} partition formatted with the FAT filesystem. This will effectually render {{Path|/boot}} into a large EFI System Partition.

Presuming only {{Path|/boot/efi}} is FAT:

{{RootCmd|mount /boot/efi}}

Ejecute la utilidad <tt>grub2-install</tt> para copiar los ficheros correspondientes a {{Path|/boot/grub}}. En plataformas PC, esta orden también instala una imagen de arranque en el Master Boot Record (MBR) o en el sector de arranque de una partición.

Para instalar GRUB2 en el MBR:

{{RootCmd|grub2-install /dev/sda||output=<pre>
Installation finished. No error reported.
</pre>}}

Para instalar GRUB2 en un sistema EFI:

{{RootCmd|grub2-install --target{{=}}x86_64-efi|output=<pre>
Installation finished. No error reported.
</pre>}}

{{Important/es|Si la instalación de GRUB2 en un sistema EFI (ejemplo anterior) estuviese dando problemas, asegúrese de que la variable <code>GRUB_PLATFORMS</code> se establece correctamente en {{Path|/etc/portage/make.conf}}}}

La orden <tt>grub2-install</tt> acepta una opción <code>--target</code> para especificar sobre qué CPU/Plataforma instalar. Si no se especifica, grub2-install realizará su propia conjetura; en arquitecturas X86/AMD64 utilizará la opción «i386-pc» por defecto.

== Configuración automática ==

GRUB2 está configurado tradicionalmente para usar el programa <tt>grub2-mkconfig</tt> a fin de generar un archivo de configuración.

<tt>grub2-mkconfig</tt> genera el archivo de configuración basado en plantillas ubicadas en {{Path|/etc/grub.d}}. Las plantillas están pensadas para cubrir las configuraciones de arranque más comunes.

{{Cmd|ls /etc/grub.d|output=<pre>
00_header  10_linux  20_linux_xen  30_os-prober  40_custom  41_custom  README
</pre>}}

El comportamiento de estas plantillas puede ser controlado definiendo las variables presentes en {{Path|/etc/default/grub}}. Vea el [http://www.gnu.org/software/grub/manual/html_node/Simple-configuration.html manual de GRUB] para obtener más información.

=== Esquema de nombres del núcleo ===

Para que <tt>grub2-mkconfig</tt> detecte el núcleo de Linux disponible(s), sus nombres deben comenzar con {{Path|vmlinuz-}} o {{Path|kernel-}}.

Por ejemplo:

{{CodeBox|title=Ejemplo de nombres del núcleo que puede detectar GRUB2|<pre>
 /boot/vmlinuz-3.4.3
 /boot/kernel-2.6.39-gentoo
 /boot/kernel-genkernel-x86_64-3.17.1-gentoo-r1
</pre>}}

Cuando se utiliza un [[initramfs]], su nombre debe comenzar por {{Path|initramfs-}} o {{Path|initrd-}} y terminar con {{Path|.img}}. La versión debe coincidir con una de las imágenes del núcleo. Los nombres de ficheros generados por [[genkernel]] también funcionarán.

Por ejemplo:

{{CodeBox|title=Ejemplo de nombres de initramfs puede detectar GRUB2|<pre>
 /boot/initramfs-3.4.3.img
 /boot/initramfs-genkernel-x86_64-2.6.39-gentoo
</pre>}}

Para generar el fichero {{Path|grub.cfg}}, ejecute la orden <tt>grub2-mkconfig</tt> como sigue:

{{RootCmd|grub2-mkconfig -o /boot/grub/grub.cfg|output=<pre>
Generating grub.cfg ...
Found linux image: /boot/vmlinuz-3.2.9
done
</pre>}}

=== Silenciar descompresión del núcleo ===

Para silenciar la descompresión del núcleo en el arranque, edite {{Path|/etc/default/grub}} y añada <code>quiet</code> al parámetro <code>GRUB_CMDLINE_LINUX_DEFAULT</code>.

{{FileBox|filename=/etc/default/grub|title=Ejemplo de descompresión silenciosa|lang=bash|1=
GRUB_CMDLINE_LINUX_DEFAULT="quiet"
}}

=== Systemd ===

Para arrancar systemd usando GRUB2 ajuste la variable <code>GRUB_CMDLINE_LINUX</code> de un modo similar a esto:

{{FileBox|filename=/etc/default/grub|title=Ejemplo para systemd|lang=bash|1=
GRUB_CMDLINE_LINUX="init=/usr/lib/systemd/systemd"
}}

=== Cargar otro sistema operativo ===

<tt>grub2-mkconfig</tt> también puede generar configuraciones para cargar ''otros'' sistemas operativos. Esto requiere tener el paquete  {{Package|sys-boot/os-prober}}.

Para arrancar Windows, también necesitará tener instalado el paquete {{Package|sys-fs/ntfs3g}}. Esto permite a la utilidad <tt>grub2-mkconfig</tt> sondear sistemas de ficheros NTFS.

== Configuración manual ==

Users do not need to use {{c|grub2-mkconfig}}. The {{Path|grub.cfg}} file can be edited manually as well.

Como la mayoría de los usuarios tienen experiencia con el formato de GRUB Legacy, el siguiente ejemplo muestra cómo escribir un archivo de configuración de GRUB2 basado en la información que proporciona la configuración de GRUB Legacy.

{|
! style="text-align: left;" | {{Path|grub.conf}} (GRUB Legacy)
|
! style="text-align: left;" | {{Path|grub.cfg}} (GRUB 2)
|-
| style="background: rgb(250,250,250); vertical-align: top; border: 1px solid black; padding: 5px 7px;" | <code style="color: gray; margin: 0; padding: 0; border: 0; background: transparent; line-height: normal;">timeout 5<br />
<br />
<span style="font-weight: bold; color: maroon;">title</span> Gentoo Linux 3.2.12<br />
root <span style="font-weight: bold; color: maroon;">(</span>hd0,<span style="font-weight: bold; color: maroon;">0)</span><br />
<span style="font-weight: bold; color: maroon;">kernel</span> /boot/kernel-3.2.12-gentoo root=/dev/sda3</code>
| style="vertical-align: middle; font-size: 50px; color: gray;" | ⇨
| style="background: rgb(250,250,250); vertical-align: top; border: 1px solid black; padding: 5px 7px;" | <code style="color: gray; margin: 0; padding: 0; border: 0; background: transparent; line-height: normal;">timeout<span style="font-weight: bold; color: green;">=</span>5<br />
<br />
<span style="font-weight: bold; color: green;">menuentry</span> <span style="font-weight: bold; color: green;">'</span>Gentoo Linux 3.2.12<span style="font-weight: bold; color: green;">'</span> <span style="font-weight: bold; color: green;">{</span><br />
<span style="display: inline-block; width: 4ex; overflow: hidden;">	</span>root<span style="font-weight: bold; color: green;">=</span>hd0,<span style="font-weight: bold; color: green;">1</span><br />
<span style="display: inline-block; width: 4ex; overflow: hidden;">	</span><span style="font-weight: bold; color: green;">linux</span> /boot/kernel-3.2.12-gentoo root=/dev/sda3<br />
<span style="font-weight: bold; color: green;">}</span>
|}

== Véase también ==

Remítase al artículo [[GRUB2]] para obtener más información y una lista exhaustiva de recursos.


[[Category:Bootloaders]]
