<languages />
Este artículo proporciona información sobre cómo poner en marcha (el sistema) con '''GRUB2''', sobre la base de configuraciones simples. Para una información más completa, vea [[GRUB2]]. Para una migración de [[GRUB|GRUB Legacy]] a GRUB2, vea [[GRUB2 Migration]].

== Instalar el software de GRUB2 ==

El paquete {{Package|sys-boot/grub}} es un paquete compuesto; tanto grub-0,97 como grub-2.xx se pueden instalar simultáneamente. Sin embargo, mientras que ambas versiones de GRUB se pueden instalar en el sistema al mismo tiempo, sola una versión de GRUB puede estar activa como cargador de arranque del sistema.

Para instalar GRUB2, en primer lugar, establezca la variable <code>GRUB_PLATFORMS</code> en {{Path|make.conf}} (opcional). Si no se configura, GRUB2 intentará averiguar la plataforma que usa el sistema. Se decantará por una plataforma «PC» (que no es UEFI; ver ejemplos a continuación) para la arquitectura X86/AMD64.

{{FileBox|filename=/etc/portage/make.conf|title=Ejemplo de GRUB_PLATFORMS|lang=bash|1=
# PC estándar (BIOS)
GRUB_PLATFORMS="pc"
 
# UEFI sobre amd64
GRUB_PLATFORMS="efi-64"
 
# UEFI y PC
GRUB_PLATFORMS="efi-64 pc"
}}

Después de que se haya establecido la variable, instale el software:

{{emerge|sys-boot/grub:2}}

== Activar el gestor de arranque GRUB2 ==

Monte {{Path|/boot}}, si procede:

{{RootCmd|mount /boot}}

Cuando se utiliza una plataforma EFI, asegúrese de que la partición del sistema EFI («''EFI System Partition''») está disponible en {{Path|/boot/efi}}. Esto puede hacerse a través de un punto de montaje específico (en {{Path|/boot/efi}}) o haciendo que la partición /boot ''sea'' la EFI System Partition.

{{RootCmd|mount /boot/efi}}

Ejecute la utilidad <tt>grub2-install</tt> para copiar los ficheros correspondientes a {{Path|/boot/grub}}. En plataformas PC, esta orden también instala una imagen de arranque en el Master Boot Record (MBR) o en el sector de arranque de una partición.

Para instalar GRUB2 en el MBR:

{{RootCmd|grub2-install /dev/sda||output=<pre>
Installation finished. No error reported.
</pre>}}

Para instalar GRUB2 en una partición (no recomendado):

{{RootCmd|grub2-install /dev/sda1|output=<pre>
Installation finished. No error reported.
</pre>}}

Para instalar GRUB2 en un sistema EFI:

{{RootCmd|grub2-install --target{{=}}x86_64-efi|output=<pre>
Installation finished. No error reported.
</pre>}}

{{Important/es|Si la instalación de GRUB2 en un sistema EFI (ejemplo anterior) estuviese dando problemas, asegúrese de que la variable <code>GRUB_PLATFORMS</code> se establece correctamente en {{Path|/etc/portage/make.conf}}}}

The <tt>grub2-install</tt> command accepts a <code>--target</code> option to specify which CPU/Platform to install. If unspecified, grub2-install will make a guess; on X86/AMD64 it will use "i386-pc" by default.

== Automatic configuration ==

GRUB2 is traditionally configured by using the <tt>grub2-mkconfig</tt> program to generate a configuration file.

<tt>grub2-mkconfig</tt> generates the configuration file based on template sections located in {{Path|/etc/grub.d}}. The default templates should cover most common boot setups.

{{Cmd|ls /etc/grub.d|output=<pre>
00_header  10_linux  20_linux_xen  30_os-prober  40_custom  41_custom  README
</pre>}}

The behavior of these templates can be controlled by setting variables in {{Path|/etc/default/grub}}. See the [http://www.gnu.org/software/grub/manual/html_node/Simple-configuration.html GRUB manual] for more information.

=== Kernel naming scheme ===

In order for <tt>grub2-mkconfig</tt> to detect the available Linux kernel(s), their names must start with {{Path|vmlinuz-}} or {{Path|kernel-}}.

For example:

{{CodeBox|title=Example kernel names that GRUB2 can detect|<pre>
 /boot/vmlinuz-3.4.3
 /boot/kernel-2.6.39-gentoo
 /boot/kernel-genkernel-x86_64-3.17.1-gentoo-r1
</pre>}}

When using an [[initramfs]], its name should start with {{Path|initramfs-}} or {{Path|initrd-}} and end with {{Path|.img}}. The version must match one of a kernel image. File names generated by [[genkernel]] will also work.

For example:

{{CodeBox|title=Example initramfs names that GRUB2 can detect|<pre>
 /boot/initramfs-3.4.3.img
 /boot/initramfs-genkernel-x86_64-2.6.39-gentoo
</pre>}}

To generate the {{Path|grub.cfg}} file, execute the <tt>grub2-mkconfig</tt> command like so:

{{RootCmd|grub2-mkconfig -o /boot/grub/grub.cfg|output=<pre>
Generating grub.cfg ...
Found linux image: /boot/vmlinuz-3.2.9
done
</pre>}}

=== Silent kernel decompression ===

To silence kernel decompression at boot time, edit {{Path|/etc/default/grub}} and add <code>quiet</code> to the <code>GRUB_CMDLINE_LINUX_DEFAULT</code> parameter.

{{FileBox|filename=/etc/default/grub|title=Silent decompression example|lang=bash|1=
GRUB_CMDLINE_LINUX_DEFAULT="quiet"
}}

=== Systemd ===

To boot systemd while using GRUB2 make the <code>GRUB_CMDLINE_LINUX</code> variable look like this:

{{FileBox|filename=/etc/default/grub|title=Systemd example|lang=bash|1=
GRUB_CMDLINE_LINUX="init=/usr/lib/systemd/systemd"
}}

=== Loading another operating system ===

<tt>grub2-mkconfig</tt> can also generate configurations to load ''other'' operating systems. This requires the {{Package|sys-boot/os-prober}} package.

To boot Windows, the {{Package|sys-fs/ntfs3g}} also needs to be installed. It allows for the <tt>grub2-mkconfig</tt> utility to probe NTFS filesystems.

== Manual configuration ==

Users do not need to use <tt>grub2-mkconfig</tt>. The {{Path|grub.cfg}} file can be edited manually as well.

As most users have experience with GRUB Legacy format, the next example shows how to write a GRUB2 configuration file based on information from the GRUB Legacy configuration.

{|
! style="text-align: left;" | {{Path|grub.conf}} (GRUB Legacy)
|
! style="text-align: left;" | {{Path|grub.cfg}} (GRUB 2)
|-
| style="background: rgb(250,250,250); vertical-align: top; border: 1px solid black; padding: 5px 7px;" | <code style="color: gray; margin: 0; padding: 0; border: 0; background: transparent; line-height: normal;">timeout 5<br />
<br />
<span style="font-weight: bold; color: maroon;">title</span> Gentoo Linux 3.2.12<br />
root <span style="font-weight: bold; color: maroon;">(</span>hd0,<span style="font-weight: bold; color: maroon;">0)</span><br />
<span style="font-weight: bold; color: maroon;">kernel</span> /boot/kernel-3.2.12-gentoo root=/dev/sda3</code>
| style="vertical-align: middle; font-size: 50px; color: gray;" | ⇨
| style="background: rgb(250,250,250); vertical-align: top; border: 1px solid black; padding: 5px 7px;" | <code style="color: gray; margin: 0; padding: 0; border: 0; background: transparent; line-height: normal;">timeout<span style="font-weight: bold; color: green;">=</span>5<br />
<br />
<span style="font-weight: bold; color: green;">menuentry</span> <span style="font-weight: bold; color: green;">'</span>Gentoo Linux 3.2.12<span style="font-weight: bold; color: green;">'</span> <span style="font-weight: bold; color: green;">{</span><br />
<span style="display: inline-block; width: 4ex; overflow: hidden;">	</span>root<span style="font-weight: bold; color: green;">=</span>hd0,<span style="font-weight: bold; color: green;">1</span><br />
<span style="display: inline-block; width: 4ex; overflow: hidden;">	</span><span style="font-weight: bold; color: green;">linux</span> /boot/kernel-3.2.12-gentoo root=/dev/sda3<br />
<span style="font-weight: bold; color: green;">}</span>
|}

== See also ==

Remítase al artículo [[GRUB2]] para obtener más información y una lista exhaustiva de recursos.


[[Category:Bootloaders]]
