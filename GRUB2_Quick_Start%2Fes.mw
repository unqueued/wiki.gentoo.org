<languages />
Este artículo proporciona información sobre cómo poner en marcha (el sistema) con '''GRUB2''', sobre la base de configuraciones simples. Para una información más completa, vea [[GRUB2]]. Para una migración de [[GRUB|GRUB Legacy]] a GRUB2, vea [[GRUB2 Migration]].

== Instalar el software de GRUB2 ==

El paquete {{Package|sys-boot/grub}} es un paquete ranurado, lo que implica que tanto grub-0,97 como grub-2.xx se pueden instalar simultáneamente. Sin embargo, mientras que ambas versiones de GRUB se pueden instalar en el sistema simultáneamente, solo una de las versión de GRUB puede estar activa como cargador de arranque del sistema en un momento dado.

To install GRUB2, first set the <var>GRUB_PLATFORMS</var> variable with one or more appropriate values in the system's {{Path|make.conf}}. If unset, GRUB2 will guess which platform to use on the system. It guesses <code>pc</code> (which is the MBR style of installation) for {{Keyword|x86}}/{{Keyword|amd64}} architectures.

{{FileBox|filename=/etc/portage/make.conf|title=Ejemplo de GRUB_PLATFORMS|lang=bash|1=
# PC estándar (BIOS)
GRUB_PLATFORMS="pc"
 
# UEFI sobre amd64
GRUB_PLATFORMS="efi-64"
 
# Tanto UEFI como PC
GRUB_PLATFORMS="efi-64 pc"
}}

Después de que se haya establecido la variable, instale el software:

{{emerge|sys-boot/grub:2}}

== Activar el gestor de arranque GRUB2 ==

Monte {{Path|/boot}}, si procede:

{{RootCmd|mount /boot}}

When using an EFI platform, make sure that the [[EFI System Partition]] is available (mounted) at {{Path|/boot/efi}}. This can either be through a specific mount point (at {{Path|/boot/efi}}) or by having an entire {{Path|/boot}} partition formatted with the FAT filesystem. This will effectually render {{Path|/boot}} into a large EFI System Partition.

Asumiendo que {{Path|/boot/efi}} es un sistema de ficheros FAT:

{{RootCmd|mount /boot/efi}}

Ejecute la utilidad {{c|grub-install}} para copiar los ficheros correspondientes a {{Path|/boot/grub}}. En plataformas PC, esta orden también instala una imagen de arranque en el Master Boot Record (MBR) o en el sector de arranque de una partición.

Para instalar GRUB2 en el MBR:

{{RootCmd|grub-install /dev/sda||output=<pre>
Installation finished. No error reported.
</pre>}}

Para instalar GRUB2 en un sistema EFI:

{{RootCmd|grub-install --target{{=}}x86_64-efi|output=<pre>
Installation finished. No error reported.
</pre>}}

{{Important|Si la instalación de GRUB2 en un sistema EFI (ejemplo anterior) estuviese dando problemas, asegúrese de que la variable <var>GRUB_PLATFORMS</var> se establece correctamente en {{Path|/etc/portage/make.conf}}}}

The {{c|grub-install}} command accepts a <code>--target</code> option to specify which CPU/Platform to install. If unspecified, {{c|grub-install}} will make a guess: on {{Keyword|x86}}/{{Keyword|amd64}} it will use the <code>i386-pc</code> value by default.

== Configuración automática ==

GRUB2 está configurado tradicionalmente para usar el programa {{c|grub-mkconfig}} a fin de generar un archivo de configuración.

{{c|grub-mkconfig}} genera el archivo de configuración basado en plantillas ubicadas en {{Path|/etc/grub.d}}. Las plantillas están pensadas para cubrir las configuraciones de arranque más comunes.

{{Cmd|ls /etc/grub.d|output=<pre>
00_header  10_linux  20_linux_xen  30_os-prober  40_custom  41_custom  README
</pre>}}

El comportamiento de estas plantillas puede ser controlado definiendo las variables presentes en {{Path|/etc/default/grub}}. Vea el [http://www.gnu.org/software/grub/manual/html_node/Simple-configuration.html manual de GRUB] para obtener más información.

=== Esquema de nombres del núcleo ===

In order for {{c|grub-mkconfig}} to detect the available Linux kernel(s), their names must start with {{Path|vmlinuz-}} or {{Path|kernel-}}.

Por ejemplo:

{{CodeBox|title=Ejemplo de nombres del núcleo que puede detectar GRUB2|<pre>
 /boot/vmlinuz-3.4.3
 /boot/kernel-2.6.39-gentoo
 /boot/kernel-genkernel-x86_64-3.17.1-gentoo-r1
</pre>}}

When using an [[initramfs]], its name should start with {{Path|initramfs-}} or {{Path|initrd-}} and end with {{Path|.img}}. The version must match one of a kernel image. File names generated by {{c|[[genkernel]]}} will also work.

Por ejemplo:

{{CodeBox|title=Example initramfs names that GRUB2 can detect|<pre>
 /boot/initrd.img-3.4.3
 /boot/initrd-3.4.3.img
 /boot/initrd-3.4.3.gz
 /boot/initrd-3.4.3
 /boot/initramfs-3.4.3.img
 /boot/initramfs-genkernel-3.4.3-gentoo
 /boot/initramfs-genkernel-x86_64-2.6.39-gentoo
</pre>}}

To generate the {{Path|grub.cfg}} file, execute the {{c|grub-mkconfig}} command like so:

{{RootCmd|grub-mkconfig -o /boot/grub/grub.cfg|output=<pre>
Generating grub.cfg ...
Found linux image: /boot/vmlinuz-3.2.9
done
</pre>}}

=== Silenciar descompresión del núcleo ===

To silence kernel decompression at boot time, edit {{Path|/etc/default/grub}} and add <code>quiet</code> to the <var>GRUB_CMDLINE_LINUX_DEFAULT</var> variable.

{{FileBox|filename=/etc/default/grub|title=Ejemplo de descompresión silenciosa|lang=bash|1=
GRUB_CMDLINE_LINUX_DEFAULT="quiet"
}}

=== Systemd ===

To boot systemd while using GRUB2 make the <var>GRUB_CMDLINE_LINUX</var> variable look like this:

{{FileBox|filename=/etc/default/grub|title=Ejemplo para systemd|lang=bash|1=
GRUB_CMDLINE_LINUX="init=/usr/lib/systemd/systemd"
}}

=== Cargar otro sistema operativo ===

{{c|grub-mkconfig}} también puede generar configuraciones para cargar ''otros'' sistemas operativos. Esto requiere tener el paquete  {{Package|sys-boot/os-prober}}.

Para arrancar Windows, también necesitará tener instalado el paquete {{Package|sys-fs/ntfs3g}}. Esto permite a la utilidad {{c|grub-mkconfig}} sondear sistemas de ficheros NTFS.

== Configuración manual ==

Los usuarios no necesitan utilizar obligatoriamente {{c|grub-mkconfig}}. El fichero {{Path|grub.cfg}} puede editarse manualmente a este fin.

Como la mayoría de los usuarios tienen experiencia con el formato de GRUB Legacy, el siguiente ejemplo muestra cómo escribir un archivo de configuración de GRUB2 basado en la información que proporciona la configuración de GRUB Legacy.

{|
! style="text-align: left;" | {{Path|grub.conf}} (GRUB Legacy)
|
! style="text-align: left;" | {{Path|grub.cfg}} (GRUB 2)
|-
| style="background: rgb(250,250,250); vertical-align: top; border: 1px solid black; padding: 5px 7px;" | <code style="color: gray; margin: 0; padding: 0; border: 0; background: transparent; line-height: normal;">timeout 5<br />
<br />
<span style="font-weight: bold; color: maroon;">title</span> Gentoo Linux 3.2.12<br />
root <span style="font-weight: bold; color: maroon;">(</span>hd0,<span style="font-weight: bold; color: maroon;">0)</span><br />
<span style="font-weight: bold; color: maroon;">kernel</span> /boot/kernel-3.2.12-gentoo root=/dev/sda3</code>
| style="vertical-align: middle; font-size: 50px; color: gray;" | ⇨
| style="background: rgb(250,250,250); vertical-align: top; border: 1px solid black; padding: 5px 7px;" | <code style="color: gray; margin: 0; padding: 0; border: 0; background: transparent; line-height: normal;">timeout<span style="font-weight: bold; color: green;">=</span>5<br />
<br />
<span style="font-weight: bold; color: green;">menuentry</span> <span style="font-weight: bold; color: green;">'</span>Gentoo Linux 3.2.12<span style="font-weight: bold; color: green;">'</span> <span style="font-weight: bold; color: green;">{</span><br />
<span style="display: inline-block; width: 4ex; overflow: hidden;">	</span>root<span style="font-weight: bold; color: green;">=</span>hd0,<span style="font-weight: bold; color: green;">1</span><br />
<span style="display: inline-block; width: 4ex; overflow: hidden;">	</span><span style="font-weight: bold; color: green;">linux</span> /boot/kernel-3.2.12-gentoo root=/dev/sda3<br />
<span style="font-weight: bold; color: green;">}</span>
|}

== Véase también ==

*[[GRUB2/es|GRUB2]] - El artículo 'completo' sobre GRUB2 contiene más información y una lista exhaustiva de recursos.


[[Category:Bootloaders]]
