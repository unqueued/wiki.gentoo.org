{{InfoBox stack
|{{InfoBox homepage|http://hplipopensource.com/hplip-web/index.html|header=true}}
|{{InfoBox wikipedia|HP Linux Imaging and Printing}}
}}
'''HPLIP''' ('''HP''' '''L'''inux '''I'''maging and '''P'''rinting) contains print, scan and fax drivers for HP devices.

== Do you require HPLIP? ==
Most HP printers do not require HPLIP to successfully print from. You can likely use a default CUPS install, which likely provides adequate drivers or PPD files.

If you have a MFD with a scanner feature, then you will require HPLIP as it is likely the scanner driver is provided only as a binary blob.  Also, HPLIP with ''fax'' USE flag will also be needed if you require support for sending files from your computer to the FAX modem on MFD devices.

(I'll add my own personal note here, there seems to be no difference in print quality or speed when using HPLIP versus the CUPS provided PPD files, and are likely identical in installation aside from what name you give your printer.)

== Installation ==

=== Kernel ===
USB connected devices require basic kernel USB support.

Network connected devices require basic kernel network support.

The above two methods are usually already enabled within most kernels.

Parallel connected devices require the following kernel options:
{{Kernel|Optional: Parallel port printer support|<pre>
Device Drivers  --->
    <*> Parallel port support  --->
        <*>   PC-style hardware
        [*]   IEEE 1284 transfer modes
    Character devices  --->
        <*> Parallel printer support
</pre>}}

=== Software ===
Install {{Package|net-print/hplip}}:
{{USEflag|package=net-print/hplip
|X+yes
|doc
|fax
|hpcups+yes+yes
|hpijs++no
|kde+yes
|libnotify+yes
|minimal++no
|policykit+yes
|parport
|qt4+yes
|scanner
|snmp
|static-ppds
}}

{{Note|Also add ''SANE_BACKENDS{{=}}"hp" to your {{Path|/etc/portage/make.conf}}.}}

{{Emerge|hplip}}

== Configuration ==

=== Printers and Faxes ===
If installed with enabled ''qt4'' USE flag, use the "HP Device Manager" to configure your devices.

If not or the program doesn't work for you, run '''hp-setup''' in a terminal:
{{RootCmd|hp-setup}}

For network printer also specify the printer's IP address:
{{RootCmd|hp-setup -i 192.168.1.27}}

=== Scanners Requiring the Binary Plugin ===
Overall, scanners should just work if they do not require a binary plugin and will be detected with XSane with the following file configurations:
{{File|/etc/portage/make.conf||<pre>
SANE_BACKENDS="sane_backends_hp"
</pre>}}

{{File|/etc/sane.d/dll.conf||<pre>
hpaio
</pre>}}

For those requiring the binary plugin for networked scanning devices using the following for installing and upgrading.
{{RootCmd|hp-plugin -i 192.168.1.27}}

{{Note|The above instructions are untested with any open sourced HP Scanners.  Please modify as necessary if you have one! (ie. HP Photosmart 6510?)}}

{{Note|After each HPLIP ebuild upgrade, users need to manually update their binary plugins as the ebuild has no current abilities for updating the binary plugins! See {{Bug|423599}}.}}

== Testing ==

=== Printer ===
The above command, should provide an option to test print. If it fails printing due to lack of X as root, use your CUPS web interface located at http://localhost:631/ for printing a test page.

=== Scanner ===
Use '''xsane''' and then press the preview button to ensure the binary scanner driver is installed and working properly.

== Troubleshooting ==

=== Buggy hp-setup ===
Install HPLIP with ''snmp'' USE flag and try again.

=== /usr/libexec/cups/backend/hp failed ===
{{RootCmd|rc-service cupsd stop
|cp /etc/cups/printers.conf /etc/cups/printers.conf.20121104}}

Edit this {{Path|/etc/cups/printers.conf}} and remove the lines prefixed with "State", "Reason" and "Type".

Upon saving the file and restarting the cupsd daemon, printing should resume.

=== Error on install "File "./plugin_install.py", line 78 except ImportError, e:" ===
PROBLEM: A snipping of the error follows.

{{RootCmd|hp-setup -i 192.168.1.27|output=<pre>
[...SNIP...]

----------------------
| INSTALLING PLUG-IN |
----------------------

Verifying archive integrity... All good.
Uncompressing HPLIP 3.12.10a Plugin Self Extracting Archive.....................................................
  File "./plugin_install.py", line 78
    except ImportError, e:
                      ^
SyntaxError: invalid syntax
error: Python gobject/dbus may be not installed
</pre>}}

WORK AROUND: The cause is because incompatible coding is being used with Python 3 within hp-setup.  To work around, "eselect python list" and "eselect python (set to version 2)".  Just remember to revert back to Python 3 version when you are finished installing.

{{RootCmd|eselect python list}}

RESOLUTION: This bug is further documented at the following link and there appears to be no fix since 2011.11.16 as of 2012.11.18! {{Bug|891080|site=launchpad}}

=== HPLIP ebuild Upgrades Do Not Upgrade Binary Plugin(s) ===
PROBLEM: The HPLIP ebuild does not upgrade the binary plugin(s) when the ebuild is upgraded.  A symptom of this problem, you may get segfaults when starting XSane. (ie. The HP LaserJet M1522nf requires a binary plugin for using the scanning feature.)

WORK AROUND #1: Use '''hp-plugin -i 192.168.1.27''' to manually upgrade the binary (scanner) plugin(s). This method is currently untested.

WORK AROUND #2: Delete all printers within CUPS and use '''hp-setup''' after upgrading the HPLIP ebuild. This method does work.

[[Category:Hardware]]
