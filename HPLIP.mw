{{InfoBox stack
|{{InfoBox homepage|http://hplipopensource.com/hplip-web/index.html|header=true}}
|{{InfoBox wikipedia|HP Linux Imaging and Printing}}
}}
'''HPLIP''' ('''HP''' '''L'''inux '''I'''maging and '''P'''rinting) contains print, scan and fax drivers for HP devices.

== Do you require HPLIP? ==
Most HP printers do not require HPLIP to successfully print from. You can likely use a default CUPS install, which likely provides adequate drivers or PPD files.

If you have a MFD with a scanner feature, then you will require HPLIP as it is likely the scanner driver is provided only as a binary blob.

== Installation ==

=== Kernel ===
You need to activate the following kernel options:
{{Kernel|Optional: Parallel port printer support|<pre>
Device Drivers  --->
    <*> Parallel port support  --->
        <*>   PC-style hardware
        [*]   IEEE 1284 transfer modes
    Character devices  --->
        <*> Parallel printer support
</pre>}}

=== Software ===
Install {{Package|net-print/hplip}}:
{{USEflag|package=net-print/hplip
|X+yes
|doc
|fax
|hpcups+yes+yes
|hpijs++no
|kde+yes
|libnotify+yes
|minimal++no
|policykit+yes
|parport
|qt4+yes
|scanner
|snmp
|static-ppds
}}

{{Note|Also add ''SANE_BACKENDS{{=}}"sane_backends_hp" to your {{Path|/etc/portage/make.conf}}.}}

{{Emerge|hplip}}

== Configuration ==
If installed with enabled ''qt4'' USE flag, use the "HP Device Manager" to configure your devices.

If not or if the program don't work for you, run '''hp-setup''' in a terminal:
{{RootCmd|hp-setup}}

For network printer also specify the printer's IP address:
{{RootCmd|hp-setup -i 192.168.1.27}}

== Testing ==

=== Printer ===
The above command, should provide an option to test print. If it fails printing due to lack of X as root, use your CUPS web interface located at http://localhost:631/ for printing a test page.

=== Scanner ===
Use '''xsane''' and then press the preview button to ensure the binary scanner driver is installed and working properly.

== Troubleshooting ==

=== Buggy hp-setup ===
Install HPLIP with ''snmp'' USE flag and try again.

=== /usr/libexec/cups/backend/hp failed ===
rc-service cupsd stop

cp /etc/cups/printers.conf  /etc/cups/printers.conf.20121104

Edit this " /etc/cups/printers.conf" and remove the lines prefixed with "State", "Reason" and "Type".

Upon saving the file and restarting the cupsd daemon, printing should resume.

=== Error on install "File "./plugin_install.py", line 78 except ImportError, e:" ===

PROBLEM: A snipping of the error follows.

{{RootCmd
|hp-setup -i 192.168.1.27|output=<pre>

[...SNIP...]

----------------------
| INSTALLING PLUG-IN |
----------------------

Verifying archive integrity... All good.
Uncompressing HPLIP 3.12.10a Plugin Self Extracting Archive.....................................................
  File "./plugin_install.py", line 78
    except ImportError, e:
                      ^
SyntaxError: invalid syntax
error: Python gobject/dbus may be not installed
</pre>}}

WORK AROUND: The cause is because incompatible coding is being used with Python 3 within hp-setup.  To work around, "eselect python list" and "eselect python (set to version 2)".  Just remember to revert back to Python 3 version when you are finished installing.

{{RootCmd
|eselect python list}}

RESOLUTION: This bug is further documented at the following link and there appears to be no fix since 2011.11.16 as of 2012.11.18!
http://bugs.launchpad.net/hplip/+bug/891080

=== HPLIP Ebuild Upgrades Do Not Upgrade Binary Plugin(s) ===
PROBLEM: Apparently, the hplip ebuild does not upgrade the binary plugin(s) when the ebuild is upgraded.  A symptom of this problem, you may get segfaults when starting XSane.  (ie. The HP LaserJet M1522nf requires a binary plugin for using the scanning feature.)

WORK AROUND: Delete all printers within CUPS and use hp-setup after upgrading the hplip ebuild.

[[Category:Hardware]]
