<languages />


{{Metadata|abstract=Этот документ описывает установку и поддержку принтеров, использующих CUPS и Samba. Он охватывает локальную и сетевую установки, также содержит инструкции по использованию общих принтеров из других операционных систем.}}

Этот документ описывает установку и поддержку принтеров, использующих CUPS и Samba. Он охватывает локальную и сетевую установки, также содержит инструкции по использованию общих принтеров из других операционных систем. За информацией о использовании команд {{c|lp}} и {{c|lpr}} для печати документов смотрите [http://www.cups.org/documentation.php/options.html отличную документацию от CUPS].

== Печать и Gentoo Linux ==

=== Используйте правильные инструменты ===

Linux имеет отличную поддержку принтеров; правильным инструментом для работы является CUPS ([http://www.cups.org Common Unix Printing System]). С самого начала проекта, в 1999, установка и поддержка CUPS существенно улучшилась. 

В этом документе мы опишем как использовать CUPS для настройки локального или сетевого принтера. Не будем углубляться в подробности, так как проект имеет [http://www.cups.org/documentation.php отличную документацию], описывающий все тонкости использования. 

== Сконфигурируйте ядро ==

=== Введение ===

Когда пользователь хочет установить принтер в системе, сперва нужно узнать как принтер будет к ней подключен. Будет ли подключение осуществляться через локальный порт, например LPT или USB, или он будет подключен по сети? Если принтер сетевой, будет ли он использовать протокол межсетевой печати (Internet Printing Protocol (IPP)) или протокол Microsoft Windows CIFS (Microsoft Windows Sharing)? 

Следующие несколько разделов объясняют какая минимальная конфигурация ядра необходима для подключения принтера к Gentoo. Конечно же, это зависит от того, ''как'' принтер будет подключен к системе, поэтому для удобства инструкции разделены.

Перейдем в {{Path|/usr/src/linux}} и запустим {{c|make menuconfig}}, чтобы войти в меню конфигурации ядра. Если ранее использовался {{c|genkernel}} для конфигурации ядра, нужно все равно выполнить эти шаги, чтобы убедиться, что ничего не пропущено. Не полагайтесь на genkernel, чтобы настроить все в системе автоматически; печать — это та область, где сложно автоматически определить верные настройки.

В следующих примерах конфигурации будет добавлена необходимая поддержка ''в'' ядро, а не в качестве модулей. Такая сборка ядра необязательна; если необходимо, можно с легкостью добавить поддержку модулей, но удостоверьтесь, что впоследствии не забыли загрузить необходимые модули! 

Теперь перейдите к соответствующему разделу для конфигурации (или проверки) ядра.

=== Локально подключенный принтер (LPT) ===

LPT порт обычно используется для идентификации параллельного порта принтера. Вам потребуется сначала включить поддержку параллельного порта, затем поддержку параллельного порта "PC-style" (если только не используется система SPARC), после чего включить поддержку принтера с параллельным интерфейсом. 

{{KernelBox|title=Конфигурация принтера с параллельным интерфейсом|<pre>
Device Drivers -->
  <*> Parallel port support
  <*> PC-style hardware
  [*] IEEE 1284 transfer modes
  Character Devices -->
    <*> Parallel printer support
</pre>
}}

{{Note|Некоторым пользователям может потребоваться включение других параметров в разделе конфигурации <code>Parallel port support</code>. Проверьте функцию конфигурации ядра <code>Help</code> для получения подробностей.}}

Вот и все! Выйдите из конфигурации ядра и [[Kernel/Rebuild|пересоберите ядро]].

Теперь переходите к CUPS.

=== Локально подключенный принтер (USB) ===

CUPS может поддерживать печать через USB, если [[#Установка|включен USB USE-флаг]]. Также это может быть включено в ядре.

{{KernelBox|title=Поддержка USB принтера|<pre>
Symbol: USB_PRINTER [=n]
Type  :tristate
Prompt: USB Printer support
  Location:
    -> Device Drivers
      -> USB support (USB_SUPPORT [=y])
(1)     -> Support for Host-side USB (USB [=y])
  Defined at drivers/usb/class/Kconfig:21
  Depends on: USB_SUPPORT [=y] && USB [=y]
</pre>
}}

=== Удаленно подключенный принтер (IPP и LDP) ===

Чтобы иметь возможность подсоединиться к удаленно подключенному принтеру через протокол межсетевой печати (IPP) или [[wikipedia:Line_Printer_Daemon_protocol|Line Printer Daemon protocol]], ядро должно иметь поддержку сети. Предполагая, что ядро уже имеет эту поддержку, перейдем к CUPS.

=== Удаленно подключенный принтер (CIFS) ===

Ядро должно [[Samba/Guide#Mounting_a_Windows_or_Samba_share_in_GNU.2FLinux|поддерживать CIFS]]: 

{{KernelBox|title=Конфигурация принтера CIFS|<pre>
File systems -->
  Network File Systems -->
    <*> CIFS support (advanced network filesystem, SMBFS successor) 
</pre>
}}

После завершения конфигурации CIFS выйдите из конфигурации ядра и пересоберите ядро. Не забудьте скопировать новый образ ядра в {{Path|/boot}} (и не забудьте смонтировать {{Path|/boot}} при необходимости) и обновить конфигурацию загрузчика перед перезагрузкой системы. Если не уверены, как выполнить эти шаги, посмотрите команды в разделе '''Локально подключенный принтер (LPT)'''.

Теперь переходите к CUPS.

== Установка и конфигурация CUPS ==

=== Установка ===

Установка CUPS на Gentoo проще простого. CUPS имеет несколько дополнительных функций, которые могут быть интересными. Чтобы включить или отключить эти функции, используйте USE-флаги, связанные с ними.

{{USEflag|package=net-print/cups}}

Проверьте текущие настройки USE-флагов. Чтобы отклониться от текущих настроек USE-флагов только для CUPS, добавьте подходящие USE-флаги в файл {{Path|/etc/portage/package.use}}. 

{{RootCmd|emerge -pv cups|output=<pre>
[ebuild N     ] net-print/cups-1.7.3  USE="X acl dbus pam ssl threads usb -debug -gnutls -java -kerberos -lprng-compat -python (-selinux) -static-libs -systemd -xinetd -zeroconf" ABI_X86="(64) (-32) (-x32)" LINGUAS="ca es fr it ja pt_BR ru" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7" 0 kB
</pre>}}

Если результат устраивает, установим CUPS. 

{{Emerge|cups}}

Чтобы включить поддержку SAMBA, пакет {{Package|net-fs/samba}} должен быть установлен с поддержкой CUPS. Отредактируйте файл или каталог {{Path|/etc/portage/package.use}}, чтобы задействовать USE-флаг <code>cups</code>:

{{FileBox|filename=/etc/portage/package.use|title=Включение USE флаг cups для samba|1=
net-fs/samba cups
}}

Затем (пере)установим Samba:

{{Emerge|net-fs/samba}}

{{Important/ru|Все пользователи, которым требуется печатать документы, должны быть добавлены в группу <code>lp</code>:

{{RootCmd|gpasswd -a username lp}}

Все пользователи, которым требуется добавлять или редактировать принтеры через веб-интерфейс CUPS, должны быть добавлены в группу <code>lpadmin</code>:

{{RootCmd|gpasswd -a username lpadmin}}
}}

Если принтер подключен к системе локально, и необходимо, чтобы принтер был доступен сразу же после загрузки, нужно загружать демон CUPS автоматически при запуске системы. Убедитесь, что принтер подключен к компьютеру и включен до запуска демона CUPS. 

{{RootCmd|/etc/init.d/cupsd start
|rc-update add cupsd default}}

=== Конфигурация ===

Конфигурация сервера CUPS расположенная в {{Path|/etc/cups/cupsd.conf}} является для большинства пользователей достаточной. Однако, некоторым пользователям может понадобиться сделать некоторые изменения в конфигурации CUPS.

В следующем разделе описывается несколько изменений, которые часто бывают необходимы: 

* Разрешить другим системам использовать принтер, подключенный к этой рабочей станции Linux.
* Предоставить доступ к администрированию CUPS для удаленных систем.
* Настроить CUPS, чтобы поддерживать драйверы Windows PCL. Это рекомендуется, чтобы Windows системы могли использовать общий SAMBA принтер, так как большинство драйверов Windows — PCL драйверы.
* Настроить систему для использование принтера, подключенного к другой системе (не общему ресурсу Windows).

=== Удаленный доступ к принтеру ===

Чтобы другие системы использовали принтер через IPP, должен быть предоставлен явный доступ к принтеру в файле {{Path|/etc/cups/cupsd.conf}}. Для предоставления общего доступа к принтеру с помощью SAMBA это изменение не требуется. 

Откройте {{Path|/etc/cups/cupsd.conf}} в любимом текстовом редакторе и добавьте строку <code>Allow</code> для систем(ы), которым необходимо получить доступ к принтеру. В следующем примере доступ предоставлен к принтеру с localhost и с любой другой системы, чей IP-адрес начинается с <code>192.168.0</code>. 

{{FileBox|filename=/etc/cups/cupsd.conf|title=Разрешение удаленного доступа к принтеру|lang=apache|1=
<Location />
  Order allow,deny
  Allow localhost
  Allow from 192.168.0.*
</Location>
}}

Эта строка передает информацию для просмотра клиентам в сети. Данная информация позволит пользователям в сети узнать, что принтер стал доступен:

{{FileBox|filename=/etc/cups/cupsd.conf|title=Широковещательная рассылка информации|lang=apache|1=
BrowseAddress 192.168.0.*:631
}}

Слушающий порт CUPS должен быть настроен так, чтобы он отвечал на запросы печати с других машин в сети:

{{FileBox|filename=/etc/cups/cupsd.conf|title=Конфигурация порта|lang=apache|1=
Listen *:631
#Listen localhost:631
}}

{{Note|Если используется CUPS 1.1 (который в данный момент устарел), то необходимо использовать другой синтаксис для удаленных запросов печати:
{{CodeBox|title=Устаревшая конфигурация CUPS 1.1|1=
Port 631
(Убедитесь, что следующие две строки закомментированы)
#Listen 127.0.0.1:631
#Listen localhost:631
}}
}}

=== Удаленное администрирование CUPS ===

Если необходимо удаленное администрирование, то нужно предоставить доступ к администрированию CUPS для других систем, а не только с localhost. Отредактируйте {{Path|/etc/cups/cupsd.conf}} и явно предоставьте доступ каждой системе, которой необходим доступ. Например, чтобы предоставить доступ системе с IP-адресом 192.168.0.3: 

{{FileBox|filename=/etc/cups/cupsd.conf|title=Разрешение удаленного доступа|lang=apache|1=
<Location /admin>
(...)
  Encryption Required
  Order allow,deny
  Allow localhost
  Allow 192.168.0.3
</Location>
}}

Не забудьте перезапустить демон CUPS после внесения изменений в {{Path|/etc/cups/cupsd.conf}} посредством {{c|/etc/init.d/cupsd restart}}. 

=== Включение поддержки Windows PCL драйверов ===

Драйвера PCL отправляют данные на сервер печати "в сыром виде". Чтобы включить печать без обработки данных (raw printing) на CUPS, отредактируйте {{Path|/usr/share/cups/mime/mime.types}} и раскомментируйте строчку <code>application/octet-stream</code>, если она еще не раскомментирована. Затем отредактируйте {{Path|/usr/share/cups/mime/mime.convs}} и сделать то же самое, если строчка еще не раскомментирована. 

{{FileBox|filename=/usr/share/cups/mime/mime.types|title=Включение печати без обработки данных|1=
application/octet-stream
}}

{{FileBox|filename=/usr/share/cups/mime/mime.convs|1=
application/octet-stream     application/vnd.cups-raw    0    -
}}

Не забудьте перезапустить демон CUPS после внесения этих изменений запустив {{c|/etc/init.d/cupsd restart}}. 

=== Установка удаленного принтера ===

Если принтеры подключены к удаленному серверу CUPS, то можно легко настроить систему на использование удаленного принтера изменением файла {{Path|/etc/cups/client.conf}}. 

Предполагая, что принтер подключен к системе, называемой <code>printserver.mydomain</code>, откройте {{Path|/etc/cups/client.conf}} в любимом текстовом редакторе и установите директиву <code>ServerName</code>: 

{{FileBox|filename=/etc/cups/client.conf|1=
# (Замените printserver.mydomain на имя вашего сервера печати)
ServerName printserver.mydomain
}}

На удаленной системе будет установлен принтера по умолчанию, которые будут использоваться. Чтобы изменить принтер по умолчанию, используйте команду {{c|lpoptions}}:

Сначала посмотрите доступные принтеры:

{{RootCmd|lpstat -a|output=<pre>
hpljet5p accepting requests since Jan 01 00:00
hpdjet510 accepting requests since Jan 01 00:00
</pre>}}

Установим HP LaserJet 5P в качестве принтера по умолчанию:

{{RootCmd|lpoptions -d hpljet5p}}

== Конфигурация принтера ==

=== Введение ===

Если принтер, который будет настраиватся, доступен удаленно через другой сервер печати (с запущенным CUPS), тогда не нужно следовать этим инструкциям. Прочтите вместо этого [[#Установка удаленного принтера|установка удаленного принтера]]. 

=== Обнаружение принтера ===

Если USB принтер или принтер с параллельным портом был включен когда система Linux еще загружается, есть возможность получить информацию из ядра, подтверждающую, что принтер был успешно обнаружен. Это просто признак того, что принтер обнаружен и не является обязательным требованием. 

{{Cmd|dmesg {{!}} grep -i print|output=<pre>
parport0: Printer, Hewlett-Packard HP LaserJet 2100 Series
</pre>}}

Для USB принтера:

{{Cmd|lsusb|output=<pre>
(...)
Bus 001 Device 007: ID 03f0:1004 Hewlett-Packard DeskJet 970c/970cse
</pre>
}}

==== lpinfo ====

{{:Printing/lpinfo}}

Чтобы получить список доступных драйверов выполните следующую команду.

{{RootCmd|lpinfo -m}}

{{c|lpinfo}} не не многословен, когда выводит информацию и может быть немного сложным в использовании. Если возникает какой-либо вопрос, смотрите {{c|man lpinfo}} для получения дополнительной информации.

=== Установка принтера ===

Чтобы установить принтер на систему, запустите браузер и направьте его на [http://localhost:631 http://localhost:631]. Будет отображен веб-интерфейс CUPS, из которого можно выполнить все задачи администрирования. 

{{Note|Если используется HTTPS-соединение для CUPS, в первый раз, когда обращаетесь к интерфейсу, может пройти довольно ''длительное'' время перед тем как отобразится страница. Это потому, что первый запрос запускает генерирование сертификатов CUPS SSL, что может быть весьма не простой задачей.}}

Перейдите к {{Path|Administration}} и введите root логин и пароль в поле ввода. Затем, когда дошли до интерфейса администрирования, нажмите на {{Path|Add Printer}}. Будет отображен новый экран, позволяющий ввести следующую информацию: 

*''spooler name'', короткое, но информативное имя, используемое в системе для идентификации принтера. Это имя не должно содержать пробелов или любых других специальных символов. Например, для HP LaserJet 5P можно поставить <code>hpljet5p</code>.
*''location'', описание того где принтер расположен физически (например, "спальня", или "на кухне прямо рядом с посудомоечной машиной", и т.д.). Это чтобы помочь в поддержке и сопровождении нескольких принтеров.
*''description'', полное описание принтера. Широко используется полное имя принтера (например, "HP LaserJet 5P").

Следующий экран спрашивает устройство, где принтер будет слушать запросы. Будет выбор из нескольких устройств. Следующая таблица описывает некоторые возможные устройства, но список не является исчерпывающим.

{| class="table table-condensed table-striped" style="text-align: left;"
|- 
! Устройство
! Описание
|- 
| AppSocket/HP JetDirect
| Это специальное устройство делает возможным доступ к сетевым принтерам через сокет HP JetDirect. Поддержка этой опции есть только у определенных принтеров.
|- 
| Internet Printing Protocol (IPP или HTTP)
| Используйте это для того, чтобы получить доступ к удаленному принтеру через IPP протокол, либо напрямую (IPP) или через HTTP.
|- 
| LPD/LPR Host или Printer
| Выберите эту опцию, если принтер является удаленным и подключен к серверу LPD/LPR.
|- 
| Parallel Port #1
| Выберите, если принтер подключен локально к параллельному порту (LPT). Когда принтер обнаружен автоматически, его имя будет добавлено к устройству.
|- 
| USB Printer #1
| Выберите в том случае, когда принтер подключен локально к USB порту. Имя принтера должно быть автоматически добавлено к имени устройства.
|-
|}

Если устанавливаете удаленный принтер, то может быть запрошен URL путь к принтеру: 

* Сервер принтера LPD требует синтаксис <code>lpd://hostname/queue</code>.
* Принтер HP JetDirect требует синтаксис <code>socket://hostname</code>.
* Принтер IPP требует синтаксис <code>ipp://hostname/printers/printername</code> или <code><nowiki>http://hostname:631/printers/printername</nowiki></code>.

Далее, выберите производителя принтера в смежном экране, а также тип и номер модели в последующем экране. Для большинства принтеров будет доступно множество драйверов. Выберите один из них сейчас или поищите в [http://www.openprinting.org/printer_list.cgi списке принтеров OpenPrinting] хороший драйвер. Драйвер можно легко изменить позже. 

Как только драйвер выбран, CUPS проинформирует, что принтер успешно добавлен в систему. Перейти к странице управления принтером в интерфейсе администрирования и выберете {{Path|Configure Printer}} чтобы изменить настройки принтера (разрешение, формат страницы, ...).

=== Тестирование и повторная конфигурация принтера ===

Чтобы проверить, работает ли принтер правильно, перейдите к странице управления принтером, выберите принтер и нажмите на {{Path|Print Test Page}}. 

Если кажется, что принтер не работает корректно, нажмите на {{Path|Modify Printer}}, чтобы его повторно настроить. Будут отображены те же самыми экраны, как и во время первой установки, но значения по умолчанию теперь будут из текущей конфигурации. 

Если принтер не работает, то можно найти подсказки, посмотрев в журнал ошибок CUPS, который расположен {{Path|/var/log/cups/error_log}}. В следующем примере обнаружена ошибка разрешений, возможно вследствие ошибочных настроек {{Path|Allow}} в файле {{Path|/etc/cups/cupsd.conf}}.

{{RootCmd|tail /var/log/cups/error_log|output=<pre>
(...)
E [11/Jun/2005:10:23:28 +0200] [Job 102] Unable to get printer status (client-error-forbidden)!
</pre>
}}

=== Установка наилучшего драйвера ===

Существует множество драйверов для принтера; чтобы узнать какой имеет лучшую производительность при работе, посетите [http://www.openprinting.org/printer_list.cgi список принтеров OpenPrinting]. Выберите марку принтера и тип, чтобы узнать какой драйвер рекомендован этим сайтом. Например, для HP LaserJet 5P, сайт рекомендует драйвер <code>ljet4</code>. 

Загрузите PPD файл с сайта и поместите его в {{Path|/usr/share/cups/model}}, затем запустите {{c|/etc/init.d/cupsd restart}} от root. Это сделает драйвер доступным через веб-интерфейс CUPS. Теперь настройте принтер заново, как описано выше.

== Использование специальных драйверов принтера ==

=== Введение ===

Некоторые принтеры требуют специальные драйвера или предоставляют дополнительные функции, которые не включаются через обычный процесс конфигурации (описанный выше). Эта глава обсудит подборку принтеров и как их заставить работать с Gentoo Linux. 

=== Драйвер Gutenprint ===

Драйверы [http://gutenprint.sourceforge.net gutenprint] — это высококачественные драйверы с открытым исходным кодом для различных принтеров Canon, Epson, HP, Lexmark, Sony, Olympus и PCL, поддерживающие CUPS. Они также поддерживают ghostscript, The Gimp и другие приложения. 

Дерево Portage в Gentoo содержит ebuild-файл для драйверов gutenprint. Запустите {{c|emerge gutenprint}} чтобы их установить. Заметьте, что ebuild содержит достаточно большое количества USE-флагов. Как минимум должны быть включены <code>cups</code> и <code>ppds</code>, чтобы драйвера gutenprint работали хорошо.

{{Emerge|net-print/gutenprint}}

Когда процесс сборки завершится, драйвера gutenprint будут доступны через веб-интерфейс CUPS.

=== Драйвер HPLIP ===

См. [[HPLIP/ru|Драйвер HPLIP]].

=== Драйвер PNM2PPA ===

PPA — это технология HP, которая фокусируется на отправке низкоуровневой обработки системе вместо принтера, что делает принтер более дешевым, но более требовательным к ресурсам. 

Если сайт [http://www.openprinting.org/printer_list.cgi OpenPrinting] информирует, что драйвер [http://pnm2ppa.sourceforge.net/ pnm2ppa] является лучшим выбором, то необходимо установить фильтр {{Package|net-print/pnm2ppa}} в систему: 

{{Emerge|net-print/pnm2ppa}}

Как только установка завершена, загрузите PPD файл для принтера с сайта [http://www.openprinting.org/printer_list.cgi OpenPrinting] и поместите его в каталог {{Path|/usr/share/cups/model}}. Затем, настройте принтер используя шаги, разъясненные выше.

=== Драйвер SpliX ===

[http://splix.ap2c.org/ SpliX] — это набор CUPS драйверов для SPL (Samsung Printer Language) принтеров. Splix драйвер доступен на сайте [http://www.openprinting.org/printer_list.cgi OpenPrinting], а также пакет {{Package|net-print/splix}} позволяет быстро установить этот драйвер. Для установки запустите команду:

{{Emerge|net-print/splix}}

и перезагрузите {{c|cupsd}}.

=== Драйвера для принтеров Brother ===

Смотрите [[Brother_networked_printer/ru|Сетевой принтер Brother]].

=== Драйвер Canon CAPT ===

Смотрите [[Canon_CAPT_Printer|драйвер Canon CAPT]].

== Печать на и с Microsoft Windows ==

{{Note|Прочитайте [[Samba/Guide|руководство по Samba/CUPS]] для более подробной информации по настройке CUPS с Samba.}}

=== Конфигурация Windows клиента для использования IPP ===

Microsoft Windows поддерживает IPP (пользователи Windows 9x и ME должны [http://support.microsoft.com/default.aspx?scid=kb;en-us;294439 установить] это отдельно). Чтобы установить принтер на Windows, который подключен к машине с Linux, запустите мастер добавления принтера{{Path|Добавить принтер}} и выберите {{Path|Сетевой принтер}}. Когда запросится URI, используйте синтаксис <code><nowiki>http://hostname:631/printers/queue</nowiki></code>. 

=== Конфигурация Windows клиента для общего Samba-принтера ===

Чтобы открыть общий доступ к принтеру в сети CIFS, SAMBA должна быть установлена и правильно сконфигурирована. Как это сделать выходит за рамки данной статьи, тем не менее быстро рассмотрим конфигурацию SAMBA для принтеров с общим доступом. 

Откройте {{Path|/etc/samba/smb.conf}} в любимом текстовом редакторе и добавьте в него раздел <code>[printers]</code>: 

{{CodeBox|title=Добавление раздела [printers]|1=
[printers]
  comment      = All printers
  path         = /var/spool/samba
  browseable   = no
  guest ok     = no
  writable     = no
  printable    = yes
  public       = yes
  printer name = hpljet5p
}}

Направляйтесь вверх файла {{Path|smb.conf}} до тех пор, пока не дойдете до раздела <code>[global]</code>. Найдите <code>printcap name</code> и <code>printing</code> и установите каждую из них в <code>cups</code> (смотрите пример ниже):

{{CodeBox|title=Изменение раздела [global] в smb.conf|1=
[global]
  (...)
  printcap name = cups
  printing      = cups
}}

Убедитесь, что включили поддержку [[#Включение_поддержки_драйверов_Windows_PCL|windows pcl]] в CUPS. Затем, перезапустите службу smb, чтобы изменения вступили в силу.

=== Конфигурация Linux клиента для сервера печати Windows ===

Сперва, убедитесь, что в системе Windows открыт общий доступ к принтеру, и что {{Package|net-fs/samba}} была собрана с включенным USE-флагом <code>cups</code> (как описано выше).

Чтобы найти URI для принтера, запустите следующую команду, заменив <code>server</code> на компьютер, который будет сканироваться на наличие общих samba-принтеров.

{{Cmd|smbclient -N '\\server\'}}

В веб-интерфейсе CUPS настройте принтер, как описано ранее. Заметьте, что CUPS добавил другой драйвер под названием <code>Windows Printer via SAMBA</code>. Выберите его и используйте URI вида <code>smb://username:password@workgroup/server/printername</code> или <code>smb://server/printername</code>.

{{Important|Все специальные символы в URI выше должны быть должным образом кодированы. Например:

<code>smb://BEN-DESKTOP/HP Color LaserJet CP1510 series PCL6</code>
  
кодируется как
  
<code>smb://BEN-DESKTOP/HP%20Color%20LaserJet%20CP1510%20series%20PCL6</code>
  
  
Такую строку можно получить с помощью следующей команды:

{{Cmd|python2 -c 'import urllib; print "smb://" + urllib.quote("BEN-DESKTOP/HP Color LaserJet CP1510 series PCL6")'}}
}}

== Приложения, связанные с печатью ==

=== Введение ===

Существует много инструментов помогающих настроить принтер, использовать дополнительные фильтры печати, добавить функции к возможностям принтера, и т.д. Эта глава перечислит некоторые из них.  Имейте в виду, этот список не является исчерпывающим и не предназначен для обсуждения каждого инструмента в мельчайших подробностях. 

=== Gtk-LP — инструмент настройки принтера, основанный на GTK ===

С {{Package|net-print/gtklp}} установку, изменение и настройку принтера можно сделать из автономного приложения Gtk. Оно использует CUPS и также предоставляет все стандартные возможности CUPS. Это определенно стоит проверить, если не нравится веб-интерфейс CUPS или хочется автономное приложение для повседневных задач печати. 

Установите с помощью: 

{{Emerge|net-print/gtklp}}

=== Утилита для настройки принтеров в KDE 4 ===

У KDE 4 также есть утилита для конфигурации принтеров — {{Package|kde-apps/print-manager}}. Она взаимодействует с CUPS и предоставляет дружелюбный интерфейс для настройки принтеров. Установите его следующим образом:

{{Emerge|kde-apps/print-manager}}

== Удаление ==

=== USE-флаги ===

Пакеты, установленные с USE-флагом <code>cups</code> должны быть изменены. При помощи {{Path|/etc/portage/package.use}} найдите пакеты, у которых явно указан флаг <code>cups</code> и удалите его.

Также, необходимо удалить значение <code>cups</code> из переменной <var>USE</var> файла {{Path|/etc/portage/make.conf}}, если этот флаг был установлен ранее.

=== Unmerge ===

{{Unmerge|net-print/cups}}

Наконец, очистите систему от пакетов, ставших ненужными после удаления CUPS. 

{{Emerge|--depclean}}

== Устранение проблем ==

=== Error: Unable to convert file 0 to printable format ===

Если есть проблемы с печатью и {{Path|/var/log/cups/error_log}} показывает это сообщение: 

{{CodeBox|title=Ошибка в логе|1=
Unable to convert file 0 to printable format
}}

Перекомпелируйте {{Package|app-text/ghostscript-gpl}} с USE-флагом <code>cups</code>. Вы также можете добавить <code>cups</code> к системным USE-флагам в {{Path|/etc/portage/make.conf}}, или включить его только для ghostscript-gpl, как показано ниже: 

{{RootCmd|echo "app-text/ghostscript-gpl cups" >> /etc/portage/package.use}}

Затем запустите {{c|emerge app-text/ghostscript-gpl}}. После того как компиляция будет завершена, не забудьте перезапустить {{c|cupsd}} после этого: 

{{RootCmd|/etc/init.d/cupsd restart}}

== Ссылки ==

* [http://www.cups.org/documentation.php/network.html Использование сетевых принтеров] - документация на CUPS.org.
* [http://www.cups.org/documentation.php/options.html Опции командной строки для печати] - документация на CUPS.org.


{{Migrated|originalauthors=swift, nightmorph}}
