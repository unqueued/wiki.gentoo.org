<languages />


{{Metadata|abstract=Этот документ описывает установку и поддержку принтеров использующих CUPS и Samba. Он охватывает локальную и сетевую установки. Вы также найдете инструкции по использованию общих принтеров из других операционных систем.}}

Этот документ описывает установку и поддержку принтеров использующих CUPS и Samba. Он охватывает локальную и сетевую установки. Вы также найдете инструкции по использованию общих принтеров из других операционных систем.

=== Печать в Gentoo Linux ===

=== Используйте правильные инструменты ===

Linux имеет отличную поддержку принтеров; правильным инструментом для работы является CUPS ( [http://www.cups.org Common Unix Printing System] ). С самого начала проекта, в 1999, установка и поддержка CUPS существенно улучшилась. 

В этом документе мы опишем как использовать CUPS для настройки локального или сетевого принтера. Мы не будем углубляться в подробности, так как проект имеет [http://www.cups.org/documentation.php отличную документацию], доступную для расширенного использования. 

== Сконфигурируйте ядро ==

=== Введение ===

Когда Вы хотите установить принтер на систему, Вам требуется знать как принтер будет к ней подсоединен. Будет ли подключение осуществляться через локальный порт, например LPT или USB, или он будет подключен по сети? И если это так, будет ли использован протокол межсетевой печати (Internet Printing Protocol (IPP)) или протокол Microsoft Windows SMB-CIFS (Microsoft Windows Sharing)? 

Следующие несколько разделов объясняют какая минимальная конфигурация ядра Вам нужна. Конечно же, это зависит от того, как Ваш принтер будет подключен к системе, поэтому для Вашего удобства мы разделили инструкции.

Поэтому, перейдите к {{Path|/usr/src/linux}} и запустите <code>make menuconfig</code>, чтобы войти в меню конфигурации ядра. Если Вы использовали <code>genkernel</code> для конфигурации ядра, Вы все-же должны выполнить эти шаги чтобы убедиться, что ничего не пропущено. 

В следующих примерах конфигурации, мы добавим необходимую поддержку ''в'' ядро, а не в качестве модулей. Это не обязательно; если Вы хотите, Вы можете с легкостью использовать поддержку модулей. Не забудьте загрузить подходящие модули впоследствии. 

Теперь перейдите к соответствующему разделу для конфигурации (или проверки) Вашего ядра. 

=== Локально подключенный принтер (LPT) ===

LPT порт обычно используется для идентификации параллельного порта принтера. Вам потребуется сначала включить поддержку параллельного порта, затем поддержку параллельного порта "PC-style" (если только Вы не пользователь SPARC), после чего включить поддержку параллельного принтера. 

{{Kernel|Конфигурация параллельного порта принтера|<pre>
Device Drivers -->
  <*> Parallel port support
  <*>   PC-style hardware
  
Device Drivers -->
  Character Devices -->
    <*> Parallel printer support
       [*]      IEEE 1284 transfer modes&#41;
</pre>
}}

{{Note/ru|Некоторым пользователям может потребоваться включение других параметров в разделе конфигурации <code>Parallel port support</code> . Проверьте функцию конфигурации ядра <code>Help</code> для получения подробностей.}}

Дело сделано; выйдите из конфигурации ядра и соберите заново ядро. Не забудьте скопировать новый образ ядра в {{Path|/boot}} (и не забудьте смонтировать {{Path|/boot}} при необходимости) и обновите конфигурацию загрузчика перед перезагрузкой системы. 

Теперь продолжайте с CUPS.

=== Локально подключенный принтер (USB) ===

Чтобы включить USB печать, Вам требуется поддержка ядром USB: 

{{Kernel|Конфигурация принтера с USB портом|<pre>
Device Drivers -->
  USB Support -->
    <*> Support for Host-side USB
    (...)
    --- USB Host Controller Drivers
    (Select the HCD that your system uses. If you do not know which one
     to select, run "lspci -v | grep HCI" from another terminal)
    <*> EHCI HCD (USB 2.0) support ( or )
    <*> OHCI HCD support           ( or )
    <*> UHCI HCD (most Intel and VIA) support
</pre>
}}

Дело сделано; выйдите из конфигурации ядра и соберите заново ядро. Не забудьте скопировать новый образ ядра в {{Path|/boot}} (и не забудьте смонтировать {{Path|/boot}} при необходимости) и обновите конфигурацию загрузчика перед перезагрузкой системы. 

Теперь продолжайте с CUPS. 

=== Удаленно подключенный принтер (IPP) ===

Чтобы иметь возможность подсоединиться к удаленно подключенному принтеру через протокол межсетевой печати, Ваше ядро должно иметь поддержку сети. Предполагая, что ядро уже имеет эту поддержку, переходите к CUPS. 

=== Удаленно подключенный принтер (SMB-CIFS) ===

Ваше ядро должно поддерживать SMB CIFS: 

{{Kernel|Конфигурация принтера SMB-CIFS|<pre>
File systems -->
  Network File Systems -->
    <*> SMB file system support (to mount Windows shares etc.)
    <*> CIFS support (advanced network file system for Samba, Windows and other CIFS compliant servers)
</pre>
}}

Дело сделано; выйдите из конфигурации ядра и соберите заново ядро. Не забудьте скопировать новый образ ядра в {{Path|/boot}} (и не забудьте смонтировать {{Path|/boot}} при необходимости) и обновите конфигурацию загрузчика перед перезагрузкой системы. 

Теперь переходите к CUPS. 

== Установка и конфигурация CUPS ==

=== Установка ===

Установка CUPS на Gentoo проще простого. CUPS имеет несколько дополнительных функций, которые могут Вас заинтересовать. Чтобы включить или отключить эти функции, используйте USE-флаги связанные с ними. 

{| class="wikitable" style="text-align: left;" 
|- 
! USE flag
! Воздействие на CUPS
|- 
| dbus
| Добавляет поддержку системной шины сообщений <code>dbus</code> .
|- 
| jpeg
| Добавляет поддержку печати изображений JPEG.
|- 
| nls
| Включает поддержку сообщений на родном языке - National Language Support. С nls, CUPS может доставлять локализованные отклики, поэтому Вы, как мы надеемся, можете наслаждаться сообщениями на своем родном языке.
|- 
| pam
| Если Вам требуется аутентификация заданий печати через подключаемые модули аутентификации, это активирует поддержку PAM для CUPS.
|- 
| php
| Добавляет поддержку php скриптов.
|- 
| png
| Добавляет поддержку печати изображений PNG.
|- 
| ppds
| Добавляет поддержку автоматически сгенерированных ppd файлов (драйверов принтера). См. [[#installing_best]] .
|- 
| samba
| Если Вы хотите возможность разделения локально подключенных принтеров с системами Windows в Вашей сети, использующей протокол SMB-CIFS, или Вы хотите иметь возможность использования общих принтеров с Windows систем, Вам потребуется поддержка SAMBA.
|- 
| slp
| В управляемой среде принтер может быть доступен в качестве сервиса для других. С протоколом обнаружения сервисов (Service Location Protocol) Вы можете легко найти и сконфигурировать сервис на Вашей системе. Включите этот USE-флаг если Ваш принтер доступен в качестве сервиса или должен быть доступен как сервис.
|- 
| ssl
| Если Вы хотите удаленную аутентификацию и/или конфиденциальность, Вам необходима поддержка уровня защищенных сокетов (Secure Socket Layer), позволяющая зашифрованные сессии печати. Поддержка SSL должна быть доступна на всех принимающих участие в печати системах Вашей сети.
|- 
| tiff
| Добавляет поддержку печати изображений TIFF.
|- 
| X
| Позволяет Вам использовать меню рабочего стола для загрузки веб-страницы с конфигурацией CUPS в предпочитаемом Вами браузере.
|-
|}

Проверьте текущие настройки USE-флагов. Если Вы хотите отклониться от текущих настроек USE-флагов только для CUPS, добавьте подходящие USE-флаги в {{Path|/etc/portage/package.use}} . 

{{RootCmd|emerge -pv cups|output=<pre>
[ebuild N     ] net-print/cups-1.2.6  "X dbus jpeg nls pam png ppds ssl -php -samba -slp -tiff" 0 kB
</pre>}}

Например, чтобы включить поддержку SAMBA для CUPS:

{{File|/etc/portage/package.use/cups||<pre>
net-print/cups samba
</pre>
}}

Если Вы довольны результатом, установите CUPS с помощью Portage. 

{{RootCmd|emerge cups}}

{{Important/ru|Любые пользователи, которым нужна печать, должны быть добавлены в группу <code>lp</code> . Добавьте их запуском команды (в качестве администратора)
<code>gpasswd -a username lp</code> .}}

Если принтер подсоединен к системе локально, Вам нужно загружать CUPS автоматически при запуске системы. Убедитесь что Ваш принтер подключен к компьютеру и сети перед запуском CUPS. 

{{RootCmd|/etc/init.d/cupsd start
|rc-update add cupsd default}}

=== Конфигурация ===

Конфигурация сервера CUPS по умолчанию в {{Path|/etc/cups/cupsd.conf}} является для большинства пользователей достаточной. Однако, нескольким пользователям могут понадобиться некоторые изменения в конфигурации CUPS. 

В следующих разделах мы опишем несколько изменений, которые часто необходимы: 

* мы разрешаем другим системам использовать принтер, подключенный к этой рабочей станции Linux.
* мы предоставляем доступ к администрированию CUPS с удаленных систем
*мы конфигурируем CUPS чтобы поддерживать драйвера Windows PCL. Это рекомендуется если Вы хотите чтобы системы на Windows могли использовать общий принтер с Samba, так как большинство драйверов Windows - PCL драйвера.
*мы конфигурируем систему чтобы использовать принтер, подключенный к другой системе (не общему ресурсу Windows).

=== Удаленный доступ к принтеру ===

Если Вы хотите чтобы другие системы использовали Ваши принтер через IPP, Вам нужно явно предоставить доступ к принтеру в {{Path|/etc/cups/cupsd.conf}} . Если Вы хотите предоставить общий доступ к принтеру, используя SAMBA, эти изменения не требуются. 

Откройте {{Path|/etc/cups/cupsd.conf}} в Вашем любимом редакторе и добавьте строку <code>Allow</code> для систем(ы), которым необходимо получить доступ к принтеру. В следующем примере, мы предоставляем доступ к принтеру с localhost и с любой другой системы, чей IP-адрес начинается с <code>192.168.0</code> . 

{{File|/etc/cups/cupsd.conf|Разрешение удаленного доступа к принтеру|<pre>
<Location />
  Order allow,deny
  Allow localhost
  Allow from 192.168.0.*
</Location>
</pre>}}

Это передает информацию просмотра всем клиентам сети. Это для того чтобы они знали, что принтер доступен:

{{File|/etc/cups/cupsd.conf|Broadcast info|<pre>
BrowseAddress 192.168.0.*:631
</pre>
}}

Также, Вам нужно указать на каком порту слушает CUPS, так чтобы он отвечал на запросы печати с других машин Вашей сети. 

{{File|/etc/cups/cupsd.conf|Конфигурация порта|<pre>
Listen *:631
#Listen localhost:631
</pre>
}}

{{Note/ru|Если Вы все еще пользуетесь CUPS 1.1 (который в данный момент устарел), то Вам будет нужно использовать другой синтаксис для удаленных запросов печати:
{{Code|Устаревшая конфигурация CUPS 1.1|<pre>
Порт 631
(Убедитесь что следующие две строки закомментированы)
#Listen 127.0.0.1:631
#Listen localhost:631
</pre>
}}
}}

=== Удаленное администрирование CUPS ===

Если Вы заинтересованы в удаленном администрировании, Вам нужно предоставить доступ из других систем, а не только с localhost, для администрирования CUPS. Отредактируйте {{Path|/etc/cups/cupsd.conf}} и явно предоставьте доступ тем системам, которым хотите. Например, чтобы предоставить доступ системе с IP-адресом 192.168.0.3: 

{{File|/etc/cups/cupsd.conf|Разрешение удаленного доступа|<pre>
<Location /admin>
(...)
  Encryption Required
  Order allow,deny
  Allow localhost
  Allow 192.168.0.3
</Location>
</pre>
}}

Не забудьте перезапустить CUPS после внесения изменений в {{Path|/etc/cups/cupsd.conf}} запуском <code>/etc/init.d/cupsd restart</code> . 

=== Включение поддержки драйверов Windows PCL ===

Драйвера PCL отправляют данные на сервер печати "в сыром виде". Чтобы включить печать без обработки данных (raw printing) на CUPS, Вы должны отредактировать {{Path|/usr/share/cups/mime/mime.types}} и раскомментировать строчку <code>application/octet-stream</code>, если она еще не раскомментирована. Затем Вам нужно отредактировать {{Path|/usr/share/cups/mime/mime.convs}} и сделать то же самое, если строчка еще не раскомментирована. 

{{File|/usr/share/cups/mime/mime.types|Включение печати без обработки данных|<pre>
application/octet-stream
</pre>}}

{{File|/usr/share/cups/mime/mime.convs||<pre>
application/octet-stream     application/vnd.cups-raw    0    -
</pre>
}}

Не забудьте перезапустить CUPS после внесения этих изменений запуском <code>/etc/init.d/cupsd restart</code> . 

=== Установка удаленного принтера ===

Если принтеры подключены к удаленному серверу с CUPS, Вы легко можете настроить Вашу систему на использование удаленного принтера изменением файла {{Path|/etc/cups/client.conf}} . 

Предполагая, что принтер подключен к системе называемой <code>printserver.mydomain</code>, откройте {{Path|/etc/cups/client.conf}} Вашим любимым редактором и установите директиву <code>ServerName</code> : 

{{File|/etc/cups/client.conf||<pre>
# (Замените printserver.mydomain на имя Вашего сервера печати)
ServerName printserver.mydomain
</pre>
}}

Удаленная система будет иметь настройки принтера по умолчанию, которые Вы будете использовать. Если Вы хотите изменить принтер по умолчанию, используйте <code>lpoptions</code> : 

Сначала перечислите доступные принтеры:

{{RootCmd|lpstat -a|output=<pre>
hpljet5p accepting requests since Jan 01 00:00
hpdjet510 accepting requests since Jan 01 00:00
</pre>}}

Установите HP LaserJet 5P в качестве принтера по умолчанию:

{{RootCmd|lpoptions -d hpljet5p}}


== Конфигурация принтера ==

=== Введение ===

Если принтер, который Вы хотите сконфигурировать, доступен удаленно через другой сервер печати (с запущенным CUPS), Вам не нужно следовать этим инструкциям. Вместо этого прочтите [[#setup_remote]] 

=== Обнаружение принтера ===

Если у Вас USB принтер или принтер с параллельным портом был включен когда Вы загрузили систему с Linux, у Вас есть возможность получить информацию из ядра, подтверждающую, что принтер был успешно обнаружен. Однако, это просто указание, а не требование. 

{{Cmd|dmesg {{!}} grep -i print|output=<pre>
parport0: Printer, Hewlett-Packard HP LaserJet 2100 Series
</pre>}}

Для USB принтера:

{{Cmd|lsusb|output=<pre>
(...)
Bus 001 Device 007: ID 03f0:1004 Hewlett-Packard DeskJet 970c/970cse
</pre>
}}

=== Установка принтера ===

Чтобы установить принтер на систему, запустите Ваш браузер и направьте его на [http://localhost:631 http://localhost:631]. Вы будете встречены веб-интерфейсом CUPS, из которого Вы сможете выполнить все задачи администрирования. 


{{Note/ru|Если Вы используете HTTPS-соединение для CUPS, в первый раз когда Вы обращаетесь к интерфейсу, может пройти довольно длительное время перед тем как появится сайт. Это потому что первый запрос запускает генерирование сертификатов CUPS SSL, что может быть очень времязатратным заданием.}}

Перейдите к ''Administration'' и введите логин администратора и пароль в поле ввода. Затем когда Вы дошли до интерфейса управления, нажмите на ''Add Printer'' . Вы будете встречены новым экраном, позволяющим ввести следующую информацию: 

*''spooler name'', короткое, но информативное имя, используемое на Вашей системе для идентификации принтера. Это имя не должно содержать пробелов или любых других специальных символов. Например, для HP LaserJet 5P Вы можете поставить <code>hpljet5p</code> .
*''location'', описание того где принтер расположен физически (например, в Вашей комнате, или на кухне прямо рядом с посудомоечной машиной, ...). Это чтобы помочь в поддержке и сопровождении нескольких принтеров.
*''description'' в котором Вы должны поместить полное описание принтера. Широко используется полное имя принтера (например, "HP LaserJet 5P").

Следующий экран спрашивает Вас устройство, где принтер будет слушать запросы. У Вас будет выбор из нескольких устройств. Следующая таблица описывает некоторые возможные устройства, но список не является исчерпывающим. 

{| class="wikitable" style="text-align: left;" 
|- 
! Устройство
! Описание
|- 
| AppSocket/HP JetDirect
| Это специальное устройство позволяет доступ к сетевым принтерам через сокет HP JetDirect. Только определенные принтеры это поддерживают.
|- 
| Internet Printing Protocol (IPP or HTTP)
| Используйте это для того, чтобы получить доступ к удаленному принтеру через IPP протокол или прямо (IPP) или через HTTP.
|- 
| LPD/LPR Host or Printer
| Выберите это если принтер является удаленным и подключен к серверу LPD/LPR.
|- 
| Parallel Port #1
| Выберите это если принтер подключен локально к параллельному порту (LPT). Когда принтер обнаруживается автоматически, его имя будет также добавлено к устройству.
|- 
| USB Printer #1
| Выберите это в том случае когда принтер подключен локально к USB порту. Имя принтера должно быть автоматически добавлено к имени устройства.
|-
|}

Если Вы устанавливаете удаленный принтер, у Вас будет запрошен URI принтера: 

*Сервер принтера LPD требует синтаксис <code>lpd://hostname/queue</code>
*Принтер HP JetDirect требует синтаксис <code>socket://hostname</code>
*Принтер IPP требует синтаксис <code>ipp://hostname/printers/printername</code> или <code>http://hostname:631/printers/printername</code>

Далее, выберите производителя принтера в смежном экране и тип и номер модели в последующем. Для большинства принтеро Вы найдете множество драйверов. Вы можете или выбрать один из них, или поискать в [http://www.linuxprinting.org/printer_list.cgi LinuxPrinting.org's Списке принтеров] хороший драйвер. Вы можете легко изменить драйвера позднее. 

Как только драйвер выбран, CUPS проинформирует Вас что принтер успешно добавлен в систему. Теперь Вы можете перейти к странице управления принтером на интерфейсе управления и выбрать <code>Configure Printer</code> чтобы изменить настройки принтера (разрешение, формат страницы, ...). 

=== Тестирование и повторная конфигурация принтера ===

Чтобы проверить, работает ли принтер правильно, перейдите к странице управления принтером, выберите Ваш принтер и нажмите на <code>Print Test Page</code> . 

Если кажется что принтер не работает верно, нажмите на <code>Modify Printer</code>, чтобы его повторно настроить. Вы будете встречены теми же самыми экранами, как и в течение первой установки, но значениями по умолчанию теперь будет Ваша текущая конфигурация. 

Если Вы не имеете представления почему принтер не работает, Вы можете догадаться что происходит, посмотрев в {{Path|/var/log/cups/error_log}} . В следующем примере мы узнаем что у нас имеется ошибка разрешений, возможно вследствие ошибочных настроек <code>Allow</code> в {{Path|/etc/cups/cupsd.conf}} . 

{{RootCmd|tail /var/log/cups/error_log|output=<pre>
(...)
E [11/Jun/2005:10:23:28 +0200] [Job 102] Unable to get printer status (client-error-forbidden)!
</pre>
}}

=== Установка наилучшего драйвера ===

Существует множество драйверов принтера; чтобы узнать какой имеет лучшую производительность для Вашего принтера, посетите [http://www.linuxprinting.org/printer_list.cgi LinuxPrinting Printer List] . Выберите Вашу марку принтера и тип чтобы узнать какой драйвер рекомендован этим сайтом. Например, для HP LaserJet 5P, сайт рекомендует драйвер <code>ljet4</code> . 

Download the PPD file from the site and place it in {{Path|/usr/share/cups/model}} , then run <code>/etc/init.d/cupsd restart</code> as root. This will make the driver available through the CUPS web interface. Now reconfigure your printer as described above. 

== Using Special Printer Drivers ==

=== Introduction ===

Some printers require specific drivers or provide additional features that are not enabled through the regular configuration process as described above. This chapter will discuss a selection of printers and how they are made to work with Gentoo Linux. 

=== Gutenprint Driver ===

The [http://gutenprint.sourceforge.net gutenprint] drivers are high-quality, open source printer drivers for various Canon, Epson, HP, Lexmark, Sony, Olympus and PCL printers supporting CUPS, ghostscript, The Gimp and other applications. 

Gentoo's Portage Tree contains an ebuild for the gutenprint drivers. Just use <code>emerge</code> to install them. Note that the ebuild listens to quite a few USE flags (such as <code>cups</code> and <code>ppds</code> ). You must have enabled at least these two flags! 

{{Emerge|gutenprint}}

When the emerge process has finished, the gutenprint drivers will be available through the CUPS web interface. 

=== HPLIP Driver ===

See [[HPLIP|HPLIP Driver]].

=== PNM2PPA Driver ===

PPA is an HP technology that focuses on sending low-level processing to the system instead of to the printer which makes the printer cheaper but more resource consuming. 

If the [http://www.linuxprinting.org/printer_list.cgi LinuxPrinting] site informs you that the [http://pnm2ppa.sourceforge.net/ pnm2ppa] driver is your best option, you need to install the <code>pnm2ppa</code> filter on your system: 

{{Emerge|pnm2ppa}}

Once installed, download the PPD file for your printer from the [http://www.linuxprinting.org/printer_list.cgi LinuxPrinting] site and put it in {{Path|/usr/share/cups/model}} . Next, configure your printer using the steps explained above. 

== Printing From and To Microsoft Windows ==

{{Note|You should read our [https://wiki.gentoo.org/wiki/Samba/HOWTO Samba/CUPS Guide] for more detailed information on setting up CUPS with Samba.}}

=== Configuring a Windows Client for IPP ===

Microsoft Windows supports IPP (Windows 9x and ME users need to [http://support.microsoft.com/default.aspx?scid=kb;en-us;294439 install] it separately). To install a printer that is attached to your Linux box on Windows, fire up the <code>Add Printer</code> wizard and select <code>Network Printer</code> . When you are asked for the URI, use the <code>http://hostname:631/printers/queue</code> syntax. 

=== Configuring a Windows Client for a Samba Shared Printer ===

To share the printer on the SMB-CIFS network, you must have SAMBA installed and configured correctly. How to do this is beyond the scope of this document, but we will quickly deal with the configuration of SAMBA for shared printers. 

Open {{Path|/etc/samba/smb.conf}} with your favorite editor and add a <code>[printers]</code> section to it: 

{{Code|Adding a [printers] section|<pre>
[printers]
  comment      = All printers
  path         = /var/spool/samba
  browseable   = no
  guest ok     = no
  writable     = no
  printable    = yes
  public       = yes
  printer name = hpljet5p
</pre>
}}

Now navigate to the top of the {{Path|smb.conf}} file until you are inside the <code>[global]</code> section. Then locate the <code>printcap name</code> and <code>printing</code> settings and set each of them to <code>cups</code> : 

{{Code|Changing the [global] section|<pre>
[global]
  (...)
  printcap name = cups
  printing      = cups
</pre>
}}

Make sure you enabled the [[#windows_pcl]] support in CUPS. Then, restart the <code>smb</code> service to have the changes take effect. 

=== Configuring a Linux Client for a Windows Print Server ===

First of all, make sure that the printer is shared on your Windows system. 

Next, in the CUPS web interface, configure your printer as described previously. You will notice that CUPS has added another driver called <code>Windows Printer via SAMBA</code> . Select it and use the <code>smb://username:password@workgroup/server/printername</code> or <code>smb://server/printername</code> syntax for the URI. 

== Printing-related Applications ==

=== Introduction ===

Many tools exist that help you configure a printer, use additional printing filters, add features to your printing capabilities, etc. This chapter lists a few of them. The list is not exhaustive and not meant to discuss each tool in great detail. 

=== Gtk-LP - A Gtk-powered Printer Configuration Tool ===

With [http://gtklp.sourceforge.net/index.shtml Gtk-LP] you can install, modify and configure your printer from a stand-alone Gtk application. It uses CUPS and provides all standard CUPS capabilities as well. Definitely worth checking out if you dislike the CUPS Web interface or want a stand-alone application for your day-to-day printing routines. 

To install it, emerge <code>gtklp</code> : 

{{Emerge|gtklp}}

== Troubleshooting ==

=== Error: Unable to convert file 0 to printable format ===

If you are having printing troubles and {{Path|/var/log/cups/error_log}} shows this message: 

{{Code|Error log|<pre>
Unable to convert file 0 to printable format
</pre>
}}

You need to re-emerge <code>ghostscript-gpl</code> with the <code>cups</code> USE flag. You can either add <code>cups</code> to your USE flags in {{Path|/etc/portage/make.conf}} , or you can enable it only for <code>ghostscript-gpl</code> as shown: 

{{RootCmd|echo "app-text/ghostscript-gpl cups" >> /etc/portage/package.use}}

Then emerge <code>ghostscript-gpl</code>. When it has finished compiling, be sure to restart <code>cupsd</code> afterward: 

{{RootCmd|/etc/init.d/cupsd restart}}

== Acknowledgements ==

We would like to thank the following authors and editors for their contributions to this guide:


* swift
* nightmorph
