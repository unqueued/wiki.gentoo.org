<languages />
{{InfoBox stack
|{{InfoBox homepage|https://wiki.gentoo.org/wiki/Project:Portage-Tools|header=true}}
}}
__TOC__

{{Lowercase title}}

'''eclean''' 是一个清理 Portage 源文件和二进制包得工具。它是 {{Package|app-portage/gentoolkit}} 包得一部分，并由 [[Project:Portage-Tools|Portage-Tools]] 项目维护。

== 安装 ==

安装 {{Package|app-portage/gentoolkit}}：

{{Emerge|gentoolkit}}

== 使用 ==

默认情况下，源文件存储在 {{Path|/usr/portage/distfiles}} 目录下， 二进制包存储在 {{Path|/usr/portage/packages}} 目录下；可以通过修改 {{Path|/etc/portage/make.conf}} 中的 <code>DISTDIR</code> 和 <code>PKGDIR</code> 变量更改对应的存储位置。如果不定期清理，这两个目录可能会悄然无声的变得非常巨大。

使用下面的命令清理源文件存放目录：

{{RootCmd|eclean distfiles}}

使用下面的命令清理二进制包：

{{RootCmd|eclean packages}}

默认情况下，Portage 树中的任何 ebuild 对应的源文件和二进制包都不会被删除。这样用户可以很容易的对包进行降级或者安装之前删除的包。

举个例子，比如包 <tt>foo-1.0</tt> 和 <tt>foo-1.1</tt> 都在 Portage 树中。在从 <tt>foo-1.0</tt> 升级到 <code>foo-1.1</code> 之后，运行 <tt>elcean distfiles</tt>，两个版本的源文件依然被保留，因此如果 <tt>foo-1.1</tt> 出现问题，用户可以很方便的重新安装  <tt>foo-1.0</tt>，而不必重新下载。

另一个可能的情况是安装之前删除的包。假设系统安装了 <tt>foo</tt> 包（任一版本）。在（不经意地）删除了这个包并运行了 <tt>eclean disfiles</tt> 之后，<tt>foo</tt> 的源文件依然被保留，可以重新安装而无需再次下载。

对二进制包同样的例子也一样适用。

为节省硬盘空间，添加 <code>--destructive</code> 选项：对于非 “当前安装” 版本的包的每个源文件或者二进制包都会被删除。请注意，这种方式当用户需要降级安装某个包或者重新安装之前删除的包的时候都必须重新下载。

一个替代方案是，同时使用 <code>--destructive</code> 和 <code>--package-names</code> 选项：对于某些非当前安装的包（不管版本号是什么）的每个源文件或者二进制包都会被删除。这种方式当用户需重新安装之前删除的包的时候都必须重新下载，但是要降级安装某个包则不需要。

更多细节请参阅 eclean(1) man page：

{{Cmd|man 1 eclean}}

=== 另请参阅 ===

* [[Gentoolkit]]


[[Category:Portage tools]]
