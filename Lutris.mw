{{InfoBox stack
| {{InfoBox     homepage|https://lutris.net/|header=true}}
| {{InfoBox     wikipedia|Lutris}}
| {{InfoBox     github|lutris/lutris}}
| {{InfoBox     irc|Lutris}}
| {{InfoBox     irc|gentoo-wine}}
| {{InfoBox     package|games-util/lutris}}
| {{InfoBox     todo|Write a guide for Installers|Fix image in reporting bugs|header=true}}
}}

Lutris is an open source gaming platform for GNU/Linux. It makes gaming on Linux easier by managing, installing and providing optimal settings for games.

Lutris does not sell games; you have to provide your own copy of the games unless they are open source or freeware. Games can be installed anywhere on your system; Lutris does not impose anything.

== Installation ==

Lutris is present in Gentoo repository as '''games-util/lutris'''. To install invoke following command:

{{Emerge|games-util/lutris}}

== Runners ==

Lutris relies on various programs referenced as 'runners' to provide a vast library of games. These runners (with the exception of Steam and web browsers) are provided by Lutris, you don't need to install them with your package manager.

=== Following runners are supported in lutris: ===

* Linux (Native games)
* Steam
* Web
* Wine
* Wine + Steam
* Libretro
* DOSBox
* MAME
* MESS
* ScummVM
* ResidualVM
* Adventure Game Studio
* Mednafen
* FS-UAE
* Vice
* Stella
* Atari800
* Hatari
* Virtual Jaguar
* Snes9x
* Mupen64Plus
* Dolphin
* PCSX2
* PPSSPP
* Osmose
* Reicast
* Frotz
* jzIntv
* O2EM
* ZDoom
* Citra
* DeSmuME
* DGen
* GOG (soon)

== Installer scripts ==

Lutris automates installation of games using configuration scripts written in JSON or YAML, which list the various files needed to install a game and can perform a series of actions on them. The syntax of installers is described [https://github.com/lutris/lutris/blob/master/docs/installers.rst docs/installers.rst on Github], and is also available on [https://lutris.net/ lutris.net] when writing installers.

A web UI is planned to ease the creation of these scripts.

=== Writing a installer script ===

// Guide to make installers here.

== Game Library ==

You can optionally create an account on [https://lutris.net/ lutris.net] and connect this account to the client. This will allow you to sync your game library from the website to the client (not the other way around). If you wish, you can also sync your Steam library with your Lutris library on the website.

The client does not store your [https://lutris.net/ lutris.net] credentials on your computer. Instead, when you authenticate, the website will send a token which will be used to sync your library. This token is stored in {{path|~/.cache/lutris/auth-token}}.

== Configuration files ==
The client, runner, and game configuration files are stored in {{path|~/.config/lutris}}. There is no need to manually edit these files as everything should be done from the client.

* <code>lutris.conf</code>: preferences for the client's UI

* <code>system.yml</code>: default configuration for every game

* <code>runners/*.yml</code>: runner-specific default configurations

* <code>games/*.yml</code>: game-specific configurations

The game configuration can override previously defined runner and system configuration and runner configuration can override system configuration.

== Runners and the game database ==

The data necessary to manage your library and run the game is stored in {{path|~/.local/share/lutris}}.

* <code>pga.db</code>: your game library, game installation status, locations on the file system, and some additional metadata, all stored in an SQLite database

* <code>runners/*</code>: runners downloaded from lutris.net

* <code>icons/*.png</code> and <code>banners/*.jpg</code>: game images

== Command line options ==
The following command line arguments are available:

 --version             show program's version number and exit
 -h, --help            show this help message and exit
 -v, --verbose         Verbose output
 -d, --debug           Show debug messages
 -i INSTALLER_FILE, --install=INSTALLER_FILE
                       Install a game from a yml file
 -l, --list-games      List all games in database
 -o, --installed       Only list installed games
 -j, --json            Display the list of games in JSON format
 --list-steam-games    List available Steam games
 --list-steam-folders  List all known Steam library folders
 --reinstall           Reinstall game

Additionally, you can pass a <code>lutris:</code> protocol link followed by a game identifier on the command line such as:

 lutris lutris:quake

This will install the game if not already installed or launch the game otherwise (unless the <code>--reinstall</code> flag is passed).

== DXVK on lutris ==

// From source: https://github.com/lutris/lutris/wiki/How-to:-DXVK#installing-vulkan

== Managing libraries ==
If <code>Lutris/GAME/Configure/System options/Disable Lutris Runtime</code> (in GUI) is disabled then lutris is going to use system libraries, otherwise it uses libraries in <code>~/.local/share/lutris/runtime/lib*</code>.

=== How to locate missing libraries ===
One way of locating missing libraries is to use '''e-file''' command which is part of {{Package|app-portage/pfl}}.

To install pfl invoke:
{{emerge|app-portage/pfl}}

Usage:
{{Cmd|e-file <file>}}

Where <file> is full name of a file you are looking for (supports wild cards).

=== Reporting missing libraries ===
{{important|Gentoo may require additional dependencies for lutris games to work out of the box. Those libs won't be included in lutris and has to be added manually.}}

[[File:Notstrider.png]]

Sent reports to https://github.com/lutris/buildbot/issues

== Watchers ==
Lutris is using watchers:

 DEBUG    2018-10-07 09:23:49,284 [steam]:Watching Steam folder /home/$USER/.steam/steam/steamapps

To detect games in native steam library and add them to the lutris's if enabled.

== Debugging ==
{{warning|Lutris outputs to sterr,stout seemingly on random.}}
The most effective way to debug lutris and its runners is to invoke <code>lutris -d </code> in terminal with unlimited scroll. 

Using <code>lutris -d 2>&1 lutris.txt</code> is also recommended.

== Planned Features ==
Here's what to expect from the future versions of Lutris:

* Integration with GOG and Humble Bundle
* Integration with the TOSEC database
* Management of Personal Game Archives (let you store your games files on private storage, allowing you to reinstall them on all your devices)
* Game saves sync
* Community features (friends list, chat, multiplayer game scheduling)
* Controller configuration GUI (with xboxdrv support)

== Where to look for a help ==

* '''IRC:''' #lutris, #gentoo-wine
* '''Discord:''' [https://discordapp.com/invite/gentoo Gentoo-discord], [https://tuxdb.com/lgg Linux_Gamers_Group], [https://discord.gg/linuxgaming Linux_Gaming]
* '''Forum:''' https://forums.lutris.net/

== Troubleshooting ==

=== Cannot find winemenubuilder.exe ===

'''INFO:'''<br />
winemenubuilder.exe is used in wine to make linux menu shortcut from windows. 

 wine: cannot find L"C:\\windows\\system32\\winemenubuilder.exe"

This should be ignored, because lutris is going to make it's own shortcuts at the end of each installation.

'''POSSIBLE SOLUTION:'''<br />
If you wish to remove this error message from wine console: 

{{Note|Needs validation}}
// Works in wine apps, doesn't work in lutris: https://github.com/lutris/lutris/issues/1164

 Open Lutris > Lutris > Manage runners > Wine > Configure > DLL overrrides > Key == <code>winemenubuilder.exe</code> 
 > Value == <code>d</code>.

Which is going to disable winemenubuilder.exe.

You can set Value on <code>b</code> if you wish to enable winemenubuilder.exe '''WHICH IS NOT RECOMMENDED''' for reasons above.

=== Cannot find FreeType font lib ===
FreeType is written in C, designed to be small, efficient, highly customizable, and portable while capable of producing high-quality output (glyph images) of most vector and bitmap font formats.

'''ERROR:'''
 Wine cannot find the FreeType font library.  To enable Wine to
 use TrueType fonts please install a version of FreeType greater than
 or equal to 2.0.5.
 http://www.freetype.org

'''SOLUTION:'''<br />
a) emerging {{Package|media-libs/freetype}}

b) installing libfreetype2 library to the location that is set for a process that needs it.

c) Installing libs to lutris's runtime.

=== Wine version missmatch ===

'''ERROR:'''<br />
wine client error:0: version mismatch 549/566.

'''SOLUTION:'''<br />
a) This issue was resolved on lutris 0.4.19+.

b) Invoke `pkill wine && pkill wineserver`. There is a bug which results in wine missmatch if wine version is changed.

=== ERR_GFX_D3D_NOD3D1X_4 ===

This error usually appear when your vulkan AND/OR DXVK is misconfigured.

'''IMAGE:'''<br />
[[File:DirectX_ERR.png]]

'''ERROR:'''<br />
ERR_GFX_D3D_NOD3D1X_4 - No DirectX 10 or 11 adapter or runtime found. Please install latest DirectX runtime or install a compatible DirectX 10 or 11 video card.

'''SOLUTION:'''<br />
a) Your vulkan or DXVK is not configured properly. Check '''vulkaninfo'''.

b) Your wine application needs DirectX libs. Use Winetricks to install them.

c) Lutris is missing libraries in it's runtime (~/.local/share/lutris/runtime/lib*).

=== SESSION_MANAGER variable not defined ===

// I have no idea why..

'''ERROR:'''<br />
 Failed to connect to session manager: Failed to connect to the session manager: SESSION_MANAGER environment 
 variable not defined

'''SOLUTION:'''<br />
Was resolved by restarting lutris (xkill && lutris)

=== BadWindow (invalid Window parameter) ===

This problem seems to appear when virtual wine window is <code>xkill</code>-ed.

'''ERROR:'''<br />
X Error of failed request:  BadWindow (invalid Window parameter)

'''SOLUTION:'''<br />
Solved by invoking <code>pkill wine</code>

== Reference ==

* [https://github.com/lutris/lutris/blob/master/docs/installers.rst Making an installer script]
