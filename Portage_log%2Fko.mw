<languages />
<tt>emerge</tt>를 사용하여 꾸러미를 빌드할 때, 포티지에서 보통 잘 나오지 않는 알림 메시지가 뜹니다. 젠투 개발자들이 알려주는 중요한 정보가 있을지 모르기 때문에 읽어보시는 것이 좋지만, 화면 위로 너무 빨리 넘어가기 때문에 보통 불가능합니다. elog라고 하는 포티지 기능을 활성화하면 이 문제를 해결할 수 있는데, 나중에 다시 살펴볼 로그를 디스크에 저장하는 동작이 이 기능의 목적입니다. 그러나 마찬가지로 다른 로깅 기능도 있습니다...

== 포티지 elog 하위 시스템 ==

포티지 elog 하위 시스템은 관리자 또는 사용자에게 주의를 끌도록 개발자가 ebuild에 넣어, 개별 ebuild에서 제공하는 로그 메시지 내용을 유지합니다. 종종 이 메시지는 언급한 꾸러미 빌드에 관련있는 중요한 관심있는 정보가 들어있습니다.

=== 설정 ===

<code>PORTAGE_ELOG_CLASSES</code> 변수에 어떤 종류의 정보를 기록할 지 선택하십시오. 가능한 값은 <code>info</code>, <code>warn</code>, <code>error</code>, <code>log</code>, <code>qa</code> 입니다:

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
PORTAGE_ELOG_CLASSES="log warn error"
}}

=== 파일 기반 저장소 설정 ===

포티지는 여러가지 방법으로 elog 이벤트를 처리할 수 있습니다.

elog 이벤트 기록을 디스크에 저장하려면 <code>PORTAGE_ELOG_SYSTEM</code> 변수에 <code>save</code> 모듈을 넣어 활성화하십시오:

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
PORTAGE_ELOG_SYSTEM="save"
}}

메시지는 {{Path|/var/log/portage/elog}}에 저장하든지 언급한 변수를 설정했다면 {{Path|${PORT_LOGDIR}/elog}}에 저장합니다.

카테고리별 elog 파일을 만들려면 <code>split-elog</code> 포티지 기능을 활성화하십시오. 포티지가 {{Path|/var/log/portage/elog}} 위치에 카테고리 기반 디렉터리를 만들도록 강제 설정합니다.

=== 전자메일 설정 ===

To mail logs to a recipient, enable the <code>mail</code> module. The mail option requires some additional variables to be set. Read {{Path|/usr/share/portage/config/make.conf.example}} for more information.

Below, an example setup is shown which is hopefully self-explanatory:

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
PORTAGE_ELOG_SYSTEM="mail"
# First the mail-to address, then the SMTP server
PORTAGE_ELOG_MAILURI="log-intake@example.com mail.example.com"
PORTAGE_ELOG_MAILFROM="portage@$(hostname).example.com"
PORTAGE_ELOG_MAILSUBJECT="${PACKAGE} is ${ACTION} on ${HOST}"
}}

Another example with nullmailer or sendmail:

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
PORTAGE_ELOG_SYSTEM="mail"
# First the mail-to address, then the SMTP server
PORTAGE_ELOG_MAILURI="users@host /usr/sbin/sendmail"
PORTAGE_ELOG_MAILFROM="portage@$(hostname).example.com"
PORTAGE_ELOG_MAILSUBJECT="${PACKAGE} is ${ACTION} on ${HOST}"
}}

=== Related software ===

The following is a list of elog-related software packages:

* {{Package|app-portage/elogv}} - Curses based utility to parse the contents of elogs
* {{Package|app-portage/elogviewer}} - Python based elog viewer
* {{Package|app-portage/portage-mod_jabber}} - Module to support XMPP (Jabber) protocol for elog events

== Build logs ==

With the Portage elog subsystem, package build logs are saved on disk or mailed to a remote recipient, regardless of failure or success. This allows for administrators to review builds later or retrieve build logs for support tickets.

=== Setup ===

To enable Portage logging, edit {{Path|/etc/portage/make.conf}} and set <code>PORT_LOGDIR</code> to a location where the log files should be stored. By default, Portage will use {{Path|/var/log/portage}}:

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
PORT_LOGDIR="/var/log/portage"
}}

Next, a number of <code>FEATURES</code> settings influence how Portage handles build logs.

* With <code>binpkg-logs</code> set, even binary package deployments will have their logs saved
* When <code>clean-logs</code> is set, regular log file clean operations are executed. The command that is executed is defined by <code>PORT_LOGDIR_CLEAN</code> and defaults to a retention of the files of 7 days.
* With <code>split-log</code> set, build logs are stored in category-named subdirectories of <code>${PORT_LOGDIR}/build</code>

=== Cleaning up ===

When <code>clean-logs</code> is set, Portage will execute the command defined by <code>PORT_LOGDIR_CLEAN</code> after every build or unmerge operation. By default, the following command is used:

{{FileBox|filename=/usr/share/portage/config/make.globals|lang=bash|1=
PORT_LOGDIR_CLEAN="find \"\${PORT_LOGDIR}\" -type f ! -name \"summary.log*\" -mtime +7 -delete"
}}

When defining a custom command, do not forget to ''escape'' the <code>${PORT_LOGDIR}</code> variable (or immediately hardcode the right location).

== External resources ==

* [http://blog.siphos.be/2013/09/underestimated-or-underused-portage-elogging/ Underestimated or underused: Portage (e)logging] on ([[User:SwifT|Sven Vermeulen]]'s blog)

[[Category:Portage]]
