{{InfoBox stack
|{{InfoBox homepage|http://www.syslinux.org|header=true}}
|{{InfoBox wikipedia|SYSLINUX}}
|{{InfoBox ohloh}}
}}
'''Syslinux''' is a package that contains a family of bootloaders, that are a good replacement to other "advanced" [[:Category:Bootloaders|bootloaders]] such as [[GRUB]]. The syslinux package includes:
* SYSLINUX - FAT filesystem bootloader
* EXTLINUX - [[ext4|ext2/3/4]] and btrfs filesystem bootloader
* PXELINUX - Network PXE bootloader
* ISOLINUX - ISO-9660 (CDROM) bootloader

== Installation ==
Install {{Package|sys-boot/syslinux}}:
{{USEflag
|custom-cflags++no
}}

{{Emerge|syslinux}}

== Setup ==

{{Note|Assuming {{Path|/dev/sda1}} is the boot partition. If not: make adjustments!}}

To use Syslinux you need to make sure to both install the proper boot sector, and then to install the actual boot loader into the partition. Make sure not to omit steps.

=== Boot Sector Setup ===

==== MBR setup ====
{{RootCmd|dd bs{{=}}440 conv{{=}}notrunc count{{=}}1 if{{=}}/usr/share/syslinux/mbr.bin of{{=}}/dev/sda}}

Set the boot partition as active:
{{RootCmd|fdisk /dev/sda|output=<pre>
Command (m for help): a
Partition number (1-4): 1
Command (m for help): p
 ...
   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *        2048      133119       65536   83  Linux
/dev/sda2          133120     4327423     2097152   82  Linux swap / Solaris
/dev/sda3         4327424  1953525167   974598872   83  Linux

Command (m for help): w
 ...
</pre>}}

==== GPT setup ====
{{RootCmd|dd bs{{=}}440 conv{{=}}notrunc count{{=}}1 if{{=}}/usr/share/syslinux/gptmbr.bin of{{=}}/dev/sda}}

Run gdisk and enable legacy BIOS boot partition attributes on the partition where /boot/extlinux is stored.

=== Boot Loader Install ===

==== EXTLINUX setup ====
{{RootCmd
|mkdir /boot/extlinux
|extlinux --install /boot/extlinux
|ln -snf . /boot/boot
}}

{{Note|The "boot -> ." symlink is not necessary ''per se'', but for the sake of consistency, it's made so the example configurations are the same for users with {{Path|/boot}} on same partition and those with separate partitions.}}

==== SYSLINUX setup ====
{{RootCmd
|syslinux --install /dev/sda1
}}

==== PXELINUX setup ====
With PXELINUX is possible to netboot using images that are shared through a TFTP server. This article will assume there is a TFTP server installed, and it's TFTP root directory is in {{Path|/var/lib/tftpboot}}. With this setup, copy the PXELINUX loader to the TFTP boot dir and create a config dir.

{{RootCmd|cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/pxelinux.0
|mkdir /var/lib/tftpboot/pxelinux.cfg}}

The config dir can be used to store different configurations for your netbooted clients. When a client tries to boot, the MAC address or the IP address is used to determine the appropriate client config file. First it tries to look for the MAC address, followed by a try on the hexadecimal representation of the client IP. Next, a character is stripped from the end of this value, until no more characters are left, or until a config file is found. If none of the tries match, the ''default'' config file is used. 

The hexadecimal representation of an IP can be found with the following command:
{{Cmd|gethostip -x YOUR_IP}}

An example config file matching occurs as follows:
{{Code||<pre>
01-88-99-aa-bb-cc-dd
C0A80032
C0A8003
C0A800
C0A80
C0A8
C0A
C0
C
default
</pre>}}
{{Note|For easy maintenance, create config files by hostname and symlink to the IP representation. If you want a default netboot, just delete the symlink.}}

== Modules ==
syslinux package contain various modules to support variants of features, starting with syslinux 5 some modules depends on others, its good idea to copy most basic modules regardless of usecase.
{{RootCmd|cp /usr/share/syslinux/{menu.c32,memdisk,libcom32.c32,libutil.c32} /boot/extlinux/}}

== Configuration ==
Configuration file varies between bootloaders:
* SYSLINUX: {{Path|syslinux.cfg}}
* EXTLINUX: {{Path|extlinux.conf}}
* ISOLINUX: {{Path|isolinux.cfg}}

The configuration format is the same.

=== Simple configuration ===
This will give you a simple "<tt>boot:</tt>" prompt, similar to the one in Gentoo's Minimal LiveCD:

{{File|/boot/extlinux/extlinux.conf||<pre>
DEFAULT gentoo

LABEL gentoo
      LINUX /boot/kernel-3.6.11-gentoo
</pre>}}

=== Menu configuration ===
The following configuration provides a simple text menu example.

This is done via the vesamenu module, in some cases where vesa is not compatible, the simpler menu module will work.

Copy the VESA menu module into the boot filesystem:
{{RootCmd|cp /usr/share/syslinux/vesamenu.c32 /boot/extlinux/}}

{{File|/boot/extlinux/extlinux.conf||<pre>
TIMEOUT 30
ONTIMEOUT gentoo

UI vesamenu.c32
MENU TITLE Boot

LABEL gentoo
      MENU LABEL Gentoo Linux
      LINUX /boot/kernel-3.6.11-gentoo

LABEL gentoo-old
      MENU LABEL Gentoo Linux (previous kernel)
      LINUX /boot/kernel-3.5.7-gentoo
</pre>}}

{{Note|Avoid using 'KERNEL' for selecting the kernel images, use LINUX instead, As example, if you use KERNEL and the image ends with .0 the extlinux will misunderstand it and try to PXE it ending with a screen graphical artefacts and nothing else.}}

=== Passing Kernel Parameters ===
Unless you're hardcoding kernel parameters in your kernel image, you will want to pass them through the boot loader. To do so you have to use the '''APPEND''' parameter, like this:

{{File|/boot/extlinux/extlinux.conf||<pre>
DEFAULT gentoo

LABEL gentoo
      LINUX /boot/kernel-3.6.11-gentoo
      APPEND root=/dev/sda1
</pre>}}

[[Category:Bootloaders]]
