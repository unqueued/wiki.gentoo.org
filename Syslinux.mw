{{Package|sys-boot/syslinux}} is a package that contains a family of bootloaders, that are a good replacement to other "advanced" bootloaders such as Grub.

Unlike Grub, syslinux is well behaved bootloader and does not need any special requirements.

The syslinux package includes:
* syslinux - FAT filesystem bootloader.
* extlinux - ext2/3/4 and btrfs filesystem bootloader.
* pxelinux - network pxe bootloader.
* isolinux - ISO-9660 (cdrom) bootloader.

This manual should be kept simple for most of common usages (extlinux, syslinux, pxelinux), for advanced usages refer to the excellent documentation inside the <tt>doc</tt> folder of the syslinux tarball (i.e. /usr/portage/distfiles/syslinux-4.04.tar.bz2 ).

== Installation ==

{{Emerge|sys-boot/syslinux}}

{{Warning|Assuming /dev/sda1 is the boot partition, if not make the adjustments!}}

Install MBR:
{{RootCmd|cat /usr/share/syslinux/mbr.bin > /dev/sda}}

Set boot partition as active:
{{RootCmd|fdisk /dev/sda|output=<pre>
Command (m for help): a
Partition number (1-4): 1
Command (m for help): p
 ...
   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *        2048      133119       65536   83  Linux
/dev/sda2          133120     4327423     2097152   82  Linux swap / Solaris
/dev/sda3         4327424  1953525167   974598872   83  Linux

Command (m for help): w
 ...
</pre>}}

=== extlinux bootloader installation ===

{{Warning|Assuming /dev/sda1 is the boot partition, if not make the adjustments!}}

{{RootCmd
|mount /dev/sda1 /boot #If necessary
|mkdir /boot/extlinux
|extlinux --install /boot/extlinux
|cd /boot
|ln -s . boot
}}

{{Note|The "boot -> ." symlink is not necessary ''per se'', but for the sake of consistency, it's made so the example configurations are the same for users with /boot on same partition and those with separate partitions.}}

=== syslinux bootloader installation ===

{{Note|Most probably you don't need to use FAT filesystem these days, consider ext2 filesystem for your boot partition}}

{{Warning|Assuming /dev/sda1 is the boot partition, if not make the adjustments!}}

{{RootCmd
|mount /dev/sda1 /boot
|syslinux --install /dev/sda1
|umount /boot
}}

=== pxelinux bootloader installation ===
With pxelinux is possible to netboot using images that are shared through a TFTP server. This manual will assume there is a TFTP server installed, and it's TFTP root directory is in /var/lib/tftpboot. With this setup, copy the pxelinux loader to the TFTP boot dir and create a config dir.

{{RootCmd|cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/pxelinux.0
|mkdir /var/lib/tftpboot/pxelinux.cfg}}

== Configuration ==

Configuration file varies between bootloaders:
* syslinux - syslinux.cfg
* extlinux - extlinux.conf
* isolinux - isolinux.cfg

The configuration format is the same.

=== Simple configuration ===

This will give you a simple "<tt>boot:</tt>" prompt, similar to the one in Gentoo's Minimal LiveCD:

{{File|/boot/extlinux/extlinux.conf||<pre>
DEFAULT gentoo

LABEL gentoo
      KERNEL /boot/kernel-x86_64-3.1.0-gentoo-r1
      INITRD /boot/initramfs-x86_64-3.1.0-gentoo-r1
      APPEND real_root=/dev/sda3
</pre>}}

=== Menu configuration ===

The following configuration provides a simple text menu example.

This is done via the vesamenu module, in some cases where vesa is not compatible, the simpler menu module will work.

Copy the VESA menu module into the boot filesystem.
{{RootCmd|cp /usr/share/syslinux/vesamenu.c32 /boot/extlinux/}}

{{File|/boot/extlinux/extlinux.conf||<pre>
TIMEOUT 30
ONTIMEOUT gentoo

UI vesamenu.c32
MENU TITLE Boot

LABEL gentoo
      MENU LABEL Gentoo Linux
      KERNEL /boot/kernel-x86_64-3.1.0-gentoo-r1
      INITRD /boot/initramfs-x86_64-3.1.0-gentoo-r1
      APPEND real_root=/dev/sda3

LABEL gentoo-old
      MENU LABEL Gentoo Linux (previous kernel)
      KERNEL /boot/kernel-x86_64-3.1.0-gentoo
      INITRD /boot/initramfs-x86_64-3.1.0-gentoo
      APPEND real_root=/dev/sda3
</pre>}}

[[Category:Software]]
