<languages />

{{InfoBox stack
|{{InfoBox homepage|https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi|header=true}}
|{{InfoBox gitweb|https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/drivers/net/wireless/intel/iwlwifi/Kconfig|text=gitweb Driver|raw=true}}
}}

'''iwlwifi''' — это драйвер для современных [https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi#introduction беспроводных чипов Intel].

== Ядро ==

Чтобы заставить его работать, нужно сделать небольшую настройку ядра. Драйвер поддерживает 802.11a/b/g/n/ac (в зависимости от устройства), поэтому IEEE 802.11 должно быть включено.

=== IEEE 802.11 ===

{{:Wifi/IEEE 802.11/ru}}

=== Драйвер устройства iwlwifi ===

Используйте этот драйвер для [https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi#supported_devices современных беспроводных чипов Intel]. Установите как модуль, как показано <code>&lt;M&gt;</code>. Также необходим   [https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi?s%5b%5d=iwldvm#firmware DVM] или [https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi?s%5b%5d=iwlmvm#firmware MVM] вариант согласно записи в колонке '''Module''' в [https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi#firmware таблице firmware].

{{KernelBox|title=linux-4.9|1=
        Device Drivers  --->
 
        [*] Network device support  --->
 
        --- Network device support
        [*]   Wireless LAN  --->
 
            --- Wireless LAN
            [ ]   ADMtek devices
            [ ]   Atheros/Qualcomm devices
            [ ]   Atmel devices
            [ ]   Broadcom devices
            [ ]   Cisco devices
            [*]   Intel devices
            < >     Intel PRO/Wireless 2100 Network Connection
            < >     Intel PRO/Wireless 2200BG and 2915ABG Network Connection
            < >     Intel Wireless WiFi 4965AGN (iwl4965)
            < >     Intel PRO/Wireless 3945ABG/BG Network Connection (iwl3945)
            <M>     Intel Wireless WiFi Next Gen AGN - Wireless-N/Advanced-N/Ultimate-N (iwlwifi)
            <M>       Intel Wireless WiFi DVM Firmware support
            <M>       Intel Wireless WiFi MVM Firmware support
            [ ]       Enable broadcast filtering (NEW)
            [ ]       Enable runtime power management mode for PCIe devices (NEW)
                      Debugging Options  --->
            [ ]   Intersil devices
            [ ]   Marvell devices
            [ ]   MediaTek devices
            [ ]   Ralink devices
            [ ]   Realtek devices
            [ ]   Redpine Signals Inc devices
            [ ]   STMicroelectronics devices
            [ ]   Texas Instrument devices
            [ ]   ZyDAS devices
            < >   Simulated radio testing tool for mac80211
            < >   Wireless RNDIS USB support
}}

{{Important|В случае если драйвер встроен в ядро (<code>&lt;*&gt;</code>), а не собран как модуль (<code>&lt;M&gt;</code>), firmware необходимо собрать также непосредственно [[Kernel_Modules#Compile-in-kernel_modules_vs_Loadable_kernel_modules_.28LKMs.29|в ядре]]. Смотрите раздел [[#Если предпочтительней собирать в ядро|если предпочтительней собирать в ядро]].
<br />После внесения изменений в конфигурацию ядра не забудьте [[Kernel/Rebuild|перекомпилировать ядро]].}}

После перекомпиляции ядра и перезагрузки с использованием нового ядра, выбранные параметры можно проверить следующим образом:

{{Note|Поддержка псевдо-файла {{Path|/proc/config.gz}} включена с помощью параметра [[Kernel/IKCONFIG_Support]].}}

{{Cmd|zgrep 'IWLWIFI\{{!}}IWLDVM\{{!}}IWLMVM' /proc/config.gz}}

== Firmware ==

Необходимые firmware для конкретных устройств перечислены в [https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi#firmware этой таблице]. Они доступны в пакетах {{Package|sys-kernel/linux-firmware}}, а также, для конкретного устройства, в пакетах [https://packages.gentoo.org/packages/search?q=sys-firmware%2Fiwl sys-firmware/iwlxxxx-*ucode].

{{Emerge|sys-kernel/linux-firmware}}

=== Если предпочтительней собирать в ядро ===

В случае если драйвер будет компилироваться в ядре (<code><*></code>), а не как модуль (<code><M></code>), firmware необходимо также собирать [[Kernel_Modules#Compile-in-kernel_modules_vs_Loadable_kernel_modules_.28LKMs.29|в ядре]].

{{KernelBox|title=linux-4.1|1=
        Device Drivers  --->
 
            Generic Driver Options  --->
 
            -*- Userspace firmware loading support
            [ ]   Include in-kernel firmware blobs in kernel binary
            (iwlwifi-xxxx.ucode) External firmware blobs to build into the kernel binary
            (/lib64/firmware) Firmware blobs root directory
            [ ] Fallback user-helper invocation for firmware loading
}}

В этом примере замените <code>iwlwifi-xxxx.ucode</code> на подходящее имя firmware. Уделите некоторое внимание для <var>FW_LOADER_USER_HELPER_FALLBACK</var>.

== Имена сетевых устройств ==

{{:Eudev/Network device names/ru}}

{{:Wifi/Testing/ru}}

=== modprobe и modinfo ===

{{c|modprobe}} не должен возвращать что-либо:

{{RootCmd|modprobe iwlwifi}}

Большую часть информации о драйвере можно получить с помощью {{c|modinfo iwlwifi}}

{{Cmd|modinfo iwlwifi}}

=== lspci ===

{{c|lspci}} должен показать <code>iwlwifi</code> в <code>Kernel driver in use:</code> и <code>Kernel modules:</code>.

{{RootCmd|lspci -k|output=<pre>xx:xx.x Network controller: Intel Corporation Wireless xxxx
        Kernel driver in use: iwlwifi
        Kernel modules: iwlwifi
</pre>}}

Идентификатор <code>xx:xx.x</code> будет весьма полезен при поиске специфичной информации для этого устройства в выводе dmesg.

=== dmesg ===

Проверьте вывод dmesg. Замените <code>xx:xx.x</code> на  идентификатор из [[#lspci|lspci]], а <code>wlan</code> на [[#Имена сетевых устройств|имя сетевого устройства]].

{{Cmd|dmesg {{!}} grep -i -E 'xx:xx.x{{!}}wlan{{!}}iwl{{!}}80211'}}

== Устранение проблем ==

=== Ядро не загружается ===

Проверьте, что загружено правильное ядро. Это можно сделать (зависит от [[Kernel/IKCONFIG Support|параметра IKCONFIG]]) так:

{{Cmd|zgrep CONFIG_IWL /proc/config.gz}}

=== Проблемы с firmware ===

* Для систем использующих udev или systemd надо настроить ядро для загрузки бинарного блоба (binary blob). В случае firmware для беспроводной карты это firmware, который нуждается в загрузки. Больше информации о конфигурации ядра для такой ситуации можно найти в следующей ветке форума Gentoo: [https://forums.gentoo.org/viewtopic-t-1001638.html FW_LOADER_USER_HELPER_FALLBACK].

* [http://z-issue.com/wp/linux-firmware-for-iwlwifi-ucode-failed-with-error-2/ Linux firmware for iwlwifi ucode failed with error -2]

=== Беспроводная сетевая карта не работает ===

* Intel Corporation Wireless 8260 (rev 3a) [https://forums.gentoo.org/viewtopic-t-1040894-highlight-.html can't access the RSA semaphore it is write protected]

== Смотрите также ==

* [[Handbook:AMD64/Networking/Wireless/ru|Handbook:AMD64/Networking/Wireless]]
* [[wifi/ru|wifi]]
* [[wpa_supplicant]]
* [[Network management using DHCPCD/ru|Network management using DHCPCD]]
* [[netifrc]]
* [[Troubleshooting/ru|Устранение неполадок]]

== Внешние ресурсы ==

* http://www.linuxwireless.org/en/users/Drivers/iwlwifi
* http://git.kernel.org/cgit/linux/kernel/git/firmware/linux-firmware.git
* https://cateee.net/lkddb/web-lkddb/IWLWIFI.html
* https://wiki.archlinux.org/index.php/Wireless_network_configuration#iwlwifi

[[Category:Network devices]]
[[Category:Intel]]
