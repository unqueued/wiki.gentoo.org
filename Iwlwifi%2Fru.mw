{{Lowercase title}}
<languages />

{{InfoBox stack
|{{InfoBox homepage|https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi|header=true}}
|{{InfoBox gitweb|https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/drivers/net/wireless/intel/iwlwifi/Kconfig|text=gitweb Driver|raw=true}}
}}

'''iwlwifi''' — это драйвер для современных [https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi#introduction беспроводных чипов Intel].

== Ядро ==

Чтобы заставить его работать, нужно сделать небольшую настройку ядра. Драйвер поддерживает 802.11a/b/g/n/ac (в зависимости от устройства), поэтому IEEE 802.11 должно быть включено.

=== IEEE 802.11 ===

{{:Wifi/IEEE 802.11/ru}}

=== Драйвер устройства iwlwifi ===

Используйте этот драйвер для [https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi#supported_devices современных беспроводных чипов Intel]. Установите как модуль, как показано <code>&lt;M&gt;</code>. Также необходим   [https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi?s%5b%5d=iwldvm#firmware DVM] или [https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi?s%5b%5d=iwlmvm#firmware MVM] вариант согласно записи в колонке '''Module''' в [https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi#firmware таблице firmware].

{{KernelBox|title=linux-4.1|1=
        Device Drivers  --->
 
        [*] Network device support  --->
 
        --- Network device support
        [*]   Wireless LAN  --->
 
            --- Wireless LAN
            < >   Marvell 8xxx Libertas WLAN driver support with thin firmware
            < >   Cisco/Aironet 34X/35X/4500/4800 ISA and PCI cards
            < >   Atmel at76c50x chipset  802.11b support
            < >   Atmel at76c503/at76c505/at76c505a USB cards
            < >   Intersil Prism GT/Duette/Indigo PCI/Cardbus (DEPRECATED)
            < >   USB ZD1201 based Wireless device support
            < >   Wireless RNDIS USB support
            < >   Realtek 8180/8185/8187SE PCI support
            < >   Realtek 8187 and 8187B USB support
            < >   ADMtek ADM8211 support
            < >   Simulated radio testing tool for mac80211
            < >   Marvell 88W8xxx PCI/PCIe Wireless support
            < >   Atheros Wireless Cards  ----
            < >   Broadcom 43xx wireless support (mac80211 stack)
            < >   Broadcom 43xx-legacy wireless support (mac80211 stack)
            < >   Broadcom IEEE802.11n PCIe SoftMAC WLAN driver
            < >   Broadcom IEEE802.11n embedded FullMAC WLAN driver
            < >   IEEE 802.11 for Host AP (Prism2/2.5/3 and WEP/TKIP/CCMP)
            < >   Intel PRO/Wireless 2100 Network Connection
            < >   Intel PRO/Wireless 2200BG and 2915ABG Network Connection
            <M>   Intel Wireless WiFi Next Gen AGN - Wireless-N/Advanced-N/Ultimate-N (iwlwifi)
            <M>     Intel Wireless WiFi DVM Firmware support (NEW)
            <M>     Intel Wireless WiFi MVM Firmware support (NEW)
                    *** WARNING: iwlwifi is useless without IWLDVM or IWLMVM *** 
            [ ]     Enable broadcast filtering
            [ ]     enable U-APSD by default
                    Debugging Options  ---> 
            < >   Intel Wireless WiFi 4965AGN (iwl4965)
            < >   Intel PRO/Wireless 3945ABG/BG Network Connection (iwl3945)
            < >   Marvell 8xxx Libertas WLAN driver support
            < >   Hermes chipset 802.11b support (Orinoco/Prism2/Symbol)
            < >   Softmac Prism54 support
            < >   Ralink driver support  ----
            < >   Realtek rtlwifi family of devices  ----
            [ ]   TI Wireless LAN support  ----
            < >   ZyDAS ZD1211/ZD1211B USB-wireless support
            < >   Marvell WiFi-Ex Driver
            < >   CW1200 WLAN support
            < >   Redpine Signals Inc 91x WLAN driver support
}}

{{Important|В случае если драйвер встроен в ядро (<code>&lt;*&gt;</code>), а не собран как модуль (<code>&lt;M&gt;</code>), firmware необходимо собрать также непосредственно [[Kernel_Modules#Compile-in-kernel_modules_vs_Loadable_kernel_modules_.28LKMs.29|в ядре]]. Смотрите раздел [[#Если предпочтительней собирать в ядро|если предпочтительней собирать в ядро]].
<br />После внесения изменений в конфигурацию ядра не забудьте [[Kernel/Rebuild|перекомпилировать ядро]].}}

== Firmware ==

Необходимые firmware для конкретных устройств перечислены в [https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi#firmware этой таблице]. Они доступны в пакетах {{Package|sys-kernel/linux-firmware}}, а также, для конкретного устройства, в пакетах [https://packages.gentoo.org/packages/search?q=sys-firmware%2Fiwl sys-firmware/iwlxxxx-*ucode].

{{Emerge|sys-kernel/linux-firmware}}

=== Если предпочтительней собирать в ядро ===

В случае если драйвер будет компилироваться в ядре (<code><*></code>), а не как модуль (<code><M></code>), firmware необходимо также собирать [[Kernel_Modules#Compile-in-kernel_modules_vs_Loadable_kernel_modules_.28LKMs.29|в ядре]].

{{KernelBox|title=linux-4.1|1=
        Device Drivers  --->
 
            Generic Driver Options  --->
 
            -*- Userspace firmware loading support
            [ ]   Include in-kernel firmware blobs in kernel binary
            (iwlwifi-xxxx.ucode) External firmware blobs to build into the kernel binary
            (/lib64/firmware) Firmware blobs root directory
            [ ] Fallback user-helper invocation for firmware loading
}}

В этом примере замените <code>iwlwifi-xxxx.ucode</code> на подходящее имя firmware. Уделите некоторое внимание для <var>FW_LOADER_USER_HELPER_FALLBACK</var>.

{{:Wifi/Testing/ru}}

=== modprobe и modinfo ===

{{c|modprobe}} не должен возвращать что-либо:

{{RootCmd|modprobe iwlwifi}}

Большую часть информации о драйвере можно получить с помощью {{c|modinfo iwlwifi}}

{{Cmd|modinfo iwlwifi}}

=== lspci ===

{{c|lspci}} должен показать <code>iwlwifi</code> в <code>Kernel driver in use:</code> и <code>Kernel modules:</code>.

{{RootCmd|lspci -k|output=<pre>xx:xx.x Network controller: Intel Corporation Wireless xxxx
        Kernel driver in use: iwlwifi
        Kernel modules: iwlwifi
</pre>}}

Идентификатор <code>xx:xx.x</code> будет весьма полезен при поиске специфичной информации для этого устройства в выводе dmesg.

=== dmesg ===

Проверьте вывод dmesg. Замените <code>xx:xx.x</code> на информацию из lspci.

{{Cmd|dmesg {{!}} grep -i 'xx:xx.x\{{!}}wlan\{{!}}iwl\{{!}}80211'}}

== Устранение проблем ==

=== Проблемы с firmware ===

* Для систем использующих udev или systemd надо настроить ядро для загрузки бинарного блоба (binary blob). В случае firmware для беспроводной карты это firmware, который нуждается в загрузки. Больше информации о конфигурации ядра для такой ситуации можно найти в следующей ветке форума Gentoo: [https://forums.gentoo.org/viewtopic-t-1001638.html FW_LOADER_USER_HELPER_FALLBACK].

* [http://z-issue.com/wp/linux-firmware-for-iwlwifi-ucode-failed-with-error-2/ Linux firmware for iwlwifi ucode failed with error -2]

=== Беспроводная сетевая карта не работает ===

* Intel Corporation Wireless 8260 (rev 3a) [https://forums.gentoo.org/viewtopic-t-1040894-highlight-.html can't access the RSA semaphore it is write protected]

== Смотрите также ==

* [[Handbook:AMD64/Networking/Wireless/ru|Handbook:AMD64/Networking/Wireless]]
* [[wifi/ru|wifi]]
* [[wpa_supplicant]]
* [[Network management using DHCPCD/ru|Network management using DHCPCD]]
* [[netifrc]]
* [[Troubleshooting/ru|Устранение неполадок]]

== Внешние ресурсы ==

* http://www.linuxwireless.org/en/users/Drivers/iwlwifi
* http://git.kernel.org/cgit/linux/kernel/git/firmware/linux-firmware.git
* https://cateee.net/lkddb/web-lkddb/IWLWIFI.html
* https://wiki.archlinux.org/index.php/Wireless_network_configuration#iwlwifi

[[Category:Network devices]]
