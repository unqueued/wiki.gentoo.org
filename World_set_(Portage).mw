The '''world set''', also referred to as '''@world''' in Portage development, [[Article description::encompasses the [[System set (Portage)|''system set'']] and the [[Selected set (Portage)|''selected set'']].]]

Packages belonging to the world set are listed by default into the {{Path|/var/lib/portage/world}} file.

It is the world file, together with the [[Profile (Portage)|profile]] and {{Path|/etc/portage}} (including {{Path|make.conf}}) settings, that defines what software is installed on a system using [[Portage]]. 

Later, when a world update is requested (through {{c|emerge -uDN @world}} or similar command), Portage will use the world file as the base for its update calculations.

== Checking ==

The {{c|emaint}} command can be used to see if any problems exist in the world file:

{{Cmd|/usr/sbin/emaint --check world|output=<pre>
Emaint: check world        100% [============================================>]
</pre>}}

== Keep it clean ==

In order to avoid problems in dependency resolution when updating the system, the {{Path|/var/lib/portage/world}} file should contain as few dependencies as possible.  So use the <code>--oneshot</code> (<code>-1</code>) option for emerging dependencies ({{c|--oneshot}} allows to install a package without integrating it in the dependency graph).  

Dependencies already listed in this file can be found using the {{c|[[Q_applets#Listing_packages_which_depend_on_some_package_.28qdepends.29|qdepends]] -Q}} command and be collected in a file say {{Path|/tmp/deselect}}:

{{CodeBox|title=checkworldfile|lang=bash|1=#!/bin/bash

while read i ; do \
        if [ -n "$(qdepends -Q $i)" ]; then \
                echo '' ; echo 'checking '$i ; 
                if [ -n "$(emerge -p --quiet --depclean $i)" ]; then \
                        echo $i' needs to stay in @world'
                else
                        echo $i' can be deselected' 
                        echo $i >> /tmp/deselect
                fi
        fi 
done < /var/lib/portage/world
}} 

Entries collected in {{Path|/tmp/deselect}} can be cross-checked using the <code>--depclean</code> option:

{{Cmd|emerge -pv --depclean $(< /tmp/deselect)}}

The {{c|emerge --deselect}} option will remove these entries without unmerging them.

{{RootCmd|emerge --ask --deselect $(< /tmp/deselect)}}

In case {{c|emerge --depclean -p}} indicates some needed or wanted package would be unmerged, those can be re-added using the {{c|--noreplace}} option:

{{RootCmd|emerge --ask --noreplace <atom>}}

It will add the atom to the {{Path|/var/lib/portage/world}} file without compiling it again.

== See also ==

* [[Knowledge_Base:Remove_orphaned_packages#Analysis|Knowledge Base: Remove orphaned packages]] - The process of finding orphaned dependencies explained.
* The [[system set (Portage)|system set]] package set.
* [[:/etc/portage/sets]]
* The [[selected set (Portage)|selected set]] package set.

== External resources ==

* https://forums.gentoo.org/viewtopic-t-1042252-start-11.html Forum thread

[[Category:Portage]]
