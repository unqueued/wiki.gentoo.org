<languages />

<translate>
<!--T:1-->
This article describes the removal and clean up of [[KDE]].

== Introduction == <!--T:2-->

<!--T:3-->
It is recommended to begin with a clean environment in order to minimize issues, especially when considering one of the following actions:

<!--T:4-->
* Downgrading KDE (eg. from snapshots/live ebuilds to the Portage version).
* Fully upgrading from KDE 3 to KDE 4.
* Moving from an old [[ebuild repository]] to a different one or to the official packages.

== Uninstalling and removing KDE == <!--T:5-->

=== Uninstall all packages remotely depending on KDE === <!--T:6-->

<!--T:7-->
A possible way to completely remove an old KDE installation is by explicitly uninstalling all kde-base packages and software depending on {{Package|kde-base/kdelibs}}:

<!--T:8-->
{{Emerge|params+=--depclean|kde-base/kdelibs $(qlist -IC 'kde-base/*') $(for name in $(qlist -IC {{!}} grep -v '^kde-base/') ; do ( qdepends -C $name {{!}} grep -q kdelibs ) && echo $name ; done)}}

<!--T:9-->
Note that this will not just remove KDE but also all other packages depending on it (unconditionally or through a USE flag dependency), such as e.g. libreoffice[kde].

=== Uninstall KDE packages provided by the KDE ebuild repository === <!--T:10-->

<!--T:11-->
Removing KDE is also possible through sets (as provided by the [[KDE/Ebuild repository|KDE ebuild repository]]):

<!--T:12-->
{{Emerge|params+=-C|@kde-4.X @kdebase-4.X @kde-3.5}}

=== Deselecting ebuild repositories === <!--T:13-->

<!--T:14-->
If any old repositorys are still defined, deselect them so that there are no conflicts with the KDE ebuilds.

=== Clean up Portage definitions === <!--T:15-->

<!--T:16-->
Look in {{Path|/etc/portage}} for any KDE specific settings in {{Path|package.mask}}, {{Path|package.unmask}}, {{Path|package.keywords}} and {{Path|package.accept_keywords}}. Clean up those definitions pertaining to KDE packages.

=== Remove unneeded dependencies === <!--T:17-->

<!--T:18-->
After uninstalling KDE packages, ask Portage to uninstall any now unneeded dependencies:

<!--T:19-->
{{Emerge|params+=--depclean|&nbsp;}}

== Clean up KDE remains == <!--T:20-->

<!--T:21-->
If the system uses the ''desktop/kde'' [[Profile (Portage)|profile]], change to the ''desktop'' profile. Also check in {{Path|/etc/portage/make.conf}} and other configurations files what the active USE flags are.

<!--T:22-->
Remove the remaining KDE configuration files and app data in the following folders:

<!--T:23-->
* {{Path|~/.kde}} - Configuration files and app data of KDE 3.
* {{Path|~/.kde4}} - Configuration files and app data of KDE 4.
* {{Path|/usr/kde/}} - App data of KDE 3.
* {{Path|/var/lib/kde}} - Configuration files of KDE 4.
* {{Path|/var/lib/kdm}} - Configuration files of KDM.
* {{Path|/var/log/kdm.log}} - KDM log file.

<!--T:24-->
The following folders are shared folders. Only remove the KDE related files:

<!--T:25-->
* {{Path|~/.config}} - Configuration files of KDE apps.
* {{Path|~/.local}} - App data of KDE apps.
* {{Path|/etc/conf.d/xdm}} - XDM configuration file.
</translate>

[[Category:KDE]]
