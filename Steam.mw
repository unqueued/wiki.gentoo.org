{{InfoBox stack
|{{InfoBox homepage|http://store.steampowered.com|header=true}}
|{{InfoBox wikipedia|Steam_(software)}}
}}
<languages />
<translate>
'''''Steam''' is [[Article description::a digital distribution platform developed by Valve Corporation, which offers digital rights management (DRM), multiplayer gaming, video streaming and social networking services.]] Steam provides the user with installation and automatic updating of games on multiple computers, and community features such as friends lists and groups, cloud saving, and in-game voice and chat functionality.'' - Wikipedia, the free encyclopedia

== Games ==

* [http://store.steampowered.com/search/?term=&sort_by=_ASC&os=linux&page=1 Official Steam Linux games list].
* [https://steamdb.info/linux/ SteamDB Linux games list].

== Prerequisites ==

{{Important|Steam is a 32-bit application and requires a [[multilib]] [[Profile_(Portage)|profile]] on {{Keyword|amd64}}, ''unless'' a [[Steam#Chroot|chroot]] is used.}}

=== Dependencies ===

{{Note|This section can be skipped when using the {{c|steam-launcher}} ebuild from an [[Steam#External_repositories|external repository (overlay)]].}}

{{Note|The following dependencies may be outdated and require verification. Some of the dependencies may be bundled by the Steam runtime, in which case the system libraries will ''not'' be used.}}

Create the following set of required Steam dependencies:

{{FileBox|filename=/etc/portage/sets/steam|1=
# mandatory!
dev-libs/glib:2
dev-libs/libgcrypt
dev-libs/nspr
dev-libs/nss
gnome-base/gconf
media-libs/alsa-lib
media-libs/fontconfig
media-libs/freetype:2
media-libs/libjpeg-turbo
media-libs/libogg
media-libs/libpng:1.2
media-libs/libsdl
media-libs/libtheora
media-libs/libvorbis
media-libs/libtxc_dxtn
media-libs/openal
net-misc/curl
net-print/cups
sys-apps/dbus
virtual/libusb:1
virtual/opengl
x11-libs/cairo
x11-libs/gdk-pixbuf
x11-libs/gtk+:2
x11-libs/libX11
x11-libs/libXext
x11-libs/libXfixes
x11-libs/libXi
x11-libs/libXrandr
x11-libs/libXrender
x11-libs/libXScrnSaver
x11-libs/pango
x11-libs/pixman

# optional
media-sound/pulseaudio
net-misc/networkmanager
x11-misc/xdg-user-dirs
}}

And then run:

{{Emerge
|@steam
|params+=--noreplace
}}

{{Warning|Do not run {{c|emerge --unmerge @steam}} to remove Steam as it may make the system unusable. Instead use {{c|emerge --ask --depclean @steam}} for this method.}}

=== USE flags ===

To enable the required USE flags for Steam dependencies under {{Keyword|amd64}}, add the the following file:

{{FileBox|filename=/etc/portage/package.use/steam|1=
dev-db/sqlite abi_x86_32
dev-libs/expat abi_x86_32
dev-libs/glib abi_x86_32
dev-libs/libffi abi_x86_32
dev-libs/libpthread-stubs abi_x86_32
dev-libs/nspr abi_x86_32
dev-libs/nss abi_x86_32
dev-util/pkgconfig abi_x86_32
media-libs/libtxc_dxtn abi_x86_32
media-libs/mesa abi_x86_32
media-libs/openal abi_x86_32
net-misc/curl abi_x86_32
sys-devel/llvm abi_x86_32
sys-fs/udev abi_x86_32
sys-libs/gpm abi_x86_32
sys-libs/ncurses abi_x86_32
sys-libs/readline abi_x86_32
sys-libs/zlib abi_x86_32
virtual/libffi abi_x86_32
virtual/libiconv abi_x86_32
virtual/libudev abi_x86_32
virtual/pkgconfig abi_x86_32
x11-libs/gdk-pixbuf abi_x86_32
x11-libs/gtk+:2 abi_x86_32
x11-libs/libdrm abi_x86_32
x11-libs/libpciaccess abi_x86_32
x11-libs/libX11 abi_x86_32
x11-libs/libXau abi_x86_32
x11-libs/libxcb abi_x86_32
x11-libs/libXdamage abi_x86_32
x11-libs/libXdmcp abi_x86_32
x11-libs/libXext abi_x86_32
x11-libs/libXfixes abi_x86_32
x11-libs/libXScrnSaver abi_x86_32
x11-libs/libxshmfence abi_x86_32
x11-libs/libXxf86vm abi_x86_32
x11-proto/damageproto abi_x86_32
x11-proto/dri2proto abi_x86_32
x11-proto/dri3proto abi_x86_32
x11-proto/fixesproto abi_x86_32
x11-proto/glproto abi_x86_32
x11-proto/inputproto abi_x86_32
x11-proto/kbproto abi_x86_32
x11-proto/presentproto abi_x86_32
x11-proto/xcb-proto abi_x86_32
x11-proto/xextproto abi_x86_32
x11-proto/xf86bigfontproto abi_x86_32
x11-proto/xf86driproto abi_x86_32
x11-proto/xf86vidmodeproto abi_x86_32
x11-proto/xproto abi_x86_32
}}

Update the system:

{{Emerge
|@world
|params+=--changed-use --deep
}}

{{Note|Users may receive an error citing circular dependencies due to gpm and ncurses. If this is the case, add <code>-gpm</code> to {{Package|sys-libs/ncurses}} and update the {{C|@world}} set once more.}}

=== Kernel ===

Steam expects that {{Path|/dev/shm}}, which requires kernel [[tmpfs]] support, is mounted prior to being started. {{Path|/dev/shm}} should be mounted automatically by [[OpenRC]] and [[systemd]] during boot, but can also be mounted explicitly via {{Path|/etc/fstab}}:

{{FileBox|filename=/etc/fstab|1=
# to limit the size add e.g. size=768M to opts (default is 50%)

#<fs>      <mountpoint>    <type>	<opts>		     <dump/pass>
shm        /dev/shm        tmpfs        nodev,nosuid,noexec  0 0
}}

== Installation ==

{{Note|Steam officially supports [[Wikipedia:Ubuntu_(operating_system)|Ubuntu]] 12.04+. Attempting to run Steam on any other Linux distribution may cause various issues. Refer to [[Steam#Client_troubleshooting|client]] and [[Steam#Games_troubleshooting|games]] troubleshooting for details.}}

The Steam installer downloads and installs the Steam client to the users home directory. This prevents Portage from managing the Steam client updates or the software installed by it. The Steam client is solely responsible for managing software installation and updates.

{{Important|The instructions throughout this page use the typical Steam installation directory {{Path|~/.local/share/Steam}}.}}

=== Manual ===
{{Warning| This build [https://github.com/ValveSoftware/steam-for-linux/issues/5782#issuecomment-424020747 is problematic on 4.18.9-gentoo]}}

Fetch and extract the Steam installer:

{{Cmd
|wget <nowiki>http://repo.steampowered.com/steam/pool/steam/s/steam/steam_1.0.0.56.tar.gz</nowiki>
|tar -xvzpf steam_1.0.0.56.tar.gz
}}

Run the Steam installer:

{{Cmd
|cd steam
|./steam
}}

{{Note|After invoking {{C|./steam}} a libGL error may appear. See [[Steam/Client_troubleshooting#libGL_fails_to_load_driver|Steam/Client troubleshooting]] for the resolution.}}

If the Steam client crashes, try running:

{{Cmd|./steam -textclient}}

Running Steam with the <code>-textclient</code> option may be necessary each time the client wants to update.

Install the above Steam installer script:

{{RootCmd|cp steam /usr/local/bin}}

Steam can be started with:

{{Cmd|steam}}

=== Manual with alternative installer script ===
{{Warning| This build [https://github.com/ValveSoftware/steam-for-linux/issues/5782#issuecomment-424020747 is problematic on 4.18.9-gentoo]}}

The following installation method is almost identical to the [[Steam#Manual|manual]] installation method, except that an alternative Steam installer script is used.

Fetch the Steam installer and extract the required files:

{{Cmd
|wget <nowiki>http://repo.steampowered.com/steam/pool/steam/s/steam/steam_1.0.0.54.tar.gz</nowiki>
|tar -xvzf steam_1.0.0.54.tar.gz steam/bootstraplinux_ubuntu12_32.tar.xz
|tar -xvzf steam_1.0.0.54.tar.gz steam/steam.desktop
}}

Fetch and run [https://gist.github.com/hasufell Julian Ospald's (hasufell)] Steam installer script:

{{Cmd
|cd steam
|wget <nowiki>https://gist.githubusercontent.com/hasufell/d02a93eccbe35be7a803/raw/987ea287dc81a60d2eb5fa1bb188eae0a5f1049f/steam</nowiki>
|chmod +x steam
|./steam
}}

If the installer script creates broken symbolic links when run with [[Dash]], run the installer script with [[Bash]] instead:
{{Cmd|bash ./steam}}

=== External repositories ===

The {{c|steam-launcher}} ebuild is available from anyc's [https://github.com/anyc/steam-overlay Steam repository] or the Gentoo [https://cgit.gentoo.org/proj/gamerlay.git Gamers repository].

==== anyc's Steam repository ====

anyc's Steam repository is the primary Steam repository. The Gentoo Gamers repository occasionally pulls in changes from anyc's Steam repository, and usually does not have the latest {{c|steam-launcher}} ebuild available.

Install the Steam repository [[:/etc/portage/repos.conf|repository]] configuration:

{{RootCmd|wget -P /etc/portage/repos.conf/ <nowiki>https://raw.githubusercontent.com/anyc/steam-overlay/master/steam-overlay.conf</nowiki>}}

Sync the Steam repository:

{{RootCmd|emaint sync --repo steam-overlay}}

{{Note|The above only needs to be performed once, since the repository will be auto synced during {{c|emerge --sync}} or {{c|emaint sync --auto}} operations.}}

Install the {{c|steam-launcher}} ebuild:

{{Emerge|games-util/steam-launcher}}

Alternatively, install the {{c|steam-meta}} ebuild to pull in all Steam related ebuilds:

{{Emerge|games-util/steam-meta}}

==== eselect repository ====

Install {{Package|app-eselect/eselect-repository}} and {{Package|dev-vcs/git}}:

{{Emerge
|app-eselect/eselect-repository dev-vcs/git
|params+=--noreplace
}}

Add the Steam repository:

{{RootCmd|eselect repository enable steam-overlay}}

Install the {{c|steam-launcher}} ebuild:

{{Emerge|games-util/steam-launcher}}

==== Layman ====

{{Note|Please refer to the [[Layman|Layman]] page for comprehensive installation instructions.}}

Install layman:

{{Emerge
|app-portage/layman
|params+=--noreplace
}}

Fetch the Steam repository:

{{RootCmd|layman -f}}

Display the information about the specified repository:

{{RootCmd|layman -i steam-overlay}}

Add the Steam repository:

{{RootCmd|layman -a steam-overlay}}

Install the {{c|steam-launcher}} ebuild:

{{Emerge|games-util/steam-launcher}}

=== Chroot ===

It is possible to run Steam in a 32-bit [[chroot]] on {{Keyword|amd64}} without relying on multilib.

Create the chroot directory:

{{RootCmd
|mkdir /usr/local/steam32
|cd /usr/local/steam32
}}

Fetch and extract the stage tarball:

{{RootCmd
|wget <nowiki>http://distfiles.gentoo.org/releases/x86/autobuilds/current-stage3-i686/stage3-i686-20171107.tar.bz2</nowiki>
|tar -xvjpf stage3*.tar.bz2
}}

Copy DNS information:

{{RootCmd
|cp -L /etc/resolv.conf etc
}}

Create the Portage directory:

{{RootCmd
|mkdir usr/portage
}}

Mount the necessary filesystems:

{{RootCmd
|mount -R /dev dev
|mount -R /sys sys
|mount -t proc proc proc
|mount -R /usr/portage usr/portage
}}

Chroot with {{c|linux32}}, which is provided by the {{Package|sys-apps/util-linux}} package, and update the environment:

{{RootCmd
|linux32 chroot .
|env-update && source /etc/profile
}}

Create the Steam user:

{{RootCmd
|useradd -m -G audio,video steam
}}

Next, install Steam from one of the above installation methods. When complete, create the following wrapper script to setup the chroot, {{c|su}} to the Steam user, and start Steam:

{{FileBox|filename=/usr/local/bin/steam32|lang=bash|1=
#!/bin/sh

# steam chroot directory
chroot_dir="/usr/local/steam32"

# mount chroot directories
mount -R /dev "${chroot_dir}/dev"
mount -R /sys "${chroot_dir}/sys"
mount -t proc proc "${chroot_dir}/proc"
mount -R /usr/portage "${chroot_dir}/usr/portage"

# check for an existing dbus session
if [ -z "${DBUS_SESSION_BUS_ADDRESS}" ] ; then
  chroot "${chroot_dir}" dbus-launch
fi

# chroot, substitute user, and start steam
chroot "${chroot_dir}" su steam -c "dbus-launch steam"

# unmount chroot directories when steam exits
umount -l "${chroot_dir}/dev"
umount -l "${chroot_dir}/sys"
umount -l "${chroot_dir}/proc"
umount -l "${chroot_dir}/usr/portage"
}}

Although the above script uses [[D-Bus]], it is possible to run Steam without it, but a manual method is required to connect the X server from within the chroot.

== Client troubleshooting ==

See [[Steam/Client troubleshooting]].

== Games troubleshooting ==

See [[Steam/Games troubleshooting]].

== Asking for help ==

The best place to ask for help is the Steam [https://forums.gentoo.org/viewtopic-t-930354.html thread] on the Gentoo Forums. If a solution to an issue is confirmed by others, add it to this page or the relevant troubleshooting subpage. Please do not remove content without [[Talk:Steam|discussion]], ''unless'' it is obviously wrong.

== See also ==

* {{See also|Steam Controller}}

== External resources ==

* [https://forums.gentoo.org/viewtopic-t-930354.html Gentoo Forums - Native Steam client and source game engine]
* [https://bugs.gentoo.org/show_bug.cgi?id=442176 Gentoo Bugzilla - steam-installer ebuild (outdated)]
* [https://wiki.archlinux.org/index.php/Steam ArchWiki - Steam]
* [https://github.com/ValveSoftware/steam-for-linux GitHub - Steam for Linux Client]
* [http://steamcommunity.com/linux Steam Community - Steam for Linux]
</translate>
[[Category:Games]]
