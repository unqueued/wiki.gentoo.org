{{InfoBox stack
|{{InfoBox homepage|http://www.openntpd.org/|header=true}}
|{{InfoBox wikipedia|OpenNTPD|text=OpenNTPD}}
|{{InfoBox ohloh|ntpd}}
}}

OpenNTPD - Lightweight [[Network Time Protocol|NTP]] server ported from OpenBSD

== Installation ==

=== USE flags ===

{{USEflag|package=net-misc/openntpd}}

=== Emerge ===

Install OpenNTPD:

{{Emerge|net-misc/openntpd}}

=== Service ===

==== OpenRC ====

Start the ntp daemon:

{{RootCmd|/etc/init.d/ntpd start}}

Add the ntp daemon to the default runlevel:

{{RootCmd|rc-update add ntpd default}}

==== systemd ====

OpenNTPD does not work with systemd. See [https://www.freedesktop.org/software/systemd/man/systemd-timesyncd.service.html systemd-timesyncd] instead.

== Configuration ==

The default configuration file for OpenNTPD:

{{FileBox|filename=/etc/ntpd.conf|title=Gentoo's default configuration|1=
# Addresses to listen on (ntpd does not listen by default)
#listen on *

# sync to a single server
#server ntp.example.org

# use a random selection of NTP Pool Time Servers
# see http://support.ntp.org/bin/view/Servers/NTPPoolServers
#servers pool.ntp.org

# use a specific local timedelta sensor (radio clock, etc)
#sensor nmea0

# use all detected timedelta sensors
#sensor *

# get the time constraint from a well-known HTTPS site
#constraints from "https://www.google.com/search?q=openntpd"

# Choose servers announced from Gentoo NTP Pool
servers 0.gentoo.pool.ntp.org
servers 1.gentoo.pool.ntp.org
servers 2.gentoo.pool.ntp.org
servers 3.gentoo.pool.ntp.org
}}

For further information see {{c|man ntpd.conf}}:

{{Cmd|man ntpd.conf}}

=== Server ===

{{FileBox|filename=/etc/ntpd.conf|title=OpenNTPD listening on 192.168.0.1 address while syncing with multiple servers|1=
# Addresses to listen on (ntpd does not listen by default)
listen on 192.168.0.1

# Choose servers announced from Gentoo NTP Pool
servers 0.gentoo.pool.ntp.org
servers 1.gentoo.pool.ntp.org
servers 2.gentoo.pool.ntp.org
servers 3.gentoo.pool.ntp.org
}}

{{RootCmd|/etc/init.d/ntpd restart}}

=== Client ===

{{FileBox|filename=/etc/ntpd.conf|title=OpenNTPD syncing with multiple servers|1=
# Choose servers announced from Gentoo NTP Pool
servers 0.gentoo.pool.ntp.org
servers 1.gentoo.pool.ntp.org
servers 2.gentoo.pool.ntp.org
servers 3.gentoo.pool.ntp.org
}}

Alternatively sync the client to a server on the local network:

{{FileBox|filename=/etc/ntpd.conf|title=OpenNTPD syncing with a single server on the local network|1=
# sync to a single server on the local network
server 192.168.0.1
}}

{{RootCmd|/etc/init.d/ntpd restart}}

== See also ==

* [[ntp]]
* [[chrony]]
* [[Network Time Protocol]]

[[Category:Server]]
[[Category:Daemons]]
