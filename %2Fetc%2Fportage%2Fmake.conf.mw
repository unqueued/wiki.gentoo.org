The {{Path|/etc/portage/make.conf}} (formerly {{Path|/etc/make.conf}}) file is used to customize the Portage environment on a global level. Settings here will apply to every package that is emerged; they control many elements of Portage functionality such as global USE flags, language (linguas) options, Portage mirrors, etc.

An example setup can be found at {{Path|/usr/share/portage/config/make.conf.example}}

== Precedence == 

Portage configuration is not limited to {{path|make.conf}}, global settings defined in this file are refined on a per-package basis in the {{path|/etc/portage/package.*}} files, as well as the local environment.

{{Path|make.conf}} may exist as {{Path|/etc/portage/make.conf}} or {{Path|/etc/make.conf}}, however the latter is depreciated for the former. Therefore if settings exist in {{Path|/etc/make.conf}} should be migrated to {{Path|/etc/portage/make.conf}}. Settings from {{Path|/etc/portage/make.conf}} precedence over those in {{Path|/etc/make.conf}}.

== Variables ==

There are many possible variables to customize in {{Path|make.conf}}, but only the most commonly used are explained in detail within this article. For more information, and the full list of variables, consult the {{Path|make.conf}} [[man page]] by running:

{{Cmd|man make.conf}}

{{Note|Different configurations will require different variables to be set up. Do not treat the following examples as a definitive list, or a minimum set of requirements.}}

=== CHOST ===

This variable is passed through the configure step of ebuilds to set the build-host of the system. See the [[CHOST|CHOST article]]. Note that the profile already should have defined the appropriate <code>CHOST</code>.

=== CFLAGS and CXXFLAGS ===

For example:
{{FileBox|filename=[[:/etc/portage/make.conf]]|lang=bash|1=
CFLAGS="-march=native -O2 -pipe"
CXXFLAGS="${CFLAGS}"
}}

For details see the [[CFLAGS]] article.

=== [https://www.gentoo.org/support/news-items/2015-01-28-cpu_flags_x86-introduction.html CPU_FLAGS_X86] ===

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
CPU_FLAGS_X86="mmx mmxext sse sse2 sse3 ssse3"
}}

=== [[CONFIG_PROTECT]] ===
{{:CONFIG_PROTECT}}

=== FEATURES ===
{{:FEATURES}}

=== GENTOO_MIRRORS ===

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
GENTOO_MIRRORS="URIs"
}}

This variable defines a list of Gentoo mirrors to check before downloading from the source defined in the ebuild. Properly chosen mirrors will generally be able to offer faster download speeds. Try using <tt>[[mirrorselect]]</tt> to find the fastest mirror server. 

See the [https://www.gentoo.org/downloads/mirrors/ Mirrors page on the main site] for available URLs.

=== INPUT_DEVICES ===

{{INPUT_DEVICES|evdev synaptics}}

=== [[Localization/Guide#LINGUAS|LINGUAS]] ===

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
LINGUAS="de pt_BR en en_US en_GB"
}}

=== MAKEOPTS ===

This variable is used to specify arguments passed to make when packages are built from source. Make can be told to run multiple jobs in parallel (a potentially substantial speed increase, depending on processor). This can be done either through <code>--jobs N</code> (short form: <code>-jN</code>), which runs <code>N</code> (number) jobs at a time (without an argument, <code>-j</code> will flood the processor with as many jobs as possible, and is not recommended). For example, to run three jobs:

{{RootCmd|emerge --jobs 3 package/atom}}

Another option is <code>--load-average N</code> (short form <code>-lN</code>), which will have make keep the load average of the system to <code>N</code>, however many parallel tasks that ends up being or up to limit set by <code>--jobs</code> if it is set as well.

=== PORTAGE_TMPDIR ===

<code>PORTAGE_TMPDIR</code> defines the location of the temporary build directories. Defaults to {{Path|/var/tmp}}. 

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
PORTAGE_TMPDIR="/var/tmp"
}}

<code>PORTAGE_TMPDIR</code> should not be set to point anywhere under the location of a repository.

=== [[PORTDIR]] ===

The <code>[[PORTDIR]]</code> variable has been deprecated in favor of settings in [[:/etc/portage/repos.conf|repos.conf]]

=== PORTDIR_OVERLAY ===

This variable has been deprecated in favor of settings in [[:/etc/portage/repos.conf|repos.conf]]. <br />[[Layman#Using_.27make.conf.27_method_.28older_method.29|Layman]] versions <2.3.0 still use it.

=== [[SYNC]] ===

=== VIDEO_CARDS ===

{{VIDEO_CARDS|intel nvidia radeon vesa}}

=== USE ===

The <code>USE</code> variable allows the system wide setting or deactivation of [[USE flag|USE flags]] in a space separated list. 

{{FileBox|filename=[[:/etc/portage/make.conf]]|title=[[Handbook:Parts/Working/USE#Declare_permanent_USE_flags|Example]]|lang=bash|1=
USE="-kde -qt4 ldap"
}}

For a fine grained [[Handbook:Parts/Working/USE#Declaring_USE_flags_for_individual_packages|per package control]] of [[USE flag|USE flags]], the file {{Path|[[:/etc/portage/package.use]]}} should be used instead.

=== Licenses ===

{{FileBox|filename=/etc/portage/make.conf|title=To accept all licenses on all packages (not a good idea)|lang=bash|1=
ACCEPT_LICENSE="*"
}}

{{FileBox|filename=/etc/portage/make.conf|title=To accept free software only|lang=bash|1=
ACCEPT_LICENSE="-* @FREE"
}}

== See also ==

* [[Handbook:AMD64/Working/Features|Gentoo Linux AMD64 Handbook - Portage Features]]
* [[Handbook:AMD64/Working/EnvVar|Gentoo Linux AMD64 Handbook - Environment Variables]]
* [[Handbook:AMD64/Portage/Advanced|Gentoo Linux AMD64 Handbook - Advanced Portage Features]]

[[Category:Portage]]
