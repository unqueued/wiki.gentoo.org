<languages />
<translate>

The {{Path|/etc/portage/make.conf}} file (previously at {{Path|/etc/make.conf}}) is used to customize the Portage environment on a global level. Settings here will apply to every package that is emerged. They control many elements of Portage functionality such as global USE flags, language (L10N) options, Portage mirrors, etc.

A very basic version gets installed [[Handbook:AMD64/Installation/Stage#Unpacking_the_stage_tarball|on expanding]] the [[stage tarball]] and an example setup can be found at {{Path|/usr/share/portage/config/make.conf.example}}

== Precedence == 

The final Portage configuration is not only based on {{path|make.conf}}. Global settings defined in this file can be refined on a per-package basis in the {{path|/etc/portage/package.*}} files, as well as through environment variables. Default settings, managed by the distribution, are available as well (partially through the Portage package defaults, partially through the Gentoo profile that is in use).

{{Note|Although Portage still supports the old {{Path|/etc/make.conf}} file, its use is discouraged in favor of {{Path|/etc/portage/make.conf}}. When both files are available, the settings in {{Path|/etc/portage/make.conf}} take precedence over those in {{Path|/etc/make.conf}}.}}

== Variables ==

There are many possible variables to customize in {{Path|make.conf}}. Only the most commonly used ones are explained further within this article, with an example and a link to a more detailed article (if applicable). For more information, and the full list of variables, consult the {{Path|make.conf}} [[man page]] by running:

{{Cmd|man make.conf}}

{{Note|Different configurations will require different variables to be set up. Do not treat the following examples as a definitive list, or a minimum set of requirements.}}

=== CHOST ===

The <var>CHOST</var> variable is passed through the configure step of ebuilds to set the build-host of the system. Note that the Gentoo profile already sets the appropriate <var>CHOST</var> value, and updating it requires insight and experience in build chains.

See the <var>[[CHOST]]</var> article for more information.

=== CFLAGS and CXXFLAGS ===

The <var>CFLAGS</var> and <var>CXXFLAGS</var> variables define the build and compile flags that will be used for all package deployments (some exceptions notwithstanding who filter out flags known to cause problems with the package). The <var>CFLAGS</var> variable is for C based applications, while <var>CXXFLAGS</var> is meant for C++ based applications. Most users will keep the content of both variables the same.

{{FileBox|filename=[[:/etc/portage/make.conf]]|lang=bash|title=Commonly used sane setting for CFLAGS and CXXFLAGS|1=
CFLAGS="-march=native -O2 -pipe"
CXXFLAGS="${CFLAGS}"
}}

For more information see the <var>[[CFLAGS]]</var> article and [[Handbook:Parts/Installation/Stage#CFLAGS_and_CXXFLAGS|CFLAGS and CXXFLAGS]] in the Gentoo Handbook.

=== CONFIG_PROTECT ===

<!-- The text in this section is trancluded the CONFIG_PROTECT article. -->

{{:CONFIG_PROTECT/en}}

=== FEATURES ===

<!-- The text in this section is trancluded the FEATURES article. -->

{{:FEATURES/en}}

=== GENTOO_MIRRORS ===

The <var>GENTOO_MIRRORS</var> variable defines a list of [[GENTOO_MIRRORS|Gentoo mirrors]] to check before downloading from the source defined in the ebuild. Properly chosen mirrors will generally be able to offer faster download speeds. Try using the {{c|[[mirrorselect]]}} command to find the fastest mirror server. 

{{FileBox|filename=/etc/portage/make.conf|lang=bash|title=Setting two mirror locations in make.conf|1=
GENTOO_MIRRORS="http://mirrors.evowise.com/gentoo/ http://lug.mtu.edu/gentoo/"
}}

See the [https://www.gentoo.org/downloads/mirrors/ Mirrors page on the main site] for available URLs.

=== MAKEOPTS ===

The <var>MAKEOPTS</var> variable is used to specify arguments passed to make when packages are built from source. A commonly used setting is the <code>-j<var>N</var></code> which specifies the number of parallel build jobs that can be used for a single package build. A widely used rule of thumb for <var>N</var> is to take the number of available cores (hyper-threaded cores count as 2) and add one.

{{FileBox|filename=/etc/portage/make.conf|title=Recommended setting for a dual-core processor with hyper-threading enabled|lang=bash|1=
MAKEOPTS="-j5"
}}

See the [[MAKEOPTS]] article for more information, and read up on <code>EMERGE_DEFAULT_OPTS</code> as this influences build behavior as well.

=== EMERGE_DEFAULT_OPTS ===

{{:EMERGE_DEFAULT_OPTS/en}}

=== PORTAGE_TMPDIR ===

The <var>PORTAGE_TMPDIR</var> variable defines the location of the temporary files for Portage. The value defaults to {{Path|/var/tmp}}, resulting in {{Path|/var/tmp/portage}} for the build location, {{Path|/var/tmp/ccache}} for Portage' [[Handbook:AMD64/Working/Features#Caching_compilation_objects|ccache]] support and so forth.

{{FileBox|filename=/etc/portage/make.conf|lang=bash|title=Default PORTAGE_TMPDIR setting|1=
PORTAGE_TMPDIR="/var/tmp"
}}

=== DISTDIR ===

{{:DISTDIR/en}}

=== PORTDIR ===

{{:PORTDIR/en}}

=== PORTDIR_OVERLAY ===

The <var>PORTDIR_OVERLAY</var> variable has been deprecated in favor of the {{Path|[[:/etc/portage/repos.conf|repos.conf]]}} file.

[[Layman#Using_.27make.conf.27_method_.28older_method.29|Layman]] versions less than 2.3.0 still use the <var>PORTDIR_OVERLAY</var> variable.

=== SYNC ===

See the [[SYNC]] article.

=== USE ===

The <var>USE</var> variable allows the system wide setting or deactivation of [[USE flag|USE flags]] in a space separated list. 

{{FileBox|filename=[[:/etc/portage/make.conf]]|title=[[Handbook:Parts/Working/USE#Declare_permanent_USE_flags|Example]]|lang=bash|1=
USE="-kde -qt4 ldap"
}}

For a fine grained [[Handbook:Parts/Working/USE#Declaring_USE_flags_for_individual_packages|per package control]] of [[USE flag|USE flags]], the file {{Path|[[:/etc/portage/package.use]]}} should be used instead.

=== ACCEPT_LICENSE ===

The <var>ACCEPT_LICENSE</var> variable tells Portage which software licenses are allowed. Packages who have a license that is not accepted cannot be installed on the system.

{{FileBox|filename=/etc/portage/make.conf|title=To accept all [[:/usr/portage/licenses|licenses]] on all packages (not a good idea)|lang=bash|1=
ACCEPT_LICENSE="*"
}}

{{FileBox|filename=/etc/portage/make.conf|title=To accept free software only|lang=bash|1=
ACCEPT_LICENSE="-* @FREE"
}}

== USE_EXPAND ==

The <var>USE_EXPAND</var> variable is a list set in [https://gitweb.gentoo.org/repo/gentoo.git/tree/profiles/base/make.defaults profiles/base/make.defaults] as of Portage 2.0.51.20.<ref>https://devmanual.gentoo.org/general-concepts/use-flags/#use_expand-and-arch-use-flags</ref>

=== CPU_FLAGS_X86 ===

The <var>CPU_FLAGS_X86</var> variable informs Portage about the CPU flags (features) that the system allows. This information is used to optimize package builds specifically for the targeted features.

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
CPU_FLAGS_X86="mmx mmxext sse sse2 sse3 ssse3"
}}

See [https://www.gentoo.org/support/news-items/2015-01-28-cpu_flags_x86-introduction.html this news item.] and [[CPU_FLAGS_X86]] for more information.

=== INPUT_DEVICES ===

For possible values of this USE_EXPAND variable see <var>[https://packages.gentoo.org/useflags/input_devices_evdev INPUT_DEVICES]</var>.

{{INPUT_DEVICES|evdev synaptics}}

=== L10N ===

See [[Localization/Guide#L10N|L10N in the Localization guide]] and this [https://gentoo.org/support/news-items/2016-06-23-l10n-use_expand.html Repository News Item]. For possible values of this <var>USE_EXPAND</var> variable see <var>[https://packages.gentoo.org/useflags/l10n_en L10N]</var>.

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
L10N="de pt_BR en en_US en_GB"
}}

=== VIDEO_CARDS ===

For possible values of this <var>USE_EXPAND</var> variable see <var>[https://packages.gentoo.org/useflags/video_cards_vesa VIDEO_CARDS]</var>.

{{VIDEO_CARDS|intel nvidia radeon vesa}}

For the average user, if a graphical desktop environment is to be used this variable ''should'' be explicitly defined. For further information see [[Xorg/Guide#make.conf_configuration]].

== See also ==

* [[Handbook:AMD64/Portage/Variables|Gentoo Linux AMD64 Handbook - Portage variables]]
* [[Handbook:AMD64/Working/Features|Gentoo Linux AMD64 Handbook - Portage features]]
* [[Handbook:AMD64/Working/EnvVar|Gentoo Linux AMD64 Handbook - Environment variables]]
* [[Handbook:AMD64/Portage/Advanced|Gentoo Linux AMD64 Handbook - Advanced Portage features]]

== External resources ==

* https://devmanual.gentoo.org/general-concepts/features/

== References ==

{{reflist}}

</translate>
[[Category:Portage]]
