<languages />


{{InfoBox stack
|{{InfoBox homepage|http://www.sshguard.net/|header=true}}
|{{InfoBox ohloh}}
}}
{{Metadata|abstract=sshguard is an intrusion prevention system which parses server logs, determines malicious activity and then uses the system firewall to block those ip addresses.}}

'''sshguard''' is an intrusion prevention system.  sshguard parses server logs, determines malicious activity, and then bans malicious users via firewall rules.  sshguard is written in C so it does not tax an interprator.

== 동작 원리 ==

{{Package|app-admin/sshguard}} 꾸러미는 하나 이상의 로그 파일을 연속적으로 추적하는 간단한 데몬입니다. 로그인 시도에 실패했을 경우에 데본에서 전달하는 로그 이벤트를 분석하며, 시스템 방화벽을 업데이트하여 로그인에 여러번 실패한 사용자를 막아버립니다.

이름에서 암시하는 의미와는 달리 sshguard는 SSH 로그만 해석하지 않습니다. 메일 시스템과 FTP 로그에 대해서도 지원합니다. 지원 서비스 전체 목록은 [http://www.sshguard.net sshguard.net 웹 사이트]에 있습니다.

== 설정 ==

=== 프로그램 ===

{{Package|app-admin/sshguard}}를 설치하십시오:

{{Emerge|app-admin/sshguard}}

{{Package|net-firewall/iptables}}를 설치했고 시스템 방화벽으로 사용중인지 확인하십시오. 이 글을 쓰는 시점에서는 아직 {{Package|net-firewall/nftables}}를 지원하지 않습니다.

{{Emerge|net-firewall/iptables}}

더 많은 [[Iptables|iptables]]<sup style="color:#ff0077">en</sup>사용법 및 설정법은 젠투위키에서 찾아보실 수 있습니다.

=== 방화벽 준비 ===

sshguard가 침입 사용자(IP 주소로 차단)를 차단할 때 <tt>sshguard</tt> 체인을 활용합니다.

Prepare the chain, and make sure it is also triggered when new incoming connections are detected:

{{RootCmd|iptables -N sshguard
|iptables -A INPUT -j sshguard}}

=== Watching logfiles ===

The basic idea behind sshguard is that the administrator passes on the log file(s) to watch as options to the application - there is no native sshguard configuration file.

On Gentoo, the options can be best configured in the {{Path|/etc/conf.d/sshguard}} file:

{{FileBox|filename=/etc/conf.d/sshguard|title=/var/log/messages를 읽도록 sshguard 설정|lang=bash|1=
PARDONTIME="3600" # Blocks last at least 1 hour (3600 seconds)
WATCHTIME="360"   # Track IP addresses for 5 minutes (360 seconds)
THRESHOLD="10"    # How many problematic attempts trigger a block
  
LOGFILES="-l /var/log/messages"                      # Watch this file...
LOGFILES="${SSHGUARD_LOGFILES} -l /var/log/auth.log" # And this one
  
SSHGUARD_OPTS="-p ${PARDONTIME} -s ${WATCHTIME} -a ${THRESHOLD} ${LOGFILES}"
}}

Make sure that the log files are accessible for the runtime user that sshguard uses.

=== 서비스 ===

Have sshguard be started by default by adding it to the default runlevel, and then start it:

{{RootCmd|rc-update add sshguard default
|rc-service sshguard start}}

== 추가 참조 ==

* [[Iptables]], for installing and configuring <tt>iptables</tt> on Gentoo

== 외부 자료 ==

The [http://www.sshguard.net/docs/ sshguard documentation] provides all the information needed to further tune the application.


[[Category:Security]]
[[Category:Server]]
