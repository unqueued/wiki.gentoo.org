<languages />
{{InfoBox stack
|{{InfoBox homepage|https://wiki.gentoo.org/wiki/Project:Portage-Tools|header=true}}
|{{InfoBox wikipedia|gentoolkit}}
|{{InfoBox gitweb|gentoolkit.git/}}
}}

{{Metadata|abstract=Gentoolkit это набор инструментов для упрощения администрирования системы Gentoo. Данный документ описывает базовое использование некоторых инструментов, входящих в состав Gentoolkit.}}

Gentoolkit представляет собой набор средств, облегчающих администрирование системы Gentoo. Этот документ охватывает основы некоторых инструментов, присутствующих в Gentoolkit.

== Введение ==

=== Что такое Gentoolkit? ===

Gentoo является уникальным дистрибутивом и имеет некоторые сложности, не существующие для других дистрибутивов. Как только разработчики и контрибьюторы Gentoo обнаружили некоторые из них, они также написали инструменты, с целью помочь пользователям и администраторам обойти эти проблемы. Многие инструменты были внесены как вклад в проект Gentoo и включены в пакет {{Package|app-portage/gentoolkit}}. 

{{Note|В настоящее время существуют две версии пакета Gentoolkit: {{Package|app-portage/gentoolkit}} и {{Package|app-portage/gentoolkit-dev}}. В то время как первый содержит сценарии для администрирования, второй содержит конкретные сценарии помогающие при ''разработке'' на Gentoo. Разработчики Gentoo могут включить свои сценарии в пакет {{Package|portage/gentoolkit-dev}} связавшись с сопровождающим Gentoolkit. Далее в этом документе речь пойдет только о пакете {{Package|app-portage/gentoolkit}}.}}

Gentoolkit содержит целый букет полезных инструментов, которые помогут пользователям управлять пакетами и отслеживать всё что происходит в их системе. Большинство пользователей - особенно те, кто обновляют систему часто - выиграют от того, что Gentoolkit установлен.

== Установка ==

=== Emerge ===

Как и с любым другим пакетом Gentoo, для установки просто используйте <tt>emerge</tt>: 

{{Emerge|app-portage/gentoolkit}}

{{Note|Many of the tools in Gentoolkit reveal important information about the system they are installed on or require root privileges. For that reason, some of the programs may only be executed (or only function properly) if run by a user with root privileges.}}

=== Поиск документации ===

Любая документация, которую программа может иметь (кроме справочных страниц) хранится в {{Path|/usr/share/doc/gentoolkit-[version]/[program-name]/}}.

== euse ==

<tt>euse</tt> является инструментом для просмотра, активации и деактивации USE-флагов в различных местах. Для получения дополнительной информации об использовании флагов, пожалуйста, обратитесь к главе [[Handbook:X86/Working/USE/ru|USE флаги]]. См. <tt>euse -h</tt> для получения помощи и всех опций.

=== Просмотр, активация и деактивация USE флагов ===

Команда <tt>euse -a</tt> считывает текущие активные USE-флаги и отображает их. 

{{Note|Есть 5 "столбцов", которые  <tt>euse</tt> теперь использует, для того, чтобы показать активен или неактивен флаг и где установлены все флаги. Столбцы следуют  -- +/-,  установлены ​​в переменном окружении, установлены в {{Path|make.conf}}, установлены в {{Path|make.defaults}}, и установлены в {{Path|make.globals}}. Результат выглядит [+ECDG].}}

{{RootCmd|euse -a|output=<pre>
X                   [+ CD ]
aalib               [+    ]
acpi                [+ C  ]
alsa                [+ C  ]
apache2             [+ C  ]
apm                 [+  D ]
avi                 [+  D ]
berkdb              [+  D ]
bitmap-fonts        [+  D ]
bonobo              [+    ]
cdr                 [+ C  ]
crypt               [+ CD ]
cscope              [+ C  ]
cups                [+ CD ]
curl                [+    ]
emboss              [+  D ]
encode              [+  D ]
esd                 [+    ]
fam                 [+    ]
fbcon               [+ C  ]
firefox             [+ C  ]
font-server         [+  D ]
foomaticdb          [+  D ]
fortran             [+  D ]
gd                  [+ C  ]
gdbm                [+  D ]
gif                 [+ CD ]
gimpprint           [+ C  ]
gnome               [+ CD ]
gphoto2             [+    ]
gpm                 [+ CD ]
gstreamer           [+ C  ]
gtk                 [+  D ]
gtkhtml             [+ C  ]
guile               [+    ]
imagemagick         [+    ]
imlib               [+ CD ]
innodb              [+    ]
ipv6                [+  D ]
javascript          [+ C  ]
jpeg                [+ CD ]
kde                 [+  D ]
ldap                [+    ]
libg++              [+ CD ]
libwww              [+ CD ]
mad                 [+ CD ]
mbox                [+ C  ]
md5sum              [+ C  ]
mikmod              [+ CD ]
mmx                 [+ C  ]
motif               [+ CD ]
mp3                 [+    ]
mpeg                [+ CD ]
mpeg4               [+ C  ]
mysql               [+ C  ]
ncurses             [+ CD ]
nls                 [+  D ]
nvidia              [+ C  ]
odbc                [+    ]
offensive           [+    ]
ogg                 [+ CD ]
opengl              [+ CD ]
oss                 [+  D ]
pam                 [+ CD ]
pdflib              [+ CD ]
perl                [+ CD ]
png                 [+ CD ]
python              [+ CD ]
qt                  [+  D ]
quicktime           [+ CD ]
readline            [+ CD ]
ruby                [+    ]
sdl                 [+ CD ]
slang               [+  D ]
spell               [+ CD ]
sse                 [+ C  ]
ssl                 [+ CD ]
svga                [+ CD ]
tcltk               [+ C  ]
tcpd                [+  D ]
tiff                [+ C  ]
truetype            [+ CD ]
usb                 [+ C  ]
vanilla             [+ C  ]
x86                 [+ C  ]
xml                 [+    ]
xosd                [+ C  ]
xv                  [+ CD ]
xvid                [+ C  ]
zlib                [+ CD ]
</pre>
}}

Так же можно использовать команду <tt>euse -a -g</tt>, чтобы просмотреть только ''активные'' глобальные флаги. Команда <tt>euse -a -l</tt> делает то же самое для активных локальных флагов. <code>-g</code> и <code>-l</code> являются суб-опциями для <tt>euse</tt> и для корректного функционирования перед ними необходима опция (такая как <code>-a</code>). 

{{RootCmd|euse -a -l|output=<pre>
bitmap-fonts        [+  D ]
font-server         [+  D ]
fortran             [+  D ]
gimpprint           [+ C  ]
md5sum              [+ C  ]
mpeg4               [+ C  ]
nvidia              [+ C  ]
offensive           [+    ]
truetype            [+ CD ]
</pre>
}}

<tt>euse</tt> может активировать и деактивировать USE флаги. Для этого используются команды <tt>euse -E flagname</tt>(активировать флаг) и <tt>euse -D flagname</tt> (деактивировать флаг). 

{{Warning|Не используйте команды <tt>euse -E</tt> или <tt>euse -D</tt> без флага. '''Это действие активирует/деактивирует ВСЕ USE-ФЛАГИ''' в {{Path|/etc/portage/make.conf}}. Копия будет храниться в {{Path|/etc/portage/make.conf.euse_backup}}, тем не менее будьте осторожны при использовании <tt>euse -E</tt> или <tt>euse -D</tt>.}}

Активация USE флага:

{{RootCmd|euse -E 3dfx|output=<pre>
/etc/portage/make.conf was modified, a backup copy has been placed at /etc/portage/make.conf.euse_backup
</pre>}}

Файл {{Path|/etc/portage/make.conf}} выглядит таким, после запуска команды:

{{FileBox|filename=make.conf|title=После активации USE-флага 3dfx|lang=bash|1=
USE="alsa acpi apache2 -arts cups cdr crypt cscope -doc fbcon \
     firefox gd gif gimpprint gnome gpm gstreamer gtkhtml imlib \
     innodb -java javascript jpeg libg++ libwww mad mbox md5sum \
     mikmod mmx motif mpeg mpeg4 mysql ncurses nvidia \
     ogg odbc offensive opengl pam pdflib perl png python \
     quicktime readline sdl spell sse ssl svga tcltk tiff truetype usb \
     vanilla X xosd xv xvid x86 zlib 3dfx"
}}

Деактивация USE флага:

{{RootCmd|euse -D 3dfx|output=<pre>
/etc/portage/make.conf was modified, a backup copy has been placed at /etc/portage/make.conf.euse_backup
</pre>}}

Снова, вид файла {{Path|/etc/portage/make.conf}} после запуска команды:

{{FileBox|filename=make.conf|title=После деактивации USE-флага 3dfx|lang=bash|1=
USE="alsa acpi apache2 -arts cups cdr crypt cscope -doc fbcon \
     firefox gd gif gimpprint gnome gpm gstreamer gtkhtml imlib \
     innodb -java javascript jpeg libg++ libwww mad mbox md5sum \
     mikmod mmx motif mpeg mpeg4 mysql ncurses nvidia \
     ogg odbc offensive opengl pam pdflib perl png python \
     quicktime readline sdl spell sse ssl svga tcltk tiff truetype usb \
     vanilla X xosd xv xvid x86 zlib -3dfx"
}}

{{Note|<tt>euse</tt> физически не удаляет флаг из {{Path|make.conf}}. Он просто добавляет <code>-</code> (минус) перед флагом, чтобы деактивировать его. Возможно, придется вручную очистить {{Path|make.conf}}, чтобы избежать нежелательных переменных. В противном случае, используйте  опцию <tt>-P</tt>(снос) для удаления флага. Например, <tt>euse -P 3dfx</tt> удалит флаг <code>3dfx</code> .}}

== Прочие инструменты ==

=== revdep-rebuild ===

Этот инструмент является инструментом для пересборки обратных зависимостей в Gentoo. Он будет сканировать установленные файлы ebuild, чтобы найти пакеты, которые повредились в результате обновлении пакета, от которого они зависят. Он может собрать эти пакеты для пользователя автоматически, но также может случиться, что данный пакет не работает с текущей установленной зависимостью, и в этом случае вы должны обновить сломанный пакет до более новой версии. <tt>revdep-rebuild</tt> передает флаги <tt>emerge</tt>, что позволяет использовать опцию <code>--pretend</code>, чтобы увидеть что произойдет, прежде чем произвести реальную операцию. 

{{RootCmd|revdep-rebuild -p|output=<pre>
 * Configuring search environment for revdep-rebuild
  
 * Checking reverse dependencies
 * Packages containing binaries and libraries broken by a package update
 * will be emerged.
  
 * Collecting system binaries and libraries
 * Generated new 1_files.rr
 * Collecting complete LD_LIBRARY_PATH
 * Generated new 2_ldpath.rr
 * Checking dynamic linking consistency
[ 48% ]  *   broken /usr/lib/gstreamer-0.10/libgsttaglib.la (requires /usr/lib/libtag.la)
[ 64% ]  *   broken /usr/lib/libgdkglext-x11-1.0.la (requires /usr/lib/libGLU.la)
[ 67% ]  *   broken /usr/lib/libgtkglext-x11-1.0.la (requires /usr/lib/libGLU.la)
[ 85% ]  *   broken /usr/lib/python2.6/site-packages/gtk-2.0/gtk/gdkgl/_gdkgl.la (requires /usr/lib/libGLU.la)
 *   broken /usr/lib/python2.6/site-packages/gtk-2.0/gtk/gtkgl/_gtkgl.la (requires /usr/lib/libGLU.la)
[ 97% ]  *   broken /usr/qt/3/lib/libqt-mt.la (requires -lpng)
[ 100% ]
 * Generated new 3_broken.rr
 * Assigning files to packages
 *   /usr/lib/gstreamer-0.10/libgsttaglib.la -> media-plugins/gst-plugins-taglib
 *   /usr/lib/libgdkglext-x11-1.0.la -> x11-libs/gtkglext
 *   /usr/lib/libgtkglext-x11-1.0.la -> x11-libs/gtkglext
 *   /usr/lib/python2.6/site-packages/gtk-2.0/gtk/gdkgl/_gdkgl.la -> dev-python/pygtkglext
 *   /usr/lib/python2.6/site-packages/gtk-2.0/gtk/gtkgl/_gtkgl.la -> dev-python/pygtkglext
 *   /usr/qt/3/lib/libqt-mt.la -> x11-libs/qt
 * Generated new 4_raw.rr and 4_owners.rr
 * Cleaning list of packages to rebuild
 * Generated new 4_pkgs.rr
 * Assigning packages to ebuilds
 * Generated new 4_ebuilds.rr
 * Evaluating package order
 * Generated new 5_order.rr
 * All prepared. Starting rebuild
emerge --oneshot --pretend  dev-python/pygtkglext:0
media-plugins/gst-plugins-taglib:0.10
x11-libs/gtkglext:0
x11-libs/qt:3
  
These are the packages that would be merged, in order:
  
Calculating dependencies... done!
[ebuild   R   ] media-plugins/gst-plugins-taglib-0.10.17
[ebuild   R   ] x11-libs/gtkglext-1.2.0
[ebuild   R   ] x11-libs/qt-3.3.8b-r2
[ebuild   R   ] dev-python/pygtkglext-1.1.0
 * Now you can remove -p (or --pretend) from arguments and re-run revdep-rebuild.
</pre>
}}

Если нужно пересобрать некоторые пакеты запустите команду <tt>revdep-rebuild</tt> без опции <code>-р</code> и перечисленные пакеты будут пересобраны. 

=== glsa-check ===

<tt>[https://www.gentoo.org/support/security/ glsa-check]</tt> в основном, инструмент для тестирования, отслеживающий различных [https://security.gentoo.org/glsa/ GLSA] (Консультант по безопасности Gentoo Linux) и в конечном итоге будет интегрирован в <tt>emerge</tt> и <tt>equery</tt>.

=== eread ===

<tt>eread</tt> это простая утилита для отображения elog-файлов, представленных в >=<code>portage-2.1</code>. Сохранение elog файлов можно настроить, установив пару переменных в {{Path|/etc/portage/make.conf}}: 

{{FileBox|filename=make.conf|title=Активация elog|lang=bash|1=
PORTAGE_ELOG_CLASSES="log"
PORTAGE_ELOG_SYSTEM="save"
}}

{{Note|Это только один из способов сохранения elog сообщений. Для получения дополнительной информации о том, как система elog работает в Portage, пожалуйста, обратитесь к соответствующей странице [[Handbook:X86/Portage/Files/ru#Logging_features|Настольной книги Portage]].}}

После того как создали удовлетворяющую настройку elog, запустите <tt>eread</tt>, чтобы посмотреть log файлы. 

{{Cmd|eread|output=<pre>
This is a list of portage log items. Choose a number to view that file or type
q to quit.
  
1&#41; app-portage:gentoolkit-0.2.4_pre2:20070320-000256.log
2&#41; app-portage:gentoolkit-0.2.4_pre2:20070320-000258.log
3&#41; app-portage:gentoolkit-0.2.4_pre2:20070320-000319.log
4&#41; app-portage:gentoolkit-0.2.3:20070320-000408.log
Choice?
</pre>
}}

Выберите номер и файл будет отображаться с использованием программы, указанной в переменной окружения PAGER. Если переменная PAGER не установлена, будет использоваться <tt>less</tt>. Переменную окружения PAGER можно задать с помощью <tt>eselect</tt> (модуль <code>pager</code>).

После отображения пункта elog, вам будет предложено удалить файл.

=== eclean ===

<tt>eclean</tt> is a tool to remove old source files and old binary packages from the system. 

When building and installing packages, the source files are downloaded and preserved in <code>DISTDIR</code>, usually {{Path|/usr/portage/distfiles}}. This can accumulate several gigabytes of material over time if it is not cleaned periodically. Users should run <tt>eclean-dist</tt> to clean source files from <code>DISTDIR</code>.

It is possible to create archives of installed packages by using <tt>quickpg</tt> or FEATURES="buildpkg". These archived packages are kept in PKGDIR, usually {{Path|/usr/portage/packages}}. When they are no longer needed, or if they are too old, <tt>eclean-pkg</tt> can be ran to remove them from <code>PKGDIR</code>. It is a good way to ensure that any binary packages on the system are only the latest versions. 

Более подробную информацию о <tt>eclean</tt> и советы о том, как поддерживать систему, свободной хлама вы можете прочитать <kbd>man eclean</kbd> или проверить статью об [[eclean]].

== Смотрите также ==

* [[equery/ru|equery]]
* [[eclean/ru|eclean]]
* [[epkginfo]]

{{Migrated|originalauthors=Matt Butcher, John P. Davis, Erwin, Shyam Mani, Xavier Neys, Karl Trygve, José Luis Rivero, Joshua Saddler, Douglas Anderson}}
