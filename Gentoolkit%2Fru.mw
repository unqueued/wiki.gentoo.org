<languages />
{{InfoBox stack
|{{InfoBox homepage|https://wiki.gentoo.org/wiki/Project:Portage-Tools|header=true}}
|{{InfoBox wikipedia|gentoolkit}}
|{{InfoBox gitweb|gentoolkit.git/}}
}}

{{Metadata|abstract=Gentoolkit это набор инструментов для упрощения администрирования системы Gentoo. Данный документ описывает базовое использование некоторых инструментов, входящих в состав Gentoolkit.}}

Gentoolkit представляет собой набор средств, облегчающих администрирование системы Gentoo. Этот документ охватывает основы некоторых инструментов, присутствующих в Gentoolkit.

== Введение ==

=== Что такое Gentoolkit? ===

Gentoo является уникальным дистрибутивом и имеет некоторые сложности, не существующие для других дистрибутивов. Как только разработчики и контрибьюторы Gentoo обнаружили некоторые из них, они также написали инструменты, с целью помочь пользователям и администраторам обойти эти проблемы. Многие инструменты были внесены как вклад в проект Gentoo и включены в пакет {{Package|app-portage/gentoolkit}}. 

{{Note|В настоящее время существуют две версии пакета Gentoolkit: {{Package|app-portage/gentoolkit}} и {{Package|app-portage/gentoolkit-dev}}. В то время как первый содержит сценарии для администрирования, второй содержит конкретные сценарии помогающие при ''разработке'' на Gentoo. Разработчики Gentoo могут включить свои сценарии в пакет {{Package|portage/gentoolkit-dev}} связавшись с сопровождающим Gentoolkit. Далее в этом документе речь пойдет только о пакете {{Package|app-portage/gentoolkit}}.}}

Gentoolkit содержит целый букет полезных инструментов, которые помогут пользователям управлять пакетами и отслеживать всё что происходит в их системе. Большинство пользователей - особенно те, кто обновляют систему часто - выиграют от того, что Gentoolkit установлен.

== Установка ==

=== Emerge ===

Как и с любым другим пакетом Gentoo, для установки просто используйте <tt>emerge</tt>: 

{{Emerge|app-portage/gentoolkit}}

{{Note|Many of the tools in Gentoolkit reveal important information about the system they are installed on or require root privileges. For that reason, some of the programs may only be executed (or only function properly) if run by a user with root privileges.}}

=== Поиск документации ===

Любая документация, которую программа может иметь (кроме справочных страниц) хранится в {{Path|/usr/share/doc/gentoolkit-[version]/[program-name]/}}.

== euse ==

<tt>euse</tt> является инструментом для просмотра, активации и деактивации USE-флагов в различных местах. Для получения дополнительной информации об использовании флагов, пожалуйста, обратитесь к главе [[Handbook:X86/Working/USE/ru|USE флаги]]. См. <tt>euse -h</tt> для получения помощи и всех опций.

=== Просмотр, активация и деактивация USE флагов ===

Команда <tt>euse -a</tt> считывает текущие активные USE-флаги и отображает их. 

{{Note|Есть 5 "столбцов", которые  <tt>euse</tt> теперь использует, для того, чтобы показать активен или неактивен флаг и где установлены все флаги. Столбцы следуют  -- +/-,  установлены ​​в переменном окружении, установлены в {{Path|make.conf}}, установлены в {{Path|make.defaults}}, и установлены в {{Path|make.globals}}. Результат выглядит [+ECDG].}}

{{RootCmd|euse -a|output=<pre>
X                   [+ CD ]
aalib               [+    ]
acpi                [+ C  ]
alsa                [+ C  ]
apache2             [+ C  ]
apm                 [+  D ]
avi                 [+  D ]
berkdb              [+  D ]
bitmap-fonts        [+  D ]
bonobo              [+    ]
cdr                 [+ C  ]
crypt               [+ CD ]
cscope              [+ C  ]
cups                [+ CD ]
curl                [+    ]
emboss              [+  D ]
encode              [+  D ]
esd                 [+    ]
fam                 [+    ]
fbcon               [+ C  ]
firefox             [+ C  ]
font-server         [+  D ]
foomaticdb          [+  D ]
fortran             [+  D ]
gd                  [+ C  ]
gdbm                [+  D ]
gif                 [+ CD ]
gimpprint           [+ C  ]
gnome               [+ CD ]
gphoto2             [+    ]
gpm                 [+ CD ]
gstreamer           [+ C  ]
gtk                 [+  D ]
gtkhtml             [+ C  ]
guile               [+    ]
imagemagick         [+    ]
imlib               [+ CD ]
innodb              [+    ]
ipv6                [+  D ]
javascript          [+ C  ]
jpeg                [+ CD ]
kde                 [+  D ]
ldap                [+    ]
libg++              [+ CD ]
libwww              [+ CD ]
mad                 [+ CD ]
mbox                [+ C  ]
md5sum              [+ C  ]
mikmod              [+ CD ]
mmx                 [+ C  ]
motif               [+ CD ]
mp3                 [+    ]
mpeg                [+ CD ]
mpeg4               [+ C  ]
mysql               [+ C  ]
ncurses             [+ CD ]
nls                 [+  D ]
nvidia              [+ C  ]
odbc                [+    ]
offensive           [+    ]
ogg                 [+ CD ]
opengl              [+ CD ]
oss                 [+  D ]
pam                 [+ CD ]
pdflib              [+ CD ]
perl                [+ CD ]
png                 [+ CD ]
python              [+ CD ]
qt                  [+  D ]
quicktime           [+ CD ]
readline            [+ CD ]
ruby                [+    ]
sdl                 [+ CD ]
slang               [+  D ]
spell               [+ CD ]
sse                 [+ C  ]
ssl                 [+ CD ]
svga                [+ CD ]
tcltk               [+ C  ]
tcpd                [+  D ]
tiff                [+ C  ]
truetype            [+ CD ]
usb                 [+ C  ]
vanilla             [+ C  ]
x86                 [+ C  ]
xml                 [+    ]
xosd                [+ C  ]
xv                  [+ CD ]
xvid                [+ C  ]
zlib                [+ CD ]
</pre>
}}

Так же можно использовать команду <tt>euse -a -g</tt>, чтобы просмотреть только ''активные'' глобальные флаги. Команда <tt>euse -a -l</tt> делает то же самое для активных локальных флагов. <code>-g</code> и <code>-l</code> являются суб-опциями для <tt>euse</tt> и для корректного функционирования перед ними необходима опция (такая как <code>-a</code>). 

{{RootCmd|euse -a -l|output=<pre>
bitmap-fonts        [+  D ]
font-server         [+  D ]
fortran             [+  D ]
gimpprint           [+ C  ]
md5sum              [+ C  ]
mpeg4               [+ C  ]
nvidia              [+ C  ]
offensive           [+    ]
truetype            [+ CD ]
</pre>
}}

<tt>euse</tt> может активировать и деактивировать USE флаги. Для этого используются команды <tt>euse -E flagname</tt>(активировать флаг) и <tt>euse -D flagname</tt> (деактивировать флаг). 

{{Warning|Не используйте команды <tt>euse -E</tt> или <tt>euse -D</tt> без флага. '''Это действие активирует/деактивирует ВСЕ USE-ФЛАГИ''' в {{Path|/etc/portage/make.conf}}. Копия будет храниться в {{Path|/etc/portage/make.conf.euse_backup}}, тем не менее будьте осторожны при использовании <tt>euse -E</tt> или <tt>euse -D</tt>.}}

Enabling a USE flag:

{{RootCmd|euse -E 3dfx|output=<pre>
/etc/portage/make.conf was modified, a backup copy has been placed at /etc/portage/make.conf.euse_backup
</pre>}}

Файл {{Path|/etc/portage/make.conf}} выглядит таким, после запуска команды:

{{FileBox|filename=make.conf|title=После активации USE-флага 3dfx|lang=bash|1=
USE="alsa acpi apache2 -arts cups cdr crypt cscope -doc fbcon \
     firefox gd gif gimpprint gnome gpm gstreamer gtkhtml imlib \
     innodb -java javascript jpeg libg++ libwww mad mbox md5sum \
     mikmod mmx motif mpeg mpeg4 mysql ncurses nvidia \
     ogg odbc offensive opengl pam pdflib perl png python \
     quicktime readline sdl spell sse ssl svga tcltk tiff truetype usb \
     vanilla X xosd xv xvid x86 zlib 3dfx"
}}

Disabling a USE flag:

{{RootCmd|euse -D 3dfx|output=<pre>
/etc/portage/make.conf was modified, a backup copy has been placed at /etc/portage/make.conf.euse_backup
</pre>}}

Снова, вид файла {{Path|/etc/portage/make.conf}} после запуска команды:

{{FileBox|filename=make.conf|title=После деактивации USE-флага 3dfx|lang=bash|1=
USE="alsa acpi apache2 -arts cups cdr crypt cscope -doc fbcon \
     firefox gd gif gimpprint gnome gpm gstreamer gtkhtml imlib \
     innodb -java javascript jpeg libg++ libwww mad mbox md5sum \
     mikmod mmx motif mpeg mpeg4 mysql ncurses nvidia \
     ogg odbc offensive opengl pam pdflib perl png python \
     quicktime readline sdl spell sse ssl svga tcltk tiff truetype usb \
     vanilla X xosd xv xvid x86 zlib -3dfx"
}}

{{Note|<tt>euse</tt> does not physically remove the flag from {{Path|make.conf}}. It adds a <code>-</code> (minus) before the flag to unset it. A manual clean up of the {{Path|make.conf}} might be needed to avoid unwanted variables. Otherwise use the <code>-P</code> (purge) option to remove the flag. <tt>euse -P 3dfx</tt> for example would remove the <code>3dfx</code> flag.}}

== Прочие инструменты ==

=== revdep-rebuild ===

This tool is Gentoo's Reverse Dependency rebuilder. It will scan the installed ebuilds to find packages that have become broken as a result of an upgrade of a package they depend on. It can emerge those packages for users automatically but it can also happen that a given package does not work with the currently installed dependencies, in which case you should upgrade the broken package to a more recent version. <tt>revdep-rebuild</tt> will pass flags to <tt>emerge</tt> which lets you use the <code>--pretend</code> flag to see what is going to be emerged again before going any further. 

{{RootCmd|revdep-rebuild -p|output=<pre>
 * Configuring search environment for revdep-rebuild
  
 * Checking reverse dependencies
 * Packages containing binaries and libraries broken by a package update
 * will be emerged.
  
 * Collecting system binaries and libraries
 * Generated new 1_files.rr
 * Collecting complete LD_LIBRARY_PATH
 * Generated new 2_ldpath.rr
 * Checking dynamic linking consistency
[ 48% ]  *   broken /usr/lib/gstreamer-0.10/libgsttaglib.la (requires /usr/lib/libtag.la)
[ 64% ]  *   broken /usr/lib/libgdkglext-x11-1.0.la (requires /usr/lib/libGLU.la)
[ 67% ]  *   broken /usr/lib/libgtkglext-x11-1.0.la (requires /usr/lib/libGLU.la)
[ 85% ]  *   broken /usr/lib/python2.6/site-packages/gtk-2.0/gtk/gdkgl/_gdkgl.la (requires /usr/lib/libGLU.la)
 *   broken /usr/lib/python2.6/site-packages/gtk-2.0/gtk/gtkgl/_gtkgl.la (requires /usr/lib/libGLU.la)
[ 97% ]  *   broken /usr/qt/3/lib/libqt-mt.la (requires -lpng)
[ 100% ]
 * Generated new 3_broken.rr
 * Assigning files to packages
 *   /usr/lib/gstreamer-0.10/libgsttaglib.la -> media-plugins/gst-plugins-taglib
 *   /usr/lib/libgdkglext-x11-1.0.la -> x11-libs/gtkglext
 *   /usr/lib/libgtkglext-x11-1.0.la -> x11-libs/gtkglext
 *   /usr/lib/python2.6/site-packages/gtk-2.0/gtk/gdkgl/_gdkgl.la -> dev-python/pygtkglext
 *   /usr/lib/python2.6/site-packages/gtk-2.0/gtk/gtkgl/_gtkgl.la -> dev-python/pygtkglext
 *   /usr/qt/3/lib/libqt-mt.la -> x11-libs/qt
 * Generated new 4_raw.rr and 4_owners.rr
 * Cleaning list of packages to rebuild
 * Generated new 4_pkgs.rr
 * Assigning packages to ebuilds
 * Generated new 4_ebuilds.rr
 * Evaluating package order
 * Generated new 5_order.rr
 * All prepared. Starting rebuild
emerge --oneshot --pretend  dev-python/pygtkglext:0
media-plugins/gst-plugins-taglib:0.10
x11-libs/gtkglext:0
x11-libs/qt:3
  
These are the packages that would be merged, in order:
  
Calculating dependencies... done!
[ebuild   R   ] media-plugins/gst-plugins-taglib-0.10.17
[ebuild   R   ] x11-libs/gtkglext-1.2.0
[ebuild   R   ] x11-libs/qt-3.3.8b-r2
[ebuild   R   ] dev-python/pygtkglext-1.1.0
 * Now you can remove -p (or --pretend) from arguments and re-run revdep-rebuild.
</pre>
}}

To rebuild some packages run <tt>revdep-rebuild</tt> without the <code>-p</code> flag and the listed packages will be emerged again. 

=== glsa-check ===

<tt>[https://www.gentoo.org/support/security/ glsa-check]</tt> is mainly a test tool that keeps track of the various [https://security.gentoo.org/glsa/ GLSA's] (Gentoo Linux Security Advisory) and will eventually be integrated into <tt>emerge</tt> and <tt>equery</tt>.

=== eread ===

<tt>eread</tt> is a simple utility to display elog files produced by >=<code>portage-2.1</code>. The saving of elog files can be enabled by setting a couple of variables in {{Path|/etc/portage/make.conf}}: 

{{FileBox|filename=make.conf|title=Активация elog|lang=bash|1=
PORTAGE_ELOG_CLASSES="log"
PORTAGE_ELOG_SYSTEM="save"
}}

{{Note|This is only one way of saving elog messages. For more information on how Portage's elog system works, please refer to the appropriate page in the [[Handbook:X86/Portage/Files#Logging_features|Portage Handbook]].}}

Once elog has been set up to satisfaction, run <tt>eread</tt> to view the log files. 

{{Cmd|eread|output=<pre>
This is a list of portage log items. Choose a number to view that file or type
q to quit.
  
1&#41; app-portage:gentoolkit-0.2.4_pre2:20070320-000256.log
2&#41; app-portage:gentoolkit-0.2.4_pre2:20070320-000258.log
3&#41; app-portage:gentoolkit-0.2.4_pre2:20070320-000319.log
4&#41; app-portage:gentoolkit-0.2.3:20070320-000408.log
Choice?
</pre>
}}

Select a number and the file will be displayed using the paging program specified in the PAGER environment variable. If PAGER is not set, it will use <tt>less</tt>. The PAGER environmental variable can be set using <tt>eselect</tt> (module <code>pager</code>).

После отображения пункта elog, вам будет предложено удалить файл.

=== eclean ===

<tt>eclean</tt> is a tool to remove old source files and old binary packages from the system. 

When building and installing packages, the source files are downloaded and preserved in <code>DISTDIR</code>, usually {{Path|/usr/portage/distfiles}}. This can accumulate several gigabytes of material over time if it is not cleaned periodically. Users should run <tt>eclean-dist</tt> to clean source files from <code>DISTDIR</code>.

It is possible to create archives of installed packages by using <tt>quickpg</tt> or FEATURES="buildpkg". These archived packages are kept in PKGDIR, usually {{Path|/usr/portage/packages}}. When they are no longer needed, or if they are too old, <tt>eclean-pkg</tt> can be ran to remove them from <code>PKGDIR</code>. It is a good way to ensure that any binary packages on the system are only the latest versions. 

Более подробную информацию о <tt>eclean</tt> и советы о том, как поддерживать систему, свободной хлама вы можете прочитать <kbd>man eclean</kbd> или проверить статью об [[eclean]].

== Смотрите также ==

* [[equery/ru|equery]]
* [[eclean/ru|eclean]]
* [[epkginfo]]

{{Migrated|originalauthors=Matt Butcher, John P. Davis, Erwin, Shyam Mani, Xavier Neys, Karl Trygve, José Luis Rivero, Joshua Saddler, Douglas Anderson}}
