{{DISPLAYTITLE:Sysstat}}
{{InfoBox stack
|{{InfoBox homepage|http://sebastien.godard.pagesperso-orange.fr/|header=true}}
|{{InfoBox wikipedia|Systat_(tool)|text=Wikipedia}}
}}

The sysstat ('''sys'''tem '''stat'''istics) utilities are a collection of performance monitoring tools for Linux. They function as front ends to the kernel's {{Path|/proc}} filesystem making statistics easy to access. Sysstat was written by Sebastien Godard.

__TOC__

== Installation ==
=== USE flags ===

{{USEflag|package=app-admin/sysstat}}

Add or remove the desired flags to {{Path|/etc/portage/package.use}} or {{Path|/etc/portage/make.conf}}:

{{FileBox|filename=/etc/portage/package.use|title=Sysstat package.use example|1=
...
app-admin/sysstat cron doc isag lm_sensors nls
...
}}

=== Emerge ===
Emerge {{Package|app-admin/sysstat}}:
{{Emerge|app-admin/sysstat}}

== Configuration ==
The {{Path|/etc/sysstat}} file influences the behavior of {{Path|/usr/lib64/sa/sa1}} and ([http://man7.org/linux/man-pages/man8/sadc.8.html sadc(8)]) {{Path|/usr/lib64/sa/sa2}} ([http://man7.org/linux/man-pages/man1/sar.1.html sar(1)]). This file sourced from {{Path|/bin/sh}} and it's syntax should thus conform to [http://en.wikipedia.org/wiki/IEEE_Std_1003.1 IEEE Std 1003.1].

The following variables will have some effect:

{| class="wikitable"
|-
! Variable !! Description !! Suggested Value !! Affected Commands
|-
| <var>HISTORY</var> ||  How long to keep log files (in days). If value is greater than 28, then log files are kept in multiple directories, one for each month. || <tt>365</tt> || <tt>sa1</tt>
<tt>sa2</tt>
|-
| <var>COMPRESSAFTER</var> || Compress (using gzip or bzip2) sa and sar files older than (in days) || <tt>10</tt> || <tt>sa2</tt>
|-
| <var>SADC_OPTIONS</var> || Parameters for the system activity data collector (see sadc manual page) which are used for the generation of log files. || <tt>-S XALL</tt>|| <tt>sa1</tt>
|}

=== Statistics Collection and Aggregation ===

Statistics collection can be achieved by periodical execution of {{Path|/usr/lib64/sa/sa1}} (which invokes {{Path|sadc}}) and {{Path|/usr/lib64/sa/sa2}} (which invokes {{Path|sar}}).

The common approach is to use {{Path|crontab(5)}} or {{Path|/etc/cron.{hourly,daily,monthly,weekly}}}.

==== {{Path|/etc/cron.{hourly,daily,monthly,weekly}}} ====

{{Note|The <code>cron</code> USE flag installs the files show below.}}

{{FileBox|filename=/etc/cron.hourly/sysstat|title=Setting cron to run an accounting job|lang=bash|1=
#!/bin/sh
# Run system activity accounting tool every 10 minutes
/usr/lib64/sa/sa1 600 6 &
}}

{{FileBox|filename=/etc/cron.daily/sysstat|lang=bash|1=
#!/bin/sh
# Generate a daily summary of process accounting. Since this will probably
# get kicked off in the morning, it would probably be better to run against
# the previous days data.
/usr/lib64/sa/sa2 -A &
}}

==== {{Path|crontab(5)}} ====

{{Note|Ensure that the <code>cron</code> USE flag is '''not''' set when this method is used.}}

{{RootCmd|crontab -l|output=<pre>
...
# app-admin/sysstat : collect system statistics every 10 minutes
*/10    *       *       *       *       /usr/lib64/sa/sa1 1 1
# app-admin/sysstat : aggregate system statistics every day at 23h00
0	23	*	*	*	/usr/lib64/sa/sa2 -A &
...
</pre>}}

== Usage ==
The following tools are included with sysstat on Gentoo:<ref>http://sebastien.godard.pagesperso-orange.fr/documentation.html</ref> 

{| class="wikitable sortable"
|-
! Command !! Description
|-
| <tt>cifsiostat</tt> || Reports CIFS statistics.
|-
| <tt>iostat</tt> || Reports CPU statistics and input/output statistics for devices, partitions and network filesystems.
|-
| <tt>mpstat</tt> || Reports individual or combined processor related statistics.e
|-
| <tt>nfsiostat-sysstat</tt> || Reports input/output statistics for network filesystems (NFS).
|-
| <tt>pidstat</tt> || Reports statistics for Linux tasks (processes): I/O, CPU, memory, etc.
|-
| <tt>sadf</tt> || Displays data collected by <tt>sar</tt> in multiple formats (CSV, XML, etc.) Useful to load performance data into a database, or import them to spreadsheets to make graphs.
|-
| <tt>sar</tt> || Collects, reports and saves system activity information (CPU, memory, disks, interrupts, network interfaces, TTY, kernel tables, etc.)
|}

== Examples ==

Use <tt>iostat</tt> to watch the input/output of data to attached drives, display the output in megabytes:
{{Cmd|watch iostat -m}}

== See Also ==
* [[iotop]]
* [[atop]]
* [[htop]]

== External Resources ==
* The Sysstat source code repository [https://github.com/sysstat/sysstat on GitHub].
* Official tutorials on [http://sebastien.godard.pagesperso-orange.fr/tutorial.html how to use Sysstat].
* [http://sebastien.godard.pagesperso-orange.fr/documentation.html Official Sysstat documentation].

{{Note|Local man pages will only be available if the <code>doc</code> USE was enabled at build time.}}

* The cifsiostat man page locally (<kbd>man cifsiostat</kbd>) or [http://man7.org/linux/man-pages/man1/cifsiostat.1.html online].
* The iostat man page locally (<kbd>man iostat</kbd>) or [http://man7.org/linux/man-pages/man1/iostat.1.html online].
* The mpstat man page locally (<kbd>man mpstat</kbd>) or [http://man7.org/linux/man-pages/man1/mpstat.1.html online].
* The pidstatman page locally (<kbd>man pidstat</kbd>) or [http://man7.org/linux/man-pages/man1/pidstat.1.html online].
* The sadf man page locally (<kbd>man sadf</kbd>) or [http://man7.org/linux/man-pages/man1/sadf.1.html online].
* The sar man page locally (<kbd>man sar</kbd>) or [http://man7.org/linux/man-pages/man1/sar.1.html online].
* The sysstat man page locally (<kbd>man sysstat</kbd>) or [http://man7.org/linux/man-pages/man5/sysstat.5.html online].
* The sa1 man page locally (<kbd>man sa1</kbd>) or [http://man7.org/linux/man-pages/man8/sa1.8.html online].
* The sa2 man page locally (<kbd>man sa2</kbd>) or [http://man7.org/linux/man-pages/man8/sa2.8.html online].
* The sadc man page locally (<kbd>man sadc</kbd>) or [http://man7.org/linux/man-pages/man8/sadc.8.html online].

== References ==
