{{Warning|GRUB2 GRUB2 is in development but still quite stable if I may say aside from some weird issues as the infamous `invalid signature' and thus rightly masked in portage.}}
== Introduction ==
GRUB2 is next generation, a complete rewrite, of GRUB LEGACY popular GNU/Linux boot loader. The new version has a new shell like syntax which permit advanced scripting capabilities unlike the LEGACY version. So, even seasoned GRUB LEGACY users should take a look at what GRUB2 can do to take advantage of the powerful shell like scripting along with new features.

Upgrading to GRUB 2 might be necessary as it allows:
* booting from UEFI;
* booting from GPT partitioned drives without even needing an akward hybrid MBR, even though one can one for compatibility/portability reasons;
* booting from directly logical volume management such as LVM2 support;
* booting from raid DM-RAID support 4, 6 and 10;
* and booting from encrypted devices, LUKS I assume because the inexistent documentation is not clear on this: so no guidance on a howto for the moment.

== Installation ==

GRUB2 is both hard masked and in development, so one has to both keywords and unmask the package as the following before merging the package.
{{RootCmd
|echo '<nowiki>=</nowiki>sys-boot/grub-1.99* **' >> /etc/portage/package.keywords
|echo 'sys-boot/grub:2' >> /etc/portage/package.unmask
|emerge -av sys-boot/grub:2}}
{{Note|Note the equal sign and the version number range unmasked because many new user ask all the time, and rightly with that, about not wanting to merge the live version and that, happen when sys-boot/grub:2 is unmasked like the following line. Unmask the version number range that fit you best of course.}}
{{RootCmd|echo '<nowiki>>=</nowiki>sys-boot/grub-1.99 **' >> /etc/portage/package.keywords}}
Else, one would have to undergo a manual configure, make and make install on his/her own which won't be covered by this modest contribution.

== Configuration ==

=== Partitioning and preparing boot disk ===
Before installing GRUB2 to the boot media a little care should be taken when preparing and partitioning the boot device be it an internal disk or be it a removable device. This depend on the boot type involved: BIOS or UEFI.
BIOS booting can be easily achieved with either booting from disk partitioned with the aging MBR or with GPT with a protective MBR or a hybrid MBR if dual booting is involved with GPT unaware OS like MSDOS/Windows. It's another story for UEFI as GPT is part of UEFI specification and it's mandatory to use GPT partitioned in this case. 

If dual booting is involved with Windows which cannot boot from anything else but BIOS/MBR or else on GPT partitioned disk only on EFI hardware. In the later case dual booting Windows is simple and the former is trickier a GPT partitioned disk and a hybrid MBR. More on this subject will come later.

Before going further, one could back the boot device MBR with something like:
{{RootCmd|dd if<nowiki>=</nowiki>/dev/sda of<nowiki>=</nowiki>/root/sda.mbr bs<nowiki>=</nowiki>512 count<nowiki>=</nowiki>1}}
or simply its boot loader with something like (here one can go as far as 446 bytes):
{{RootCmd|dd if<nowiki>=</nowiki>/dev/sda of<nowiki>=</nowiki>/root/sda.mbr bs<nowiki>=</nowiki>440 count<nowiki>=</nowiki>1}}

=== UEFI installation ===

=== BIOS/MBR installation ===
=== BIOS/GPT partitioned disk without hybrid MBR installation ===
=== BIOS/GPT partitioned dis and with hybrid MBR installation ===

== Multiboot ==

=== Chainloading ===
=== Windows dualboot ===

== Troubleshooting and Quirks ==

=== Fancy theming ===
=== GPT Hybrid MBR workaround ===

== References ==

* [https://www.gnu.org/software/grub/manual/grub.html GNU GRUB 2 manual page]
* [http://www.rodsbooks.com/gdisk/bios.html Legacy BIOS issues with GPT]
* [http://www.rodsbooks.com/gdisk/hybrid.html GPT and Hybrid MBR]
* [http://www.rodsbooks.com/gdisk/ GPT fdisk/gdisk utility page]
* [https://wiki.archlinux.org/index.php/GRUB2 Arch Linux GRUB2 wiki]
* [https://help.ubuntu.com/community/UEFIBooting ubuntu UEFI booting help]
