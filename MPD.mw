''Music Player Daemon'' (MPD) is a flexible, powerful, server-side application for playing music. Through plugins and libraries it can play a variety of sound files while being controlled by its network protocol. For more information, read about [http://mpd.wikia.com/wiki/What_MPD_Is_and_Is_Not what mpd is and is not].


==Installation==

{{Emerge|params=--ask --verbose| media-sound/mpd}}

Make sure [[#Configuration | MPD is configured]] before first run. If ready, MPD can be added to default runlevel and started:

{{RootCmd|rc-update add mpd default}}
{{RootCmd|/etc/init.d/mpd start}}


==Configuration==

After {{Package|media-sound/mpd}} is installed, edit the <tt>/etc/mpd.conf</tt> file as a superuser. Each setting is extensively described there. Just follow common sense. In doubt, consult [http://www.musicpd.org/doc/user/ The Music Player Daemon - User's Manual].

Some popular configuration options are described in sections bellow.

===PulseAudio===

Build MPD with ''pulseaudio'' USE flag and add dedicated <tt>audio_output</tt>:
{{File|/etc/mpd.conf|PulseAudio output definition|
 audio_output {
        type            "pulse"
        name            "Pulse Output"
        mixer_control   "Master"
 }
}}

{{Important|System-wide instance for the PulseAudio server is [http://www.pulseaudio.org/wiki/SystemWideInstance strongly discouraged] by upstream.

It may be a good practice to [[#Running as a specific user| run both PulseAudio and MPD under X11 user instead]]. 
}}


===Built-in HTTP streaming server===

Since version 0.15 there is a built-in HTTP streaming daemon/server that comes with MPD. To activate this server simply set it as output device.

{{File|/etc/mpd.conf|HTTP stream output definition|
 audio_output {    
 	type		"httpd"    
 	name		"HTTP Stream"    
 	encoder		"vorbis"                # optional, vorbis(OGG) or lame(MP3)
 	port		"8000"    
 #       bind_to_address "0.0.0.0"               # optional, IPv4 or IPv6
 #	quality		"5.0"			# do not define if bitrate is defined    
 	bitrate		"192"			# do not define if quality is defined      
 	format		"44100:16:1"    
 }
}}

{{Note| In some players you may have to specify the file format of the stream using an appropriate file extension in the URL.  Example: use <tt><nowiki>http://192.168.1.2:8000/mpd.ogg</nowiki></tt> rather than <tt><nowiki>http://192.168.1.2:8000/</nowiki></tt>. }}



===Running as a specific user===

[[#PulseAudio | Sometimes]] it may be handy to run MPD as a specific user. 

{{File|/etc/mpd.conf|user definition|
 # This setting specifies the user that MPD will run as. MPD should never run as
 # root and you may use this setting to make MPD change its user ID after
 # initialization.
 user                            "myuser"
}}

{{Important|Resources defined by <tt>*_file</tt> and <tt>*_directory</tt> variables should be owned by <tt>myuser</tt> (default is <tt>mpd</tt>):
{{RootCmd|chown -R myuser /some/path}}
}}


==Clients==
* [http://mpd.wikia.com/wiki/Clients Sorted List of MPD clients]

===Command-line===
* {{Package|media-sound/mpc}} – [http://mpd.wikia.com/wiki/Client:Mpc CLI client, the most basic functionality available] (useful for key-bindings) 
* {{Package|media-sound/ncmpcpp}} - [http://mpd.wikia.com/wiki/Client:Ncmpcpp A command-line concept fork of ncmpc written in C++]

===Extras===
* {{Package|media-sound/mpdscribble}}  – An MPD client that submits information to [http://www.audioscrobbler.net/ Audioscrobbler]-compatible service (eg. [http://libre.fm libre.fm] or [http://last.fm last.fm])


== Troubleshooting ==
For general troubleshooting refer to the excellent [http://mpd.wikia.com/wiki/Music_Player_Daemon_HOWTO_Troubleshoot MPD troubleshooting section]


== See also ==
* [http://mpd.wikia.com/wiki/Music_Player_Daemon_Wiki Official Web Site and Wiki]
* [http://sourceforge.net/projects/musicpd/ MPD on Sourceforge]
* [http://www.musicpd.org/forum/ MPD Forum]
* [http://wiki.archlinux.org/index.php/Music_Player_Daemon MPD at Arch Wiki]
* [http://www.musicpd.org/doc/user/ The Music Player Daemon - User's Manual]


[[Category:Software]]
