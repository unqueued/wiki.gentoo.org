{{InfoBox stack
|{{InfoBox wikipedia|Music Player Daemon|header=true}}
|{{InfoBox ohloh|mpd}}
}}
''Music Player Daemon'' (MPD) is a flexible, powerful, server-side application for playing music. Through plugins and libraries it can play a variety of sound files while being controlled by its network protocol. For more information, read about [http://mpd.wikia.com/wiki/What_MPD_Is_and_Is_Not what mpd is and is not].

==Installation==
Following minimal USE flags set is needed to be able to play most known audio file formats, and to listen to audio streams. For more features review the USE flags. 
{{USEflag
|package=media-sound/mpd
|alsa++yes
|curl++yes
|flac++yes
|id3tag++yes
|mad++yes
|ogg++yes
|sqlite++yes
|unicode++yes
|vorbis++yes
|wavpack++yes
}}
{{Emerge|params=--ask --verbose| media-sound/mpd}}

Make sure [[#Configuration | MPD is configured]] before first run. If ready, MPD can be added to default runlevel and started:

{{RootCmd|rc-update add mpd default}}
{{RootCmd|/etc/init.d/mpd start}}

==Configuration==
After finished installation MPD should be working with the gentoo shipped default configuration. 
Below a example of a simple configuration:

{{File|/etc/mpd.conf|Basic MPD configuration|
 music_directory      "/var/lib/mpd/music"
 playlist_directory   "/var/lib/mpd/playlists"
 db_file              "/var/lib/mpd/database"
 log_file             "/var/lib/mpd/log"
 state_file           "/var/lib/mpd/state"

 user                 "mpd"

 bind_to_address      "localhost"
 bind_to_address      "/var/lib/mpd/socket"

 input {
        plugin "curl"
 }
}}
At this point MPD should be able to run as a system daemon with its own user called ''mpd'', which is the default setting of MPD.

Additional configuration options are described in sections below.

===PulseAudio===
Build MPD with ''pulseaudio'' USE flag and add dedicated <tt>audio_output</tt>:
{{File|/etc/mpd.conf|PulseAudio output definition|
 audio_output {
        type            "pulse"
        name            "Pulse Output"
        mixer_control   "Master"
 }
}}

{{Important|System-wide instance for the PulseAudio server is [http://www.pulseaudio.org/wiki/SystemWideInstance strongly discouraged] by upstream.

It may be a good practice to [[#Running as a specific user| run both PulseAudio and MPD under X11 user instead]]. 
}}

===Built-in HTTP streaming server===
Build MPD with ''network'' USE flag and add dedicated audio_output to /etc/mpd.conf

{{File|/etc/mpd.conf|HTTP stream output definition|
 audio_output {    
 	type		"httpd"    
 	name		"HTTP Stream"    
 	encoder		"vorbis"                # optional, vorbis(OGG) or lame(MP3)
 	port		"8000"      
 	bitrate		"192"			# do not define if quality is defined      
 	format		"44100:16:1"    
 }

bind_to_address "0.0.0.0"
}}
Replace ''localhost'' with ''0.0.0.0'' or a specific interface IP.
Bind to address ''0.0.0.0'' means here: stream on all local found IP interfaces. 
You could change it to a specific interface IP address like f.e. ''192.168.1.2'' then the streaming server is bound to that interface IP only. 

{{Note| Some players require to specify the file format in the URL to be able to connect to the stream. Example: <tt><nowiki>http://192.168.1.2:8000/mpd.ogg</nowiki></tt>}}

=== Running as a specific user ===
[[#PulseAudio | Sometimes]] it may be handy to run MPD as a specific user.

Start with copying /etc/mpd.conf to ~/.mpdconf. There are some changes that you will have to change in order to run MPD as a user, most importantly '''''user''''' and '''''group''''', also make sure the various path settings are correct:
{{File|~/.mpdconf|user definition|
  user    "my-user"
  group   "my-group"
}}
Make sure your user has read access to the directory you specify in '''''music_directory'''''.
{{Note|If your cron program supports '''''@reboot''''' you can create a cronjob that has /usr/bin/mpd start at boot in place of the init script.}}

==Clients==
* [http://mpd.wikia.com/wiki/Clients Sorted List of MPD clients]

===Command-line===
* {{Package|media-sound/mpc}} - [http://mpd.wikia.com/wiki/Client:Mpc A commandline client for Music Player Daemon (media-sound/mpd)] (useful for key-bindings)
* {{Package|media-sound/ncmpc}} - [http://mpd.wikia.com/wiki/Client:Ncmpc A ncurses client for the Music Player Daemon (MPD)]
* {{Package|media-sound/ncmpcpp}} - [http://mpd.wikia.com/wiki/Client:An ncurses mpd client, ncmpc clone with some new features, written in C++]

===Extras===
* {{Package|media-sound/mpdscribble}}  â€“ An MPD client that submits information to [http://www.audioscrobbler.net/ Audioscrobbler]-compatible service (eg. [http://libre.fm libre.fm] or [http://last.fm last.fm])

== Troubleshooting ==
For general troubleshooting refer to the excellent [http://mpd.wikia.com/wiki/Music_Player_Daemon_HOWTO_Troubleshoot MPD troubleshooting section]

== See also ==
* [http://mpd.wikia.com/wiki/Music_Player_Daemon_Wiki Official Web Site and Wiki]
* [http://sourceforge.net/projects/musicpd/ MPD on Sourceforge]
* [http://www.musicpd.org/forum/ MPD Forum]
* [http://wiki.archlinux.org/index.php/Music_Player_Daemon MPD at Arch Wiki]
* [http://www.musicpd.org/doc/user/ The Music Player Daemon - User's Manual]

[[Category:Software]] 
[[Category:Multimedia]]
