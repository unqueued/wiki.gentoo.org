{{Lowercase title}}

<languages />


{{Metadata|abstract=QアプレットはCで書かれた小さくて素早い、portageのヘルパーツールです。このガイドはapp-portage/portage-utilsパッケージとしても知られる、これらのヘルパーツールを使う一般的なユーザー向けです。}}

QアプレットはCで書かれた小さくて素早い、portageのヘルパーツールです。このガイドは{{Package|app-portage/portage-utils}}としても知られる、これらのヘルパーツールを使う一般的なユーザー向けです。

== クイックリファレンス ==

いつも通りにインストールできます:

{{Emerge|app-portage/portage-utils}}

短い説明文付きで利用可能なアプレットを見るには、こうします:

{{Cmd|q --help|output=<pre>
Usage: q <applet> <args>  : invoke a portage utility applet
  
Currently defined applets:
        q <applet> <args> : virtual applet
    qatom <pkg>           : split atom strings
   qcache <action> <args> : search the metadata cache
   qcheck <pkgname>       : verify integrity of installed packages
 qdepends <pkgname>       : show dependency info
    qfile <filename>      : list all pkgs owning files
    qglsa <action> <list> : check GLSAs against system
    qgrep <misc args>     : grep in ebuilds
    qlist <pkgname>       : list files owned by pkgname
     qlop <pkgname>       : emerge log analyzer
   qmerge <pkgnames>      : fetch and merge binary package
     qpkg <misc args>     : manipulate Gentoo binpkgs
  qsearch <regex>         : search pkgname/desc
    qsize <pkgname>       : calculate size usage
    qtbz2 <misc args>     : manipulate tbz2 packages
     quse <useflag>       : find pkgs using useflags
    qxpak <misc args>     : manipulate xpak archives
  
Options: -[irmM:vqChV]
  -i, --install        * Install symlinks for applets
  -r, --reinitialize   * Reinitialize ebuild cache
  -m, --metacache      * Reinitialize metadata cache
  -M, --modpath  <arg> * Module path
  -v, --verbose        * Make a lot of noise
  -q, --quiet          * Tighter output; suppress warnings
  -C, --nocolor        * Don't output color
  -h, --help           * Print this help and exit
  -V, --version        * Print version and exit</pre>
}} 

ルート権限でキャッシュを初期化する必要があるでしょう:

{{RootCmd|q -r}}

== イントロダクション ==

<code>portage-utils</code>はCで書かれたとても速いユーティリティの集まりで、<code>gentoolkit</code>と比較して機能を制限するかわりに速さを提供しています。<code>portage-utils</code>は<code>gentoolkit</code>を置きかえるものではないことを覚えていてください。 この効用は<code>gentoolkit</code>と較べてより高い効率をもたらし、Portageを繰り返し呼び出す必要があるスクリプトで使われることに適していますが、<code>portage-utils</code>は同じ機能性を提供するわけではありません。eclassを全く考慮しませんし、<code>revdep-rebuild</code>や<code>glsa-check</code>のようなものも提供しません。 

<code>gentoolkit</code>についてのより詳しい情報は[[Gentoolkit]]の中で見つけることができます。 

<code>man q</code>または<code>q --help</code>と入力することによって<code>portage-utils</code>に含まれているアプリケーションの完全なリストを見ることができます。このガイドでは最も役立つ機能について短く言及するだけにとどめ、それぞれのアプリケーションに関する情報全てを含めることはしませんので、それぞれのユーティリティについての説明はmanページをご覧ください。 

== 使い方 ==

=== あるファイルが含まれているパッケージを見つける方法 ===

<code>qfile</code>はファイルがどのパッケージに属しているか見付けます: 

{{Cmd|qfile /etc/fonts/fonts.conf|output=<pre>
media-libs/fontconfig (/etc/fonts/fonts.conf)
</pre>}}

{{Cmd|qfile /usr/share/keymaps/atari/atari-uk-falcon.map.gz|output=<pre>
sys-apps/kbd (/usr/share/keymaps/atari/atari-uk-falcon.map.gz)
</pre>}}

=== Verifying package integrity ===

If you want to check MD5 sums or mtimes of the files installed by some package, you can do it using the <code>qcheck</code> application: 

{{Cmd|qcheck portage-utils|output=<pre>
Checking app-portage/portage-utils-0.1.13 ...
  * 36 out of 36 files are good
</pre>}}

Of course, all the files which were changed after installation will be reported here. If the application reports configuration files which you have manually edited after installation, there's nothing to worry about. 

=== Listing packages which depend on some package ===

Of course there's also an application which allows you to list all the packages which depend on some package. This is done using <code>qdepends</code>. Use the <code>-a</code> flag to show all the DEPEND, RDEPEND, and PDEPEND information for a package. 

{{Cmd|qdepends -a pygtk|output=<pre>
 * DEPEND
dev-python/pygtk-2.8.2: >=dev-lang/python-2.3 >=x11-libs/gtk+-2.8.0
>=dev-libs/glib-2.8.0 >=x11-libs/pango-1.10.0 >=dev-libs/atk-1.8.0
>=gnome-base/libglade-2.5.0 >=dev-python/pycairo-0.9.0 dev-python/numeric
virtual/opengl dev-python/pyopengl >=x11-libs/gtkglarea-1.99
>=dev-util/pkgconfig-0.9 sys-devel/patch
 * RDEPEND
dev-python/pygtk-2.8.2: >=dev-lang/python-2.3 >=x11-libs/gtk+-2.8.0
>=dev-libs/glib-2.8.0 >=x11-libs/pango-1.10.0 >=dev-libs/atk-1.8.0
>=gnome-base/libglade-2.5.0 >=dev-python/pycairo-0.9.0 dev-python/numeric
virtual/opengl dev-python/pyopengl >=x11-libs/gtkglarea-1.99
 * PDEPEND
</pre>}}

=== Listing files that belong to an ebuild ===

<code>qlist</code> gives you a list of all files that belong to an ebuild. 

{{Cmd|qlist vim|output=<pre>
/usr/bin/gvim
/usr/bin/gvimdiff
/usr/bin/evim
/usr/bin/eview
/usr/bin/gview
/usr/bin/rgvim
[...]
</pre>}}

=== Looking for packages that use some USE flag ===

This is done with <code>quse</code>, which must be run as root. It may take some time to first create/update the ebuild cache. 

{{Cmd|quse firefox|output=<pre>
app-misc/tracker/tracker-0.12.10-r1.ebuild applet doc eds elibc_glibc exif firefox-bookmarks flac flickr gif
[...]
</pre>}}

=== Finding package sizes ===

This is done with <code>qsize</code> application and is as simple as: 

{{Cmd|qsize vim|output=<pre>
app-editors/gvim-6.4: 10 files, 7 non-files, 2327.516 KB
app-editors/vim-6.4: 6 files, 2 non-files, 2058.14 KB
app-editors/vim-core-6.4: 1024 files, 68 non-files, 10950.984 KB
[...]
</pre>}}

=== Searching the Portage tree ===

One of the most powerful tools of <code>portage-utils</code> is <code>qsearch</code>. This tool allows you to search your Portage tree much faster than default <code>emerge -s</code>. 

Here are some examples of its usage: 

{{Cmd|qsearch terminus|output=<pre>
media-fonts/terminus-font A clean fixed font for the console and X11
</pre>}}

I want to thank the guy who made them. What's his homepage?:
{{Cmd|qsearch -H terminus|output=<pre>
media-fonts/terminus-font http://www.is-vn.bg/hamster/jimmy-en.html
</pre>}}

I need a jabber client and I need it now:

{{Cmd|qsearch -S "jabber client"|output=<pre>
app-emacs/emacs-jabber A Jabber client for Emacs.
net-im/gajim Jabber client written in PyGTK
net-im/gnome-jabber Gnome Jabber Client
net-im/gossip Lightweight Jabber client for GNOME
net-im/imcom Python commandline Jabber Client
net-im/psi QT 3.x Jabber Client, with Licq-like interface
net-im/tkabber Featureful Jabber client for tcl/tk.
x11-themes/psi-themes Iconsets for Psi, a QT 3.x Jabber Client
</pre>}}

=== Extracting information from emerge logs ===

There is also a tool that allows you to extract useful information from your {{Path|emerge.log}} file. It's called <code>qlop</code> and it can be useful when you want to estimate package compilation times or compare with your friends whose computer compiles faster. It also allows you to check what's compiling at the moment and how long it will take - which is handy when you're working in the console and don't have any other means to check it. 

I'm starting to emerge perl and I want an estimate on how long it usually takes:

{{Cmd|qlop -tH perl|output=<pre>
perl: 7 minutes, 52 seconds for 4 merges
</pre>}}

Now let's see what's emerging at the moment:

{{Cmd|qlop -c|output=<pre>
* perl-5.8.8-r23
    started: Mon May 21 12:41:11 2007
    elapsed: 19 seconds
</pre>}}

== Acknowledgements ==

We would like to thank the following authors and editors for their contributions to this guide:


* Åukasz Damentko
* Joshua Saddler
* Marcelo Góes

[[Category:Portage tools]]
