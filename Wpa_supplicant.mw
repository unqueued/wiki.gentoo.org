{{DISPLAYTITLE:wpa_supplicant}}

== Installation ==
{{Emerge|net-wireless/wpa_supplicant}}

== OpenRC setup for wlan0 ==
{{File|/etc/conf.d/net||<pre>
modules_wlan0="wpa_supplicant"
wpa_supplicant_wlan0="-Dwext"
config_wlan0="dhcp"
</pre>}}

You might also want to change the permissions to ensure that WiFi passwords can't be viewed in plaintext by anyone using the computer:
{{RootCmd|chmod 600 /etc/wpa_supplicant/wpa_supplicant.conf
|ls -l /etc/wpa_supplicant/wpa_supplicant.conf
|output=<pre>
-rw------- 1 root root 2.0K Jan 18 18:11 /etc/wpa_supplicant/wpa_supplicant.conf
</pre>}}

== Configuration ==

=== Using wpa_gui ===
The simplest way to configure <tt>wpa_supplicant</tt> is by using its simple (but sufficient for most uses) user interface called <tt>wpa_gui</tt>. To enable it, build {{Package|net-wireless/wpa_supplicant}} with the the <tt>qt4</tt> USE flag enabled.

To allow unprivileged users to control the connection using <tt>wpa_gui</tt>, add the following at the beginnng of your {{Path|/etc/wpa_supplicant/wpa_supplicant.conf}}:
{{File|/etc/wpa_supplicant/wpa_supplicant.conf||<pre>
# Allow users in the 'wheel' group to control wpa_supplicant
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=wheel

# Allow user-made changes to be saved (e.g. add networks)
update_config=1
</pre>}}

=== Editing manually ===
If building with <tt>wpa_gui</tt> is not desired, <tt>wpa_supplicant</tt> can be configured manually. This can be fine if the computer does not need to connect to many different access points.

Examples can be found in the ''wpa_supplicant.conf(5)'' [[man page]] as well as the example wpa_supplicant.conf in the documentation directory (e.g. {{Path|/usr/share/doc/wpa_supplicant-1.0}})

==== WPA2 with wpa_supplicant ====
Connecting to any wireless access point serving ''YourSSID''
{{File|/etc/wpa_supplicant/wpa_supplicant.conf||<pre>
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=wheel
#ap_scan=0
#update_config=1

network={
        ssid="YourSSID"
        psk="your-secret-key"
        scan_ssid=1
        proto=WPA2
        key_mgmt=WPA-PSK
        group=CCMP TKIP
        pairwise=CCMP TKIP
        priority=5
}
</pre>}}

Using ''bssid'' to specify which access point it should connect to using its MAC address, in case there are repeaters in place.
{{File|/etc/wpa_supplicant/wpa_supplicant.conf||<pre>
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=wheel
ap_scan=1

network={
        bssid=00:50:17:31:1a:11
        ssid="YourSSID"
        psk="your-secret-key"
        scan_ssid=1
        proto=WPA2
        key_mgmt=WPA-PSK
        group=CCMP TKIP
        pairwise=CCMP TKIP
        priority=5
}
</pre>}}

==== Auto-connect to any unsecured network ====
{{File|/etc/wpa_supplicant/wpa_supplicant.conf||<pre>
network={
        key_mgmt=NONE
        priority=-999
}
</pre>}}

== Debugging ==
By default, wpa_supplicant performs very little debugging without the USE flag debug enabled.
{{RootCmd|<nowiki>USE="debug" net-wireless/wpa_supplicant</nowiki>}}

{{File|/etc/conf.d/net||<pre>
modules_wlan0="wpa_supplicant"
wpa_supplicant_wlan0="-Dwext -d -f /var/log/wpa_supplicant.log"
config_wlan0="dhcp"
</pre>}}

Now, tail -f /var/log/wpa_supplicant.log and restart the net.wlan0 device.

[[Category:Network management]]
