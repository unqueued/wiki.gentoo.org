= WPA2 with wpa_supplicant =

== Install wpa_supplicant ==

{{emerge|net-wireless/wpa_supplicant}}

== Set wpa_supplicant usage for wlan0 ==

{{File|/etc/conf.d/net||<pre>
modules_wlan0="wpa_supplicant"
wpa_supplicant_wlan0="-Dwext"
config_wlan0="dhcp"
</pre>}}

To allow users to control the connection using <tt>wpa_gui</tt>, add the following at the beginnng of <tt>/etc/wpa_supplicant/wpa_supplicant.conf</tt>:

{{File|/etc/wpa_supplicant/wpa_supplicant.conf||<pre>
# Allow users in the 'wheel' group to control wpa_supplicant
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=wheel

# Allow users to make changes to be made
update_config=1
</pre>}}

You might also want to change the permissions to ensure that WiFi passwords can't be viewed in plaintext by anyone using the computer:
{{RootCmd|chmod 600 /etc/wpa_supplicant/wpa_supplicant.conf
|ls -l /etc/wpa_supplicant/wpa_supplicant.conf
|output=-rw------- 1 root root 2.0K Jan 18 18:11 /etc/wpa_supplicant/wpa_supplicant.conf
}}

== Configure wpa_supplicant.conf ==

{{File|/etc/wpa_supplicant/wpa_supplicant.conf||<pre>
ctrl_interface=/var/run/wpa_supplicant
ctrl_interface_group=wheel
#ap_scan=0
#update_config=1

network={
        ssid="YourSSID"
        psk="your-secret-key"
        scan_ssid=1
        eap=TLS
        proto=WPA2
        key_mgmt=WPA-PSK
        group=CCMP TKIP
        pairwise=CCMP TKIP
        priority=5
}
</pre>}}


[[Category:Security]]
[[Category:Software]]
