{{InfoBox stack
|{{InfoBox wikipedia|SLiM|header=true}}
}}

SLiM (Simple Login Manager) is a desktop-independent graphical login manager for X11. Being fast and having only a few dependencies, it is a popular choice amongst users of lightweight window managers. 

= Installation =
You can install SLiM using the following command:
{{Emerge|x11-misc/slim}}

Additional themes can also be installed:
{{Emerge|x11-themes/slim-themes}}


To make SLiM start automatically after boot, set the ''DISPLAYMANAGER'' in '''/etc/conf.d/xdm''' to ''slim'':
{{File|/etc/conf.d/xdm||<pre>
...
DISPLAYMANAGER="slim"
...
</pre>}}
You will also need to add xdm to the default runlevel:
{{RootCmd|rc-update add xdm default}}


= Configuration =
Most global configuration is done in '''/etc/slim.conf'''
{{Note|In the following paragraphs [[Awesome|Awesome WM]] is used as an example window manager.}}


== Default configuration - no default session ==
By default, SLiM is configured to make all sessions in '''/etc/X11/Sessions/''' accessible -- you can cycle through them by pressing the {{Key|F1}} key. This behavior is acquired by setting the options below:
{{File|/etc/slim.conf||<pre>
login_cmd            exec /bin/bash -login /usr/share/slim/Xsession %session
...
sessiondir           /etc/X11/Sessions
</pre>}}

When no other changes are made, users will need to press {{Key|F1}} while logging-in to select the desired session. 
In following sections there are described several methods of setting one session as the default one.


{{Warning|Some window managers do not provide session file, and though cannot be seen in '''/etc/X11/Sessions/''' by SLiM. In that case you should use [[SLiM#Per-user_default_session_using_the_customized_.7E.2F.xsession_file|second method]] of setting a default session for one user (using custom '''~/.xsession''' file), because neither global nor 'per user using bundled session files' methods will work. You may also file a bug, asking a developer to add a session file to the ebuild.}}


== Setting a global default session ==
You can set a default session for all users of the computer, by setting the ''XSESSION'' variable. To do this, create and edit file '''/etc/env.d/90xsession'''
{{File|/etc/env.d/90xsession||<pre>
XSESSION="awesome"
</pre>}}
After saving the file run ''env-update'':
{{RootCmd|env-update}}


== Setting a default session for one user ==
Besides (or instead of) setting a global default session, you can let every user choose his default session. 

There are three approaches - you can either:
* use the SLiM session script ('''/usr/share/slim/Xsession''') to trigger session script from '''/etc/X11/Sessions/'''
* use the SLiM session script to trigger user-created session script
* force users to take care of setting everything by themselves

The first and second possibilities are generally preferred. However, if - for any reason - you do not want to set any defaults, you may choose the third approach. 


=== Per-user default session using bundled session files ===

The simplest way to set a default session for one user is to make a symbolic link from the session file to '''~/.xsession'''
{{Cmd|ln -s /etc/X11/Sessions/awesome ~/.xsession}}


An alternative is to put session command in the '''~/.xsession''' file:
{{File|~/.xsession||<pre>
/etc/X11/Sessions/awesome
</pre>}}
You will only need to make sure the file is executable:
{{Cmd|chmod u+x ~/.xsession}}


=== Per-user default session using the customized ~/.xsession file ===

Sometimes you need to customize the launcher script - e.g. to run other programs before starting the window manager or to start WM with a customized command.. The method above does not allow such modifications, but it can be achieved by using default session script (instead of the one provided by window manager) and launching WM through the '''~/.xsession''' file.

To run your sessions this way, make sure you have no global default session set (or set it to ''XSESSION="custom"'' in '''/etc/env.d/90xsession''' like described above). Then edit your '''~/.xsession''' file, putting your WM launcher at the end.

The file may look e.g. like this:
{{File|~/.xsession||<pre>
#!/bin/sh

# Run urxvt daemon
urxvtd -q -o -f
# Set xserver parameters
xset s 0
xset dpms 0 0 1800
# Launch awesome
exec /usr/bin/awesome
</pre>}}
You may also look at the WM session files in '''/etc/X11/Sessions/''' to find "how things are done".
{{Important| By default SLiM evaluates '''/usr/share/slim/Xsession''' first, then '''/etc/X11/Sessions/Xsession''', and '''~/.xsession''' is called last, so there is no need to duplicate entries from that two previous files.}}

Finally, remember to make sure the file is executable:
{{Cmd|chmod u+x ~/.xsession}}


=== Per-user default session without using any default session files ===
If you do not like '''any''' defaults from '''/usr/share/slim/Xsession''' and '''/etc/X11/Sessions/Xsession''', you can let your users set everything by themselves. It is generally not a good idea, but sometimes you may need it.
{{Warning|You must be sure that '''every''' user will know what he is expected to do and that he/she will have enough knowledge to create ~/.xinitrc by himself. For example, when configuring SLiM in this way, neither .Xresources nor .Xkbmap files are read by default and no errorfiles are created.}}


Start by editing '''/etc/slim.conf''' in the following way
{{File|/etc/slim.conf||<pre>
#login_cmd            exec /bin/bash -login /usr/share/slim/Xsession %session
login_cmd           exec /bin/bash -login ~/.xinitrc %session
...
#sessiondir           /etc/X11/Sessions
sessions            awesome,i3
</pre>}}
In the ''sessions'' line you may put the names of window manager you are planning to use.

Then create and edit '''~/.xinitrc''' file, which may look as below:
{{File|~/.xsession||<pre>
#!/bin/sh
#
# Custom xinitrc file for Gentoo

DEFAULT_SESSION="awesome"

# Redirect errors to a file in user's home directory if we can
for errfile in "$HOME/.wm-errors" "${TMPDIR-/tmp}/wm-$USER" "/tmp/wm-$USER"
do
    if ( cp /dev/null "$errfile" 2> /dev/null )
    then
        chmod 600 "$errfile"
        exec > "$errfile" 2>&1
        break
    fi
done

# Define Xresources
userresources=$HOME/.Xresources

# Merge what is available
if [ -f "$userresources" ]; then
    xrdb -merge "$userresources"
fi

# Run urxvt daemon
urxvtd -q -o -f
# Set xserver parameters
xset s 0
xset dpms 0 0 1800

# Start WM
case $1 in 
awesome|i3)
        exec $1
        ;;
*)
        exec $DEFAULT_SESSION
        ;;
esac
</pre>}}


== More tweaks ==
=== Theme selection ===
Theme selection is done by changing the following line:
{{File|/etc/slim.conf||<pre>
current-theme    slim-gentoo-simple
</pre>}}
You can easily find what themes are available on your system:
{{Cmd|ls /usr/share/slim/themes/}}

=== NumLock state on login ===
The NumLock key can be turned on or off by default:
{{File|/etc/slim.conf||<pre>
numlock    on
</pre>}}


= See Also =
[http://slim.berlios.de/ SLiM Homepage]

[[category:display manager]]
