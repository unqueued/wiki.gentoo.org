<languages />

{{Metadata|abstract=El Servidor HTTP Apache es un eficiente, servidor web extensible. Es uno de lo más populares servidor web sobre Internet.}}

{{InfoBox stack
|{{InfoBox homepage|http://httpd.apache.org|header=true}}
|{{InfoBox wikipedia|Apache HTTP Server}}
|{{InfoBox gdoc|Apache}}
|{{InfoBox github|apache/httpd}}
}}

El '''Servidor HTTP Apache''' es un [[:Category:Web Servers|servidor Web]] eficiente y extensible. Es uno de los servidores Web más populares usados en Internet.

== Instalación ==

{{Note|Cuando actualizamos entre versiones de Apache, Valide el [[Project:Apache/Upgrading|Guía de actualización]].}}
{{Note|A partir del 8 de enero de 2016 Apache 2.4 se ha marcado como ''testing'' por tanto, a menos que se modifique explícitamente package.accept_keywords, se obtendrá Apache 2.2. Leer la sección de ''Emerge'' de abajo para obtener más información}}

=== Ajustes USE ===

{{USEflag|package=www-servers/apache}}

=== Emerge ===

A partir del 8 de enero de 2016 Apache 2.4 se ha marcado como ''testing'' por tanto, necesitará relizar las siguientes modificaciones a package.accept_keywords.

{{FileBox|filename=/etc/portage/package.accept_keywords|title=Permitir Apache 2.4|lang=bash|1=
>=www-servers/apache-2.4.16 ~amd64
>=app-admin/apache-tools-2.4.16 ~amd64
}}

Si quiere utilizar Apache event MPM, entonces añada lo siguiente a make.conf:
{{FileBox|filename=/etc/portage/make.conf|title=Apache event MPM|lang=bash|1=
APACHE2_MPMS="event"
}}

Si quiere utilizar Apache worker MPM, entonces añada lo siguiente a make.conf:
{{FileBox|filename=/etc/portage/make.conf|title=Apache event MPM|lang=bash|1=
APACHE2_MPMS="worker"
}}

Y habilite el ajuste USE threads:
{{FileBox|filename=/etc/portage/package.use|title=Soporte para hilos en Apache|lang=bash|1=
www-servers/apache threads
}}

A continuación haga ''emerge'' de Apache:
{{Emerge|{{Package|www-servers/apache}}}}

== Soporte global ===

Enabling the <code>apache2</code> global USE flag provides support for Apache in other packages. This may cause {{Package|www-servers/apache}} to be installed automatically if a package depending on Apache has been emerged.
 		 
{{FileBox|filename=/etc/portage/make.conf|title=Adding Apache to system USE flags|lang=bash|1=
USE="apache2"
}}

Después de configurar los parámetros USE, actualiza el sistema para que los cambios tengan efecto:

{{Emerge|params+=--changed-use --deep|@world}}

== Configuración ==

=== Ficheros ===

Hay dos archivos principales que configuran el comportamiento de Apache2 en el sistema: 

* Archivo de guión de inicio de Apache2 sobre Gentoo {{Path|/etc/conf.d/apache2 }}

* Archivo de configuración convencional de Apache2 {{path|/etc/apache2/httpd.conf}}

==== {{Path|/etc/conf.d/apache2}} ====

The {{Path|apache2}} file located in {{Path|/etc/conf.d}} is Gentoo's init script configuration file. The only active line in this file is the <var>APACHE2_OPTS</var> variable line:

{{FileBox|filename=/etc/conf.d/apache2|lang=bash|1=
APACHE2_OPTS="-D DEFAULT_VHOST -D INFO -D SSL -D SSL_DEFAULT_VHOST -D LANGUAGE"
}}

Esta linea define la opciones  que serán interpretadas por varios archivos de configuración usando usando la declaración <code><ifDefine option-name></code> para activar o desactivar alguna parte de la configuración. Esto será retomado más tarde en el articulo.

==== {{Path|/etc/apache2/httpd.conf}} ====

El archivo {{Path|httpd.conf}} es el convencional de apache. En efecto este archivo es solo un "punto de entrada" para la configuración. Toda la configuración está separada en muchos archivos dentro del directorio {{Path|/etc/apache2/}}, que se ensamblan entre sí usando la directiva <code>include</code>. Por ejemplo, la entrada <code>Include /etc/apache2/modules.d/*.conf</code>, en {{Path|httpd.conf}}, tiene como objetivo incluir todos los archivos en {{Path|/etc/apache2/modules.d/}} cuyo nombre termine con {{Path|.conf}}. 

Taking into account what has been said in the subsection above, and as module configuration files (files in {{Path|/etc/apache2/modules.d}}) almost always start with the <code><IfDefine module-name></code>, the content of one file inside {{Path|/ect/apache2/modules.d}}, will ONLY be assembled with the rest of the configuration, if the matching option is set using a <code>-D module-name</code> flag in the <var>APACHE2_OPTS</var> variable in the {{Path|/etc/conf.d/apache2 }} file. The {{Path|00_default_settings.conf}} configuration file is an exception to this rule as it doesn't start with an <code>IfDefine</code> statement and therefore is always included in the resulting configuration.

=== Valores por defecto ===

Después de una nueva instalación de un servidor Apache, la configuración resultante del conjunto de los diferentes archivos de configuración es el siguiente. Inicia con un punto de entrada {{Path|/etc/apache2/httpd.conf}}.

{{Warning| Este es "solo" dado para referencia rápida y para dar una vista completa. Los usuarios están invitados fuertemente a revisar los comentarios incluidos en los diferentes archivos para entender los pros y contras de la configuración. Por favor además dirígete al manual de Apache para un entendimiento profundo de la configuración de Apache.}}

{{FileBox|filename=/etc/apache2/httpd.conf|lang=apache|1=
ServerRoot "/usr/lib64/apache2"
  
#Module loaded unconditionally, assuming the USE flag is no unset in
# /etc/portage/make.conf or in /etc/portage/package.use
LoadModule actions_modulemodules/mod_actions.so
...
#other modules loaded that way : alias_module, auth_basic_module, authn_alias_module,
# authn_anon_module, authn_dbm_module, authn_default_module, authn_file_module, 
# authz_dbm_module, authz_default_module, authz_groupfile_module, authz_host_module, 
# authz_owner_module, authz_user_module, autoindex_module,  cgi_module,  cgid_module, 
# deflate_module, dir_module, env_module, expires_module, ext_filter_module, filter_module,
#  headers_module, include_module,  log_config_module, logio_module, mime_module,  
# mime_magic_module, negotiation_module, rewrite_module, setenvif_module, 
# speling_module,ssl_module, status_module, unique_id_module, usertrack_module, host_alias_module
  
  
#Modules loaded conditionally, assuming matching USE flag is not unset in
# /etc/portage/make.conf or in /etc/portage/package.use (flag to be set in )
<IfDefine AUTHNZ_LDAP>
LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
</IfDefine>
#other modules loaded that way : cache_module, dav_module, dav_fs_module,
# dav_lock_module,disk_cache_module,  file_cache_module, info_module, ldap_module,
# mem_cache_module, userdir_module
  
  
User apache
Group apache
  
# Supplemental configuration
#**************************************************************************************vvv
#this part is included via Include /etc/apache2/modules.d/*.conf 
  
#included from /etc/apache2/modules.d/00_default_settings.conf-------------v
#this is always included as there is not option to deactivate it.
Timeout 300
KeepAlive On
MaxKeepAliveRequests 100
KeepAliveTimeout 15
UseCanonicalName Off
AccessFileName .htaccess
ServerTokens Prod
TraceEnable off
ServerSignature On 
HostnameLookups Off
EnableMMAP On
EnableSendfile On
FileEtag INode MTime Size
ContentDigest Off
ErrorLog /var/log/apache2/error_log
LogLevel warn
  
<Directory />
	Options FollowSymLinks
	AllowOverride None
	Order deny,allow
	Deny from all
</Directory>
  
<IfModule dir_module>
	DirectoryIndex index.html index.html.var
</IfModule>
<FilesMatch "^\.ht">
	Order allow,deny
	Deny from all
</FilesMatch>
#--------------------------------------------------------------------------^
  
#included from 00_mod_info.conf--------------------------------------------v
<IfDefine INFO>
<Location /server-info>
	SetHandler server-info
	Order deny,allow
	Deny from all
	Allow from 127.0.0.1
</Location>
</IfDefine>
#--------------------------------------------------------------------------^
  
#--------------------------------------------------------------------------v
#included from 00_languages.conf
# Settings for hosting different languages.
<IfDefine LANGUAGE>
  
	AddLanguage ca .ca
	...
	AddLanguage zh-TW .zh-tw
  
	LanguagePriority en ca cs da de el eo es et fr he hr it ja ko ltz nl nn no pl pt pt-BR ru sv zh-CN zh-TW
  
	ForceLanguagePriority Prefer Fallback
  
	AddCharset us-ascii.ascii	.us-ascii
	AddCharset <nowiki>ISO-8859-1		.iso8859-1 .latin1</nowiki>
	...
	AddCharset shift_jis		.shift_jis .sjis
</IfDefine>
#---------------------------------------------------------------------------^
#**************************************************************************************^^^
  
  
#***************************************************************************************vvv
#this part is included via Include /etc/apache2/vhosts.d/*.conf 
#from 00_default_ssl_vhost.conf-----------------------------------------------------vv
<IfDefine SSL>
	<IfDefine SSL_DEFAULT_VHOST>
		<IfModule ssl_module>
			Listen 443
  
			<VirtualHost _default_:443>
				ServerName localhost
                                #------------------------------------------v
				# this part is included via Include /etc/apache2/vhosts.d/default_vhost.include
				ServerAdmin root@localhost
				DocumentRoot "/var/www/localhost/htdocs"
  
  	
				<Directory "/var/www/localhost/htdocs">
	   				Options Indexes FollowSymLinks
	   				AllowOverride All
	   				Order allow,deny
	   				Allow from all
				</Directory>
  
				<IfModule alias_module>
	   				ScriptAlias /cgi-bin/ "/var/www/localhost/cgi-bin/"
				</IfModule>
  
				<Directory "/var/www/localhost/cgi-bin">
	   				AllowOverride None
	   				Options None
	   				Order allow,deny
	   				Allow from all
				</Directory>
        			#end of Include ---------------------------^
  	
				ErrorLog /var/log/apache2/ssl_error_log
  
				<IfModule log_config_module>
					TransferLog /var/log/apache2/ssl_access_log
				</IfModule>
				SSLEngine on
				SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL
				SSLCertificateFile /etc/ssl/apache2/server.crt
				SSLCertificateKeyFile /etc/ssl/apache2/server.key
  
				<FilesMatch "\.(cgi{{!}}shtml{{!}}phtml{{!}}php)$">
					SSLOptions +StdEnvVars
				</FilesMatch>
  
				<Directory "/var/www/localhost/cgi-bin">
					SSLOptions +StdEnvVars
				</Directory>
  
				<IfModule setenvif_module>
					BrowserMatch ".*MSIE.*" \
					nokeepalive ssl-unclean-shutdown \
					downgrade-1.0 force-response-1.0
				</IfModule>
  
  
				<IfModule log_config_module>
					CustomLog /var/log/apache2/ssl_request_log \
					"%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
					</IfModule>
			</VirtualHost>
		</IfModule>
	</IfDefine>
</IfDefine>
#---------------------------------------------------------------------------------^^
#from 00_default_vhost.conf-------------------------------------------------------vv
<IfDefine DEFAULT_VHOST>
	Listen 80
	NameVirtualHost *:80
  
	<VirtualHost *:80>
		ServerName localhost
  
		#---------------------------------------------------------------v
		# this part is included via Include /etc/apache2/vhosts.d/default_vhost.include
		ServerAdmin root@localhost
		DocumentRoot "/var/www/localhost/htdocs"
  
  	
		<Directory "/var/www/localhost/htdocs">
	   		Options Indexes FollowSymLinks
	   		AllowOverride All
	   		Order allow,deny
	   		Allow from all
		</Directory>
  
		<IfModule alias_module>
	   		ScriptAlias /cgi-bin/ "/var/www/localhost/cgi-bin/"
		</IfModule>
  
		<Directory "/var/www/localhost/cgi-bin">
	   		AllowOverride None
	   		Options None
	   		Order allow,deny
	   		Allow from all
		</Directory>
        	#end of Include -----------------------------------------------^
  
		<IfModule mpm_peruser_module>
			ServerEnvironment apache apache
		</IfModule>
	</VirtualHost>
</IfDefine>
#-----------------------------------------------------------------------------------^^
# end of include ****************************************************************************************^^^
}}

=== Primera señal de vida ===

Como es visible en la configuración inicial , el directorio del virtual host pre instalado <code>DocumentRoot</code> es {{Path|/var/www/localhost/htdocs}}, su nombre de servicio es "localhost". En adición un archivo index.html es provisto en el directorio <code>DocumentRoot</code>, por tanto, para comprobar si todo está instalado o no correctamente, apunta un navegador a [http://localhost/ http://localhost/].

Un mensaje "It Works!" debe aparecer en la página.

{{Warning|Out of the box, [[Firefox]] tiene una característica designada para ayudar a los usuarios que escriben incorrectamente la URL en la barra de navegación. Si se falla en resolver la URL, Firefox intenta un par de alternativas para intentar encontrar lo que el usuario "realmente quería" como destino. Agregando un <code>.com</code> o prefijando un <code>www</code> al hostname especificado para ver si así resuelve. 

Esta característica, que se introdujo en las primeras versiones de Firefox es algo molesto para los desarrolladores. La característica significa que cuando falla un servidor que ejecuta en el servidor local para responder, Firefox decidirá intentar <code>localhost.com</code> o <code>www.localhost.com</code>. Esto a menudo resolverá una página no encontrada.

Para desabilitar esta  característica:

# Ingresa <code>about:config</code> en la barra del navegador
# Click "I'll be careful" e ingresar a la página de configuración especial
# Ingresar <code>browser.fixup.alternate.enabled</code> en  la caja de búsqueda que aparece
# Click derecho sobre <code>browser.fixup.alternate.enabled</code> que aparece en la lista filtrada  that appears in the filtered lista de abajo y elegir de palanca para ajustar el valor en false.
}}

=== Habilitando mod_security ===

Instalar {{Package|www-apache/mod_security}}:

{{Emerge|www-apache/mod_security}}

Enable the <code>SECURITY</code> module in the {{Path|apache2}} file's <var>APACHE2_OPTS</var> variable:

{{FileBox|filename=/etc/conf.d/apache2|title=Habilitando el módulo de seguridad|lang=bash|1=
APACHE2_OPTS="... -D SECURITY"
}}

Controlar este módulo editando los archivos
{{Path|/etc/apache2/modules.d/79_modsecurity.conf}} y {{Path|/etc/apache2/modules.d/80_modsecurity-crs.conf}}, entonces reinicia Apache.

=== Habilitando soporte PHP ===

Instala [[PHP]] con el parámetro USE <code>apache2</code> y habilita el módulo:

{{FileBox|filename=/etc/conf.d/apache2|title=Habilitando el módulo PHP|lang=bash|1=
APACHE2_OPTS="... -D PHP5"
}}

Antes de probar si el módulo PHP trabaja, valida que el archivo {{Path|/etc/apache2/modules.d/70_mod_php5.conf}} exista y contenta la siguiente definición:

{{FileBox|filename=/etc/apache2/modules.d/70_mod_php5.conf|title=Verificando el módulo PHP que será cargado|lang=apache|1=
<IfDefine PHP5> 
        # Load the module first 
        <IfModule !mod_php5.c> 
                LoadModule php5_module    modules/libphp5.so 
        </IfModule> 
  
        # Set it to handle the files 
        <IfModule mod_mime.c> 
                AddHandler application/x-httpd-php .php .php5 .phtml 
                AddHandler application/x-httpd-php-source .phps 
        </IfModule> 
  
        DirectoryIndex index.php index.phtml 
</IfDefine>
}}

Si no existe crealo.

Para verificar que el módulo PHP trabaje, create una página de prueba:

{{FileBox|filename=/var/www/localhost/htdocs/index.php|title=Página de prueba de PHP|lang=php|1=
<html>
 <body>
  <?php phpinfo(); ?>
 </body>
</html>
}}

Now, suppress or rename {{Path|/var/www/localhost/htdocs/index.html}} and open the test page: <code>http://localhost/</code>

Una tabla describiendo las configuraciones de PHP debería ser vista.

==== Modificar las versiones de PHP ==== 

Para cambiar la versión de PHP que gestiona Apache, en primer lugar se deben listar las versiones disponibles del Server Application Programming Interface (SAPI) de <code>apache2</code>:

{{RootCmd|eselect php list apache2|output=<pre>
 [1]   php5.3
 [2]   php5.4 *
 [3]   php5.5
</pre>}}

Cambiar a la versión deseada:

{{RootCmd|eselect php set apache2 N}}

Sustituir <code>N</code> en el ejemplo de arriba por el número requerido en la salida de <tt>eselect php list apache2</tt> tal y como se ha mostrado.

=== Host Virtuales ====

Para cada host virtual, provee un directorio <code>DocumentRoot</code> que sea legible y accesible por el demonio Apache. Agrega un host virtual al archivo de configuración ({{Path|VirtualHost.conf}}) en el directorio {{Path|/etc/apache2/vhosts.d}} que use este <code>DocumentRoot</code> y el nombre del servicio del virtual host. No olvides agregar una entrada para este nombre de dominio en  {{Path|/etc/hosts}}.

To assign the apache user/group ownership on the virtual host files, use {{c|chown}} like in the following example:

{{RootCmd|chown apache:apache /var/www/sitename}}

A continuación se presentan dos ejemplos de definiciones de host virtuales, uno para domainname1.com y otro para domainname2.com. Note los diferentes <code>DocumentRoot</code> y <code>ServerName</code> aunque la directiva de host por si mismo sigue siendo el mismo (<code>*:80</code>)

{{CodeBox|title=Ejemplo de definiciones de host virtuales|lang=apache|1=
<VirtualHost *:80>
    ServerAdmin email@site.com
    DocumentRoot /var/www/website1
    ServerName domainname1.com
</VirtualHost>
  
<VirtualHost *:80>
    ServerAdmin email@site.com
    DocumentRoot /var/www/website2
    ServerName domainname2.com
</VirtualHost>
}}

Se recomienda dar una definición de host virtual basado en la IP también. Esto permite al administrador poner un mensaje para los usuarios que tratan de llegar a un sitio a través de su dirección IP:

{{CodeBox|title=Host virtual basado en IP|lang=apache|1=
<VirtualHost *:80>
    ServerAdmin email@site.com
    DocumentRoot /var/www/html
    ServerName xxx.xxx.xxx.xxx
</VirtualHost>
}}

Después de insertar los virtual host, el servidor necesita ser (satisfactoriamente) reiniciado para  que el nuevo sitio se active.

=== Habilitando PHP mediante fcgid ===

Instala {{Package|www-apache/mod_fcgid}} y {{Package|dev-lang/php}}. El paquete PHP requiere <code>cgi</code> como parámetro USE:

{{Emerge|www-apache/mod_fcgid dev-lang/php}}

Edit the {{Path|mod_fcgid.conf}} file:

{{FileBox|filename=/etc/apache2/modules.d/20_mod_fcgid.conf|lang=apache|1=
<IfDefine FCGID>
LoadModule fcgid_module modules/mod_fcgid.so
SocketPath /var/run/fcgidsock
SharememPath /var/run/fcgid_shm
  
AddHandler php-fcgid .php
AddType application/x-httpd-php .php
Action php-fcgid /fcgid-bin/php-fcgid-wrapper
# max request 128mb
FcgidMaxRequestLen 134217728
<Location /fcgid-bin/>
        SetHandler fcgid-script
        Options +ExecCGI
</Location>
</IfDefine>
}}

Crea el directorio necesario: 

{{RootCmd|mkdir /var/www/localhost/htdocs/fcgid-bin}}

Enlace simbólico para la envoltura de PHP:

{{RootCmd|ln -s /usr/bin/php-cgi /var/www/localhost/htdocs/fcgid-bin/php-fcgid-wrapper}}

Enable the <code>FCGID</code> module:

{{FileBox|filename=/etc/conf.d/apache2|title=Habilitando el módulo fcgid|lang=bash|1=
APACHE2_OPTS="... -D FCGID"
}}

Finalmente reinicia Apache y valida el sitio  con <code>phpinfo()</code> creado previamente. El valor de <code>Servidor API</code> debería ser "CGI/FastCGI"

=== Habilitando PHP-FPM a través de mod_proxy_fcgi en apache 2.4 ===

The following pre-requisites must be satisfied to enable PHP-FPM through mod_proxy_fcgi:
* >= PHP 5.3
* >= Apache 2.4 (see Emerge section above for instructions on how to install Apache 2.4)

Furthermore, there are a few restrictions on the availability of functionality within Apache 2.4:
* >= Apache 2.4.9, if you want to [https://wiki.apache.org/httpd/PHP-FPM#Performance_and_Pitfalls communicate with PHP-FPM over UNIX sockets]
* >= Apache 2.4.10, if you want to use [https://github.com/php/php-src/pull/694 SetHandler] instead of [https://wiki.apache.org/httpd/PHP-FPM#Example ProxyPassMatch].

The following configuration will only work with Apache 2.4.10 and newer. It relies on the <code>FilesMatch</code> directive and be placed within the main server config or <code>VirtualHosts</code>.  The location of the UNIX socket is determined by the <code>listen</code> directive in the {{Path|php-fpm.conf}}, allowing for specifying separate pools per site or function.

En el siguiente ejemplo, es colocado con el archivo de configuración del módulo PHP de Apache:

{{FileBox|filename=/etc/apache2/modules.d/70_mod_php5.conf|title=Using PHP-FPM (recommended for Apache 2.4.10 and newer)|lang=apache|1=
 <IfDefine PHP5>
        <FilesMatch "\.php$">
                SetHandler "proxy:unix:/var/run/php-fpm/www.sock{{!}}fcgi://localhost"
        </FilesMatch>
  
	# Set it to handle the files
	<IfModule mod_mime.c>
		AddHandler application/x-httpd-php .php .php5 .phtml
		AddHandler application/x-httpd-php-source .phps
	</IfModule>
  
	DirectoryIndex index.php index.phtml
 </IfDefine>
}}

Or, you can use ProxPassMatch -- the only option if the Apache version is between 2.4.0 and 2.4.8, inclusive.

{{FileBox|filename=/etc/apache2/modules.d/70_mod_php5.conf|title=Using PHP-FPM (recommended for Apache 2.4.8 and older)|lang=apache|1=
 <IfDefine PHP5>
        # Send all requested PHP files to PHP-FPM via fcgi://PHP_FPM_LISTEN_ADDRESS:PHP_FPM_LISTEN_PORT/DOCUMENT_ROOT/$1
        ProxyPassMatch ^/(.*\.php)$ fcgi://127.0.0.1:9000/var/www/localhost/htdocs/$1
  
	# Set it to handle the files
	<IfModule mod_mime.c>
		AddHandler application/x-httpd-php .php .php5 .phtml
		AddHandler application/x-httpd-php-source .phps
	</IfModule>
  
	DirectoryIndex index.php index.phtml
 </IfDefine>
}}

Por defecto la directiva <code>listen</code> no es establecida para un socket. Primero crea el directorio para el archivo del socket:

{{RootCmd|mkdir /var/run/php-fpm}}

Siguiente, actualiza el archivo {{Path|php-fpm.conf}} como sigue:

{{FileBox|filename=php-fpm.conf|title=Actualizar la directiva listen|lang=apache|1=
; Set permissions for unix socket, if one is used. In Linux, read/write
; permissions must be set in order to allow connections from a web server. Many
; BSD-derived systems allow connections regardless of permissions.
; Default Values: user and group are set as the running user
;                 mode is set to 0666
listen.owner = nobody
listen.group = nobody
;listen.mode = 0666
 
 ; The address on which to accept FastCGI requests.
 ; Valid syntaxes are:
 ;   'ip.add.re.ss:port'    - to listen on a TCP socket to a specific address on
 ;                            a specific port;
 ;   'port'                 - to listen on a TCP socket to all addresses on a
 ;                            specific port;
 ;   '/path/to/unix/socket' - to listen on a unix socket.
 ; Note: This value is mandatory.
 ;listen = 127.0.0.1:9000
listen = /var/run/php-fpm/www.sock
}}

Then enable both the <code>PHP5</code> and <code>PROXY</code> modules:

{{FileBox|filename=/etc/conf.d/apache2|title=Habilitando los módulos proxy y PHP|lang=bash|1=
APACHE2_OPTS="... -D PHP5 -D PROXY"
}}

== Usos ==

=== Servicios ===

==== OpenRC ====

Inicia el servicio Apache:

{{RootCmd|/etc/init.d/apache2 start}}

Agregue Apache al guión de inicio por defecto:

{{RootCmd|rc-update add apache2 default}}

Reinicia el servicio de Apache:

{{RootCmd|/etc/init.d/apache2 restart}}

Recarga los archivos de configuración de Apache:

{{RootCmd|/etc/init.d/apache2 reload}}

==== systemd ====

Inicia el servicio de Apache:

{{RootCmd|systemctl start apache2}}

Agrega Apache al guión de inicio por defecto: 

{{RootCmd|systemctl enable apache2}}

Reinicia el servicio de Apache: 

{{RootCmd|systemctl restart apache2}}

== Solución de problemas ==

=== Recursos ===

El servicio de Apache puede ser difícil para configurar apropiadamente. A continuación se presentan algunos recursos que pueden ser útiles cuando se producen problemas

* [[Project:Apache/Troubleshooting|Guía de solución de problemas]]
* {{Bug|www-servers/apache|search=package}}

=== Evaluando ===

Verificando las IP, interfaces y puertos con que Apache está corriendo y escuchando:

{{RootCmd|netstat -tulpen {{!}} grep apache|output=<pre>
tcp     0     0 0.0.0.0:80      0.0.0.0:*     LISTEN     0     10932720     4544/apache2        
tcp     0     0 0.0.0.0:443     0.0.0.0:*     LISTEN     0     10932716     4544/apache2        
</pre>}}

Probando si una conexión a un servicio Apache está trabajando sobre localhost:

{{Cmd|telnet localhost 80|output=<pre>
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^&#93;'.
</pre>
}}

Interrumpe la prueba de conexión con {{Key|Ctrl}}+{{Key|c}} y {{Key|Enter}}.

=== apr_sockaddr_info_get() failed for <System_Hostname> ===

'''Error:'''

<pre>apache2: apr_sockaddr_info_get() failed for System_Hostname</pre>

'''Resolución:'''

Cuando esto ocurre, agrega el nombre del host al archivo {{Path|/etc/hosts}}:

{{FileBox|filename=/etc/hosts|title=Agregando un nombre de Host a Apache|1=
127.0.0.1 localhost System_Hostname
}}

== Véase también ==

* [[Lighttpd]] - Un rápido, liviano servidor web.
* [[Nginx]] - Un pequeño, robusto, y un servidor HTTP y proxy reverso de altas prestaciones.

== Recursos externos ==

* [http://articles.slicehost.com/2010/12/2/installing-apache-on-gentoo Artículo de Slicehost: Instalar Apache en Gentoo]
* [http://articles.slicehost.com/2010/12/3/apache-configuration-files-on-gentoo Artículo de Slicehost: Ficheros de configuración de Apache en Gentoo]
* [http://articles.slicehost.com/2010/12/3/configuring-the-apache-mpm-on-gentoo Artículo de Slicehost: Configurar el Apache MPM en Gentoo]
* [http://articles.slicehost.com/2010/12/3/apache-configuration-on-gentoo-part-1 Artículo de Slicehost: Configuración de Apache en Gentoo]
* [http://articles.slicehost.com/2010/12/3/apache-virtual-hosts-on-gentoo-part-1 Artículo de Slicehost: Hosts Virtuales Apache en Gentoo]
* [http://articles.slicehost.com/2010/12/3/enabling-and-using-apache-s-mod_status-on-gentoo Artículo de Slicehost: Habilitar y utilizar el mod_status de apache en Gentoo]
* [http://httpd.apache.org/docs/ Documentación de apache.org]
* [http://gentoo-en.vfose.ru/wiki/Apache2_mod_pagespeed Apache2 mod_pagespeed]


[[Category:Web Servers]]
