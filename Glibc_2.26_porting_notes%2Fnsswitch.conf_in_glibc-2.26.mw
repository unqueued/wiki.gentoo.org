= TL;DR / the fix =

Make sure your '''/etc/nsswitch.conf''' contains '''files''' entry:

Good:
<source>
# cat /etc/nsswitch.conf
...
passwd:      files
...
</source>

Also good:
<source>
# cat /etc/nsswitch.conf
...
passwd:      compat files
...
</source>

Bad:
<source>
# cat /etc/nsswitch.conf
...
passwd:      compat
...
</source>

= What is broken =

If you have '''compat''' database only listed as a service resolver
and install '''glibc-2.26''' most of programs will fail to resolve
users and groups: login, ssh and so on will fail.

One of many manifestations of the problem:

<source>
portage: 'portage' user or group missing.
         For the defaults, line 1 goes into passwd, and 2 into group.
         portage:x:250:250:portage:/var/tmp/portage:/bin/false
         portage::250:portage
</source>

= Why the breakage =

Details can be seen at https://bugs.gentoo.org/627338

'''glibc-2.26''' deprecates obsolete NSL libraries.
(in this case libnss_'''compat'''.so.2 gone away)

Gentoo happened not to change '''nsswitch.conf''' since 2006.
