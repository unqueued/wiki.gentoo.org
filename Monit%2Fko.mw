<languages />
{{Metadata|abstract=Monit is a utility for managing and monitoring processes, programs, files, directories and filesystems on a UNIX system.}}
{{InfoBox stack
|{{InfoBox homepage|http://mmonit.com/monit/|header=true}}
|{{InfoBox wikipedia|Monit}}
|{{InfoBox ohloh}}
}}

{{Package|app-admin/monit}}은 유닉스 시스템의 프로세스, 프로그램, 파일, 디렉터리, 파일 시스템을 관리하고 감시하는 도구입니다. 

== 설정 ==

=== monit 설치 ===

{{Package|app-admin/monit}} 프로그램은 다음 USE 플래그를 활용합니다. 

{{USEflag|package=app-admin/monit}}

USE 플래그를 적절하게 결정했으면 {{c|emerge}} 명령으로 {{Package|app-admin/monit}}을 설치하십시오:

{{Emerge|app-admin/monit}}

=== Monit 설정 파일 ===

monit 프로그램은 {{Path|/etc/monitrc}} 설정 파일을 활용합니다.

감시 항목 정의의 추가/제거를 용이하게 하기 위해 <tt>monit</tt>에서는 지정 디렉터리(보통 {{Path|/etc/monit.d}}) 안에 파일을 넣게 해줍니다. 이 설정 파일을 활성화하려면 다음과 같이 {{Path|/etc/monitrc}}를 편집하십시오

{{FileBox|filename=/etc/monitrc|title=유연한 설정 항목 허용|1=
## It is possible to include additional configuration parts from other files or
## directories.
include /etc/monit.d/*
}}

monit과 관련된 설정 파일을 바꾸고 나면 <tt>monit</tt>이 바뀐 설정을 다시 읽게 하십시오.

{{RootCmd|monit reload}}

=== 부팅할 때 monit 자동 시작 ===

<tt>monit</tt>이 {{Path|/etc/inittab}}설정으르 시작하여 <tt>init</tt> 자체에서 <tt>monit</tt> 프로그램을 시작하도록하고 <tt>monit</tt>이 갑자기 죽었을 때 자동으로 다시 시작하도록 하는 것이 좋습니다. init 스크립트로 <tt>monit</tt>을 시작하면 이 기능을 지원하지 않습니다.

{{FileBox|filename=/etc/inittab|title=monit 가동 실패시 자동 재시작|1=
# Run monit in standard runlevels
mo:2345:respawn:/usr/bin/monit -Ic /etc/monitrc
}}

{{Path|/etc/inittab}}을 업데이트한 후에는, {{c|telinit q}} 명령으로 <tt>monit</tt>을 바로 시작할 수 있습니다.

=== 사용자 관리 ===

Users added to the <tt>monit</tt> or <tt>users</tt> group will be able to manipulate <tt>monit</tt> through its web interface.

To add users to one of these groups, use <kbd>gpasswd</kbd>:

{{RootCmd|gpasswd -a $USER monit
|gpasswd -a $USER users}}

Inside the {{Path|/etc/monitrc}} file, the <code>allow</code> statement should refer to these groups, like so:

{{FileBox|filename=/etc/monitrc|title=웹 인터페이스로의 그룹 접근 허용|1=
set httpd port 2812
  allow @monit
  allow @users
}}

It is also possible to hard-code usernames and passwords in the {{Path|monitrc}} file, but this is not recommended. Check the {{Path|monitrc}} file for default passwords and remove those, or alter them to use a strong, unique password. The syntax used then is <code>allow &lt;username&gt;:&lt;password&gt;</code>.

=== monit 웹 서비스 ===

The default location of the web interface is at [http://localhost:2812 localhost:2812], with <tt>admin</tt> as admin username and <tt>monit</tt> as default password. Make sure to change this!

=== monit으로 프로그램 감시 ===

The Monit application uses PID file checks to see if an application is still running or not. That implies that a PID file ''must'' be available for an application, otherwise <tt>monit</tt> cannot guard it. If a daemon does not create a PID file, use a [http://mmonit.com/wiki/Monit/FAQ#pidfile wrapper] to create one.

{{Note|The use of PID files (and validating PIDs from tools like <tt>ps</tt>) for monitoring is often said to be broken<ref>Greg Wooledge. [http://mywiki.wooledge.org/ProcessManagement Process management], Retrieved on January 1st, 2015</ref>. Monit does try to overcome this weakness by checking the PID file frequently enough to be reliable.}}

Through using the {{Path|/etc/monit.d/}} location, it is easy to add in additional monitoring rules.

For instance, to automatically restart [[MySQL]] when it would die:

{{FileBox|filename=/etc/monit.d/mysql|title=Auto restart mysql|1=
check process mysql with pidfile /var/run/mysqld/mysqld.pid
    start program = "/bin/bash -c 'rc-service mysql start'"
    stop program  = "/bin/bash -c 'rc-service mysql stop'"
}}

Another example is to manage the memory usage of a process and create an alert when it grows beyond a certain threshold:

{{FileBox|filename=/etc/monit.d/squid|title=Check squid and alert on memory consumption bigger than 512 MByte|1=
 check process squid with pidfile /run/squid.pid
   start program = "/bin/bash -c 'rc-service squid start'"
   stop  program = "/bin/bash -c 'rc-service squid stop'"
   if totalmem > 512 MB then alert
}}

== monit 디버깅 ==

=== monit 전면 실행 ===

To run <tt>monit</tt> in the foreground and provide feedback on everything it is detecting, use the <kbd>-Ivv</kbd> option:

{{RootCmd|monit -Ivv|output=<pre>
...
'squid' total mem amount of 525748kB matches resource limit [total mem amount>524288kB]
</pre>}}

== 외부 자료 ==

For more information about Monit, the following resources can help out.

* [http://mmonit.com/monit/documentation/monit.html Monit official documentation]
* [http://mmonit.com/wiki/Main/HomePage Monit Wiki]
* [https://wiki.amahi.org/index.php/Monit Configuring Monit for Avahi]

== 참고 자료 ==

{{reflist}}


[[Category:Monitoring]]
