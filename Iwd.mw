{{InfoBox stack
|{{InfoBox homepage|https://iwd.wiki.kernel.org/|header=true}}
|{{InfoBox gitweb|https://git.kernel.org/pub/scm/network/wireless/iwd.git/|raw=true}}
|{{InfoBox irc|iwd}}
}}

'''iwd''' ('''i'''Net '''W'''ireless '''D'''aemon) is [[Article description::an up-and-coming wireless daemon for Linux.]] It is written by [[:Category:Intel|Intel]] and aims to replace [[wpa_supplicant]].

== Installation ==

=== Kernel ===

{{KernelBox|1=
Security Options --->
	[*] Enable access key retention support
		[*] Diffie-Hellman operations on retained keys

Cryptographic API  --->
	[*] Diffie-Hellman algorithm
	[*] DES and Triple DES EDE cipher algorithms
	[*] User-space interface for symmetric key cipher algorithms
}}

=== USE flags ===

{{USEflag|package=net-wireless/iwd}}

=== Emerge ===

Install {{Package|net-wireless/iwd}} package:

{{Emerge|net-wireless/iwd}}


== Network management ==
Gentoo is all about choice, so there should be various methods available for [[Network_management#Available_software|network management]]. But iwd is new, and not all to methods are supported. 

=== Netifrc ===
[[Netifrc]] is Gentoo's default method of managing networks, but unfortunately it does not support iwd as backend yet, see {{Bug|690808}}. Make sure that any symbolic links to {{Path|/etc/init.d/net.lo}} for the wireless interfaces are removed, and select another better working method for network management.

=== Dhcpcd ===
Add both the iwd daemon and the DHCPCD daemon to the default runlevel and start them up:
{{RootCmd
|rc-update add dhcpcd default
|rc-service dhcpcd start
|rc-update add iwd default
|rc-service iwd start}}

Use the [[iwd Connecting to an access point with iwctrl|iwctl]] to make connections.

=== NetworkManager ===
[[NetworkManager]] supports iwd. Make sure to set the "iwd" USE flag:
{{RootCmd|echo "net-misc/networkmanager iwd" >> /etc/portage/package.use/zz-autounmask}}
{{Emerge|net-wireless/networkmanager -N}}

{{Package|Gnome-extra/nm-applet}} or other NetworkManager frontends can be used as per normal to make connections.

=== Connman ===
Connman supports iwd somewhat. Make sure to set the "iwd" USE flag en (re-)emerge:
{{RootCmd|echo "net-misc/connman iwd" >> /etc/portage/package.use/zz-autounmask}}
{{Emerge|net-misc/connman -N}}

Connman still relies on wpa_supplicant for scanning, but connecting via iwd is possible.

== Connecting to an access point with iwctrl ==

{{c|iwctl}} is iwd's tool to control iwd. It supports both a command line interface and an interactive mode. A complete command line would be {{c|iwctl station list}} to see what adapters you might be able to use:

{{Cmd|iwctl station list|output=<pre>
                            Devices in Station Mode
--------------------------------------------------------------------------------
  Name                State          Scanning
--------------------------------------------------------------------------------
  wlan0               disconnected
</pre>}}

An interactive sequence of {{c|iwctl}} commands can be used to connect to a WiFi network access point. First check the status of the WiFi network interface, set it in scanning mode if needed, and then obtain the list of WiFi access points. Finally connect to the access point.

{{Cmd|iwctl|output=<pre>
# station wlan0 show
                                 Station: wlan0
--------------------------------------------------------------------------------
  Settable  Property            Value
--------------------------------------------------------------------------------
            Scanning            no
            State               disconnected

# station wlan0 scan
# station wlan0 get-networks
                               Available networks
--------------------------------------------------------------------------------
    Network name                    Security  Signal
--------------------------------------------------------------------------------
    FRITZ!Box 7362 SL               psk       ***
    WLAN-105127                     psk       *

# station wlan0 connect "FRITZ!Box 7362 SL"
Type the network passphrase for FRITZ!Box 7362 SL psk.
Passphrase:
</pre>}}

== See also ==

* {{See also|Wifi}}
* {{See also|Wpa_supplicant}}

[[Category:Network management]]
[[Category:Authentication]]
