{{InfoBox stack
|{{InfoBox homepage|https://www3.lenovo.com/us/en/laptops/thinkpad/thinkpad-x/Thinkpad-X1-Yoga-2nd-Generation/p/22TP2TXX12Y|header=true}}
}}

== Hardware ==

{{RootCmd|lspci -nn|output=<pre>
00:00.0 Host bridge [0600]: Intel Corporation Device [8086:5904] (rev 02)
00:02.0 VGA compatible controller [0300]: Intel Corporation Device [8086:5916] (rev 02)
00:08.0 System peripheral [0880]: Intel Corporation Skylake Gaussian Mixture Model [8086:1911]
00:13.0 Non-VGA unclassified device [0000]: Intel Corporation Device [8086:9d35] (rev 21)
00:14.0 USB controller [0c03]: Intel Corporation Sunrise Point-LP USB 3.0 xHCI Controller [8086:9d2f] (rev 21)
00:14.2 Signal processing controller [1180]: Intel Corporation Sunrise Point-LP Thermal subsystem [8086:9d31] (rev 21)
00:16.0 Communication controller [0780]: Intel Corporation Sunrise Point-LP CSME HECI #1 [8086:9d3a] (rev 21)
00:16.3 Serial controller [0700]: Intel Corporation Device [8086:9d3d] (rev 21)
00:1c.0 PCI bridge [0604]: Intel Corporation Device [8086:9d10] (rev f1)
00:1c.2 PCI bridge [0604]: Intel Corporation Device [8086:9d12] (rev f1)
00:1c.4 PCI bridge [0604]: Intel Corporation Sunrise Point-LP PCI Express Root Port #5 [8086:9d14] (rev f1)
00:1d.0 PCI bridge [0604]: Intel Corporation Sunrise Point-LP PCI Express Root Port #9 [8086:9d18] (rev f1)
00:1f.0 ISA bridge [0601]: Intel Corporation Device [8086:9d4e] (rev 21)
00:1f.2 Memory controller [0580]: Intel Corporation Sunrise Point-LP PMC [8086:9d21] (rev 21)
00:1f.3 Audio device [0403]: Intel Corporation Device [8086:9d71] (rev 21)
00:1f.4 SMBus [0c05]: Intel Corporation Sunrise Point-LP SMBus [8086:9d23] (rev 21)
00:1f.6 Ethernet controller [0200]: Intel Corporation Ethernet Connection (4) I219-LM [8086:15d7] (rev 21)
02:00.0 Unassigned class [ff00]: Realtek Semiconductor Co., Ltd. RTS525A PCI Express Card Reader [10ec:525a] (rev 01)
04:00.0 Network controller [0280]: Intel Corporation Wireless 8265 / 8275 [8086:24fd] (rev 88)
05:00.0 Non-Volatile memory controller [0108]: Lenovo Device [17aa:0004]</pre>}}

{{RootCmd|lsusb|output=<pre>
Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 001 Device 004: ID 138a:0097 Validity Sensors, Inc.
Bus 001 Device 003: ID 04f2:b5ce Chicony Electronics Co., Ltd
Bus 001 Device 002: ID 8087:0a2b Intel Corp.
Bus 001 Device 005: ID 056a:50b8 Wacom Co., Ltd
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</pre>}}

=== Standard ===

{| class="table table-condensed table-striped" style="width: auto;"
! scope="col" width="20%" | Device
! scope="col" width="25%" | Make/model
! scope="col" width="10%" | Status
! scope="col" width="10%" | Vendor ID / Product ID
! scope="col" width="10%" | Kernel driver(s)
! scope="col" width="15%" | Kernel version
! scope="col" width="10%" | Notes
|-
| Ethernet network controller
| Intel Corporation Ethernet Connection (4) I219-LM (rev 21)
| {{Yes|Works}}
| 8086:15d7
| e1000e
| 4.12.12-gentoo
| —
|-
| Wireless network controller
| Intel Corporation Wireless 8265 / 8275 (rev 88)
| {{Yes|Works}}
| 8086:24fd
| iwlwifi
| 4.12.12-gentoo
| —
|-
| Bluetooth
| Intel Corporation Wireless
| {{Yes|Works}}
| 8087:0a2b
| btusb
| 4.12.12-gentoo
| —
|-
| Touchscreen
| Wacom Serial Pen and Multitouch Sensor
| {{Yes|Works}}
| 056a:50b8
| usbhid
| 4.12.12-gentoo
| —
|-
| Card Reader
| Realtek RTS525A PCI Express Card Reader
| {{Yes|Works}}
| 10ec:525a
| rtsx_pci
| 4.12.12-gentoo
| —
|-
| Fingerprint reader
| Validity Sensors, Inc. Fingerprint Sensor
| {{Partial|Not tested}}
| 138a:0097
| —
| 4.12.12-gentoo
| —
|-
| Integrated Webcam
| Chicony Electronics Co.,Ltd. Webcam
| {{Partial|Not tested}}
| 04f2:b5ce
| —
| 4.12.12-gentoo
| —
|-
| WWAN & GPS
| Qualcomm Snapdragon X7 LTE-A (Sierra Wireless EM7455)
| {{Partial|Not tested}}
| —
| —
| —
| —
|}

=== Accessories ===

{| class="table table-condensed table-striped" style="width: auto;"
! scope="col" width="15%" | Device
! scope="col" width="20%" | Make/model
! scope="col" width="10%" | Status
! scope="col" width="10%" | Vendor ID / Product ID
! scope="col" width="10%" | Kernel driver(s)
! scope="col" width="15%" | Kernel version
! scope="col" width="20%" | Notes
|-
| Dock
| ThinkPad Thunderbolt Dock
| {{Partial|Not tested}}
| -
| -
| -
| -
|}

== Installation ==
Apply the additional lines below to the make.conf file of Portage.

{{Note|The CPU_FLAGS_X86 below are for Intel i7-7600U, 2.8 / 3.9 GHz! If your model has another CPU, discover the flags for your CPU with <code>cpuid2cpuflags</code>.}}

{{FileBox|filename=/etc/portage/make.conf|1=
CPU_FLAGS_X86="aes avx avx2 fma3 mmx mmxext pclmul popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3"
INPUT_DEVICES="libinput wacom"
VIDEO_CARDS="intel i965"
GRUB_PLATFORMS="efi-64"
}}
Then you should update the world to recompile all installed packages with the new flags.
{{RootCmd|emerge --ask --changed-use --deep @world}}

=== Firmware ===
Install the package {{Package|sys-kernel/linux-firmware}} which contains the wifi device driver.
{{Emerge|sys-kernel/linux-firmware}}

=== Kernel ===

{{KernelBox|title=NVME SSD|1=
Device Drivers  --->
   <*>  NVM Express block device
}}

{{KernelBox|title=ACPI|1=
Generic Driver Options  --->
   [*] X86 Platform Specific Device Drivers  --->
      <*>   ThinkPad ACPI Laptop Extras
      [*]     Console audio control ALSA interface
      [ ]     Maintainer debug facilities
      [ ]     Verbose debug mode
      [ ]     Allow control of important LEDs (unsafe)
      [*]     Video output control support
      [*]     Support NVRAM polling for hot keys
}}

{{KernelBox|title=Ethernet controller|1=
Generic Driver Options  --->
   [*] Network device support  ---
      [*]   Ethernet driver support  --->
         [*]   Intel devices
         <*>     Intel(R) PRO/1000 PCI-Express Gigabit Ethernet support
}}


Building the following device driver as module may be appropriate as it requires firmware during initialization.
{{KernelBox|title=Wireless network controller|1=
Generic Driver Options  --->
   [*] Network device support  ---
      [*]   Wireless LAN  --->
         [*]   Intel devices
         <M>     Intel Wireless WiFi Next Gen AGN - Wireless-N/Advanced-N/Ultimate-N (iwlwifi)
         <M>       Intel Wireless WiFi MVM Firmware support
}}

{{KernelBox|title=Audio device|1=
Generic Driver Options  --->
   <*> Sound card support  --->
      <*>   Advanced Linux Sound Architecture  --->
         [*]   PCI sound devices  --->
               HD-Audio  --->
                  <*> HD Audio PCI
                  <*> Build Conexant HD-audio codec support
}}

{{KernelBox|title=Bluetooth|1=
-*- Networking support  --->
   <*>   Bluetooth subsystem support  --->
            Bluetooth device drivers  --->
               <*> HCI USB driver
               [*]   Broadcom protocol support
}}

{{KernelBox|title=Touchscreen|1=
No special options needed.
}}

{{KernelBox|title=USB 3.0 & Card reader|1=
Device Drivers  --->
   Generic Driver Options  --->
      [*] USB support  --->
         <*>   Support for Host-side USB
         <*>   xHCI HCD (USB 3.0) support
         <*>     USB Mass Storage support
         <*>       Realtek Card Reader support
         [*]         Realtek Card Reader autosuspend support
   <*> MMC/SD/SDIO card support  --->
      <*>   MMC block device driver
      (8)     Number of minors per block device
      [*]     Use bounce buffer for simple hosts
      <*>   Secure Digital Host Controller Interface support
      <*>     SDHCI support on PCI bus
      <*>   Realtek PCI-E SD/MMC Card Interface Driver 
}}

=== Emerge ===

Fingerprint reader is recognized by the following library.
{{Emerge|sys-auth/libfprint}}

== Configuration ==

(Explain any additional configuration or special customization for this hardware platform. Could be anything from BIOS settings to assigning proper media key functionality.)

=== Finger/Pen Input ===

For [[X11]] to work with finger/pen input, pull in {{Package|x11-drivers/xf86-input-wacom}} by inserting <code>wacom</code> argument into the indicated variable in the file shown below and run the following command for the configuration to emerge.
{{FileBox|filename=/etc/portage/make.conf|1=
INPUT_DEVICES="... wacom"
}}
{{RootCmd|emerge --ask --deep --newuse @world}}

=== Trackpoint scrolling ===
Add the following Xorg configuration file so that the driver is selected for the devices we want.

{{FileBox|filename=/etc/X11/xorg.conf.d/90-libinput.conf|lang=xorg_conf|1=
Section "InputClass"
        Identifier "libinput pointer catchall"
        MatchIsPointer "on"
        MatchDevicePath "/dev/input/event*"
        Driver "libinput"
EndSection

Section "InputClass"
        Identifier "libinput touchpad catchall"
        MatchIsTouchpad "on"
        MatchDevicePath "/dev/input/event*"
        Driver "libinput"
EndSection
}}
After a reboot/xorg-server restart, trackpoint scrolling should work.

== Troubleshooting ==

<to be filled>

[[Category:Laptops]]
