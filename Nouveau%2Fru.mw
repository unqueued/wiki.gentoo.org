<languages />
{{InfoBox stack
|{{InfoBox wikipedia|nouveau (software)|header=true}}
}}

'''nouveau''' — это открытый драйвер для графических карт [[nVidia|NVIDIA]].

== Ограничения ==

Будучи проектом с открытым исходным кодом, работающем на проприентарном оборудовании, у Nouveau есть некоторые ограничения, которые отсутствуют у закрытых [[NVidia/nvidia-drivers/ru|nvidia-drivers]]. Тем не менее, драйвер от Nouveau постоянно развиваются, так что эти ограничения могут изменяться со временем.

== Установка ==

=== Ядро ===

Активируйте следующие параметры ядра:

{{KernelBox|title=Включение nouveau|1=
Device Drivers  --->
   Graphics support  --->
      <*> Direct Rendering Manager (XFree86 4.1.0 and higher DRI support) --->
         <*> Enable legacy fbdev support for your modesetting driver
      <*> Nouveau (NVIDIA) cards
}}

=== Firmware ===

Some cards, beginning with the Kepler cards, need firmware.
Support can be obtained by installing {{Package|sys-kernel/linux-firmware}} and configuring nouveau to be a module (M) in the kernel.

{{Emerge|sys-kernel/linux-firmware}}

=== Драйвер ===

{{VIDEO_CARDS|nouveau}}

=== Udev ===

Если установлен проприентарный драйвер от NVIDIA, вместе с ними также установится файл правил udev в {{Path|/lib/udev/rules.d/99-nvidia.rules}}. Если попытаться использовать драйвер nouveau с такими же файлом правил, файл лога X11 каждые 10мс будет заполняться такими сообщениями:

{{FileBox|filename=/var/log/Xorg.0.log|title=Результат недействительных правил udev от nvidia-drivers|1=
 <nowiki>
 [   180.669] (II) NOUVEAU(0): EDID vendor "SAM", prod id 430
 [   180.669] (II) NOUVEAU(0): Using hsync ranges from config file
 [   180.669] (II) NOUVEAU(0): Using vrefresh ranges from config file
 [   180.669] (II) NOUVEAU(0): Printing DDC gathered Modelines:
 [   180.669] (II) NOUVEAU(0): Modeline "1600x1200"x0.0  162.00  1600 1664 1856 2160  1200 1201 1204 1250 +hsync +vsync (75.0 kHz eP)
 [   180.669] (II) NOUVEAU(0): Modeline "800x600"x0.0   40.00  800 840 968 1056  600 601 605 628 +hsync +vsync (37.9 kHz e)
 [   180.669] (II) NOUVEAU(0): Modeline "800x600"x0.0   36.00  800 824 896 1024  600 601 603 625 +hsync +vsync (35.2 kHz e)
 [...]
 [   180.669] (II) NOUVEAU(0): Modeline "1152x864"x0.0  108.00  1152 1216 1344 1600  864 865 868 900 +hsync +vsync (67.5 kHz e)
 [   180.669] (II) NOUVEAU(0): Modeline "1280x1024"x0.0  108.00  1280 1328 1440 1688  1024 1025 1028 1066 +hsync +vsync (64.0 kHz e)
 [   180.669] (II) NOUVEAU(0): Modeline "1280x960"x0.0  108.00  1280 1376 1488 1800  960 961 964 1000 +hsync +vsync (60.0 kHz e)
 [   180.669] removing GPU device /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card2 /dev/dri/card2
 </nowiki>
}}

Чтобы предотвратить это (без удаления пакета {{Package|x11-drivers/nvidia-drivers}}), просто удалите/переместите/переименуйте файл правил udev {{Path|/lib/udev/rules.d/99-nvidia.rules}}, так чтобы он больше не использовался udev (смотрите [[Udev/ru#Расширенная конфигурация|расширенная конфигурация udev]]). Обратите внимание, что при следующем обновлении nvidia-drivers этот файл будет снова переустановлен, поэтому рассмотрите вариант удаления nvidia-drivers.

== Конфигурация ==

=== Разрешения ===

{{VIDEO CARDS/Permissions}}

=== xorg.conf ===

[[X server]] разработан для работы «из коробки», поэтому нет необходимости вручную редактировать файлы настройки. Сервер сам должен определить и настроить устройства - мониторы, клавиатуры и мыши.

Тем не менее, файл {{Path|[[xorg.conf]]}} это основной конфигурационный файл X-сервера.

== Ограничения ==

Некоторые текущие вопросы или недостатки по сравнению с закрытыми {{Package|x11-drivers/nvidia-drivers}} указаны ниже:

* Производительность (особенно 3D) на одной и той же карте/чипе может быть значительно хуже, чем при использовании nvidia-drivers.
* При работе на более высоких частотах обновления (более 60 Гц) может произойти ошибка.
* Дополнительные возможности некоторых видео-карт NVIDIA (например, несколько мониторов на картах Quadro без SLI) может работать не корректно.


== Устранение проблем ==

* {{Bug|xf86-video-nouveau|search=package}}
* {{Bug|xorg|site=fdo|search=product|component=Driver%2Fnouveau}}

=== Проблемы встречающиеся при использовании нескольких мониторов ===

When the screen freezes often with possible EDID probes while using dual monitors/displays, try adding <code>video=VGA-1:e</code> or <code>video=VGA-1:d</code> (enable or disable respectively) to the <var>GRUB_CMDLINE_LINUX_DEFAULT</var> variable in the {{Path|/etc/default/grub}} file. With [[GRUB|grub-legacy]], edit the {{Path|grub.cfg}} file directly and add it as command line options. In either case, make sure to substitute the name of the monitor listed within {{c|dmesg}} or {{Path|/var/log/Xorg.0.log}} (ie. CRT-1, VGA-1, LVDS-1, DVI-1, ...)

For instance, on a Dell Inspiron 8100 laptop with a connected external display connected via the laptop's external VGA port, a possible command line is: <code>video=LVDS-1:1280x1024@60 video=VGA-1:1280x1024@60</code>. The EDID (DRM) probe on the external VGA connected display is still causing freezing during nouveau/drm load for the author, but at least it's usable if the display is connected after grub is loaded and prior to the nouveau/drm modules loading. And with the prior mentioned command line LVDS/VGA resolutions, the displays are cloned and centred with somewhat correct resolutions for cloned displays.

=== NVIDIA Optimus ===

When using a laptop with NVIDIA's Optimus technology (usually found in laptops built in 2010 and later), everything will be passed through the integrated graphics controller (usually Intel) before it gets to the discreet video card (NVIDIA), which can cause a lot of otherwise unexplained problems when enabled. There are a few ways to handle this, but the simplest is to disable Optimus through the BIOS (normally accessed by pressing {{Key|F12}} during boot). This will result in increased power consumption (decreased battery life, increased running temperature), as the NVIDIA card will now be handling all of the work all of the time.

== Смотрите также ==

* [[nVidia/nvidia-drivers]] - бинарный драйвер для карт NVIDIA с закрытым исходным кодом
* [[nouveau & nvidia-drivers switching]]
* [[Hprofile#VGA]] - поддержка "живого" переключения между графическими картами

== Внешние ресурсы ==

* [http://nouveau.freedesktop.org/wiki/VideoAcceleration/ Nouveau Video Acceleration]

[[Category:Graphics Adapters]]
