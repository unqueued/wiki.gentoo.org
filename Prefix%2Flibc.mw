This is a project to support libc inside a [[[[Project:Prefix|Prefix]]]], so called "RAP" (Rap Ain't Prefix). See also [[Project:Android]]. A general use case is for Prefix on RHEL 5 (CentOS 5 ans SL 5), where the host glibc-2.5 is too old to support modern features as fortify ({{Bug|289757}}).

Classical Prefix is based on rpath. The differences are summerized in this table.

{| class="wikitable" style="text-align: center"
!
! Prefix-rpath
! Prefix/libc (sysroot method, official)
! Prefix/libc (native paths method, experimental)
|-
| feature name || prefix-rpath || prefix-standalone || ||
|-
| linux profile || prefix/linux || prefix/linux-standalone || ||
|-
| portage tree || [https://gitweb.gentoo.org/repo/proj/prefix.git prefix.git] || [https://gitweb.gentoo.org/repo/gentoo.git/ gentoo.git] overlaied with [https://gitweb.gentoo.org/proj/android.git/ android.git] || ||
|-
| {{Package|sys-devel/gcc}} || || EXTRA_ECONF+=(--with-sysroot=$EPREFIX) but donot pass --sysroot to ld, prefix dynamic loader || change NATIVE_SYSTEM_HEADER_DIR, STANDARD_STARTFILE_PREFIX, prefix dynamic loader
|-
| {{Package|sys-devel/binutils}} || || Prefix NATIVE_LIB_DIRS || --with-lib-path=${EPREFIX}/usr/lib:${EPREFIX}/lib
|-
| {{Package|sys-devel/binutils-config}} || inject -rpath and -R ||  ||
|-
| {{Package|sys-libs/glibc}} || {{No}} || {{Yes}} Prefix hardcoded /etc,/usr,/var,/bin || {{Yes}}
|}

{{Note|nss is part of glibc, which resolves uid/gid. If your user is in LDAP, be sure to set up nss_ldap against glibc in new Prefix. Host nss_ldap library may be too old to be loaded by new glibc. Failure of interpreting uid/gid may result in disfunctional portage.}}

== Bootstrap Script ==

Download the Gentoo RAP [http://dev.gentoo.org/~heroxbd/bootstrap-rap.sh bootstrap-rap.sh]. You can use various ways to obtain the script and get it to a place where you can execute it. Once in position, preform the following commands:
{{CodeBox|lang=bash|title=Start the interactive bootstrap script|1=
$ chmod 755 bootstrap-rap.sh
$ ./bootstrap-rap.sh
(follow the instructions)
}}

That's all! The script will guide you through the full process, and tells you how to start your freshly bootstrapped Gentoo RAP system if it successfully runs up till the end. In normal cases, you don't need any more than just this.

== Tested Distributions ==
Although having further possibilities, RAP supports Linux distributions only.  The following tables tracks the tested distributions with the script.

{| class="wikitable" style="text-align: center"
! Distribution 
! Version
! linux
! glibc
! gcc
! binutils
! Tester
! Works?
|-
| Debian || sid || 4.3.0 || 2.22 || 5.3.1 || 2.26 || [[User:heroxbd|heroxbd]] || {{Yes}}
|}

== See Also ==
A similar project, [http://sourceforge.net/projects/gentooandroid/ Gentoo On Unrooted Android]
