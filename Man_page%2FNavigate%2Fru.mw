<languages />

{{Metadata|abstract=Данная статья показывает, как передвигаться по man-страницам с использованием программы man.}}

Это руководство показывает как передвигаться по страницам справки, используя команду man.

== Введение ==

=== Программа man ===

Каждый использовал ее в какой-то момент своей работы в Linux. Её - команду <tt>man</tt>. В то время как программа man сама по себе кажется скорее простой в использовании, она имеет несколько дополнительных возможностей, кроме простого прокручивания страницы. Этот документ предназначен для того, чтобы пролить свет на эти возможности.

=== Структура страниц справки ===

Страницы справки в основном хранятся в каталоге {{Path|/usr/share/man}}. Однако, если путь к странице справки указан в переменной среды <code>MANPATH</code>, команда man сможет ее найти. Gentoo в основном хранит переменную <code>MANPATH</code> в {{Path|/etc/env.d}} . Внутри указанных в начале каталогов расположены несколько папок со структурой manX, где X - это номер секции. Например, стандартное расположение страниц справки может выглядеть следующим образом: 

{{Cmd|ls /usr/share/man {{!}} grep man|output=<pre>
man0p
man1
man1p
man2
man3
man3p
man4
man5
man6
man7
man8
man9
mann
</pre>
}}

Действующая нумерация разделов кажется достаточно стандартной. Однако, обратите внимание на папки {{Path|mann}} и несколько папок {{Path|man#p}}. Следующая таблица перечисляет каталоги со страницами справки, расположенные выше и то, что в них содержится. 

{| class="table" style="text-align: left;" 
|- 
! Man Directory
! Description
|- 
| man0p
| The "'''p'''" here stands for POSIX, as with the other directories with p in their names. Man pages in this directory describe the functionality of various POSIX header files.
|- 
| man1
| This section is for standard commands. Most programs will put their man pages here, so this section tends to be the largest.
|- 
| man1p
| This section describes the POSIX versions of the commands described in 1p. Since it only describes basic commands, it is much smaller than man1.
|- 
| man2
| This section describes Linux kernel system calls.
|- 
| man3
| This section describes standard C library functions.
|- 
| man4
| This section describes special devices. These devices are generally kernel oriented, but {{Package|x11-base/xorg-x11}} has entries in here as well.
|- 
| man5
| This section describes both the makeup of certain files and what files a program uses. Some reading this document may be familiar with references to the <tt>man 5 portage</tt> command for a description of Portage's file structure or the <tt>man 5 make.conf</tt> command for {{Path|make.conf}}'s makeup.
|- 
| man6
| This section introduces games and other special toys.
|- 
| man7
| This section describes standards and other miscellaneous items. These standards can include things such as charsets, SQL statements, ISO standards and regular expressions.
|- 
| man8
| This section describes administrative commands (those usually run by the root user).
|- 
| man9
| This section is somewhat sparse, but is meant to contain documentation for various parts of the kernel.
|- 
| mann
| This section is mainly used by {{Package|dev-lang/tcl}} or {{Package|dev-lang/tk}}. The "'''n'''" stands for new.
|-
|}

В то время как это не самый полный и подробный список, он охватывает те страницы справки в которых заинтересовано большинство. Однако, иногда Вы можете узнать что делает тот или иной раздел просто посмотрев эту таблицу. В следующей главе рассмотрено использование команды man для прохода по этой структуре.

== Работа со структурой страниц справки ==

=== Просмотр структуры страниц справки ===

Now that we understand the man layout, we can begin to look it over for commands. Sometimes we may need to narrow down what man page we want. The first way would be addressing by section. To found out a description of a section, one can use man <section> intro like so: 

{{Cmd|man 3 intro|output=<pre>
## (Output slightly modified to fit the document properly)
INTRO(3)               Linux Programmer's Manual                INTRO(3)
 
 
 
NAME
       intro - Introduction to library functions
 
DESCRIPTION
       This chapter describes all library functions excluding the library
       functions described in chapter 2, which implement system calls.
       There are various function groups which can be identified by a
       letter which is appended to the chapter number:
....
</pre>
}}

Unfortunately, this doesn't always work! However, luckily for us there is another way to search for commands that may return multiple results (such as a library call and system command having the same name). To do so, we use the <code>-K</code> option to the man command like so: 

{{Cmd|man -K sleep|output=<pre>
/usr/share/man/man0p/time.h.0p.gz? [ynq] n
/usr/share/man/man0p/unistd.h.0p.gz? [ynq] n
/usr/share/man/man2/alarm.2.gz? [ynq] n
/usr/share/man/man2/pause.2.gz? [ynq] n
/usr/share/man/man2/futex.2.gz? [ynq] n
/usr/share/man/man2/nanosleep.2.gz? [ynq] y
/usr/share/man/man2/semop.2.gz? [ynq] q
</pre>
}}

Иногда, результат может быть намного большим. В этом случае лучшим выходом может быть указание большего количества специфических ключевых слов. Теперь, когда мы знаем где найти man-страницу, в следующей секции мы рассмотрим просмотр этих страниц. 

=== Просмотр man-страниц ===

Viewing man pages can be done in 2 ways, first is with <tt><nowiki>man [man page name]</nowiki></tt>. The second way is <tt>man <section> [man page name]</tt>. Let's take {{Package|sys-devel/bc}} for example. I can view either the first man page that comes up on '''bc''' (which would be section 1, because it is the lowest section containing a man page on '''bc'''): 

{{Cmd|man bc|output=<pre>
bc(1)                                            bc(1)
 
 
NAME
       bc - An arbitrary precision calculator language
...
</pre>
}}

Однако, что если мне нужна POSIX-версия? Тогда я могу использовать следующую форму записи. 

{{Cmd|man 1p bc|output=<pre>
BC(P)        POSIX Programmer's Manual           BC(P)
 
 
NAME
       bc - arbitrary-precision arithmetic language
...
</pre>
}}

И страница показана. Теперь, когда мы получили требуемую страницу справки, самое время с ней поработать. В следующем разделе мы рассмотрим навигацию и поиск.

=== Навигация и поиск по man-страницам ===

Navigating a man page is fairly simple. To move up and down line by line, use the {{Key|Up}} and {{Key|Down}} arrow keys. To move up page by page, you can use the {{Key|Page up}} and {{Key|Page down}} keys. Do however note that these navigation instructions assume the environmental <code>PAGER</code> variable is set to use the default pager, <tt>less</tt>. Less also has a few other commands for navigation, but the arrow keys usually suffice: 

{{CodeBox|title=Additional less navigation keys|1=
  e  ^E  j  ^N  CR  *  Forward  one line   (or N lines).
  y  ^Y  k  ^K  ^P  *  Backward one line   (or N lines).
  f  ^F  ^V  SPACE  *  Forward  one window (or N lines).
  b  ^B  ESC-v      *  Backward one window (or N lines).
  z                 *  Forward  one window (and set window to N).
  w                 *  Backward one window (and set window to N).
  ESC-SPACE         *  Forward  one window, but don't stop at end-of-file.
  d  ^D             *  Forward  one half-window (and set half-window to N).
  u  ^U             *  Backward one half-window (and set half-window to N).
  ESC-)  RightArrow *  Shift view right  one half screen width (or N positions).
  ESC-(  LeftArrow  *  Shift view left one half screen width (or N positions).
  F                    Forward forever; like "tail -f".
}}

Searching, however, is more interesting. The two most basic searches are <code>/pattern</code> and <code>?pattern</code>. The first version searches forwards, and the second searches backwards. <code>pattern</code> is a regular expression pattern that is described in <tt>man 7 regex</tt>. Let's take for example searching for the <code>-D</code> option to <tt>emerge</tt>. First, bring up the emerge man page: 

{{Cmd|man emerge}}

Затем, на экране, нажмите клавишу {{Key|/}} для вызова командной строки для поиска вперед и введите наш запрос: 

{{CodeBox|title=Bringing up the forward search prompt|1=
     gracefully handles updating installed packages to newer releases as well.
     It handles both source and binary packages, and it can be used to create
     binary packages for distribution.
 
EBUILDS, TBZ2S, CLASSES AND DEPENDENCIES
/\-D
}}

{{Note/ru|Символ <code>\</code> требуется для экранирования символа <code>-</code> , который в обычном случае мог бы использоваться как часть регулярного выражения.}}

Эта команда выполнит поиск на данной man-странице и сфокусируется на искомом элементе. 

{{CodeBox|title=Forward search results|1=
  --deep (-D)
        When used in conjunction with --update, this flag forces emerge to consider the entire
        dependency tree of packages, instead of checking only the immediate dependencies of
        the packages.  As an example, this catches updates in libraries that are not directly
        listed in the  dependencies of a package.
}}

If you hit a search result by accident and want to continue searching for the same results, simply press the {{Key|/}} key again, and press {{Key|Enter}} (i.e. don't put a pattern it). This will cause the search to default to the last pattern used. Now with some man pages, options are listed, then explained later on. Take the man 5 portage man page. It lists the files used, then explains their usage. Searching forward a few times would return the results, but there's an easier way to handle this, with the second search form, backwards searching. Let's use this to find the description on {{Path|package.unmask}}. First, bring up man 5 portage: 

{{Cmd|man 5 portage}}

Теперь, нажмите {{Key|Shift}} + {{Key|g}}. Это перенесет вас на конец страницы: 

{{CodeBox|title=End of the man page after SHIFT+g|1=
SEE ALSO
       emerge(1), ebuild(1), ebuild(5), make.conf(5)
 
Portage 2.0.51        Jan 2004            PORTAGE(5)
lines 418-442/442 (END)
}}

Now we'll go ahead and enter the pattern to search for with the <code>?pattern</code> backwards search option. First press the {{Key|?}} key to bring up the prompt, and then enter in {{Path|package.unmask}}, our query: 

{{CodeBox|title=Specifying our search|1=
SEE ALSO
       emerge(1), ebuild(1), ebuild(5), make.conf(5)
 
Portage 2.0.51        Jan 2004           PORTAGE(5)
?package.unmask
}}

Затем нажмите {{Key|Enter}} для получения результата: 

{{CodeBox|title=Our search result|1=
  package.unmask
       Just like package.mask above, except here you list packages you want to unmask.
       Useful for overriding the global  package.mask  file (see below).  Note that
       this does not override packages that are masked via KEYWORDS.
...
}}

И поиск завершен! Заметьте то, что как и в случае с <code>/</code> , использование поиска <code>?</code> без строки шаблона использует последний шаблон для поиска.

=== Выводы ===

Это завершает наше руководство по команде man. Надеемся, что это пролило некоторый свет на навигацию по страницам справки, и, может быть, даже дало несколько новых советов более опытным пользователям. Для тех, кто предпочитает альтернативные способы навигации по man-страницам, также доступно следующее: 

* {{Package|app-text/man2html}} — программа для конвертации man-страниц в html.
* {{Package|app-text/tkman}} — просмотрщик man-страниц, основанный на tk.

Also the KDE web browser {{Package|kde-base/konqueror}} can browse man pages using the <tt>man:</tt> syntax in the address bar.
{{Migrated|originalauthors=Chris White}}
