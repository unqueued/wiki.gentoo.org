<languages />
{{InfoBox stack
|{{InfoBox homepage|https://www.cups.org/|header=true}}
|{{InfoBox wikipedia|CUPS}}
|{{InfoBox github|apple/cups}}
}}
{{Metadata|abstract=このドキュメントでは、CUPSとSambaを用いたプリンタのインストールとメンテナンスをカバーしています。これは、ローカルインストールやネットワークインストールをカバーし、他のオペレーティングシステムから共有プリンタを使用する手順が含まれています。}}

このドキュメントでは、CUPSとSambaを用いたプリンタのインストールとメンテナンスをカバーしています。これは、ローカルインストールやネットワークインストールをカバーし、他のオペレーティングシステムから共有プリンタを使用する手順が含まれています。印刷文書のための{{c|lp}}または{{c|lpr}}コマンドを使用しての詳細については、[https://www.cups.org/doc/options.html CUPS' 優れた上流のマニュアル]を参照してください。

== 印刷と Gentoo Linux ==

=== 適切なツールを使う ===

Linuxは、プリンタの素晴らしいサポートを持っています。仕事のための適切なツールはCUPSと呼ばれている([http://www.cups.org Common Unix Printing System])。プロジェクトが始まった1999年から、CUPSのインストールとメンテナンスは劇的に改善されました。 

この文書では、セットアップにローカルまたはネットワークプリンタをCUPSを使用する方法を説明します。プロジェクトがより進んだ使用法に関する
[http://www.cups.org/documentation.php 素晴らしいドキュメント]を持っているので、それはあまりにも多くの詳細を行くことはありません。 

== インストール ==

=== カーネル ===

ユーザーがシステムにプリンタをインストールしたい場合、最初のステップは、プリンタがシステムに接続する方法を知ることです。それは、LPTやUSBなどのローカルポートを介して接続されていますか？それがネットワーク接続されている場合は、それがインターネット印刷プロトコル（IPP）またはMicrosoft Windows CIFSプロトコル（Microsoft Windowsの共有）を使用していますか？ 

次のいくつかのセクションでは、最小限のカーネルコンフィギュレーションは、Gentooに接続されたプリンタを取得するために必要なものについて説明します。もちろん、これは''どのように''プリンタは便宜のための命令が分離されているので、システムに接続されようとしているに依存します。

{{Path|/usr/src/linux}}に移動し、カーネルコンフィグに入るために{{c|make menuconfig}}を実行します。カーネルの設定に{{c|genkernel}}を使用した場合でも、誤りがないか確認するため、これらのステップを行うべきです。genkernelにシステム全体を自動的に設定させて頼らないようにしてください;印刷は、構成設定を自動的に設定することが難しい分野です。

次の設定例では、必要なサポートをモジュールではなくカーネルの''中に''追加しています。カーネルをこの方法で構築することは必須ではありません;もしモジュールでのサポートを簡単に追加できると判断したならば、適切なモジュールを読み込むのを忘れないようにしましょう！ 

それでは、カーネルを設定(あるいはチェック)するため、適切な項に移動してください。

==== ローカルで接続されたプリンタ (LPT) ====

LPTポートは、パラレルプリンターポートを表すために一般的に使用されています。まず、パラレルポートのサポートを有効化し、それから(SPARCシステムを使っているのでなければ)PC形式のパラレルポートのサポートを有効化する必要があります。そしてその後、パラレルプリンターサポートを有効にします。 

{{KernelBox|title=パラレルポートプリンタの設定|<pre>
Device Drivers -->
  <*> Parallel port support
  <*> PC-style hardware
  [*] IEEE 1284 transfer modes
  Character Devices -->
    <*> Parallel printer support
</pre>
}}

{{Note|ユーザーによっては、<code>Parallel port support</code>セクションの中の、その他のオプションを有効化するかもしれません。詳しくは、カーネルコンフィグの<code>Help</code>機能をチェックしてください。}}

これで終わりです！ カーネルコンフィグを終了して、[[Kernel/Rebuild|カーネルを再ビルドしてください]]。

CUPSの設定を続けて行いましょう。

==== ローカルで接続されたプリンタ (USB) ====

USBでの印刷は、[[#インストール|USB USEフラグが有効化された]]CUPSでサポートされています。これは、libusbライブラリをユーザースペースでのUSBサポートのため使用しています。

いくつかの古いソフトウェアは、今でもカーネル内でのUSBプリンターサポートを要求します。モジュールとしてビルドされた場合、そのモジュールは{{Path|usblp}}と呼ばれます:

{{KernelBox|title=USB プリンタサポート|1=
Symbol: USB_PRINTER [=n]
Type  :tristate
Prompt: USB Printer support
  Location:
    -> Device Drivers
      -> USB support (USB_SUPPORT [=y])
(1)     -> Support for Host-side USB (USB [=y])
  Defined at drivers/usb/class/Kconfig:21
  Depends on: USB_SUPPORT [=y] && USB [=y]
}}

しかしながら、カーネル内でのUSBプリンターサポートは、[https://forums.gentoo.org/viewtopic-t-1053530-start-10.html obsolete扱い]です。必要な場合に限り、使用を続けてください。

==== リモートで接続されたプリンタ (IPP と LPD) ====

Internet Printing Protocol、あるいは[[wikipedia:Line_Printer_Daemon_protocol|Line Printer Daemon protocol]]を通じてリモートで接続されたプリンターに接続可能にするには、カーネルのネットワークサポートが必要です。カーネルには既にそれがあると仮定して、CUPSの設定を続けます。

==== リモートで接続されたプリンタ (CIFS) ====

カーネルが[[Samba/Guide#Mounting_a_Windows_or_Samba_share_in_GNU.2FLinux|CIFSをサポート]]している必要があります: 

{{KernelBox|title=CIFS プリンタの設定|<pre>
File systems -->
  Network File Systems -->
    <*> CIFS support (advanced network filesystem, SMBFS successor) 
</pre>
}}

CIFSの設定が完了したら、カーネルコンフィグを終了してカーネルを再ビルドします。システムを再起動する前に、(必要なら{{Path|/boot}}をマウントしてから)新しいカーネルイメージを{{Path|/boot}}へコピーし、ブートローダーの設定を更新するのを忘れないようにしましょう。これらのステップをどのように実行するかについては、上の'''LPTプリンターの設定'''にあるrootコマンドを参照してください。

それでは、CUPSのインストールにおける次のステップに進みましょう。

==== USE フラグ ====

CUPSには、いくつかの関心を持つかもしれない任意の機能があります。それらの機能を有効化あるいは無効化するには、それらに関連付けられたUSEフラグを利用します。

{{USEflag|package=net-print/cups}}

現在のUSEフラグの設定を確認します。CUPSのみについて現在のUSEの設定から外すには、適切なUSEフラグを{{Path|/etc/portage/package.use}}ファイルに追加します。 

{{RootCmd|emerge -pv net-print/cups|output=<pre>
[ebuild N     ] net-print/cups-1.7.3  USE="X acl dbus pam ssl threads usb -debug -gnutls -java -kerberos -lprng-compat -python (-selinux) -static-libs -systemd -xinetd -zeroconf" ABI_X86="(64) (-32) (-x32)" LINGUAS="ca es fr it ja pt_BR ru" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7" 0 kB
</pre>}}

=== Emerge ===

結果に満足したら、PortageにCUPSをインストールするよう要求します:

{{Emerge|net-print/cups}}

=== 追加のソフトウェア ===

SAMBAサポートを有効にするには、{{Package|net-fs/samba}}がCUPSサポートとともにインストールされている必要があります。{{Path|/etc/portage/package.use}}ファイルまたはディレクトリを更新して、<code>cups</code> USEフラグを有効にします:

{{FileBox|filename=/etc/portage/package.use|title=samba で、cups の USE フラグを有効にする|1=
net-fs/samba cups
}}

そして、Sambaを(再)インストールします:

{{Emerge|net-fs/samba}}

== 設定 ==

=== 印刷グループ ===

印刷をする必要があるすべてのユーザーは、<code>lp</code>グループに追加されていなければなりません:

{{RootCmd|gpasswd -a username lp}}

CUPSのウェブインターフェースを使ってプリンターを追加したり編集したりするためには、これらの設定を編集することが許可されているすべてのシステムユーザーがlpadminグループに所属していなければなりません:

{{RootCmd|gpasswd -a username lpadmin}}

=== サービス ===

==== OpenRC ====

プリンターがシステムにローカルで接続されており、かつプリンターがブートの度に利用可能でなければならない場合には、CUPSデーモンが起動時に自動的に読み込まれる必要があります。CUPSデーモンを開始する前に、プリンターが接続され、電源が入っていることを確認してください。 

{{RootCmd
|service cupsd start
|rc-update add cupsd default
}}

==== systemd ====

CUPSデーモンを直ちに開始し、またシステムが起動したときに開始されるようにするには:

{{RootCmd
|systemctl start cups.service
|systemctl enable cups.service
}}

=== HTTP インターフェース ===

サービスがいったん開始されると、認証されたユーザーはプリンターを追加することができます。root(デフォルト)およびlpadminグループのすべてのユーザーが利用可能です。ウェブブラウザーで以下のURLを開いてください:

http://localhost:631/

=== ファイル ===

The default CUPS server configuration located in {{Path|/etc/cups/cupsd.conf}} is sufficient for most users. However, some users might need to make changes to the CUPS configuration.

次の項では、しばしば必要になるいくつかの変更を扱います: 

* 他のシステムに、このLinuxワークステーションに接続されているプリンターの使用を許可する。
* リモートシステムからCUPS管理へのアクセスを許可する。
* CUPSを、Windows PCLドライバーをサポートするように設定する。これは、WindowsシステムがSAMBAで共有されたプリンターを使用する場合に推奨されます。WindowsのドライバーのほとんどはPCLドライバーです。
* このシステムを、他のシステムに接続されたプリンターを(Windows共有でなく)使用するように設定する。

=== リモートでのプリンターアクセス ===

IPPを通じて他のシステムにプリンターを使用させるには、{{Path|/etc/cups/cupsd.conf}}ファイルでプリンターへの明示的なアクセスを許可する必要があります。SAMBAを使用してプリンターを共有する場合には、この変更は不要です。 

お好みのテキストエディターで{{Path|/etc/cups/cupsd.conf}}を開き、プリンターに到達できる必要があるシステムについて<code>Allow</code>行を追加します。次の例では、localhostおよびIPアドレスが<code>192.168.0</code>で始まるすべてのシステムからプリンターへのアクセスを許可しています。 

{{FileBox|filename=/etc/cups/cupsd.conf|title=プリンターへのリモートアクセスを許可する|lang=apache|1=
<Location />
  Order allow,deny
  Allow localhost
  Allow from 192.168.0.*
</Location>
}}

この行は、ネットワークのクライアントに対してブラウジング情報をブロードキャストします;これにより、プリンターが利用可能な時にネットワークユーザーに通知がなされます:

{{FileBox|filename=/etc/cups/cupsd.conf|title=情報をブロードキャストする|lang=apache|1=
BrowseAddress 192.168.0.*:631
}}

ネットワーク上の他のマシンからの印刷リクエストに反応するため、CUPSがリッスンするポートも指定する必要があります:

{{FileBox|filename=/etc/cups/cupsd.conf|title=ポートの設定|lang=apache|1=
Listen *:631
#Listen localhost:631
}}

{{Note|CUPS 1.1(現在は非推奨)を使用している場合、リモートの印刷リクエストのためには異なる構文が必要です:
{{CodeBox|title=非推奨のCUPS 1.1での設定|1=
Port 631
(以下の2行がコメントアウトされていることを確認してください)
#Listen 127.0.0.1:631
#Listen localhost:631
}}
}}

=== CUPSのリモート管理 ===

リモートでの管理が必要なら、localhostだけでなく、それ以外のシステムからCUPSの管理画面へのアクセスを許可する必要があるでしょう。{{Path|/etc/cups/cupsd.conf}}を編集し、アクセスを必要とする各システムに対して明示的にアクセスを許可します。たとえば、IPアドレスが192.168.0.3であるシステムに対してアクセスを許可するには: 

{{FileBox|filename=/etc/cups/cupsd.conf|title=リモートアクセスを許可する|lang=apache|1=
<Location /admin>
(...)
  Encryption Required
  Order allow,deny
  Allow localhost
  Allow 192.168.0.3
</Location>
}}

{{Path|/etc/cups/cupsd.conf}}に変更を加えた後、{{c|/etc/init.d/cupsd restart}} コマンドを実行してCUPSデーモンを再起動することを忘れないでください。 

=== Windows PCLドライバーのサポートを有効化する ===

PCLドライバーは、生の(raw)データをプリントサーバーに送信します。CUPSでraw印刷を有効にするには、{{Path|/usr/share/cups/mime/mime.types}}を編集して、もしまだアンコメントされていなければ、<code>application/octet-stream</code>という行をアンコメントします。そして、{{Path|/usr/share/cups/mime/mime.convs}}を編集して、もしまだアンコメントされていなければ、同じようにします。 

{{FileBox|filename=/usr/share/cups/mime/mime.types|title=raw 印刷サポートを有効にする|1=
application/octet-stream
}}

{{FileBox|filename=/usr/share/cups/mime/mime.convs|1=
application/octet-stream     application/vnd.cups-raw    0    -
}}

これらの変更を加えたら、{{c|/etc/init.d/cupsd restart}}を実行してCUPSデーモンを再起動することを忘れないでください。 

=== リモートのプリンターをセットアップする ===

プリンターがCUPSを使用しているリモートサーバーに接続されている場合、{{Path|/etc/cups/client.conf}}を変更することによってシステムをリモートプリンターを使用するように簡単に設定できます。 

プリンターが<code>printserver.mydomain</code>というシステムに接続されているとすると、お好みのテキストエディターで{{Path|/etc/cups/client.conf}}を開き、<code>ServerName</code>ディレクティブをセットします: 

{{FileBox|filename=/etc/cups/client.conf|1=
# (printserver.mydomain を、あなたのプリントサーバー名に置き換えてください)
ServerName printserver.mydomain
}}

リモートシステムには、使用されるデフォルトのプリンター設定があります。デフォルトのプリンターを変更するには、{{c|lpoptions}}コマンドを使用します。

まず、使用可能なプリンターをリストします:

{{RootCmd|lpstat -a|output=<pre>
hpljet5p accepting requests since Jan 01 00:00
hpdjet510 accepting requests since Jan 01 00:00
</pre>}}

HP LaserJet 5Pをデフォルトのプリンターとしてセットします:

{{RootCmd|lpoptions -d hpljet5p}}

=== プリンターを設定する ===

==== はじめに ====

設定しようとしているプリンターが(CUPSを実行している)異なるプリントサーバーを介して利用可能ならば、以下の説明は不要です。代わりに、[[#リモートのプリンターをセットアップする|リモートのプリンターをセットアップする]]を読んでください。 

==== プリンターの検出 ====

Linuxシステムが起動した時にUSBプリンターやパラレルポートプリンターの電源が入っていれば、カーネルからプリンターを正常に検知したことを表す情報を得ることができるでしょう。これは単にプリンターが検出されたことを表すものに過ぎず、必要条件ではありません。 

{{Cmd|dmesg {{!}} grep -i print|output=<pre>
parport0: Printer, Hewlett-Packard HP LaserJet 2100 Series
</pre>}}

USBプリンターの場合:

{{Cmd|lsusb|output=<pre>
(...)
Bus 001 Device 007: ID 03f0:1004 Hewlett-Packard DeskJet 970c/970cse
</pre>
}}

===== lpinfo =====

{{:Printing/lpinfo}}

利用可能なドライバーをリストするには、以下のコマンドを実行します:

{{RootCmd|lpinfo -m}}

{{c|lpinfo}}は饒舌ではなく、やや使いこなすのが難しいかもしれません。何か問題が起こったら、{{c|man lpinfo}}を見てより詳細な情報を確認してください。

==== プリンターをインストールする ====

プリンターをシステムにインストールするには、ブラウザーを起動して[http://localhost:631 http://localhost:631]を表示してください。あらゆる管理作業が行える、CUPSのウェブインターフェースが表示されるはずです。 

{{Note|インターフェースにアクセスする際に初めてHTTPS接続を使用した場合、ページが表示されるまでに非常に長い時間がかかる''ことがあります''。これは、最初のリクエストによって、時間のかかる処理であるCUPSのSSL証明書の生成が引き起こされるためです。}}

{{Path|Administration}}に移動し、ボックスにrootログインおよびパスワード情報を入力してください。そして、管理インターフェースに入ったら、{{Path|Add Printer}}をクリックします。新しい画面が表示され、以下の情報が入力できるようになります: 

* The ''spooler name'', a short but descriptive name used on the system to identify the printer. This name should not contain spaces or any special characters. For instance, for the HP LaserJet 5P could be titled <code>hpljet5p</code>.
* The ''location'', a description where the printer is physically located (for instance "bedroom", or "in the kitchen right next to the dish washer", etc.). This is to aid in maintaining several printers.
* The ''description'', a full description of the printer. A common use is the full printer name (like "HP LaserJet 5P").

The next screen requests the device the printer listens to. The choice of several devices will be presented. The next table covers a few possible devices, but the list is not exhaustive.

{| class="table table-condensed table-striped" style="text-align: left;" 
|- 
! Device
! Description
|- 
| AppSocket/HP JetDirect
| This special device allows for network printers to be accessible through a HP JetDirect socket. Only specific printers include support for this option.
|- 
| Internet Printing Protocol (IPP or HTTP)
| Used reach the remote printer through the IPP protocol either directly (IPP) or through HTTP.
|- 
| LPD/LPR Host or Printer
| Select this option if the printer is remote and attached to a LPD/LPR server.
|- 
| Parallel Port #1
| Select when the printer is locally attached to a parallel port (LPT). When the printer is automatically detected its name will be appended to the device.
|- 
| USB Printer #1
| Select when the printer is locally attached to a USB port. The printer name should automatically be appended to the device name.
|-
|}

リモートプリンターをインストールする場合には、プリンターへのURLを尋ねられます: 

* An LPD printer server requires a <code>lpd://hostname/queue</code> syntax.
* An HP JetDirect printer requires a <code>socket://hostname</code> syntax.
* An IPP printer requires a <code>ipp://hostname/printers/printername</code> or <code><nowiki>http://hostname:631/printers/printername</nowiki></code> syntax.

Next, select the printer manufacturer in the adjoining screen along with the model type and number in the subsequent screen. For many printers multiple drivers will be available. Select one now or search on [http://www.openprinting.org/printer_list.cgi OpenPrinting Printer List] for a good driver. Drivers are easily able to be changed later. 

Once the driver is selected, CUPS will inform that the printer has been added successfully to the system. Navigate to the printer management page on the administration interface and select {{Path|Configure Printer}} to change the printer's settings (resolution, page format, ...).

==== Testing and reconfiguring the printer ====

To verify if the printer is working correctly, go to the printer administration page, select the printer and click on {{Path|Print Test Page}}. 

If the printer does not seem to work correctly, click on {{Path|Modify Printer}} to reconfigure the printer. The same screens as during the first installation will appear but the defaults will now be the current configuration. 

If the printer does not function, clues may be found by looking at the CUPS error log located at {{Path|/var/log/cups/error_log}} In the next example a permission error is discovered, probably due to a wrong {{Path|Allow}} setting in the {{Path|/etc/cups/cupsd.conf}} file.

{{RootCmd|tail /var/log/cups/error_log|output=<pre>
(...)
E [11/Jun/2005:10:23:28 +0200] [Job 102] Unable to get printer status (client-error-forbidden)!
</pre>
}}

==== Installing the best driver ====

Many printer drivers exist; to find out which one has the best performance the job, visit the [http://www.openprinting.org/printer_list.cgi OpenPrinting Printer List]. Select the brand and type/model of the printer to find out what driver the site recommends. For instance, for the HP LaserJet 5P, the site recommends the <code>ljet4</code> driver. 

Download the PPD file from the site and place it in {{Path|/usr/share/cups/model}} then run {{c|/etc/init.d/cupsd restart}} as root. This will make the driver available through the CUPS web interface. Now reconfigure the printer as described above.

=== Using special printer drivers ===

==== はじめに ====

Some printers require specific drivers or provide additional features that are not enabled through the regular configuration process (described above). This chapter will discuss a selection of printers and how they are made to work with Gentoo Linux. 

==== Gutenprint driver ====

The [http://gutenprint.sourceforge.net gutenprint] drivers are high-quality, open source printer drivers for various Canon, Epson, HP, Lexmark, Sony, Olympus and PCL printers supporting CUPS. They also support ghostscript, The Gimp, and other applications. 

Gentoo's Portage tree contains an ebuild for the gutenprint drivers. Run {{c|emerge gutenprint}} to install them. Note the ebuild requests to quite a few USE flags. At minimum <code>cups</code> and <code>ppds</code> must enabled for gutenprint drivers to work properly.

{{Emerge|net-print/gutenprint}}

When the emerge process has finished, the gutenprint drivers will be available through the CUPS web interface.

==== HPLIP driver ====

See [[HPLIP|HPLIP Driver]].

==== PNM2PPA driver ====

PPA is an HP technology that focuses on sending low-level processing to the system instead of the printer which makes the printer cheaper but more resource consuming. 

If the [http://www.openprinting.org/printer_list.cgi OpenPrinting] site informs the [http://pnm2ppa.sourceforge.net/ pnm2ppa] driver is the best option, then the {{Package|net-print/pnm2ppa}} filter will need to be installed on the system: 

{{Emerge|net-print/pnm2ppa}}

Once installed, download the PPD file for the printer [http://www.openprinting.org/printer_list.cgi OpenPrinting] and put it in the {{Path|/usr/share/cups/model}} folder. Then configure the printer using the steps explained above.

==== SpliX driver ====

[http://splix.ap2c.org/ SpliX] is a set of CUPS printer drivers for SPL (Samsung Printer Language) printers. While SpliX drivers are available through [http://www.openprinting.org/printer_list.cgi OpenPrinting] as well, the {{Package|net-print/splix}} package allows for quick portage-managed installation of these drivers. To install, run:

{{Emerge|net-print/splix}}

and restart {{c|cupsd}}.

==== Brother printer drivers ====

See [[Brother networked printer]].

==== Canon CAPT driver ====

See [[Canon_CAPT_Printer|Canon CAPT Driver]].

=== Printing to and from Microsoft Windows ===

{{Note|Read the [[Samba/Guide|Samba/CUPS Guide]] for more detailed information on setting up CUPS with Samba.}}

==== Configuring a Windows client for IPP ====

Microsoft Windows supports IPP (Windows 9x and ME users need to [http://support.microsoft.com/default.aspx?scid=kb;en-us;294439 install] it separately). To install a printer on Windows that is attached to a Linux box, fire up the {{Path|Add Printer}} wizard and select {{Path|Network Printer}}. When asked for the URI, use the <code><nowiki>http://hostname:631/printers/queue</nowiki></code> syntax. 

==== Configuring a Windows client for a Samba shared printer ====

To share the printer on the CIFS network SAMBA must be installed and configured correctly. Doing this is beyond the scope of this article, however a quick configuration of SAMBA for shared printers will be covered. 

Open {{Path|/etc/samba/smb.conf}} with a favorite text editor and add a <code>[printers]</code> section to it: 

{{CodeBox|title=[printers] セクション|1=
[printers]
  comment      = All printers
  path         = /var/spool/samba
  browseable   = no
  guest ok     = no
  writable     = no
  printable    = yes
  public       = yes
  printer name = hpljet5p
}}

Navigate to the top of the {{Path|smb.conf}} file until inside the <code>[global]</code> section. Locate the <code>printcap name</code> and <code>printing</code> settings and set each of them to <code>cups</code> (see the example below):

{{CodeBox|title=Changing the [global] section of smb.conf|1=
[global]
  (...)
  printcap name = cups
  printing      = cups
}}

Make sure to enable [[#Enable_Support_for_Windows_PCL_Drivers|windows pcl]] support in CUPS. Then, restart the smb service to have the changes take effect.

==== Configuring a Linux client for a Windows print server ====

First make sure the printer is shared on Windows systems and that {{Package|net-fs/samba}} has been emerged with the <code>cups</code> USE flag enabled (as instructed above).

To find the desired printer's URI, run the following command, substituting <code>server</code> with the computer that is to probe for samba-shared printers:

{{Cmd|smbclient -N '\\server\'}}

In the CUPS web interface, configure the printer as previously described. Notice CUPS has added another driver called <code>Windows Printer via SAMBA</code>. Select it and use the <code>smb://username:password@workgroup/server/printername</code> or <code>smb://server/printername</code> syntax for the URI.

{{Important|Any special characters in the above URI need to be appropriately quoted. For example:
 
<code>smb://BEN-DESKTOP/HP Color LaserJet CP1510 series PCL6</code>
  
becomes:
  
<code>smb://BEN-DESKTOP/HP%20Color%20LaserJet%20CP1510%20series%20PCL6</code>
  
This result string can be obtained by running the following command:
 
{{Cmd|python2 -c 'import urllib; print "smb://" + urllib.quote("BEN-DESKTOP/HP Color LaserJet CP1510 series PCL6")'}}
}}

=== Printing-related applications ===

==== はじめに ====

Many tools exist to help configure a printer, use additional printing filters, add features to printing capabilities, etc. This chapter will list a few of them. Be aware the list is not exhaustive and not meant to discuss each tool in great detail. 

==== Gtk-LP - A GTK-powered printer configuration tool ====

With {{Package|net-print/gtklp}}, the installation, modification and configuration of a printer can be performed from a stand-alone Gtk application. It uses CUPS and provides all standard CUPS capabilities. It is definitely worth checking out if the CUPS Web interface is disliked or if a stand-alone application for day-to-day printing routines is desired. 

Install via: 

{{Emerge|net-print/gtklp}}

==== Printer configuration tool for KDE 4 ====

KDE 4 also has a printer config tool called {{Package|kde-apps/print-manager}}. It works with CUPS and provides a user-friendly interface to configure printers. Install it as follows:

{{Emerge|kde-apps/print-manager}}

== Removal ==

=== USE flags ===

Packages that are currently installed with the <code>cups</code> USE flag must be modified. Search through {{Path|/etc/portage/package.use}} to see if any packages explicitly have the <code>cups</code> flag and remove it.

Next, it may be necessary to remove the <code>cups</code> value from {{Path|/etc/portage/make.conf}}'s <var>USE</var> variable if it had been previously set.

=== Unmerge ===

{{Unmerge|net-print/cups}}

Finally, clean the system of any packages that are no longer needed as a result of CUPS being removed. 

{{Emerge|--depclean}}

== トラブルシューティング ==

=== Error: Unable to convert file 0 to printable format ===

While having printing troubles and {{Path|/var/log/cups/error_log}} shows this message: 

{{CodeBox|title=エラーログ|1=
Unable to convert file 0 to printable format
}}

Re-emerge {{Package|app-text/ghostscript-gpl}} with the <code>cups</code> USE flag. You can either add <code>cups</code> to the system USE flags in {{Path|/etc/portage/make.conf}} or enable it only for ghostscript-gpl as shown: 

{{RootCmd|echo "app-text/ghostscript-gpl cups" >> /etc/portage/package.use}}

Then run {{c|emerge app-text/ghostscript-gpl}}. When it has finished compiling, be sure to restart {{c|cupsd}} afterward.

When using OpenRC:

{{RootCmd|service cupsd restart}}

When using systemd:

{{RootCmd|systemctl restart cups}}

== External resources ==

* [https://www.cups.org/doc/network.html Using Network Printers] - Documentation at CUPS.org.
* [https://www.cups.org/doc/options.html Command-Line Printing and Options] - Documentation at CUPS.org.

{{Migrated|originalauthors=swift, nightmorph}}
