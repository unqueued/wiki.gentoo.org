{{InfoBox stack
|{{InfoBox homepage|http://www.linux-kvm.org|header=true}}
|{{InfoBox wikipedia|Kernel-based Virtual Machine}}
}}
'''KVM''' ('''K'''ernel-based '''V'''irtual '''M'''achine) is the hardware-assisted virtualization infrastructure provided by the Linux kernel. It's using [[QEMU]] for operation system emulation.

== Installation ==

=== BIOS ===
Check, that your processor's hardware virtualization feature is enabled:
{{Cmd|egrep --color "vmx{{!}}svm" /proc/cpuinfo}}

If not, enable "Intel VT", "AMD-V", etc. in your [[BIOS]].

=== Kernel ===
You need to activate the following kernel options:
{{Kernel||<pre>
[*] Virtualization  --->
    <*>   Kernel-based Virtual Machine (KVM) support

    If you have an Intel processor:
    <*>     KVM for Intel processors support

    If you have an AMD processor:
    <*>     KVM for AMD processors support

    Needed for "vhost-net" USE flag:
    <*>   Host kernel accelerator for virtio net
</pre>}}

{{Kernel|Optional advanced networking support|<pre>
Device Drivers  --->
    [*] Network device support  --->
    [*]   Network core driver support
    <*>     Universal TUN/TAP device driver support
</pre>}}

=== Software ===
Install {{Package|app-emulation/qemu-kvm}}:

{{USEflag|package=app-emulation/qemu-kvm|desc=Hardware flags
|aio+yes
|alsa+yes
|bluetooth+yes
|brltty
|fdt
|opengl+yes
|pulseaudio
|rbd
|smartcard
|usbredir
|vhost-net+yes+yes
}}

{{USEflag|package=app-emulation/qemu-kvm|desc=Output flags
|ncurses+yes
|sdl+yes
|spice
}}

{{USEflag|package=app-emulation/qemu-kvm|desc=Misc flags
|caps+yes
|curl+yes
|debug
|doc
|python
|sasl
|static
|tci
|tls
|vde
|virtfs
|xattr
|xen
|xfs
|QEMU_SOFTMMU_TARGETS+++Enable architectures for full system emulation. Enable in your {{Path|make.conf}}.
|QEMU_USER_TARGETS+++Enable architectures for user space programs emulation. Enable in your {{Path|make.conf}}.
}}
{{Emerge|qemu-kvm}}

=== Frontends ===
To make life easier, there are multiple user-friendly front-ends to KVM:
* {{Package|app-emulation/virt-manager}}
* {{Package|app-emulation/aqemu}}

== Configuration ==

=== Permissions ===
Add your user to the ''kvm'' group:
{{RootCmd|gpasswd -a YOURUSER kvm}}

== Usage ==
* See [[QEMU/Options|QEMU options]] page for common options
* [[QEMU/Linux guest|Setup a Linux guest]]
* [[QEMU/Windows guest|Setup a Windows guest]]

== See also ==
* [[Comparison of virtual machines]]

== External resources ==
* [http://wiki.qemu.org QEMU homepage]
* [http://en.gentoo-wiki.com/wiki/KVM Community Gentoo Wiki article]

[[Category:Virtualization]]
