{{Lowercase title}}
{{InfoBox stack
|{{InfoBox homepage|http://collectdweb.appspot.com/|header=true}}
|{{InfoBox twitter|collectdweb}}
|{{InfoBox google+|111037505131782971511}}
|{{InfoBox facebook|Collectd-web/132686910095150}}
|{{InfoBox generic|https://groups.google.com/forum/?fromgroups#!forum/collectd-web-users/|text=Google user group}}
}}

'''collectd-web''' is a web-based Perl CGI front-end for RRD data collected by [[collectd]].

== Installation ==

=== Emerge ===

Install {{Package|www-apps/collectd-web}}:

{{Emerge|collectd-web}}

To display the graphs, {{Package|net-analyzer/rrdtool}} needs the USE flags <code>graph</code> and <code>perl</code>.

=== Web server ===

You need also a [[:Category:Web Servers|web server]].

The CGI scripts have to be executable:

{{RootCmd|chmod +x /usr/share/webapps/collectd-web/*/hostroot/cgi-bin/*.cgi}}

==== Built-in web server ====

The collectd-web project offers a simple web server to process the CGI scripts:

{{RootCmd
|cd /usr/share/webapps/collectd-web/*/hostroot/
|wget https://raw.github.com/httpdss/collectd-web/0.4.1/runserver.py
|python2 runserver <ip> <port>
}}

Now you need to set up a reverse proxy which will serve static files from {{Path|/usr/share/webapps/collectd-web/0.4.0/htdocs}} for {{Path|/}} and for /cgi-bin/ it will proxy the request to the above set up <ip> <port>.

==== Apache ====

It is possible to use [[Apache|Apache]] to serve the pages. Configuration of the corresponding virtual host needs to be adjusted so that it knows where to find cgi scripts of collectd-web. For default vhost make following modification:

{{FileBox|filename=/etc/apache2/vhosts.d/00_default_vhost.conf|title=Defining alias to cgi scripts location|lang=apache|1=
<VirtualHost *:80>
...
    ScriptAlias /collectd-web/cgi-bin/ "/var/www/localhost/cgi-bin/"
...
</VirtualHost>
}}

==== nginx ====
This is an example server section for [[nginx|nginx]] using {{Package|www-misc/fcgiwrap}}. This setup does not require using the built-in webserver and downloading the extra python script.
{{Emerge|fcgiwrap}}
{{RootCmd
|systemctl enable fcgiwrap.socket
|systemctl start fcgiwrap.socket
}}

{{FileBox|filename=/etc/nginx/conf.d/collectd-web.conf|title=Example nginx confiugration for collectd|lang=nginx|1=
server {
    listen 80;
    large_client_header_buffers 4 16k; # for large cookies and headers

    location / {
        root  /usr/share/webapps/collectd-web/0.4.0/htdocs; # this serves the static files
    }

    location /cgi-bin/ {
        gzip off;
        root  /usr/share/webapps/collectd-web/0.4.0/hostroot; # this is the parent directory of cgi-bin
        fastcgi_pass  unix:/var/run/fcgiwrap.sock;
        include /etc/nginx/fastcgi_params;
        fastcgi_param SCRIPT_FILENAME  $document_root$fastcgi_script_name;
    }
}
}}

Save this as a separate file as suggested above and include it in {{Path|/etc/nginx/nginx.conf}} and restart nginx:
{{RootCmd|systemctl restart nginx}}

The web interface is then available on <code>http://localhost</code>.

== Configuration ==

Configure [[Collectd#rrdtool_plugin]]

Define where collectd-web shall look for rrd files:

{{FileBox|filename=/etc/collectd/collection.conf|1=
datadir: "/var/lib/collectd/rrd"
}}

== Usage ==

Point your browser at the reverse proxy or (in case you using default Apache configuration) at http://localhost/collectd-web.

[[Category:Web application]]
[[Category:Monitoring]]
