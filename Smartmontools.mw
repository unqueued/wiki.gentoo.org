{{Lowercase title}}
{{InfoBox stack
|{{InfoBox homepage|https://www.smartmontools.org/|header=true}}
|{{InfoBox wikipedia|S.M.A.R.T.}}
}}

'''smartmontools''' is [[Article description::a utility to read and monitor the S.M.A.R.T. (Self-Monitoring, Analysis and Reporting Technology) information of ATA/SATA and SCSI/SAS drives.]]

== Installation ==

=== Hardware ===

S.M.A.R.T. support needs to be enabled in the [[BIOS]] or EFI firmware for correct operation.

=== USE flags ===

{{USEflag|package=sys-apps/smartmontools}}

=== Emerge ===

Install {{Package|sys-apps/smartmontools}}:

{{Emerge|sys-apps/smartmontools}}

== Usage ==

=== Invocation ===

{{RootCmd|smartctl -h|output=<pre>
smartctl 6.2 2013-07-26 r3841 [x86_64-linux-3.16.0-30-generic] (local build)
Copyright (C) 2002-13, Bruce Allen, Christian Franke, www.smartmontools.org

Usage: smartctl [options] device

============================================ SHOW INFORMATION OPTIONS =====

  -h, --help, --usage
         Display this help and exit

  -V, --version, --copyright, --license
         Print license, copyright, and version information and exit

  -i, --info
         Show identity information for device

  --identify[=[w][nvb]]
         Show words and bits from IDENTIFY DEVICE data                (ATA)

  -g NAME, --get=NAME
        Get device setting: all, aam, apm, lookahead, security, wcache, rcache, wcreorder

  -a, --all
         Show all SMART information for device

  -x, --xall
         Show all information for device

  --scan
         Scan for devices

  --scan-open
         Scan for devices and try to open each device

================================== SMARTCTL RUN-TIME BEHAVIOR OPTIONS =====

  -q TYPE, --quietmode=TYPE                                           (ATA)
         Set smartctl quiet mode to one of: errorsonly, silent, noserial

  -d TYPE, --device=TYPE
         Specify device type to one of: ata, scsi, sat[,auto][,N][+TYPE], usbcypress[,X], usbjmicron[,p][,x][,N], usbsunplus, marvell, areca,N/E, 3ware,N, hpt,L/M/N, megaraid,N, cciss,N, auto, test

  -T TYPE, --tolerance=TYPE                                           (ATA)
         Tolerance: normal, conservative, permissive, verypermissive

  -b TYPE, --badsum=TYPE                                              (ATA)
         Set action on bad checksum to one of: warn, exit, ignore

  -r TYPE, --report=TYPE
         Report transactions (see man page)

  -n MODE, --nocheck=MODE                                             (ATA)
         No check if: never, sleep, standby, idle (see man page)

============================== DEVICE FEATURE ENABLE/DISABLE COMMANDS =====

  -s VALUE, --smart=VALUE
        Enable/disable SMART on device (on/off)

  -o VALUE, --offlineauto=VALUE                                       (ATA)
        Enable/disable automatic offline testing on device (on/off)

  -S VALUE, --saveauto=VALUE                                          (ATA)
        Enable/disable Attribute autosave on device (on/off)

  -s NAME[,VALUE], --set=NAME[,VALUE]
        Enable/disable/change device setting: aam,[N|off], apm,[N|off],
        lookahead,[on|off], security-freeze, standby,[N|off|now],
        wcache,[on|off], rcache,[on|off], wcreorder,[on|off]

======================================= READ AND DISPLAY DATA OPTIONS =====

  -H, --health
        Show device SMART health status

  -c, --capabilities                                                  (ATA)
        Show device SMART capabilities

  -A, --attributes
        Show device SMART vendor-specific Attributes and values

  -f FORMAT, --format=FORMAT                                          (ATA)
        Set output format for attributes: old, brief, hex[,id|val]

  -l TYPE, --log=TYPE
        Show device log. TYPE: error, selftest, selective, directory[,g|s],
                               xerror[,N][,error], xselftest[,N][,selftest],
                               background, sasphy[,reset], sataphy[,reset],
                               scttemp[sts,hist], scttempint,N[,p],
                               scterc[,N,M], devstat[,N], ssd,
                               gplog,N[,RANGE], smartlog,N[,RANGE]

  -v N,OPTION , --vendorattribute=N,OPTION                            (ATA)
        Set display OPTION for vendor Attribute N (see man page)

  -F TYPE, --firmwarebug=TYPE                                         (ATA)
        Use firmware bug workaround:
        none, nologdir, samsung, samsung2, samsung3, xerrorlba, swapid

  -P TYPE, --presets=TYPE                                             (ATA)
        Drive-specific presets: use, ignore, show, showall

  -B [+]FILE, --drivedb=[+]FILE                                       (ATA)
        Read and replace [add] drive database from FILE
        [default is +/etc/smart_drivedb.h
         and then    /var/lib/smartmontools/drivedb/drivedb.h]

============================================ DEVICE SELF-TEST OPTIONS =====

  -t TEST, --test=TEST
        Run test. TEST: offline, short, long, conveyance, force, vendor,N,
                        select,M-N, pending,N, afterselect,[on|off]

  -C, --captive
        Do test in captive mode (along with -t)

  -X, --abort
        Abort any non-captive test on device

=================================================== SMARTCTL EXAMPLES =====

  smartctl --all /dev/hda                    (Prints all SMART information)

  smartctl --smart=on --offlineauto=on --saveauto=on /dev/hda
                                              (Enables SMART on first disk)

  smartctl --test=long /dev/hda          (Executes extended disk self-test)

  smartctl --attributes --log=selftest --quietmode=errorsonly /dev/hda
                                      (Prints Self-Test & Attribute errors)
  smartctl --all --device=3ware,2 /dev/sda
  smartctl --all --device=3ware,2 /dev/twe0
  smartctl --all --device=3ware,2 /dev/twa0
  smartctl --all --device=3ware,2 /dev/twl0
          (Prints all SMART info for 3rd ATA disk on 3ware RAID controller)
  smartctl --all --device=hpt,1/1/3 /dev/sda
          (Prints all SMART info for the SATA disk attached to the 3rd PMPort
           of the 1st channel on the 1st HighPoint RAID controller)
  smartctl --all --device=areca,3/1 /dev/sg2
          (Prints all SMART info for 3rd ATA disk of the 1st enclosure
           on Areca RAID controller)
</pre>}}

=== Examples ===

{{c|smartctl}} is a utility that is used to control and monitor S.M.A.R.T. enabled drives.

Print information of a drive, including S.M.A.R.T. support:

{{RootCmd|smartctl -i /dev/sda}}

Enable S.M.A.R.T. on a drive:

{{RootCmd|smartctl -s on /dev/sda}}

Print the S.M.A.R.T. health status of a drive:

{{RootCmd|smartctl -H /dev/sda}}

If the result is <code>PASSED</code>, the drive is in good health. If the result is <code>FAILED</code>, drive failure is imminent and the data should be backed up.

Print the S.M.A.R.T. capabilities of a drive, including supported tests and the time required to run them:

{{RootCmd|smartctl -c /dev/sda}}

Print the vendor specific S.M.A.R.T attributes of a drive:

{{RootCmd|smartctl -A /dev/sda}}

Run a S.M.A.R.T. test on a drive:

{{RootCmd|smartctl -t TEST /dev/sda}}

The possible values for <code>TEST</code> include:

* <code>offline</code>: Run the S.M.A.R.T. Immediate Offline Test.
* <code>short</code>: Run the S.M.A.R.T. Short Self Test.
* <code>long</code>: Run the S.M.A.R.T. Extended Self Test.
* <code>conveyance</code>: Run the S.M.A.R.T. Conveyance Self Test.

Print a S.M.A.R.T. log of a drive:

{{RootCmd|smartctl -l LOG /dev/sda}}

The possible values for <code>LOG</code> include:

* <code>error</code>: Print the S.M.A.R.T. error log. This log will contain all errors. If the result is <code>No Errors Logged</code>, the drive is in good health. If there are some old errors, the drive is most likely in good health. If there are many recent errors, drive failure may be imminent and the data should be backed up.
* <code>selftest</code>: Print the S.M.A.R.T. self-test log. This log will contain the results for the <code>short</code>, <code>long</code> and <code>conveyance</code> tests.

== S.M.A.R.T. daemon ==

{{c|smartd}} is a daemon that continuously monitors the S.M.A.R.T. information of drives. It can be configured via {{Path|/etc/smartd.conf}}. See {{c|man smartd.conf}} for more information. {{c|smartd}} will log any errors to {{Path|/var/log/messages}}.

In this example {{c|smartd}} monitors 4 drives and sends a test e-mail on startup. It also runs a scheduled test every week on Friday at 3:00 a.m.

{{FileBox|filename=/etc/smartd.conf|1=
/dev/disk/by-id/ata-ST3000DM001-000000_00000000 -m alerts@example.com -M test -H -l error -l selftest -f -s L/../../5/03
/dev/disk/by-id/ata-ST3000DM001-111111_11111111 -m alerts@example.com -M test -H -l error -l selftest -f -s L/../../5/03
/dev/disk/by-id/ata-WDC_WD20EARS-00MVWB0_WD-000000000000 -m alerts@example.com -M test -H -l error -l selftest -f -s L/../../5/03
/dev/disk/by-id/ata-WDC_WD20EARS-00MVWB0_WD-111111111111 -m alerts@example.com -M test -H -l error -l selftest -f -s L/../../5/03
}}

To start {{c|smartd}}:

{{RootCmd|/etc/init.d/smartd start}}

To start {{c|smartd}} at boot:

{{RootCmd|rc-update add smartd default}}

== External resources ==

* {{Bug|smartmontools|search=package}}
* [https://www.smartmontools.org/report/1 smartmontools bugtracker: known bugs]

[[Category:Monitoring]]
