{{Lowercase title}}
{{InfoBox stack
|{{InfoBox homepage|http://smartmontools.sourceforge.net|header=true}}
|{{InfoBox wikipedia|Self-Monitoring, Analysis and Reporting Technology}}
}}

'''smartmontools''' is a utility to read and monitor the S.M.A.R.T. (Self-Monitoring, Analysis and Reporting Technology) information of ATA/SATA and SCSI/SAS drives.

== Installation ==

=== Hardware ===

S.M.A.R.T. support needs to be enabled in the [[BIOS]] before proceeding.

=== Software ===

Install {{Package|sys-apps/smartmontools}}:
{{USEflag|package=sys-apps/smartmontools
|caps
|minimal
|static++no
}}
{{Emerge|smartmontools}}

== Usage ==

<tt>smartctl</tt> is a utility that is used to control and monitor S.M.A.R.T. enabled drives.

* Print information of a drive, including S.M.A.R.T. support:
{{RootCmd|smartctl -i /dev/sda}}

* Enable S.M.A.R.T. on a drive:
{{RootCmd|smartctl -s on /dev/sda}}

* Print the S.M.A.R.T. health status of a drive:
{{RootCmd|smartctl -H /dev/sda}}
If the result is <code>PASSED</code>, the drive is in good health. If the result is <code>FAILED</code>, drive failure is imminent and the data should be backed up.

* Print the S.M.A.R.T. capabilities of a drive, including supported tests and the time required to run them:
{{RootCmd|smartctl -c /dev/sda}}

* Print the vendor specific S.M.A.R.T attributes of a drive:
{{RootCmd|smartctl -A /dev/sda}}

* Run a S.M.A.R.T. test on a drive:
{{RootCmd|smartctl -t TEST /dev/sda}}

The possible values for <code>TEST</code> are:
<br />
<code>offline</code>: Run the S.M.A.R.T. Immediate Offline Test.
<br />
<code>short</code>: Run the S.M.A.R.T. Short Self Test.
<br />
<code>long</code>: Run the S.M.A.R.T. Extended Self Test.
<br />
<code>conveyance</code>: Run the S.M.A.R.T. Conveyance Self Test.

* Print a S.M.A.R.T. log of a drive:
{{RootCmd|smartctl -l LOG /dev/sda}}

The possible values for <code>LOG</code> are:
<br />
<code>error</code>: Print the S.M.A.R.T. error log. This log will contain all errors. If the result is <code>No Errors Logged</code>, the drive is in good health. If there are some old errors, the drive is most likely in good health. If there are many recent errors, drive failure may be imminent and the data should be backed up.
<br />
<code>selftest</code>: Print the S.M.A.R.T. self-test log. This log will contain the results for the <code>short</code>, <code>long</code> and <code>conveyance</code> tests.

== S.M.A.R.T. daemon ==

<tt>smartd</tt> is a daemon that continuously monitors the S.M.A.R.T. information of drives. It can be configured via {{Path|/etc/smartd.conf}}. See <kbd>man smartd.conf</kbd> for more information. <tt>smartd</tt> will log any errors to {{Path|/var/log/messages}}.

In this example <tt>smartd</tt> monitors 4 drives and sends a test e-mail on startup. It also runs a scheduled test every week on Friday at 3:00 a.m.
{{FileBox|filename=/etc/smartd.conf|1=
/dev/disk/by-id/ata-ST3000DM001-000000_00000000 -m alerts@example.com -M test -H -l error -l selftest -f -s L/../../5/03
/dev/disk/by-id/ata-ST3000DM001-111111_11111111 -m alerts@example.com -M test -H -l error -l selftest -f -s L/../../5/03
/dev/disk/by-id/ata-WDC_WD20EARS-00MVWB0_WD-000000000000 -m alerts@example.com -M test -H -l error -l selftest -f -s L/../../5/03
/dev/disk/by-id/ata-WDC_WD20EARS-00MVWB0_WD-111111111111 -m alerts@example.com -M test -H -l error -l selftest -f -s L/../../5/03
}}

To start <tt>smartd</tt>:
{{RootCmd|/etc/init.d/smartd start}}
To start <tt>smartd</tt> at boot:
{{RootCmd|rc-update add smartd default}}

== External resources ==

* {{Bug|smartmontools|search=package}}
* [http://www.smartmontools.org/report/1 smartmontools bugtracker: known bugs]

[[Category:Monitoring]]
