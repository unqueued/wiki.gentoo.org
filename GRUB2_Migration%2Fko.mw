<languages />


{{Metadata|abstract=The goal of this guide is to provide you with a smooth migration from GRUB Legacy to GRUB2.}}

이 안내서의 목표는 기존 GRUB에서 GRUB2로 유연하게 옮겨가는 방안을 알려드리는 것입니다.

=== 배경 ===

=== GRUB 이란 무엇일까요? ===

GRUB은 비 임베디드 리눅스 창지에서 대부분 보통 찾는 부트로더중 하나입니다. GRUB의 역할은 디스크에서 메모리로 리눅스 커널을 불러오도록 갖추고 리눅스 커널을 실행하는 것입니다. 

=== 왜 옮겨야 하나요? ===

먼저, 이전 GRUB은 더이상 업데이트를 받지 않으므로 관리하지 않습니다. 이전 GRUB은 개발자들이 오늘날 더이상 제대로 된 상태로 유지할 수 없다는 다양한 가정을 유발하는데 안전함의 느낌에 빠질때마다 만들었습니다(문장이 애매하게 됐지만 결론적으론 개발자들이 이전 GRUB을 만들고 안일함에 빠졌다는 이야기로 압축됩니다. 역자 주). 예를 들어 예전 GRUB은 2TB 이상의 디스크로는 부팅할 수 없으며 새 파일 시스템으로 {{Path|/boot}}를 대체할 수 없음을 가정했습니다. 

GRUB2는 좀 더 견고하고, 가벼우며, 강력함을 목표로 하였으며, 좀더 깔끔한 코드를 기반으로 유지 관리합니다. GRUB2는 이전 버전과는 달리 더 많은 하드웨어 설정, 파일 시스템, 드라이브 배치를 지원합니다. 

== GRUB2로 옮겨가기 ==

Migration to GRUB2 is fairly straightforward: it will be pulled in as part of your regular upgrade process by your package manager. If it is not pulled in automatically, you can always install <code>sys-boot/grub:2</code> . 

=== 부트 드라이브 ===

The first important part is to understand what your bootable drive is. For many people it will be {{Path|/dev/sda}} . The easiest way to find this is to look at how your existing GRUB Legacy is setup by viewing {{Path|/boot/grub/grub.conf}}. An example one is provided below. 

{{Note|You must have your {{Path|/boot}} mounted to be able to view these files. It should be as simple as <code>mount /boot</code> to mount {{Path|/boot}}.}}

{{File|/boot/grub/grub.conf||<pre>
default 0
timeout 30
splashimage=(hd0,0)/boot/grub/splash.xpm.gz
  
title Gentoo Linux 3.2.12
root (hd0,0)
kernel /boot/kernel-3.2.12-gentoo root=/dev/sda3 quiet dolvm
initrd /boot/initramfs-genkernel-x86_64-3.2.12-gentoo
</pre>
}}

Based on the above file we know that <code>(hd0)</code> is the boot drive but we must map this to a real device. To know this you must view {{Path|/boot/grub/device.map}} . An example one is provided below. 

{{File|/boot/grub/device.map||<pre>
(fd0) /dev/fd0
(hd0) /dev/sda
(hd1) /dev/sdb
</pre>
}}

위 파일을 기반으로 {{Path|/dev/sda}}가 부팅 드라이브임을 알고 있습니다. 

=== GRUB2 설치 및 설정 ===

The next step is to install and configure GRUB2 on your {{Path|/boot}} partition without removing GRUB Legacy from your MBR. The example below uses {{Path|/dev/sda}} but you must replace it with your boot drive path. The first step installs the necessary GRUB2 files to {{Path|/boot/grub}} , while the second step scans your available kernels and generates a suitable config file to {{Path|/boot/grub/grub.cfg}} . Skip the second step when using a [[GRUB2_Quick_Start#Manual_Configuration|Manual Configuration]].

{{Warning|GRUB 2 uses the configuration file {{Path|/boot/grub/grub.'''cfg'''}} whereas GRUB Legacy used {{Path|/boot/grub/grub.'''conf'''}} so please make sure you don't use the old file by mistake, e.g. by using tab-completion if the old file is still there.}}

{{RootCmd|grub2-install --grub-setup{{=}}/bin/true /dev/sda|output=<pre>
Installation finished. No error reported.
</pre>}}

{{RootCmd|grub2-mkconfig -o /boot/grub/grub.cfg|output=<pre>
Generating grub.cfg ...
Found linux image: /boot/kernel-3.2.12-gentoo
Found initrd image: /boot/initramfs-genkernel-x86_64-3.2.12-gentoo
done
</pre>
}}

{{Note|<code>grub2-mkconfig</code> has strict naming requirements for kernels and initramfs images. A kernel must be named <code>kernel-${version}</code> or <code>vmlinuz-${version}</code> while an initramfs must be named <code>initramfs-${version}.img</code>, <code>initramfs-genkernel-${version}</code>, <code>initramfs-genkernel-${arch}-${version}</code>, <code>initrd-${version}.img</code>, <code>initrd.img-${version}</code>, <code>initrd-${version}.gz</code>, or <code>initrd-${version}</code>. Together with ${version}, the filename must match a corresponding kernel that is available in {{Path|/boot}}.}}

=== 설정을 시험하기 위해 이전 GRUB에서 GRUB2 이어서 불러오기 ===

Because a broken GRUB configuration could mean an unbootable system, we want to test our GRUB2 configuration before making it permanent. To do this we will chainload GRUB2 from GRUB Legacy. This is done by adding a new section into {{Path|/boot/grub/grub.conf}} . An example is shown below. 

{{Note|Be aware that your root may be different from <code>(hd0,0)</code> used in the example, and make sure you reuse the same root value from your {{Path|/boot/grub/grub.conf}} .}}

{{File|/boot/grub/grub.conf||<pre>
default 0
timeout 30
splashimage=(hd0,0)/boot/grub/splash.xpm.gz
  
title GRUB2 Chainload
root (hd0,0)
kernel /boot/grub/i386-pc/core.img
boot
  
title Gentoo Linux 3.2.12
root (hd0,0)
kernel /boot/kernel-3.2.12-gentoo root=/dev/sda3 quiet dolvm
initrd /boot/initramfs-genkernel-x86_64-3.2.12-gentoo
</pre>
}}

At this point you should reboot your machine and select <code>GRUB2 Chainload</code> from the GRUB menu when your machine begins to boot. You will be presented with another GRUB menu which should advertise itself as GRUB 2.0.0 or higher at the top and show your available kernel(s) to boot. Should this not work, simply reboot your system and pick your normal boot option instead of <code>GRUB2 Chainload</code> . 

=== 이전 GRUB 대체하고 제거 ===

At this point, if everything worked successfully, you can replace GRUB Legacy and remove it from your system. 

{{Note|Since you've rebooted your system, you may need to mount {{Path|/boot}} again. Make sure to use your own boot drive path instead of {{Path|/dev/sda}} .}}

{{RootCmd|grub2-install /dev/sda|output=<pre>
Installation finished. No error reported.
</pre>
}}

At this point you can use your package manager to remove <code>sys-boot/grub:0</code> . 
{{RootCmd|emerge -avC "{{=}}sys-boot/grub-0.97*"|}}
The migration is complete.

== GRUB2 유지 관리 ==

Whenever you install a new kernel, you must perform the next step so that your GRUB2 configuration recognizes the new kernel (unless you are using a [[GRUB2_Quick_Start#Manual_Configuration|manual configuration]]). 

{{Note/ko|이 단계를 위해 마운트한 {{Path|/boot}} 파티션을 반드시 보유해야 합니다.}}

{{RootCmd|grub2-mkconfig -o /boot/grub/grub.cfg|output=<pre>
Generating grub.cfg ...
Found linux image: /boot/kernel-3.3.8-gentoo
Found initrd image: /boot/initramfs-genkernel-x86_64-3.3.8-gentoo
Found linux image: /boot/kernel-3.2.12-gentoo
Found initrd image: /boot/initramfs-genkernel-x86_64-3.2.12-gentoo
done
</pre>
}}

== Acknowledgements ==

이 안내서에 제공한 노고에 대해 다음 작성자와 편집자분들께 감사의 말을 전하고자 합니다:


* cardoe
