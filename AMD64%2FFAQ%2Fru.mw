<languages />


{{Metadata|abstract=Часто задаваемые вопросы по Gentoo Linux/AMD64}}

Это статья с ответами на часто задаваемые вопросы по Gentoo Linux/AMD64.

=== Введение ===

Этот документ содержит наиболее часто задаваемые вопросы об использовании Gentoo на системах с архитектурой AMD64. Многие из этих вопросов изначально были заданы на [//forums.gentoo.org/ форумах], в IRC или различных [//www.gentoo.org/main/en/lists.xml списках рассылки]. [//www.gentoo.org/proj/en/base/amd64/ Проект Gentoo/AMD64] осуществляет поддержку Gentoo Linux на данной архитектуре. Если у вас есть предложения или вопросы по этому ЧаВо, то вы можете прислать e-mail на {{Mail|amd64@gentoo.org}} (язык общения — английский. — ''Прим. пер.'').

== Установка ==

=== В чём разница между AMD64 и EM64T? ===

Оба понятия относятся к 64-битным процессорам, от AMD (AMD64) и Intel (EM64T) соответственно. AMD производит 64-битные процессоры в рамках серий Athlon&nbsp;64, Turion, Neo, Phenom и Opteron. Intel — в рамках серий Core&nbsp;2, Core&nbsp;i "X", Celeron, Xeon и Pentium (все основанные на архитектуре Core&nbsp;2). [//en.wikipedia.org/wiki/x86-64#Intel_64 Последние несколько версий] старых чипов Pentium&nbsp;4 и Xeon также поддерживают EM64T.

AMD представила первые 64-битные процессоры раньше Intel. В силу этих (исторических) причин архитектура всех x86-64-совместимых процессоров обозначается в Gentoo ключевым словом {{keyword|amd64}}. Так что "AMD64" — это общее обозначение для 64-битных чипов от AMD и Intel.

=== Какие CFLAGS использовать? ===

Следует использовать простые <code>CFLAGS</code>, чтобы избежать проблем с системой в будущем. Поддерживаемые как на системах с AMD, так и с Intel (EM64T) <code>CFLAGS</code>: <code>-O2 -march=native -pipe</code>.

=== Какое ядро использовать? ===

Вы можете использовать большую часть ядер, доступных через Portage (пакетов *-sources). Мы рекомендуем {{Package|sys-kernel/gentoo-sources}}, поскольку это ядро спроектировано специально для Gentoo Linux. Оно содержит множество ориентированных на AMD64 патчей, и поэтому является единственным ядром, официально поддерживаемым проектом Gentoo/AMD64.

Убедитесь, что параметр ядра <code>IA32_EMULATION</code> включён:

{{RootCmd|cd /usr/src/linux
|make menuconfig}}

{{KernelBox|title=Включение эмуляции IA32|1=
Executable file formats / Emulations  --->
  [*] IA32 Emulation
}}

{{Warning|You may experience build failures on [[multilib]] systems if you deactivate this option.}}

=== Will I have a performance upgrade if I use a 64-bit system instead of 32-bit? ===

That is a difficult question to answer. In some cases, you will experience a performance improvement, in other cases you will not. For everyday use, there is almost no difference between 64-bit and 32-bit. 64-bit is generally faster when it comes to floating point computing, which is normally the case in multimedia applications and 3D rendering. Linux.com's articles [http://www.linux.com/articles/114024?tid=121 "64-bit performance in Gentoo Linux"] and [http://www.linux.com/feature/43873 "64-bit Linux and BSD are maturing steadily"] may interest you. There's also a nice thread, [https://forums.gentoo.org/viewtopic-t-349691.html "Article: 64-bit performance in Gentoo Linux"] in our forums.

=== Что такое multilib, и как его использовать? ===

Every AMD64 processor is able to run 32-bit code as well as 64-bit code. However, when you have a 32-bit application, you are unable to mix it with 64-bit libraries or vice versa. You can, however, natively (without emulation) run 32-bit applications if all shared libraries it needs are available as 32-bit objects. You can choose whether you want [[multilib]] support or not by selecting the according profile. The default is a multilib-enabled profile.

{{Warning|Switching from a no-multilib to a multilib-enabled profile is currently not supported ([http://jkroon.blogs.uls.co.za/it/gentoo/gentoo-converting-no-multilib-to-multilib conversion hints]), so think over your decision twice before you use the no-multilib profile.}}

=== How do I create a 32-bit chroot? ===

Please read the [//www.gentoo.org/proj/en/base/amd64/howtos/chroot.xml 32bit chroot guide].

=== Can I upgrade from my x86 system to AMD64 by doing <code>emerge -e @world</code>? ===

Due to several differences between {{keyword|x86}} (32-bit) and {{keyword|amd64}} (64-bit) installations, it is impossible to upgrade this way. Please perform a fresh install using the [[Handbook:AMD64|AMD64 Handbook]].

Note that binary files created on an x86 system most likely cannot be read by packages on an AMD64 system. In particular, databases such as MySQL, innoDB, Berkeley&nbsp;DB, SQLite, OpenLDAP, etc. cannot simply be copied as-is. You will need to dump the database into an architecture-independent format, such as a text file, before attempting to restore it on an AMD64 system.

=== Возможно ли использовать Reiser4? ===

Поддержки файловой системы Reiser4 нет ни в одном из ядер, предлагаемых проектом Gentoo Kernel, так что команда AMD64 тоже не поддерживает её. Ответ — нет.

== Оборудование ==

=== Будут ли работать бинарные драйвера NVIDIA/ATI? ===

Да, NVIDIA и ATI предоставляют работающие на AMD64 драйвера. Их можно установить командой <kbd>emerge x11-drivers/nvidia-drivers</kbd> или <kbd>emerge x11-drivers/ati-drivers</kbd>. При возникновении других вопросов об этих драйверах, обратитесь к [[NVidia/nvidia-drivers/ru|руководству по nvidia-drivers]] или [[ATI FAQ/ru|ЧаВо по ATI]].

=== Как задействовать технологии Cool'n'Quiet/PowerNow/SpeedStep? ===

Необходимо скомпилировать ядро с поддержкой этих возможностей. Просто включите перечисленные ниже параметры: 

{{KernelBox|title=Параметры ядра для Cool'n'Quiet/PowerNow/SpeedStep|1=
Power management options --->
  [*] Run-time PM core functionality
  [*] ACPI (Advanced Configuration and Power Interface) Support --->
    <*>   Processor
    <*>     Thermal Zone
  CPU Frequency scaling --->
  [*] CPU Frequency scaling
         Default CPUFreq governor (ondemand) --->
  -*-   'performance' governor
  <*>   'userspace' governor for userspace frequency scaling
  -*-   'ondemand' cpufreq policy governor
  <*>   ACPI Processor P-States driver
  <*>   AMD Opteron/Athlon64 PowerNow!
-*- CPU idle PM support
}}

Затем выполните <kbd>emerge sys-power/cpufrequtils</kbd> и отредактируйте {{Path|/etc/conf.d/cpufrequtils}} любым текстовым редактором. 

{{FileBox|filename=/etc/conf.d/cpufrequtils|title=Пример конфигурационного файла|1=
# ru: Параметры, передаваемые подсистеме cpufreq при старте (через утилиту 'cpufreq-set')
# Options when starting cpufreq (given to the 'cpufreq-set' program)
START_OPTS="--governor ondemand"
  
# ru: Параметры, передаваемые подсистеме cpufreq при остановке (через утилиту 'cpufreq-set')
# Options when stopping cpufreq (given to the 'cpufreq-set' program)
STOP_OPTS="--governor performance"
}}

Осталось только запустить <kbd>rc-update add cpufrequtils boot</kbd>, чтобы эти параметры устанавливались при каждой загрузке. 

{{Note|Вам может пригодиться [[Power management/HOWTO/ru|Руководство по управлению питанием]], которое содержит больше советов по управлению питанием CPU.}}

== Приложения ==

=== Работает ли Adobe Flash? ===

Да. Установите {{Package|www-plugins/adobe-flash}}. Обязательно прочитайте сообщения, которые отображаются при сборке (emerge messages).

=== Я хочу установить пакет foo, но emerge выводит: (masked by: ~amd64 keyword) ===

Это означает, что пакет находится в «тестовой» части дерева. Более подробную информацию можно найти в man-странице Portage (<kbd>man portage</kbd>) или главе [http://www.gentoo.org/doc/en/handbook/handbook-amd64.xml?part=3&chap=3 о смешивании ветвей ПО] [http://www.gentoo.org/doc/en/handbook/handbook-amd64.xml Настольной книги для архитектуры AMD64].

=== Я хочу установить пакет foo, но emerge выводит: (masked by: missing keyword) ===

Это означает, что пакет не был достаточно протестирован. Из этого не обязательно следует, что пакет не работает. Его можно размаскировать, установив для пакета другую архитектуру (или набор архитектур). В следующем примере показано, как сделать, чтобы Portage допускал установку данного пакета на любой архитектуре:

{{RootCmd|echo "category/packagename **" >> /etc/portage/package.accept_keywords
|emerge packagename}}

Если пакет хорошо работает на вашей системе, то вы можете дать нам знать об этом, открыв запрос в [https://bugs.gentoo.org/ Gentoo's Bugzilla]. После этого команда проекта AMD64 может установить архитектуру для пакета, и другие пользователи получат пользу от ваших тестов. 

{{Warning|Не следует вызывать команды вроде <kbd>ACCEPT_KEYWORDS{{=}}"~x86" emerge packagename</kbd>. Это наверняка «поломает» дерево Portage и сделает систему непригодной к использованию.}}

== Как можно помочь проекту Gentoo/AMD64? ==

=== Как помочь? ===

С ростом популярности архитектуры amd64 увеличивается и необходимость в содействии пользователей. Для улучшения качества Gentoo на AMD64 делается много разной работы. Средний пользователь может помочь нам следующим: 

* Открытие отчётов об ошибках.
* Тестирование программ, не имеющих ключа <code>~amd64</code>.
* Участие в [http://www.gentoo.org//proj/en/base/amd64/at/ Проекте тестирования архитектур].
* Содействие в поиске ответов на вопросы в списках рассылки, на форумах и в IRC.
* Отправка патчей.

== Другие ресурсы ==

=== Где можно получить помощь или больше информации по Gentoo/AMD64? ===

Если вы не нашли ответа на какой-либо вопрос, рекомендуем посмотреть ресурсы, перечисленные на [http://www.gentoo.org/proj/en/base/amd64/ нашей домашней странице]. Вы также можете задать нам вопрос на канале <code>#gentoo-amd64</code> сервера <code>chat.freenode.net</code>, на [https://forums.gentoo.org/viewforum-f-46.html форуме Gentoo/AMD64] или в списке рассылки <code>gentoo-amd64@lists.gentoo.org</code>.

[[Category:Core system]] {{Migrated|originalauthors= Simon Stelling, Luis Medinas, Gerald J. Normandin Jr., Xavier Neys, nightmorph+}}
