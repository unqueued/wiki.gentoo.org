<languages />


{{Metadata|abstract=Часто задаваемые вопросы по Gentoo AMD64}}

[[Article description::The Gentoo AMD64 Frequently Asked Questions article.]]

{{InfoBox stack|{{InfoBox todo|Add instructions for [[#How do I use Cool'n'Quiet/PowerNow/SpeedStep features?|Cool'n'Quiet/PowerNow/SpeedStep]] for systemd users|header=true}}}}


== Введение ==

Этот документ содержит наиболее часто задаваемые вопросы об использовании Gentoo на системах с архитектурой AMD64. Многие из этих вопросов изначально были заданы на [https://forums.gentoo.org/ форумах], в IRC или различных [https://www.gentoo.org/get-involved/mailing-lists/all-lists.html списках рассылки]. Для данной архитектуры поддержку Gentoo Linux осуществляет [[Project:AMD64|проект AMD64]]. Если у вас есть предложения или вопросы по этому ЧаВо, вы можете оставить свой комментарий в соответствующей [[Talk:AMD64/FAQ|странице обсуждения]].

== Установка ==

=== В чём разница между AMD64 и EM64T? ===

Оба понятия относятся к 64-битным процессорам, от AMD (AMD64) и Intel (EM64T) соответственно. AMD производит 64-битные процессоры в рамках серий Athlon&nbsp;64, Turion, Neo, Phenom, FX, A''X''/E''X''/C''X'' и семейство Opteron. Intel — в рамках серий Core&nbsp;2, Core&nbsp;i "X", Celeron, Xeon и Pentium (все на базе архитектуры Core&nbsp;2 и более новые). [https://en.wikipedia.org/wiki/x86-64#Intel_64 Некоторые последние версии] старых чипов Pentium&nbsp;4 и Xeon также поддерживают EM64T.

AMD выпустила первые 64-битные процессоры раньше Intel. В силу этих исторических причин архитектура всех x86-64-совместимых процессоров обозначается в Gentoo ключевым словом {{keyword|amd64}}. Так что «AMD64» — это общее обозначение для 64-битных чипов от AMD и Intel.

=== Какие CFLAGS использовать? ===

Следует использовать простые <var>CFLAGS</var>, чтобы избежать проблем с системой в будущем. Поддерживаемые как на системах с AMD, так и с Intel (EM64T) <var>CFLAGS</var>: <code>-O2 -march=native -pipe</code>.

=== Какое ядро использовать? ===

Вы можете использовать практически все ядра, доступные через Portage. Мы рекомендуем {{Package|sys-kernel/gentoo-sources}}, поскольку это ядро спроектировано специально для Gentoo Linux. Оно содержит множество ориентированных на AMD64 патчей, и поэтому является единственным ядром, официально поддерживаемым проектом Gentoo/AMD64.

Убедитесь, что параметр ядра <var>IA32_EMULATION</var> включён:

{{RootCmd|cd /usr/src/linux
|make menuconfig}}

{{KernelBox|title=Включение эмуляции IA32|1=
Executable file formats / Emulations  --->
  [*] IA32 Emulation
}}

{{Warning|Отключение этого параметра может привести к ошибкам на системах с [[multilib]].}}

=== Увеличится ли производительность, если использовать 64-битную систему вместо 32-битной? ===

Это сложный вопрос. В некоторых случаях наблюдается улучшение производительности, в некоторых — нет. В повседневной работе между 64- и 32-битностью почти нет разницы. На 64-битных системах как правило быстрее выполняются вычисления над числами с плавающей запятой, они часто используются мультимедиа-приложениями и приложениями для 3D-рендеринга. Возможно, вам будут интересны статьи с Linux.com [https://www.linux.com/news/64-bit-performance-gentoo-linux «Производительность в 64-битном Gentoo Linux»] и [https://www.linux.com/news/64-bit-linux-and-bsd-are-maturing-steadily «64-битные Linux и BSD неуклонно взрослеют»]. Также есть отличная тема на нашем форуме [https://forums.gentoo.org/viewtopic-t-349691.html «Статья: Производительность в 64-битном Gentoo Linux»].

=== Что такое multilib, и как его использовать? ===

Любой процессор архитектуры AMD64 может запускать 32-битный код, так же как и 64-битный. Но нельзя запустить 32-битное приложение с 64-битными библиотеками или наоборот. Можно, однако, «нативно» (без эмуляции) запустить 32-битное приложение, если все нужные ему разделяемые библиотеки доступны в 32-битном виде. Наличие или отсутствие поддержки [[multilib]] соответствует выбранному вами профилю. Стандартный профиль включает поддержку multilib.

{{Warning|Переключение с профиля без multilib на профиль multilib на данный момент не поддерживается, так что обдумайте своё решение дважды, прежде чем выбрать профиль без поддержки multilib.}}

=== Как сделать 32-битный chroot? ===

Смотрите [[Project:AMD64/32-bit_Chroot_Guide|32bit chroot guide]].

=== Можно ли обновить систему с x86 до AMD64 с помощью emerge -e @world? ===

Таким способом обновиться невозможно в силу некоторых различий между сборками для {{keyword|x86}} (32-битными) и {{keyword|amd64}} (64-битными). Вы можете установить новую систему, воспользовавшись [[Handbook:AMD64/ru|AMD64 Handbook]].

Обратите внимание на то, что бинарные файлы, созданные на x86-системе, часто не могут быть прочитаны приложениями в системе с архитектурой AMD64. В частности, файлы баз данных, таких как MySQL, innoDB, Berkeley&nbsp;DB, SQLite, OpenLDAP и т. п., нельзя скопировать как есть. Нужно сделать дамп в независимый от архитектуры формат (например, текстовый файл), а затем восстановить базу из него на AMD64-системе.

=== Возможно ли использовать Reiser4? ===

Поддержки файловой системы Reiser4 нет ни в одном из ядер, предлагаемых проектом Gentoo Kernel, так что команда AMD64 тоже не поддерживает её. Ответ — нет.

== Оборудование ==

=== Будут ли работать бинарные драйвера NVIDIA/ATI? ===

Да, NVIDIA и ATI предоставляют работающие на AMD64 драйвера. Можно установить или {{Package|x11-drivers/nvidia-drivers}}, или {{Package|x11-drivers/ati-drivers}}. При возникновении других вопросов об этих драйверах, обратитесь к [[NVidia/nvidia-drivers/ru|руководству по nvidia-drivers]] или [[ATI FAQ/ru|ATI FAQ]].

=== Как задействовать технологии Cool'n'Quiet/PowerNow/SpeedStep? ===

Необходимо скомпилировать ядро с поддержкой этих возможностей. Просто включите перечисленные ниже параметры: 

{{KernelBox|title=Параметры ядра для Cool'n'Quiet/PowerNow/SpeedStep|1=
Power management and ACPI options --->
  [*] Device power management core functionality
  [*] ACPI (Advanced Configuration and Power Interface) Support --->
    <*>   Processor
    <*>     Thermal Zone
  CPU Frequency scaling --->
  [*] CPU Frequency scaling
         Default CPUFreq governor (ondemand) --->
  -*-   'performance' governor
  <*>   'userspace' governor for userspace frequency scaling
  -*-   'ondemand' cpufreq policy governor
  <*>   ACPI Processor P-States driver
  CPU Idle  --->
    -*- CPU idle PM support
}}

Затем установите {{Package|sys-power/cpupower}} и отредактируйте {{Path|/etc/conf.d/cpupower}} любым текстовым редактором. 

{{FileBox|filename=/etc/conf.d/cpupower|title=Пример конфигурационного файла|1=
# Параметры, передаваемые cpufreq при старте (через утилиту `cpupower`)
START_OPTS="--governor ondemand"
  
# Параметры, передаваемые cpufreq при остановке (через утилиту `cpupower`)
STOP_OPTS="--governor performance"
}}

Осталось только запустить {{c|rc-update add cpupower boot}}, чтобы эти параметры устанавливались при каждой загрузке. 

{{Note|Вам может пригодиться [[Power management/Guide/ru|Руководство по управлению питанием]], которое содержит больше советов по управлению питанием CPU.}}

== Приложения ==

=== Работает ли Adobe Flash? ===

Да. Установите {{Package|www-plugins/adobe-flash}}. Обязательно прочитайте сообщения, которые отображаются после сборки.

=== Я хочу установить пакет foo, но emerge выводит: (masked by: ~amd64 keyword) ===

Это означает, что пакет находится в «тестовой» части дерева. Более подробную информацию можно найти в man-странице Portage ({{c|man portage}}) или [[Handbook:AMD64/Portage/Branches/ru|Смешивание ветвей ПО]] часть [[Handbook:AMD64/ru|AMD64 Handbook]].

=== Я хочу установить пакет foo, но emerge выводит: (masked by: missing keyword) ===

Это означает, что пакет не был достаточно протестирован. Из этого не обязательно следует, что пакет не работает. Его можно размаскировать, установив для пакета другую архитектуру (или набор архитектур). В следующем примере показано, как сделать, чтобы Portage допускал установку данного пакета на любой архитектуре:

{{RootCmd|echo "category/packagename **" >> /etc/portage/package.accept_keywords
|emerge packagename}}

Если пакет хорошо работает на вашей системе, то вы можете дать нам знать об этом, открыв запрос в [https://bugs.gentoo.org/ Gentoo's Bugzilla]. После этого команда проекта AMD64 может установить архитектуру для пакета, и другие пользователи получат пользу от ваших тестов. 

{{Warning|Не следует вызывать команды вроде {{c|ACCEPT_KEYWORDS{{=}}"~x86" emerge packagename}}. Это наверняка «поломает» дерево Portage и сделает систему непригодной к использованию.}}

== Как можно помочь проекту Gentoo/AMD64? ==

=== Как помочь? ===

С ростом популярности архитектуры {{Keyword|amd64}} увеличивается и необходимость в содействии пользователям. Для улучшения качества Gentoo на AMD64 делается много разной работы. Средний пользователь может помочь нам следующим: 

* Открытие отчётов об ошибках.
* Тестирование программ, не имеющих ключа {{Keyword|~amd64}}.
* Содействие в поиске ответов на вопросы в списках рассылки, на форумах и в IRC.
* Отправка патчей.
* Участие в [[Project:Arch Testers|Проекте тестирования архитектуры AMD64]].

== Другие ресурсы ==

=== Где можно получить помощь или больше информации по Gentoo/AMD64? ===

Если вы не нашли ответа на какой-либо вопрос, рекомендуем посмотреть ресурсы, перечисленные на [[Project:AMD64| нашей домашней странице проекта]]. Вы также можете задать нам вопрос на канале {{IRC|gentoo-amd64}} сервера <code>chat.freenode.net</code>, на [https://forums.gentoo.org/viewforum-f-46.html форуме Gentoo/AMD64] или в списке рассылки {{Mail|gentoo-amd64@lists.gentoo.org}}.

[[Category:Core system]] {{Migrated|originalauthors= Simon Stelling, Luis Medinas, Gerald J. Normandin Jr., Xavier Neys, {{Dev|nightmorph}}}}
