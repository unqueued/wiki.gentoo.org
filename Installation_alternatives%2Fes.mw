<languages />


{{Metadata|abstract=Esta guía está orientada a ser un repositorio de métodos alternativos para la instalación de Gentoo para aquéllos con necesidades
especiales de instalación tales como falta de unidades de CDROM o de computadoras que no pueden iniciar desde CDs.}}

Esta guía está orientada a ser un repositorio de métodos alternativos para la instalación de Gentoo para aquéllos con necesidades especiales de instalación tales como falta de unidades de CDROM o de computadoras que no pueden iniciar desde CDs.

== Acerca de este documento ==

Si el método estándar de arranque para la instalación por CD no es posible desde su ordenador (o simplemente es imposible utilizarlo o no es agradable) se puede obtener ayuda al respecto aquí. Este documento servirá para ofrecerle un repositorio de técnicas y métodos alternativos para la instalación de Gentoo Linux. O si se prefiere, servirá como medio para publicar su
más novedoso método de instalación. Si existe alguna técnica de instalación considerada útil o se ha encontrado alguna otra manera divertida de instalar Gentoo Linux, por favor, no dude en documentarla y enviarla a [https://bugs.gentoo.org/ Bugzilla].

== Iniciar el CD de Instalación con Smart BootManager ==

Descargue Smart BootManager disponible en [http://btmgr.sourceforge.net/download.html http://btmgr.sourceforge.net/download.html]. Las versiones en código fuente para Linux o formato binario y los {{Path|.exe}} de windows están disponibles, así como muchos paquetes de idiomas. Sin embargo, por ahora, el método más adecuado sería utilizar el formato binario, ya que el código no compila con las nuevas versiones de NASM. 

Compile el programa desde el código o simplemente descargue el archivo binario. Hay varias opciones que pueden utilizarse durante la creación de un disquete de arranque, como puede observar a continuación. 

{{CodeBox|title=Opciones de Smart BootManager|1=
sbminst [-t theme] [-d drv] [-b backup_file] [-u backup_file]

  -t theme select the theme to be used, in which the theme could be:
    us = English theme    de = German theme
    hu = Hungarian theme  zh = Chinese theme
    ru = Russian theme    cz = Czech theme
    es = Spanish theme    fr = French theme
    pt = Portuguese theme

  -d drv set the drive that you want to install Smart BootManager on;
   for Linux:
    /dev/fd0 is the first floppy driver,
    /dev/hda is the first IDE harddisk driver.
    /dev/sda is the first SCSI harddisk driver.
   for DOS:
    0 is the first floppy drive
    128 is the first hard drive;

   -c disable CD-ROM booting feature;

   -b backup_file backup the data that will be overwritten for
     future uninstallation;

   -u backup_file uninstall Smart BootManager, should be used alone;

   -y do not ask any question or warning.
}}

Utilice {{c|sbminst}} para construir el disquete de arranque:

{{RootCmd|sbminst -t us -d /dev/fd0}}

{{Note|Cambiar {{Path|fd0}} por el nombre de dispositivo de disquete adecuado.}}

Ahora simplemente coloque el disquete en la disquetera del ordenador, así como el CD de Instalación dentro del CD-ROM e inicie el ordenador. 

Se mostrará el diálogo de Smart BootManager. Seleccionar el CD-ROM y presionar la tecla {{Key|Intro}} para cargar el CD de instalación. Una vez cargado, continúe con las instrucciones normales de instalación. 

Puede encontrar más información sobre Smart BootManager en [http://btmgr.sourceforge.net/ http://btmgr.sourceforge.net/].

== Instalación desde LiveCDs que no son de Gentoo ==

=== Introducción ===

{{Important|Los desarrolladores Gentoo no pueden ofrecer soporte si algo ocurre al usar un LiveCD que no sea de Gentoo ya que no hay forma de arreglarlo, encontrar los problemas o documentar cada característica en cada LiveCD existente. oficialmente solo se brinda soporte para LiveCDs Gentoo. Por favor, visite los [https://forums.gentoo.org/ Foros de Gentoo] si encuentra problemas con los medios de instalación alternativos.}}

Los usuarios pueden iniciar desde otros LiveCD aparte de los que ofrece Gentoo. Independientemente de esto, ofrecen un entorno funcional cuando se compile e instale Gentoo. Las instrucciones que proporcionamos aquí deben funcionar en principio con cualquier otro LiveCD. 

Hay demasiados LiveCDs para [http://distrowatch.com/search.php listarlos] aquí, pero una opción podría ser intentarlo con [http://www.knoppix.org/ Knoppix]. Proporciona un entorno gráfico completo, con aplicaciones ofimáticas, navegadores web y juegos para mantenerlo ocupado. Knoppix está disponible solo para usuarios de la plataforma x86, así que dependiendo de las necesidades del usuario puede que sea necesario utilizar otro LiveCD diferente. 

{{Warning|Sepa que si se guarda cualquier cosa en el directorio de usuario del LiveCD mientras espera a que se instale el sistema Gentoo, se perderá todo cuando se reinicie en Gentoo. ¡Asegúrese de guardar los ficheros importantes en el disco duro o en otro ordenador!}}

=== Instrucciones de instalación ===

Arranque desde el LiveCD. Abra una terminal y lance {{c|su -}} para que se pueda cambiar la contraseña. Esto permite definer la contraseña del usuario root para el CD. Ahora se puede configurar el demonio sshd para acceder de forma remota, si esto hiciera falta. A continuación se debe crear el punto de montaje {{Path|/mnt/gentoo}} si se necesita. 

{{RootCmd|mkdir /mnt/gentoo}}

Llegados a este punto, se puede seguir con la instalación normal a partir de [[Handbook:AMD64/Installation/Disks/es|preparar los discos]]. Sin embargo, cuando se tenga que montar el sistema proc, lanzar la siguiente orden en su lugar: 

{{RootCmd|mount -o bind /proc /mnt/gentoo/proc}}

Cuando se desempaquete el comprimido stage en [[Handbook:AMD64/Installation/Stage/es#Extraer_el_stage_comprimido|extraer el stage comprimido]] se deberá usar una orden {{c|tar}} diferente para asegurar que los IDs de grupo se crean correctamente en el stage desempaquetado: 

{{RootCmd|tar --numeric-owner --xattrs -xvjpf stage3-*.tar.bz2 -C /mnt/gentoo }}

Si se está utilizando Ubuntu, observe que {{Path|/dev/shm}} es un enlace simbólico {{Path|/run/shm}}. Se debe montar de forma asociada (bind) o crear un tmpfs en esta localización (dentro de la ruta chroot). Para montar de forma asociada, lance la siguiente orden (antes de hacer chroot):

{{RootCmd|mount --rbind /run/shm /mnt/gentoo/run/shm}}

Esto se hace para evitar el problema {{Bug|496328}} en el que Python ve que <code>sem_open()</code> está roto (debido a la falta de {{Path|/dev/shm}}) y Portage lo ve también como un error (técnicamente la configuración de Python debería continuar así como su construcción asumiendo que se ha habilitado la variable <var>POSIX_SEMAPHORES_NOT_ENABLED</var>, sin embargo esto llevaría a una construcción de Python muy poco deseable).

Una vez se está preparado para hacer chroot al entorno desempaquetado en [[Handbook:AMD64/Installation/Base/es|instalar el sistema base]], se necesitará usar una secuencia diferente de órdenes chroot. Esto asegurará que las variables de entorno se establezcan de forma correcta. 

{{Note|Algunos LiveCDs utilizan una configuración de entorno no muy usual, de aquí la opción {{c|env -i}} para limpiarlo a un estado razonable.}}

{{RootCmd|chroot /mnt/gentoo /bin/env -i TERM{{=}}$TERM
/bin/bash
|env-update
|source /etc/profile
|export PS1{{=}}"(chroot) $PS1"}}

Finalmente, sepa que algunas <var>FEATURES</var> (Características) de Portage no funcionarán en el LiveCD. Tenga especial cuidado con <code>userpriv</code> y <code>usersandbox</code>. Si aparecen errores, se puede intentar desactivar algunas o todas las <var>FEATURES</var> opcionales.

== Instalación sin disco utilizando PXE y un núcleo, un initrd y un squashfs desde el LiveCD ==

Este método es más fácil de configurar que el arranque PXE basado en iSCSI o NFS. Múltiples máquinas pueden arrancar desde el mismo conjunto de imágenes distribuidas a través de TFTP y se puede extender fácilmente para que también funcione sobre HTTP u otro protocolo.

Algunas distribuciones incluyendo Fedora ya se distribuyen con imágenes necesarias para inciar un CD live o de instalación. Este no es el caso de Gentoo. En lugar de ello, los usuarios necesitan:

# Extraer el núcleo, initrd y [[SquashFS|squashfs]] desde el liveCD, 
# Parchear el contenido del initrd, y
# Mezclar squashfs con initrd.

Solo ahora se podrá configurar un cargador de arranque basado en PXE que cargará las imágenes e iniciará un sistema vivo.

Guarde el siguiente guión, asegúrese de que es ejecutable y escriba su directorio en <var>$PATH</var> (o siga los pasos documentados de forma manual).


{{CodeBox|title=gentoo-pxe-boot|<nowiki>
#!/bin/bash -xe

tftproot="$1"
image="$2"
tmp="./tmp"

test -z "$tftproot" -o -z "$image" && echo "Usage: $0 <tftproot> <gentoo-iso>" >&2 && exit 1
test -e "$tmp" && echo "Temporary path '$tmp' already exists." >&2 && exit 1

iso="$tmp/iso"
initrd="$tmp/initrd.dir"

# prepare directories
mkdir -p "$tmp" "$iso" "$initrd/mnt/cdrom"

# extract files from ISO image
mount -o ro,loop "$image" "$iso"
cp "$iso"/{image.squashfs,isolinux/gentoo,isolinux/gentoo.igz} "$tmp"
umount "$iso"

# rename kernel
mv "$tmp/gentoo" "$tmp/kernel"

# patch initramfs and add squashfs to it
xz -dc "$tmp/gentoo.igz" | ( cd "$initrd" && cpio -idv )
patch -d "$initrd" -p0 <<'EOF'
--- init.orig	2016-01-02 00:00:00.000000000 +0100
+++ init	2016-01-02 00:00:00.000000000 +0100
@@ -455,9 +455,9 @@
 		CHROOT=${NEW_ROOT}
 	fi
 
-	if [ /dev/nfs != "$REAL_ROOT" ] && [ sgimips != "$LOOPTYPE" ] && [ 1 != "$aufs" ]; then
-		bootstrapCD
-	fi
+#	if [ /dev/nfs != "$REAL_ROOT" ] && [ sgimips != "$LOOPTYPE" ] && [ 1 != "$aufs" ]; then
+#		bootstrapCD
+#	fi
 
 	if [ "${REAL_ROOT}" = '' ]
 	then
@@ -591,7 +591,7 @@
 		else
 			bad_msg "Block device ${REAL_ROOT} is not a valid root device..."
 			REAL_ROOT=""
-			got_good_root=0
+			got_good_root=1
 		fi
 	done
 
@@ -670,7 +670,7 @@
 	[ -z "${LOOP}" ] && find_loop
 	[ -z "${LOOPTYPE}" ] && find_looptype
 
-	cache_cd_contents
+	#cache_cd_contents
 
 	# If encrypted, find key and mount, otherwise mount as usual
 	if [ -n "${CRYPT_ROOT}" ]
EOF
cp "$tmp/image.squashfs" "$initrd/mnt/cdrom"
( cd "$initrd" && find . -print | cpio -o -H newc | gzip -9 -c - ) > "$tmp/initrd"

# prepare boot data
grub2-mknetdir -v --net-directory="$tftproot"
cat > "$tftproot/boot/grub/grub.cfg" <<'EOF'
menuentry "Gentoo Live" {
    linux /boot/kernel root=/dev/ram0 init=/linuxrc loop=/image.squashfs looptype=squashfs cdroot=1 real_root=/
    initrd /boot/initrd
}
EOF
cp "$tmp"/{kernel,initrd} "$tftproot/boot"

# cleanup
rm -rf "$tmp"
</nowiki>}}


Descargue {{Path|install-amd64-minimal-20151231.iso}} (o inténtelo con la versión actual si es otra). Instale {{Package|net-ftp/tftp-hpa}}, asegúrese de que ofrece {{Path|/tftproot}} y arránquelo.

Lance el guión con los parámetros adecuados.

{{RootCmd|gentoo-pxe-boot /tftproot install-amd64-minimal-20141204.iso}}

Ahora el servicio de arranque tftp está preparado de modo que el siguiente paso es configurar un servicio DHCP. Es posible poner en marcha un servidor DHCP en la máquina, simplemente debemos asegurarnos de que las máquinas que van a arrancar están conectadas a ella. También se puede ajustar la configuración de un enrutador ya existente.

Un ejemplo de configuración para el servicio dhcp de OpenWRT se muestra a continuación:

{{CodeBox|title=/etc/config/dhcp|
config boot linux                   
        option filename boot/grub/i386-pc/core.0
        option servername boot
        option serveraddress 84.246.161.86
}}

== Instalación sin disco mediante arranque PXE y NFS ==

=== Requisitos ===

PXE (Preboot eXecution Environment, o entorno para ejecución preinicio) es un método que sirve para arrancar computadoras a través de un interfaz de red que reconozca el protocolo PXE (usando un BIOS que soporta PXE). En el caso en el que el sistema no ofrezca soporte para el arranque mediante PXE desde la interfaz de redo o el BIOS, PXE también se puede utilizar como un método desde los dispositivos de bloque (como CDs o DVDs). En estos casos un entorno mínimo de arranque suplanta al interfaz de red (ver también [http://etherboot.org Etherboot/gPXE]). 

=== Configuración básica del servidor ===

Crear los directorios: lo primero que hay que hacer es crear los directorios donde se almacenará el sistema sin disco. Cree un directorio llamado {{Path|/diskless}} el cual acogerá un directorio para cada cliente sin disco. De aquí en adelante, el cliente en el que trabajaremos se llamára 'eta'. 

{{RootCmd|mkdir /diskless
|mkdir /diskless/eta
}}

Configurar DHCP y TFTP: el cliente obtendrá la información de arranque utilizando DHCP y descargará todos los archivos que necesita usando TFTP. 

Para dhcpd, simplemente lance {{c|emerge dhcp}} (o cualquier otro servidor DHCP de su elección). Asegúrese de que se selecciona el interfaz correcto en {{Path|/etc/conf.d/dhcpd}} y configúrelo de forma adecuada. Después añada lo siguiente en {{Path|/etc/dhcp/dhcpd.conf}}. 

{{Note|Esto proporciona una dirección IP estática para el cliente y la ruta imagen de arranque PXE, aquí {{Path|pxegrub}}. En el ejemplo, hay que reemplazar la dirección MAC de la tarjeta ethernet del cliente por la dirección MAC adecuada así como el directorio donde se almacenarán los archivos del cliente.}}

{{FileBox|filename=dhcpd.conf|title=|lang=bash|1=
option option-150 code 150 = text ;
ddns-update-style none ;
host eta {
hardware ethernet 00:00:00:00:00:00;
fixed-address ip.add.re.ss;
option option-150 "/eta/boot/grub.lst";
filename "/eta/boot/pxegrub";
}
}}

A continuación configurar el interfaz en
{{Path|/etc/conf.d/net}} de forma que no pierda la configuración al arrancar. Eche un vistazo al archivo {{Path|/usr/share/doc/openrc-*/net.example.bz2}} para más información. 

{{FileBox|filename=/etc/conf.d/net|title=Asegúrese de que el interfaz (aquí se ha tomado eth0 como ejemplo) no se reconfigura en el inicio|lang=bash|1=
config_eth0=( "noop" )
}}

Para TFTP, haga emerge de {{Package|net-ftp/tftp-hpa}}. En {{Path|/etc/conf.d/in.tftpd}}, escriba lo siguiente: 

{{FileBox|filename=in.tftpd|title=|lang=bash|1=
INTFTPD_PATH="/diskless"
INTFTPD_USER="nobody"
INTFTPD_OPTS="-u ${INTFTPD_USER} -l -vvvvvv -p -c -s ${INTFTPD_PATH}"
}}

Configurar GRUB: Las versiones antiguas de GRUB utilizaban el ajuste USE <code>netboot</code> para crear una imagen PXE. image

{{RootCmd|echo "sys-boot/grub netboot" >> /etc/portage/package.use}}

Instale GRUB.

{{RootCmd|emerge -av grub}}

Una vez esté compilado GRUB, cree el directorio de inicio de los clientes sin disco.

{{RootCmd|grub2-mknetdir --net-directory{{=}}/diskless/eta}}

La forma original era copiar la imagen PXE al cliente sin disco, sin embargo la ruta parece que ya no existe.

{{RootCmd|mkdir /diskless/eta/boot|cp /usr/lib/grub/pxegrub /diskless/eta/boot/pxegrub}}

A continuación edite su fichero de configuración {{Path|grub.lst}}.

{{RootCmd|nano -w /diskless/eta/boot/grub.lst}}

{{FileBox|filename=grub.lst|title=|lang=bash|1=
default 0
timeout 30
  
title=Gentoo sin disco
root (nd)
kernel /eta/bzImage ip=dhcp root=/dev/nfs nfsroot=ip.add.re.ss:/diskless/eta
  

# Para la opción nfsroot, la dirección IP es la del servidor y el directorio es en el que están localizados los ficheros del cliente sin disco (en el servidor).
}}

Configurar NFS: NFS es bastante fácil de configurar. Lo único que se debe hacer es añadir una línea al archivo de configuración {{Path|/etc/exports}}: 

{{FileBox|filename=/etc/exports|title=|lang=bash|1=
/diskless/eta eta(rw,sync,no_root_squash)
}}

Actualice los equipos: una cosa importante que debe hacer ahora es modificar el {{Path|/etc/hosts}} para ajustarlo a los requisitos. 

{{Filebox|filename=/etc/hosts|title=|lang=bash|1=
127.0.0.1 localhost
192.168.1.10 eta.example.com eta
192.168.1.20 sigma.example.com sigma
</pre>
}}

=== Crear el sistema en el servidor ===

El siguientes paso es reiniciar el servidor utilizando un CD de instalación de Gentoo (aunque los administradores con más experimentados pueden continuar si tienen suficientes conocimientos en instalaciones de Gentoo). Seguir el procedimiento de instalación estándar tal y como se explica en el [[Handbook:Main_Page/es|manual de Gentoo Handbook]] PERO con los siguientes cambios: Cuando se monte el sistema de ficheros, continuar con el siguiente paso (donde {{Path|sdaX}} es la partición en la cual se creó el directorio {{Path|/diskless}}).

{{RootCmd|mount /dev/sdaX /mnt/gentoo}}

No se necesita montar ninguna otra partición ya que todos los ficheros se encuentran en el directorio {{Path|/diskless/eta}}. 

Comprimidos stage y chroot: Este ejemplo utiliza un comprimido stage3. Monte {{Path|/proc}} en el directorio del cliente sin disco y haga chroot para continuar con la instalación. Después siga el manual de instalación hasta la configuración del núcleo. 

{{Warning|Tenga especial cuidado al extraer el comprimido stage en el destino para no terminar extrayéndolo en una instalación ya existente.}}

{{RootCmd|cd /mnt/gentoo/diskless/eta/
|tar -xvjpf /mnt/cdrom/gentoo/stage3-*.tar.bz2
|mount -t proc /proc /mnt/gentoo/diskless/eta/proc
|cp /etc/resolv.conf /mnt/gentoo/diskless/eta/etc/resolv.conf
|chroot /mnt/gentoo/diskless/eta/ /bin/bash
|env-update
|source /etc/profile}}

Configuración del Núcleo: cuando se haga {{c|make menuconfig}} de la configuración de núcleo, no olvidar que se deben habilitar las siguientes opciones junto a las otras recomendadas en la guía de instalación. 

{{KernelBox|title=Opciones necesarias para instalaciones sin disco|<pre>

- Soporte para el dispositivo adaptador de red (En el núcleo, ¡*No* como módulo!)

  
-*- Networking support --->  
  Networking options --->
    [*] TCP/IP networking
    [*] IP: kernel level autoconfiguration
    [*] IP: DHCP support
    [*] IP: BOOTP support
  
File systems --->
  [*] Network File Systems --->
    <*> NFS file system support
    [*] Provide NFSv3 client support
    [*] Root file system on NFS
</pre>}}

Guarde el núcleo en el {{Path|/}} del chroot (no en {{Path|/boot}}) de acuerdo con las configuraciones de pxegrub definidas anteriormente. A continuación, configurar el archivo {{Path|/etc/fstab}} de los clientes sin disco. 

{{FileBox|filename=/etc/fstab|title=|lang=bash|<pre>
/dev/cdroms/cdrom0 /mnt/cdrom iso9660 noauto,ro 0 0
</pre>
}}

Y ahora, para evitar que el cliente lance una comprobación del sistema de ficheros: 

{{RootCmd|touch /fastboot
|echo "touch /fastboot" >> /etc/conf.d/local.start
}}

Instale {{Package|nfs-utils}} ya que el cliente depende fuertemente de él: 

{{Emerge|nfs-utils}}

Gestor de arranque. No instale otro gestor de arranque, porque ya existe uno: pxegrub. Simplemente acabe la instalación y reinicie el servidor. Iniciar los servicios que se necesitan para arrancar el nuevo cliente: DHCP, TFTPD, y NFS. 

{{RootCmd|/etc/init.d/dhcp start
|/etc/init.d/in.tftpd start
|/etc/init.d/nfs start}}

=== Iniciar el nuevo cliente ===

Para que el nuevo cliente arranque de forma adecuada, se necesita configurar la BIOS y la tarjeta de red para que use PXE como primer método de arranque,  antes que el CD-ROM o el disquete. Para obtener ayuda sobre esto, consultar los manuales del hardware o la página web de los proveedores. La tarjeta de red debería obtener una dirección IP mediante DHCP y descargar la imagen PXE de GRUB usando TFTP. Entonces, se debería mostrar un bonito menú de arranque de GRUB en blanco y negro en el que los usuarios pueden seleccionar el núcleo de arranque que deseen y presionar la tecla {{Key|Intro}}. Si todo está bien, el núcleo debería arrancar, montar el sistema de ficheros raíz usando NFS y poner a su disposición el símbolo del sistema para hacer entrar en el sistema. ¡Disfrute!

== Instalar Gentoo desde una distribución Linux existente ==

=== Requisitos ===

Para instalar Gentoo desde una distribución Linux ya existente se necesita tener instalada la orden chroot y disponer de una copia del archivo comprimido (tarball) o ISO  que se desea instalar. Se recomienda también una conexión de red ya que de lo contrario la instalación solo puede disponer de los archivos presentes en los medios de instalación. Por cierto un archivo comprimido es un archivo que termina en {{Path|.tbz}} o en {{Path|.tar.gz}}. ¡Comencemos!

=== Visión general ===

En primer lugar se asigna una partición a Gentoo reajustando el tamaño de una partición Linux ya existente, montamos la partición, descomprimimos el fichero en la partición montada, hacemos chroot dentro del pseudo-sistema y comenzamos la compilación. Una vez que el proceso de arranque se ha llevado a cabo, se realiza una configuración final del sistema para  asegurarse de que arranca, y a continuación se puede reiniciar y comenzar a usar Gentoo. 

=== ¿Cómo reservar espacio para Gentoo? ===

La partición raíz es el sistema de ficheros montado en {{Path|/}}. El primer ejemplo muestra la salida de {{c|mount}} en un sistema. El segundo ejemplo utiliza {{c|df</code>}} (disk free o disco libre) para ver cuánto espacio queda y como se reajustará. ¡Tenga en cuenta que no es obligatorio redimensionar la partición raíz! Se podría utilizar el gestor de particiones para redimensionar cualquier otra parte, pero hablaremos de eso más tarde. 

{{RootCmd|mount|output=<pre>
/dev/sdb2 on / type ext3 (rw)
none on /proc type proc (rw)
none on /dev/pts type devpts (rw,gid=5,mode=620)
none on /dev/shm type tmpfs (rw,nodev,nosuid,noexec)
</pre>}}

{{RootCmd|df -h|output=<pre>
Filesystem     Size Used Avail Use% Mounted on
/dev/sdb2      4.0G 1.9G 2.4G  82% /
none           38M  0    38M   0% /dev/shm
</pre>
}}

Como se puede comprobar, la partición montada como {{Path|/}} llamada {{Path|/dev/sdb2}} tiene 2,4 GB libres. En este caso, se ha decidido redimensionarla para dejar 400 MB de espacio libre, asignando por tanto 2 GB para Gentoo. No está mal, tendría bastantes paquetes instalados. De todos modos, 1 GB es suficiente para la mayoría de los usuarios. ¡Así que, ahora vamos a particionarlo!

=== Construir parted para cambiar el tamaño de la partición ===

{{Warning|Esta sección está desactualizada y se eliminará cuando las versiones antiguas de parted hayan abandonado el árbol de Portage de Gentoo. Se ha eliminado de parted la capacidad de redimensionar las particiones tal y como se explica [https://www.gnu.org/software/parted/manual/html_node/Command-explanations.html aquí].}}

El paquete {{Package|sys-block/parted}} es una utilidad suministrada por la fundación GNU, un gran proyecto antiguo y respetable cuyo software está usando en este  momento. De todas formas, hay una herramienta que ahora nos es extremadamente útil: Se trata de {{c|parted}}, un editor de particiones que se puede obtener en [http://www.gnu.org/software/parted/ http://www.gnu.org/software/parted/].

{{Note|También existen otras herramientas para redimensionar las particiones, sin embargo una descripción exhaustiva de las mismas está fuera del alcance de esta guía.}}

Mirar en la página el tipo de sistema de archivos para redimensionar y ver si parted puede hacerlo. En caso contrario, qué se le va a hacer, se deberán destruir algunas particiones para alojar a Gentoo y reinstalarlo. Proceda descargando el software e instalándolo. En el siguiente paso surgirá un problema. Se necesita redimensionar la partición raíz de Linux, por tanto se necesita un disquete con un sistema Linux mínimo y utilizar un parted previamente compilado para redimensionar {{Path|/}}. Si se puede desmontar la particioón mientras Linux está corriendo entonces los siguientes pasos no serán necesarios. Simplemente se debe compilar parted y lanzarlo en loa partición elegida para redimensionar. A continuación se muestra cómo se puede hacer en este sistema. 

{{Important|¡Asegúrese de que parted soporta las operaciones necesarias para el particionamiento!}}

Obtenga el disco de inicio mininux (una mini distribución de Linux
basada en un núcleo 2.4, cabe en un solo disquete y además es gratuita) desde [http://mininux.free.fr/uk/ http://mininux.free.fr/uk/]. Cree un 
disquete como se indica en la documentación que acompaña el paquete 
de software e inserte un nuevo disquete en la disquetera para el siguiente paso. 

{{Note|Observe de nuevo que Linux es sinónimo de "Hay más de una forma de hacerlo". El objetivo es correr parted en una partición desmontada para que pueda funcionar. Se puede utilizar otro software de gestión de discos de inicio o raíz diferente de mininux. Este paso ni siquiera es necesario: puede que solo se necesite desmontar el sistema de ficheros que desea reparticionar en su sesión de Linux y lanzar parted.}}

{{RootCmd|mkfs.minix /dev/fd0|output=<pre>
480 inodes
1440 blocks
Firstdatazone=19 (19)
Zonesize=1024
Maxsize=268966912
</pre>
}}

Proceder con la construcción de parted. Descargar y desempaquetar la utilidad y hacer {{c|cd}} al directorio correspondiente. Lanzar a continuación la siguiente secuencia de órdenes para construir la aplicación y copiarlo en el disquete. 

{{RootCmd|mkdir /floppy
|mount -t minix /dev/fd0 /floppy
|export CFLAGS{{=}}"-O3 -pipe -fomit-frame-pointer -static"
|./configure
|make
|cp parted/parted /floppy
|umount /floppy }}

Es el momento de reiniciar y cambiar el tamaño de la partición. Hágalo solo después de echarle un vistazo a la documentación de parted en el sitio web de GNU. El cambio de tamaño suele tardar unos 30 minutos para los discos duros más grandes, sea paciente. Reiniciar el sistema con el disco de mininux (simplemente insértelo), y una vez que se haya iniciado la sesión, sustituya el disco de la unidad por el disco de  utilidades que se creó arriba y teclear {{c|mount /dev/fd0 /floppy}} para tener parted bajo {{Path|/floppy}}. Lance parted para poder redimensionar la partición. Una vez haya terminado este largo proceso, continuar con la instalación de Gentoo. Reiniciar el sistema Linux anterior. La unidad en la que desea operar es la que contiene la partición cuyo tamaño se desea cambiar. Por ejemplo, si la partición a redimensionar es {{Path|/dev/sda3}}, el disco es {{Path|/dev/sda}}. 

{{RootCmd|mount /dev/fd0 /floppy
|cd /floppy
|./parted <disco>}}

{{Cmd|print|prompt=(parted) |output=<pre>
Disk geometry for /dev/sdb: 0.000-9787.148 megabytes
Disk label type: msdos
Minor   Start   End   Type   Filesystem   Flags
1       0.031 2953.125 primary ntfs
3     2953.125 3133.265 primary linux-swap
2     3133.266 5633.085 primary ext3
4     5633.086 9787.148 extended
5     5633.117 6633.210 logical
6     6633.242 9787.148 logical ext3</pre>}}

{{Cmd|help resize|prompt=(parted) |output=<pre>
(parted) help resize
 resize MINOR START END resize filesystem on partition MINOR

    MINOR is the partition number used by Linux. On msdos disk labels, the
    primary partitions number from 1-4, and logical partitions are 5
    onwards.
    START and END are in megabytes
</pre>}}

{{Cmd|resize 2 3133.266 4000.000|prompt=(parted) }}

{{Important|¡Sea paciente! ¡El ordenador está trabajando! Simplemente eche un vistazo al testigo del disco duro de la máquina para comprobar que existe actividad. Esto podría llevar entre 2 y 30 minutos.}}

Una vez haya terminado el reajuste del tamaño, iniciar de nuevo el Linux antiguo como se ha descrito. Después ir al 
[[Handbook:X86/Installation/Disks/es|Manual de Gentoo: Preparar los discos]] y siga las instrucciones. Cuando haga chroot, utilizar la siguiente orden para limpiar el entorno: 

{{RootCmd|env -i HOME{{=}}$HOME TERM{{=}}$TERM chroot /mnt/gentoo /bin/bash
|/usr/sbin/env-update
|source /etc/profile}}

¡Disfrute!

[[Category:Core system]] {{Migrated|originalauthors=Gerald Normandin Jr., Travis Tilley, Oleg Raisky, Alex Garbutt, Alexandre Georges, Magnus Backanda, Faust A. Tanasescu, Daniel Ahlberg, Ken Nowack, Tiemo Kieft, Benny Chuang, Jonathan Smith, nightmorph}}
