<languages />
<translate>

<!--T:1-->
This article contains various sections to help KDE users troubleshoot their systems.

== Opening GUI programs as root when signed in as another user == <!--T:2-->

<!--T:3-->
{{Warning|It could be a ''very'' bad idea to start GUI programs with root privileges. Only use {{c|kdesu}} when absolutely necessary!}}

<!--T:4-->
KDE, along with other desktop environments, include a special command in order to start graphical programs with root privileges. For KDE the command is {{c|kdesu}}. It can be used in the following manner:

<!--T:5-->
{{Cmd|kdesu <program>}}

<!--T:6-->
Be sure to substitute <code><program></code> in the command above with the name of the program. A pop-up window should be displayed containing a text box for the root password. Enter the password and boom: happiness.

== Get rid of the KResource Migration Tool pop-up == <!--T:7-->

<!--T:8-->
There have been reports that the KResource Migration Tool pops up on every login. There is no proper solution yet for this, but a workaround is available in {{Bug|353200}}.

== Rebuilding the application database == <!--T:9-->

<!--T:10-->
If the KMenu lacks any application or the whole application list, the KDE application database probably needs to be rebuilt. This is also a possible fix for any KMenu related issues, like missing icons.

<!--T:11-->
{{Cmd|kbuildsycoca4 --noincremental}}

== Akonadi complains about the MySQL config == <!--T:12-->

<!--T:13-->
Start by checking the permissions in {{Path|/usr/share/config}} and {{Path|/usr/share/kde4}}. If they're 700, update them to 755 recursively.

<!--T:14-->
{{RootCmd
|chmod -R 755 /usr/share/config
|chmod -R 755 /usr/share/kde4
}}

<!--T:15-->
If that doesn't solve the error, open the akonadi configuration and change the default MySQL config. If the tray is not running, start {{c|akonaditray}}, select "Akonadi Server Configuration", activate "Use internal MySQL server" and then press the test button. To use the MySQL server and not the embedded executable, make sure that MySQL is running.

== KDM fails to start == <!--T:16-->

<!--T:17-->
Start by checking the permissions in {{Path|/usr/share/config}}. If they're ''700'', update them to ''755''. Check the previous section. 

<!--T:18-->
If that doesn't solve the error, check if KDM fails to start with a message like:

<!--T:19-->
{{CodeBox|title=Error message for KDM in /var/log/messages|1=
gentoo kdm[2116]: X server startup timeout, terminating
}}

<!--T:20-->
If that is the case, uncomment the <var>ServerTimeout</var> line in the {{Path|kdmrc}} file, which can be located on the system as follows:

<!--T:21-->
{{RootCmd|grep kdmrc /var/db/pkg/kde-base/kdm-4.3.1/CONTENTS {{!}} cut -f2 -d " "}}

<!--T:22-->
Be sure to increase the timeout - 60 should work.

<!--T:23-->
Also be sure that the following services are started:

<!--T:24-->
{{RootCmd
|/etc/init.d/dbus status
|/etc/init.d/consolekit status
}}

<!--T:25-->
If not, enable them by replacing ''status'' with ''start'', and use {{c|rc-update}} for every one of them to add them to default runlevel:

<!--T:26-->
{{RootCmd
|rc-update add dbus default
|rc-update add consolekit default
}}

<!--T:27-->
Finally, KDM could fail due to errors in [[xorg.conf]]. Take a look in the {{Path|/var/log/Xorg.0.log}} and {{Path|/var/log/kdm.log}} logs and fix {{Path|xorg.conf}} accordingly. For additional help, reach out to the Gentoo KDE team on IRC at {{IRC|gentoo-kde}} on Freenode.

== The battery applet or solid notifications don't show the relevant info == <!--T:28-->

<!--T:29-->
Make sure to have D-Bus and ConsoleKit running so that the battery applet or other solid notifications can show the relevant info:

<!--T:30-->
{{RootCmd
|/etc/init.d/dbus status
|/etc/init.d/consolekit status
}}

<!--T:31-->
If not, enable them by replacing ''status'' with ''start'', and use the {{c|rc-update}} command for every one of them to add them to default runlevel:

<!--T:32-->
{{RootCmd
|rc-update add dbus default
|rc-update add consolekit default
}}

== Double-hibernate or crashes after hibernate == <!--T:33-->

<!--T:34-->
KDE 4.6 handles "sleep button" events on its own, and the system correctly hibernates. Disable any other program that would handle these events (such as {{c|acpid}}) as this might lead to double hibernation and/or system instability.

<!--T:35-->
See also {{Bug|363363}}.

== Shutdown, reboot, logout does not work == <!--T:36-->

<!--T:37-->
There is some strange interaction between the sound system and the logout mechanism going on. Open the system settings, and disable the "logout sound". Afterwards, logging out will likely work.

<!--T:38-->
See also {{Bug|326393}}.

== The desktop background covers all windows == <!--T:39-->

<!--T:40-->
In rare cases, after working with several screens the desktop settings are not cleaned up properly. The result is that the desktop background seems to cover all windows. More details plus some manual workarounds can be found in {{Bug|260360|site=kde}}.

<!--T:41-->
See also {{Bug|365623}}.

== No login possible, hangs at splash screen == <!--T:42-->

<!--T:43-->
After playing with unstable GNOME applications, an incompatibility might come up which results in KDE logon failures as long as  {{Package|net-libs/glib-networking}} is installed. Unmerge that package to fix the situation.

<!--T:44-->
See also {{Bug|365637}}.

== Unable to mount devices using KDE Plasma Device Notifier ==
If the error message "''You are not authorized to mount this device.''" is being displayed when trying to mount devices by clicking them in the KDE Plasma Device Notifier (USB-stick-like icon in the system tray), add the following file to your configurationː
{{FileBox|filename=/etc/polkit-1/rules.d/10-udisks.rules|lang=c|1=
polkit.addRule(function(action, subject) {
	if (action.id.indexOf("org.freedesktop.udisks2.filesystem-mount") == 0 && subject.isInGroup("plugdev")) {
		return polkit.Result.YES;
	}
});
}}

This will allow all users who are members of the ''plugdev'' group to mount devices using the Device Notifier. 

Use the following command to add users to this groupː
{{RootCmd|gpasswd -a <username> plugdev}}

'''NOTEː a reboot may be required for the changes to take effectǃ'''

== See also == <!--T:45-->

<!--T:46-->
* {{Bug|Gentoo%20Linux|component=KDE|search=product}}
</translate>

[[Category:KDE]]
