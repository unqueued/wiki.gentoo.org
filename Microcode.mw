This document [[Article description::describes various ways how to update your CPU's microcode in Gentoo]].

== Introduction ==

Modern processors are complex devices that can have bugs. Furthermore, instead of executing x86 instructions directly, modern x86 processors contain internal code that implements support for the x86 instruction set. The internal code is called microcode. Microcode can be updated to fix or mitigate CPU bugs.

And because [[Complete_Handbook/Making_a_choice|Gentoo is about choices]] there there isn't just one way to update your CPU's microcode. Please choose the workflow which suits your setup.

== Dracut ==

<Please help!>

== Genkernel ==

When you are already using {{Package|sys-kernel/genkernel}}, all you need to do is to ensure, that you have installed the package containing microcode updates for your processor (see below) and make sure you call ''genkernel'' next time with ''--microcode'' parameter:

{{Emerge|sys-kernel/genkernel}}

and just call it with ''--microcode'' parameter, i.e.

{{RootCmd|1=genkernel --microcode}}

If you just want to generate a new Initramfs with microcodes, call

{{RootCmd|1=genkernel --microcode initramfs}}

and make sure you instruct your bootloader to load the newly generated initramfs.

The recommended way is to update your ''genkernel.conf'' and make sure it contains:

{{FileBox|filename=/etc/genkernel.conf|lang=text|1=
# Add in early microcode support
MICROCODE="yes"
}}

== The manual way ==

<Please help!>

=== Early microcode loading ===
Basically you provide the microcode as the first initramfs (aka initrd, in cpio format) to the kernel during boot. Grub (both legacy and grub2) lets you specify multiple cpio images separated by space in the initrd command.

<Please help!>

=== Late microcode loading ===

<Please help!>

== Specifics ==

<Please help!>

=== AMD specifics ===

AMD microcodes are bundled in the {{Package|sys-kernel/linux-firmware}} package.

=== Intel specifics ===
see also [[Intel_microcode]]

Intel microcodes are bundled in the {{Package|sys-firmware/intel-microcode}} package.
