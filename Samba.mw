{{stub}}
'''Samba''' is a re-implementation of the SMB/CIFS networking protocol, an MS Windows alternative to [[NFS]].

=== Kernel configuration ===
The kernel needs to be configured like this:
{{Kernel||<pre>
File Systems --->
     [*] Network File Systems --->
        [*] CIFS support (advanced network filesystem, SMBFS successor)--->
             [*] CIFS Statistics
                  [*] Extended Statistics
             [*] CIFS Extended Attributes
                  [*] CIFS POSIX Extentions
</pre>}}

=== Necessary system tools ===
If you don't really want the full samba package, you can install only the {{package|net-fs/mount-cifs}} package:
{{Emerge|net-fs/mount-cifs}}

=== Mount the shared content ===
When your client is fully configured, you can access the shares like this:

==== Create the mount point ====
{{RootCmd|mkdir -p /mnt/My-Disk/{Media,Shared} }}

==== Mount the exported folders ====
{{RootCmd|mount.cifs //O2-Foobar/Media /mnt/My-Disk/Media -o guest}}
{{RootCmd|mount.cifs //O2-Foobar/Shared /mnt/My-Disk/Shared -o guest}}

===== Automatically mount shares on every boot =====
If you want to automatically mount your shares on every boot, then edit your '''/etc/fstab''' to look like this:
{{File|/etc/fstab||<pre>
//O2-Foobar/Media /mnt/My-Disk/Media cifs guest
//O2-Foobar/Shared /mnt/My-Disk/Shared cifs guest
</pre>}}
{{Note|In case you get permission problems when trying to create files and folders in your disk, try to use gid{{=}}<your_user_gid>, uid{{=}}<your_user_uid> in your '''/etc/fstab''' entries}}

== Known issues ==
The following problems may pop up when trying to mount your shiny new CIFS shares:

=== Cannot resolve <server-name> ===
And more specifically, the actual error looks like this
{{RootCmd|mount.cifs ...|output=<pre>
"mount error: could not find target server. TCP name foo/bar not found. No ip
address specified and hostname not found"
</pre>}}

This can easily be fixed by editing {{path|/etc/nsswitch}} and appending '''wins''' next to '''hosts''' entry
{{File|/etc/nsswitch||<pre>
hosts: files dns wins
</pre>}}

If this does not work, you can use the NFS server's IP address instead of the O2-Foobar hostname. You can use the '''nmblookup''' utility (provided by {{Package|net-fs/samba}}) to find out the IP address of an NFS host
{{RootCmd|nmblookup O2-Foobar}}

== Shutdown process hangs when trying to unmount cifs shares ==
In case your system fails to shutdown or reboot properly, then you need to make sure you umount the cifs shares before udev tries to stop.

This is an easy way to do it:
{{RootCmd|echo "umount -a -t cifs -f" >> /etc/local.d/cifs.stop}}

This will ensure that your cifs mounts will be umounted properly by the ''local'' init script.

[[Category:Network]]
