<languages />


{{Metadata|abstract=Это руководство представляет обширное введение в Xfce, быстрое, легковесное, полнофункциональное окружение рабочего стола.}}

Это руководство представляет обширное введение в Xfce, быстрое, легковесное, полнофункциональное окружение рабочего стола.

== Введение ==

=== Окружение рабочего стола Xfce ===

[http://www.xfce.org Xfce] - это быстрое, легковесное окружение рабочего стола для Unix-подобных операционных систем. Оно разработано для продуктивной работы и довольно настраиваемо, при том, что придерживается спецификаций [http://www.freedesktop.org Freedesktop] . 

В отличие от более тяжелых окружений рабочего стола, таких как [http://www.gnome.org Gnome] и [http://www.kde.org KDE], Xfce использует намного меньше системных ресурсов. Вдобавок, оно предлагает большую модульность и меньшее количество зависимостей; оно требует меньше места на жестком диске и меньшее время для установки. 

Это руководство не только покажет как установить и настроить минимальную среду Xfce, но также и рассмотрит возможности создания полнофункционального рабочего стола в соответствии с философией Xfce: легкого, быстрого и модульного. 

Последняя часть этого руководства перечисляет несколько команд для запуска после обновления до последнего выпуска Xfce, поэтому следуйте этим инструкциям при обновлении с более старой версии. 

== Установка Xfce ==

=== Основные действия ===

Сначала убедитесь что Xorg настроен так, как показано в [https://wiki.gentoo.org/wiki/Xorg/Configuration Руководстве по конфигурации X-сервера] . 

Затем дважды проверьте USE-флаги в {{Path|/etc/portage/make.conf}} ; возможно, по меньшей мере понадобятся <code>USE="-gnome -kde -minimal -qt4 dbus jpeg lock session startup-notification thunar udev X"</code> . 

Теперь, когда <code>USE</code>-переменные в {{Path|/etc/portage/make.conf}} настроены, самое время установить Xfce. 

{{Emerge|xfce4-meta}}

После этого добавьте обычного пользователя в группы <code>cdrom</code> , <code>cdrw</code> и <code>usb</code>, так, чтобы он мог монтировать и использовать такие устройства как камеры, оптические приводы и USB флеш накопители. 

{{RootCmd|for x in cdrom cdrw usb ; do gpasswd -a username $x ; done}}

Затем обновите переменные среды: 

{{RootCmd|env-update && source /etc/profile}}

Вам также потребуется графический терминал для продолжения работы с новым окружением рабочего стола. <code>x11-terms/xfce4-terminal</code> - это отличный выбор, так как он разработан специально для Xfce. Установите терминал как показано ниже: 

{{Emerge|x11-terms/xfce4-terminal}}

== Настройка Xfce ==

=== Запуск Xfce ===

Теперь, когда Xfce установлено, мы настроим его, чтобы оно было средой рабочего стола по умолчанию при запуске команды <code>startx</code> . Выйдите из оболочки администратора и войдите в качестве обычного пользователя. 

{{Cmd|echo "exec startxfce4" > ~/.xinitrc}}

{{Note/ru|Если у вас установлен ConsoleKit, файл {{Path|~/.xinitrc}} должен вместо этого содержать <code>exec startxfce4 --with-ck-launch</code> . В противном случае некоторые из приложений могут прекратить работу. Вам также потребуется добавить consolekit в уровень выполнения по умолчанию, запустив следующую команду под учетной записью администратора: <code>rc-update add consolekit default</code> .}}

Теперь запустите графическую среду, набрав <code>startx</code> : 

{{Cmd|startx}}

Поздравляем, и добро пожаловать в новое окружение рабочего стола Xfce. Продолжайте и исследуйте его немного. Затем продолжайте чтение, чтобы изучить как можно настроить Xfce, чтобы оно подходило вашим нуждам. 

=== Меню Sessions & startup ===

Если вы установили (или планируете установить) популярные приложения Gnome или KDE, такие как <code>k3b</code> , <code>nautilus</code> , <code>kmail</code>, <code>evolution</code> и т.д., то необходимо убедиться, что Xfce запускает соответствующие этим приложениям службы при собственном запуске. Перейдите к Menu --> Settings --> Sessions & Startup. На вкладке "Advanced" выберите соответствующий флажок. Это может немного увеличить время запуска Xfce, но оно уменьшает время загрузки KDE и Gnome приложений. 

Xfce имеет возможность сохранять настройки сессии и запущенных программ из вкладки "General" в меню Sessions & Startup. Они могут автоматически сохраняться при выходе, или Xfce может спрашивать об этом каждый раз. Эта функция частично является полезной для отмены ошибок конфигурации. Случайно отключили панель? Просто выберите "No" при запросе на сохранение текущей сессии, и в следующий раз при запуске Xfce, ваш старый рабочий стол будет восстановлен. Хотите автоматически запускать открытый веб-браузер, терминал и почтовый клиент в следующий раз при входе в систему? Просто сохраните сессию перед тем как выйти. 

Теперь Вы установили и настроили простую рабочую среду. Но если Вы заинтересованы в том, чтобы сделать больше, то продолжайте читать! 

== Дополнительные приложения ==

=== Расширения панели ===

В этом разделе мы обсудим некоторые полезные расширения и приложения для ежедневного использования с Xfce. 

Существует множество расширений для панели, доступных в дереве портежей; убедитесь сами с помощью команды <code>emerge --search xfce</code> . Хотя большая часть их имен не требует пояснений, несколько заслуживают дополнительного внимания, так как они довольно полезны. Чтобы их использовать, просто установите их командой <code>emerge</code>. Они будут добавлены в список доступных элементов меню "Add New Items", показанном при нажатии на панели правой клавишей мыши. 

*  <code>xfce4-battery-plugin</code> - отличное решение для пользователей ноутбуков. Оно отображает процент заряда батареи, оставшееся время, источник питания (AC или батарея), статус вентилятора, предупреждения и даже может быть настроено для запуска команд при определенных уровнях питания. Эта функция может быть использована для перевода ноутбука в режим сна, когда батарея полностью израсходована.
*  <code>xfce4-verve-plugin</code> - это небольшая командная строка, встроенная в панель. Ее использование быстрее, чем открытие другого терминала, если вам требуется запустить команду.
*  <code>xfce4-mount-plugin</code> - предлагает удобный метод монтирования устройств, перечисленных в {{Path|/etc/fstab}} простым щелчком мыши.
*  <code>xfce4-sensors-plugin</code> позволяет наблюдать за состоянием аппаратных датчиков, таких как датчики температуры CPU, числа оборотов в минуту вентилятора, температуры жесткого диска, напряжения материнской платы и т.д.

=== Полезные программы ===

Теперь мы должны установить некоторые полезные приложения и утилиты командой <code>emerge</code>: <code>xfce4-mixer</code> , <code>xfce4-taskmanager</code> , <code>xfwm4-themes</code> , <code>orage</code> , <code>mousepad</code> , <code>xfce4-power-manager</code> , <code>x11-terms/xfce4-terminal</code> и <code>thunar</code> . 

<code>xfce4-mixer</code> - это программа управления звуком для звуковой карты. Она также может быть запущена в качестве расширения панели, предоставляя быстрый доступ к уровню громкости воспроизведения.
<code>xfce4-taskmanager</code> показывает список всех запущенных программ, наряду с потреблением ресурсов процессора и памяти, расходуемых каждой программой. Кликая на них правой кнопкой мыши, можно завершить ведущее себя неправильно приложение, приостановить и перезапустить его, или даже изменить его приоритет исполнения, что позволяет тонко настроить как много требований оно возлагает на системные ресурсы. 

<code>xfwm4-themes</code> добавляет несколько тем оконного менеджера. Вам может потребоваться более полная тема иконок, такая как <code>tango-icon-theme</code> просто чтобы улучшить вид рабочего стола. 

<code>orage</code> - это простой, удобный календарь.
<code>mousepad</code> - минимальный текстовый редактор, запускаемый чрезвычайно быстро. 

<code>xfce4-power-manager</code> - это приложение для контроля и управления питанием. Это особенно важно для ноутбуков! Менеджер питания позволяет настроить яркость экрана, выбрать режим максимальной производительности или энергосберегающий режим, а также настроить действия для переведения компьютера в режим сна, энергосберегающий режим или его выключения при закрытии крышки или нажатии кнопок. Вы можете установить [http://goodies.xfce.org/projects/applications/xfce4-power-manager xfce4-power-manager] для предупреждения, когда уровень заряда батареи достигает определенных уровней, или даже выключения машины. Приложение устанавливается вместе с полезными расширениями панели для отображения статуса заряда батареи и управления яркостью. 

<code>x11-terms/xfce4-terminal</code> - это эмулятор терминала для X11, гораздо более настраиваемый и полезный, чем минималистичный <code>xterm</code> . <code>xfce4-terminal</code> поддерживает текст с кодировкой в Unicode, цветовые схемы, псевдопрозрачность и прозрачность с аппаратным ускорением через встроенный композитор Xfce, все работает сразу "из коробки". Просто убедитесь, что действие по умолчанию для запускателя терминала в панели запускает {{Path|/usr/bin/Terminal}} вместо {{Path|xterm}} . Кликните правой кнопкой мыши на запускателе и выберите "Properties" для изменения команды. 

<code>thunar</code> - это графический файловый менеджер среды Xfce по умолчанию. Он не только быстрый, но и довольно мощный и может поддерживать несколько расширений для еще большей функциональности. Просто установите их командой <code>emerge</code> . Давайте это рассмотрим: 

*  <code>thunar-archive-plugin</code> позволяет создание и извлечение заархивированных файлов, используя контекстное меню, выпадающее по правому щелчку мыши. Он предусматривает удобный [http://goodies.xfce.org/projects/thunar-plugins/thunar-archive-plugin интерфейс]  для графических архиваторов, таких как <code>xarchiver</code> и <code>file-roller</code> .
*  <code>tumbler</code> позволяет предварительный просмотр определенных типов файлов из файлового менеджера Thunar, таких как изображения и шрифты.
*  <code>thunar-volman</code> автоматически [http://goodies.xfce.org/projects/thunar-plugins/thunar-volman управляет] съемными носителями и устройствами.

Далее давайте рассмотрим добавление некоторых полезных, но легковесных приложений рабочего стола, придерживаясь философии Xfce. 

Хотя программа <code>mousepad</code> довольна приятна при использовании в качестве простого текстового редактора, если вам требуется полнофункциональный текстовый редактор без тяжеловесности LibreOffice, попытайтесь установить <code>abiword</code> .  [http://www.abisource.com AbiWord] легче, быстрее и полностью интероперабелен с типами документов промышленного стандарта. 

Требуется отличная почтовая программа/программа чтения новостей не такая требовательная к ресурсам как <code>thunderbird</code> или <code>evolution</code> ? Попробуйте <code>claws-mail</code> . 

Для потребностей в интернет-общении, <code>irssi</code> является отличным небольшим, невероятно настраиваемым IRC-клиентом, работающим в терминале. Если вы предпочитаете компактный, "все-в-одном" клиент, обрабатывающий почти все протоколы чатов, можете попробовать <code>emerge pidgin</code> . 

Если требуются проигрыватели фильмов и музыки, не ищите ничего кроме <code>mplayer</code> и [http://www.gentoo.org//proj/en/desktop/sound/decibel.xml decibel-audio-player] . Они довольно неплохо могут проигрывать практически каждый доступный медиа-формат. 

И наконец, вам потребуется веб-браузер. Почти все графические веб-браузеры требуют больше ресурсов, чем большинство других настольных приложений. Все же, <code>firefox</code> и <code>midori</code> всегда являются хорошим выбором. Кроме этого, браузер <code>opera</code> может показаться вам достаточно быстрым. Однако, <code>opera</code> не доступен на таком же количестве архитектур процессора, что и <code>firefox</code> и он имеет больше зависимостей, если только они не перезаписаны меньшим количеством USE-флагов. 

{{Emerge|firefox}}

{{Emerge|midori}}

{{RootCmd|echo "www-client/opera gtk -kde" >> /etc/portage/package.use}}

{{Emerge|opera}}

Теперь, когда мы исследовали несколько неплохих предложений по улучшению вида приложений рабочего стола, давайте рассмотрим что еще мы можем сделать для улучшения опыта работы с Xfce. 

=== Графический вход в систему ===

Помните, что мы добавили команду <code>startxfce4</code> в {{Path|~/.xinitrc}} ? Все, что требуется сделать для того, чтобы попасть на рабочий стол, это ввести <code>startx</code> после входа в систему. Это неплохо, если предпочитается загрузка полностью в текстовом режиме и вход в систему, но давайте воспользуемся менеджером дисплея, который автоматически запустит Xfce после загрузки (так чтобы можно было выполнить графический вход). 

Сначала, давайте убедимся что Xfce загружается при запуске системы: 

{{RootCmd|rc-update add xdm default}}

Мы еще не завершили. Давайте подберем менеджер дисплея и установим соответствующие переменные. Хотя в дереве портежей доступны несколько возможностей, в этом руководстве мы будем придерживаться [http://slim.berlios.de SLiM], простого менеджера дисплея. 

<code>slim</code> - быстрый и легковесный, с минимальным количеством зависимостей. Отличный выбор для Xfce! 

{{Emerge|x11-misc/slim}}

{{Note/ru|USE-флаг <code>branding</code> установит в качестве зависимости пакет <code>slim-themes</code>, который предоставит ассортимент тем, включая тему Gentoo Linux.}}

Затем отредактируйте переменную DISPLAYMANAGER в файле {{Path|/etc/conf.d/xdm}} : 

{{File|/etc/conf.d/xdm||<pre>
DISPLAYMANAGER="slim"
</pre>
}}

SLiM может автоматически запускать сессию Xfce после добавления <code>XSESSION="Xfce4"</code> в файл {{Path|/etc/env.d/90xsession}} 

{{RootCmd|echo XSESSION{{=}}\"Xfce4\" > /etc/env.d/90xsession
|env-update && source /etc/profile}}

=== Украшение рабочего стола ===

Небольшая настройка внешнего вида рабочего стола по своему вкусу может зайти далеко. Xfce имеет все возможности, которые можно ожидать от современного окружения рабочего стола: настройки сглаживания шрифтов, цветовые схемы, множество оконных украшений, темы и так далее. Если этого недостаточно, можно легко установить сторонние темы, наборы иконок, темы курсора мыши и обои. 

Набор отличных обоев рабочего стола с различными разрешениями содержится на [http://www.gentoo.org//main/en/graphics.xml веб-сайте Gentoo] . Если вы ищете наборы иконок и полные темы Xfce, сайт [http://www.xfce-look.org/ Xfce-Look] имеет огромный набор. О каждой сторонней вещице для загрузки важно помнить, что она должна сначала быть распакована и затем установлена в подходящий каталог. Наборы иконок устанавливаются в {{Path|/usr/share/icons/}}, а темы в {{Path|/usr/share/themes/}}; используйте эти каталоги если хотите чтобы все пользователи могли получить доступ к темам и наборам иконок. Отдельные пользователи могут установить темы и наборы иконок в {{Path|~/.themes/}} и {{Path|~/.icons/}} 

Если SLiM установлен в качестве менеджера дисплея, существует множество тем в пакете <code>slim-themes</code> , доступном в дереве портежей. Хотя, для получения большего количества тем, проверьте [http://slim.berlios.de/themes01.php страницу с темами] SLiM. Создание ваших собственных тем SLiM довольно просто; просто прочтите [http://slim.berlios.de/themes_howto.php руководство по темам]  . Gentoo также предоставляет пакет <code>slim-themes</code> , который можно установить командой <code>emerge</code> . 

И наконец, Xfce имеет свой собственный композитор для управления прозрачностью окон. Эта возможность может быть найдена в Menu --> Settings --> Window Manager. Для наилучшей производительности необходимо запустить графическую карту с драйверами, которые поддерживают аппаратное ускорение графики. Убедитесь, что пакет <code>xfwm4</code> установлен с USE-флагом <code>xcomposite</code> . Далее необходимо включить композитинг в файле {{Path|/etc/X11/xorg.conf}}, добавив следующий раздел: 

{{File|xorg.conf|Включение композитинга|<pre>
Section "Extensions"
    Option  "Composite"  "Enable"
EndSection
</pre>
}}

Это необходимый минимум настроек, требуемых для Xfce и Xorg-X11. Однако же, настройка аппаратного ускорения графики зависит от вашей индивидуальной графической карты и находится за рамками данного руководства. Пожалуйста, обратитесь к другим руководствам списка [http://www.gentoo.org//doc/en/index.xml?catid=desktop Desktop Documentation Resources] чтобы изучить о конфигурации аппаратного ускорения графики для вашей графической карты. 

После завершения настройки рабочего стола Xfce с улучшенными визуальными характеристиками, следующим делом будет сделать его снимок и поделиться им с другими! Просто установите <code>xfce4-screenshooter</code> и разместите картинки где-нибудь, где все смогут ими любоваться. 

== Обобщение ==

Поздравляем с тем, что добрались до этого момента! Вы установили и настроили быстрое окружение рабочего стола с веским набором приложения для ваших вычислительных нужд. 

=== Обновление Xfce ===

При обновлении Xfce с ранних главных версий (4.x), необходимо удалить старые кэшированные сессии и профили, так как они могут быть несовместимы с новыми выпусками. Для каждого из пользователей, запустите следующие команды, чтобы удалить старые несовместимые кэшированные сессии и профиль: 

{{RootCmd|rm -r ~/.cache/sessions
|rm -r ~/.config/xfce*
|rm -r ~/.config/Thunar}}

Пользователи будут встречены новым, блестящим интерфейсом, но потеряют большую часть их индивидуальных настроек. К сожалению, еще не существует миграции настроек, о которой нам было бы известно. 

=== Внешние ссылки ===

Нужна дополнительная помощь в конфигурации и использовании Xfce? Требуется больше предложений с легковесными приложениями. Попробуйте что-нибудь из этого: 

* [http://forums.gentoo.org Форумы Gentoo]
* #xfce на irc.freenode.net
* Установочные файлы помощи и другая документация, предусмотренная Xfce: {{Path|/usr/share/xfce4/doc/C/index.html}} . Просто откройте это в браузере и начните читать. Даже существует множество "скрытых" параметров конфигурации, описанных в подробностях в файлах помощи.
* [http://www.xfce.org Домашняя страница Xfce]

== Благодарности ==

Мы хотели бы поблагодарить следующих авторов и редакторов за их вклад в это руководство:


* nightmorph
