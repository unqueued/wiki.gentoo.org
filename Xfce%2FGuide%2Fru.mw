<languages />


{{Metadata|abstract=Это руководство представляет обширное введение в Xfce, быстрое, легковесное, полнофункциональное окружение рабочего стола.}}

{{InfoBox stack
|{{InfoBox homepage|http://www.xfce.org|header=true}}
|{{InfoBox wikipedia|Xfce}}
|{{InfoBox irc|xfce}}
|{{InfoBox project|Xfce}}
}}

Это руководство представляет обширное введение в Xfce, быстрое, легковесное, полнофункциональное окружение рабочего стола.

== Введение ==

=== Окружение рабочего стола Xfce ===

[http://www.xfce.org Xfce] - это быстрое, легковесное окружение рабочего стола для Unix-подобных операционных систем. Оно разработано для продуктивной работы и довольно настраиваемо, при том, что придерживается спецификаций [http://www.freedesktop.org Freedesktop] . 

В отличие от более тяжелых окружений рабочего стола, таких как [http://www.gnome.org Gnome] и [http://www.kde.org KDE], Xfce использует намного меньше системных ресурсов. Вдобавок, оно предлагает большую модульность и меньшее количество зависимостей; оно требует меньше места на жестком диске и меньшее время для установки. 

Это руководство не только покажет как установить и настроить минимальную среду Xfce, но также и рассмотрит возможности создания полнофункционального рабочего стола в соответствии с философией Xfce: легкого, быстрого и модульного. 

Последняя часть этого руководства перечисляет несколько команд для запуска после обновления до последнего выпуска Xfce, поэтому следуйте этим инструкциям при обновлении с более старой версии. 

== Установка ==

=== Основные действия ===

Сначала убедитесь что Xorg был настроен так, как об этом было рассказано в [[Xorg/Guide/ru|Xorg/Руководстве]]. Если эти шаги не были выполнены, то следующие советы из этого руководства не будут работать, как ожидается.

In order to have the best experience, the basic desktop profile should be chosen which has many of the common settings XFCE needs.

An example for the {{Keyword|amd64}} architecture:

{{RootCmd|eselect profile list|output=<pre>
Available profile symlink targets:
  [1]   default/linux/amd64/13.0
  [2]   default/linux/amd64/13.0/selinux
  [3]   default/linux/amd64/13.0/desktop *
  [4]   default/linux/amd64/13.0/desktop/gnome
  [5]   default/linux/amd64/13.0/desktop/gnome/systemd
  [6]   default/linux/amd64/13.0/desktop/kde
  [7]   default/linux/amd64/13.0/desktop/kde/systemd
  [8]   default/linux/amd64/13.0/desktop/plasma
  [9]   default/linux/amd64/13.0/desktop/plasma/systemd
  [10]  default/linux/amd64/13.0/developer
  [11]  default/linux/amd64/13.0/no-multilib
  [12]  default/linux/amd64/13.0/systemd
  [13]  default/linux/amd64/13.0/x32
  [14]  hardened/linux/amd64
  [15]  hardened/linux/amd64/selinux
  [16]  hardened/linux/amd64/no-multilib
  [17]  hardened/linux/amd64/no-multilib/selinux
  [18]  hardened/linux/amd64/x32
  [19]  hardened/linux/musl/amd64
  [20]  hardened/linux/musl/amd64/x32
  [21]  default/linux/uclibc/amd64
  [22]  hardened/linux/uclibc/amd64 
</pre>}}

=== Emerge ===

Теперь, когда переменные USE в {{Path|/etc/portage/make.conf}} настроены, самое время установить Xfce. 

{{Emerge|xfce-base/xfce4-meta}}

При желании добавьте обычного пользователя в группы <code>cdrom</code> , <code>cdrw</code> и <code>usb</code>, так, чтобы он мог монтировать и использовать такие устройства как камеры, оптические приводы и USB флеш накопители.

{{RootCmd|for x in cdrom cdrw usb ; do gpasswd -a username $x ; done}}

Затем обновите переменное окружение: 

{{RootCmd|env-update && source /etc/profile}}

Графический терминал будет необходим для продолжения работы в новом окружении рабочего стола. Пакет {{Package|x11-terms/xfce4-terminal}} - это отличный выбор; он разработан специально для Xfce. Установите терминал как показано ниже: 

{{Emerge|x11-terms/xfce4-terminal}}

== Конфигурация ==

=== Запуск Xfce ===

Теперь, когда Xfce установлено, мы настроим его, чтобы оно было средой рабочего стола по умолчанию при запуске команды {{c|startx}}. Выйдите из оболочки администратора и войдите в качестве обычного пользователя. 

{{Cmd|echo "exec startxfce4" > ~/.xinitrc}}

{{Note|Если у вас установлен ConsoleKit, файл {{Path|~/.xinitrc}} должен вместо этого содержать {{c|exec startxfce4 --with-ck-launch}}. В противном случае некоторые из приложений могут прекратить работу. Вам также потребуется добавить consolekit в уровень запуска default, запустив следующую команду под учетной записью root: {{c|rc-update add consolekit default}}.}}

Теперь запустите графическую среду, набрав {{c|startx}}: 

{{Cmd|startx}}

Поздравляем, и добро пожаловать в новое окружение рабочего стола Xfce. Продолжайте и исследуйте его немного. Затем продолжайте чтение, чтобы изучить как можно настроить Xfce, чтобы оно подходило вашим нуждам. 

=== Сессии и запуск ===

Если вы установили (или планируете установить) популярные приложения Gnome или KDE, такие как {{c|k3b}}, {{c|nautilus}}, {{c|kmail}}, {{c|evolution}} и так далее, то необходимо убедиться, что Xfce запускает соответствующие этим приложениям службы при собственном запуске. Перейдите к {{Path|Menu --> Settings --> Sessions & Startup}}. На вкладке {{Path|Advanced}} выберите соответствующий флажок. Это может немного увеличить время запуска Xfce, но оно уменьшает время загрузки KDE и Gnome приложений. 

Xfce имеет возможность сохранять настройки сессии и запущенных программ из вкладки {{Path|General}} в меню {{Path|Sessions & Startup}}. Они могут автоматически сохраняться при выходе, или Xfce может спрашивать об этом каждый раз. В частности, эта функция является полезной для отмены ошибок конфигурации. Случайно отключили панель? Просто выберите "No" при запросе на сохранение текущей сессии, и в следующий раз при запуске Xfce старый рабочий стол будет восстановлен. Хотите автоматически запускать открытый веб-браузер, терминал и почтовый клиент в следующий раз при входе в систему? Просто сохраните сессию, перед тем как выйти. 

Теперь простая рабочая среда установлена и настроена. Но если вы заинтересованы в том, чтобы сделать больше, то продолжайте читать! 

=== Дополнительные приложения ===

Каждый пользователь должен подумать об установке некоторых или даже всех полезных приложений и утилит перечисленных ниже:

{{Emerge|xfce-extra/xfce4-mixer xfce-extra/xfce4-taskmanager x11-themes/xfwm4-themes app-office/orage app-editors/mousepad xfce-extra/xfce4-power-manager x11-terms/xfce4-terminal xfce-base/thunar}}

{| class="table table-condensed table-striped" style="width: auto;"
|-
! scope="col" width="25%" | Пакет
! Описание
|-
| {{Package|xfce-extra/xfce4-mixer}}
| Контроль уровня громкости для вашей звуковой карты. Также может быть запущен как апплет панели.
|-
| {{Package|xfce-extra/xfce4-taskmanager}}
| Отображает список всех запущенных приложений, а также сколько каждое из них занимает процессорного времени и оперативной памяти. По правому щелчку мыши вы можете завершить «зависшее» приложение, остановить, перезапустить и даже изменить его приоритет времени, что позволит вам регулировать допустимый объем требований к вашим системным ресурсам.
|-
| {{Package|x11-themes/xfwm4-themes}}
| Добавляет несколько тем для оконного менеджера. Возможно, вы захотите добавить еще объемных тем для иконок, например {{Package|x11-themes/tango-icon-theme}}. 
|-
| {{Package|app-office/orage}}
| Простой и удобный календарь.
|-
| {{Package|app-editors/mousepad}}
| Упрощенный текстовый редактор, который запускается в мгновение ока.
|-
| {{Package|xfce-extra/xfce4-power-manager}}
| Приложение для отображения и управления электропитанием. Это особенно важно для портативных компьютеров! Менеджер питания позволяет пользователю настраивать яркость экрана, выбирать максимальную производительность для энергосберегающих режимов, и установить действия для нажатой кнопки питания или закрытой крышки ноутбука. [http://goodies.xfce.org/projects/applications/xfce4-power-manager xfce4-power-manager] может задать предупреждение или вовсе отключение машины для определенного уровня заряда батареи. В приложении есть плагин для панели, отображающий уровень заряда и позволяющий управлять яркостью.
|-
| {{Package|x11-terms/xfce4-terminal}}
| X11-эмулятор терминала с гораздо большей гибкостью в конфигурации и использовании, чем устаревший {{c|xterm}}. xfce4-terminal поддерживает «из коробки» текст в формате Юникод, цветовые схемы, псевдо и аппаратную прозрачность с включенным Xfce-композитором. Просто убедитесь, что действие по-умолчанию для лаунчера терминала на вашей панели {{Path|/usr/bin/Terminal}}, вместо {{c|xterm}}. Изменить исполняемую команду можно через пункт «Свойства» контекстного меню, открывающегося нажатием правой кнопки мыши.
|-
| {{Package|xfce-base/thunar}}
| Графический файловый менеджер по-умолчанию для Xfce. Хоть он и быстрый, но все же мощный, поддерживающий несколько плагинов для расширения своей функциональности; просто установите его при помощи {{c|emerge}}. Этот {{Package|xfce-extra/thunar-archive-plugin}} пакет содержит плагины, позволяющие пользователям создавать и распаковывать архивы через контекстное меню. Этот плагин [http://goodies.xfce.org/projects/thunar-plugins/thunar-archive-plugin front-end] для графических архиваторов, таких как {{c|xarchiver}} и {{c|file-roller}}.
|-
| {{Package|xfce-extra/tumbler}}
| Дает пользователям возможность предпросмотра файлов определенного типа, таких как изображения или шрифты.
|-
| {{Package|xfce-extra/thunar-volman}}
| Автоматически [http://goodies.xfce.org/projects/thunar-plugins/thunar-volman manages] монтируемые медиа-устройства и диски.
|}
 
==== Приложения рабочего стола ====

Далее, давайте рассмотрим добавление некоторых полезных, но легковесных приложений для рабочего стола, которые поддерживают философию Xfce. 

Хотя программа {{Package|app-editors/mousepad}} довольно приятна при использовании в качестве простого текстового редактора, если вам требуется полнофункциональный текстовый редактор без тяжеловесности LibreOffice, попытайтесь установить {{Package|app-office/abiword}}.  [http://www.abisource.com AbiWord] легче, быстрее и полностью совместим со стандартными типами документов. 

Требуется отличная почтовый клиент/программа для чтения новостей, которая не такая требовательная к ресурсам как {{Package|mail-client/thunderbird}} или {{Package|mail-client/evolution}}? Попробуйте {{Package|mail-client/claws-mail}}. 

Для потребностей в интернет-общении, {{Package|net-irc/irssi}} является отличным, небольшим, невероятно настраиваемым IRC-клиентом, работающим в терминале. Если вы предпочитаете компактный, "все-в-одном" клиент, обрабатывающий почти все протоколы чатов, можете попробовать {{c|emerge}} {{Package|net-im/pidgin}}. 

Если требуются проигрыватели фильмов и музыки, не ищите ничего кроме {{Package|media-video/mplayer}} и {{Package|media-sound/exaile}}. Они довольно неплохо могут проигрывать практически каждый доступный медиа-формат. 

И наконец, вам потребуется веб-браузер. Почти все графические веб-браузеры требуют больше ресурсов, чем большинство других настольных приложений. Все же, Firefox и Midori всегда являются хорошим выбором. Кроме этого, браузер Opera может показаться вам достаточно быстрым. Однако, Opera не доступен на таком же количестве архитектур процессора, что и Firefox, и она имеет больше зависимостей, если только они не перезаписаны меньшим количеством USE-флагов. 

{{Emerge|www-client/firefox}}

{{Emerge|www-client/midori}}

{{RootCmd|echo "www-client/opera gtk -kde" >> /etc/portage/package.use}}

{{Emerge|www-client/opera}}

Теперь, когда мы исследовали несколько неплохих предложений по улучшению вида приложений рабочего стола, давайте рассмотрим что еще мы можем сделать для улучшения опыта работы с Xfce.

==== Расширения панели ====

В этом разделе мы обсудим некоторые полезные расширения и приложения для ежедневного использования с Xfce. 

В дереве Portage существует множество расширений для панели; убедитесь сами с помощью команды {{c|emerge --search xfce}}. Хотя большая часть их имен не требует пояснений, некоторые заслуживают дополнительного внимания, так как они довольно полезны. Чтобы их использовать, просто установите их командой {{c|emerge}}. Они будут добавлены в список доступных элементов меню {{Path|Add New Items}}, показываемом при нажатии по панели правой клавишей мыши. 

{| class="table table-condensed table-striped" style="width: auto;"
|-
! scope="col" width="25%" | Пакет
! Описание
|-
| {{Package|xfce-extra/xfce4-battery-plugin}}
| Идеально подходит для пользователей ноутбуков. Он отображает процент зарядки батареи, оставшееся время, источник питания (AC или батарея), состояние вентилятора, предупреждения, и даже может быть сконфигурирован для выполнения команд при определенных уровнях мощности. Эта функция может быть использована, чтобы перевести ноутбук в спящий режиме, если батарея почти исчерпаны. 
|-
| {{Package|xfce-extra/xfce4-verve-plugin}}
| Небольшая командная строка встроенная в панель. Использовать ее быстрее чем открывать терминал для запуска команды.
|-
| {{Package|xfce-extra/xfce4-mount-plugin}}
| Предоставляет ручной способ подключения файловых устройств перечисленных в {{Path|/etc/fstab}} простым нажатием мышки.
|-
| {{Package|xfce-extra/xfce4-sensors-plugin}}
| Позволяет пользователям контролировать аппаратные датчики, такие как температура процессора, скорость вращения вентиляторов, температуры жесткого диска, напряжения материнской платы, и многое другое.
|}

=== Графический вход в систему ===

Помните как добавили команду {{c|startxfce4}} в {{Path|~/.xinitrc}}? Все, что требуется сделать для того, чтобы попасть на рабочий стол, это ввести {{c|startx}} после входа в систему. Это неплохо, если предпочитается загрузка и вход в систему полностью в текстовом режиме, но давайте воспользуемся менеджером дисплея, который автоматически запустит Xfce после загрузки (так чтобы можно было выполнить графический вход). 

Сначала давайте убедимся что Xfce загружается при запуске системы: 

{{RootCmd|rc-update add xdm default}}

Мы еще не завершили. Давайте подберем менеджер дисплея и установим соответствующие переменные. Хотя есть несколько вариантов, доступных в Portage, в этом руководстве мы будем придерживаться [[SLiM]], Simple Login Manager (простой менеджер входа). 

{{Package|x11-misc/slim}} - быстрый и легковесный, с минимальным количеством зависимостей. Отличный выбор для Xfce! 

{{Emerge|x11-misc/slim}}

{{Note|USE флаг <code>branding</code> установит в качестве зависимости пакет {{Package|x11-themes/slim-themes}}, который предоставит ассортимент тем, включая тему Gentoo Linux.}}

Затем отредактируйте переменную <var>DISPLAYMANAGER</var> в файле {{Path|/etc/conf.d/xdm}}: 

{{FileBox|filename=/etc/conf.d/xdm|lang=bash|1=
DISPLAYMANAGER="slim"
}}

SLiM может автоматически запускать сессию Xfce после добавления <code>XSESSION="Xfce4"</code> в файл {{Path|/etc/env.d/90xsession}}: 

{{RootCmd|echo XSESSION{{=}}\"Xfce4\" > /etc/env.d/90xsession
|env-update && source /etc/profile}}

=== Украшение рабочего стола ===

Небольшая настройка внешнего вида рабочего стола по своему вкусу может зайти далеко. Xfce имеет все возможности, которые можно ожидать от современного окружения рабочего стола: настройки сглаживания шрифтов, цветовые схемы, множество оконных декораций, темы и так далее. Если этого недостаточно, можно легко установить сторонние темы, наборы иконок, темы курсора мыши и обои. 

Набор отличных обоев рабочего стола с различными разрешениями содержится на [https://www.gentoo.org/inside-gentoo/artwork/#wallpapers веб-сайте Gentoo]. Если ищете наборы иконок и полные темы Xfce, сайт [http://www.xfce-look.org/ Xfce-Look] имеет огромный набор. О каждой сторонней вещице для загрузки важно помнить, что она сначала должна быть распакована и затем установлена в подходящий каталог. Наборы иконок устанавливаются в {{Path|/usr/share/icons/}}, а темы в {{Path|/usr/share/themes/}}; используйте эти каталоги, если хотите чтобы все пользователи могли получить доступ к темам и наборам иконок. Отдельные пользователи могут установить темы и наборы иконок в их домашних каталогах в {{Path|~/.themes/}} и {{Path|~/.icons/}}. 

Если SLiM установлен в качестве менеджера дисплея, существует множество тем в пакете {{Package|x11-themes/slim-themes}}, доступном в основном репозитории Gentoo. Также, для получения большего количества тем, проверьте [http://slim.berlios.de/themes01.php страницу с темами] SLiM. Создание ваших собственных тем SLiM довольно просто; просто прочтите [http://slim.berlios.de/themes_howto.php руководство по темам].

И наконец, Xfce имеет свой собственный композитор для управления прозрачностью окон. Эту опцию можно найти в {{Path|Menu --> Settings --> Window Manager}}. Для наилучшей производительности необходимо запустить графическую карту с драйверами, которые поддерживают аппаратное ускорение графики. Убедитесь, что пакет {{Package|xfce-base/xfwm4}} установлен с USE-флагом <code>xcomposite</code>, и затем, включите композитинг в файле {{Path|/etc/X11/xorg.conf}}, добавив следующую секцию: 

{{FileBox|filename=xorg.conf|title=Включение композитинга|lang=xorg.conf|1=
Section "Extensions"
    Option  "Composite"  "Enable"
EndSection
}}

Это необходимый минимум настроек, требуемых для Xfce и Xorg-X11. Однако же, настройка аппаратного ускорения графики зависит от графической карты и находится за рамками данного руководства. На нашей вики есть множество статей, помогающие настроить аппаратное ускорение графики на различных графических карт.

После завершения настройки рабочего стола Xfce с улучшенными визуальными характеристиками, следующим делом будет сделать снимок и поделиться им с другими! Просто установите {{Package|xfce-extra/xfce4-screenshooter}} и разместите картинки где-нибудь, чтобы все могли им любоваться.

=== Обобщение ===

Поздравляем с тем, что добрались до этого момента! Вы установили и настроили быстрое окружение рабочего стола с веским набором приложений для ваших вычислительных нужд.

== Обновление ==

При обновлении Xfce с более ранней главной версии (4.x) необходимо удалить старые кэшированные сессии и профили, так как они могут быть несовместимы с новыми выпусками. Для каждого из пользователей, запустите следующие команды, чтобы удалить старые несовместимые кэшированные сессии и профиль: 

{{RootCmd
|rm -r ~/.cache/sessions
|rm -r ~/.config/xfce*
|rm -r ~/.config/Thunar
}}

Пользователи будут встречены новым, блестящим интерфейсом, но потеряют большую часть их индивидуальных настроек. К сожалению, еще не существует миграции настроек, о которой нам было бы известно. 

== Ссылки ==

Нужна дополнительная помощь в конфигурации и использовании Xfce? Требуется больше легковесных приложений? Попробуйте что-нибудь из этого: 

* [http://forums.gentoo.org Форумы Gentoo]
* Установленные файлы помощи и другая документация, предусмотренная Xfce: {{Path|/usr/share/xfce4/doc/C/index.html}} . Просто откройте это в браузере и начните читать. Даже существует множество "скрытых" параметров конфигурации, описанных в подробностях в файлах помощи.

{{Migrated|originalauthors=nightmorph}}
