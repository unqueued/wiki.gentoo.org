<languages />


{{Metadata|abstract=Это руководство представляет обширное введение в Xfce, быстрое, легковесное, полнофункциональное окружение рабочего стола.}}

{{InfoBox stack
|{{InfoBox homepage|http://www.xfce.org|header=true}}
|{{InfoBox wikipedia|Xfce}}
|{{InfoBox gdoc|Xfce}}
|{{InfoBox irc|xfce}}
}}

Это руководство представляет обширное введение в Xfce, быстрое, легковесное, полнофункциональное окружение рабочего стола.

== Введение ==

=== Окружение рабочего стола Xfce ===

[http://www.xfce.org Xfce] - это быстрое, легковесное окружение рабочего стола для Unix-подобных операционных систем. Оно разработано для продуктивной работы и довольно настраиваемо, при том, что придерживается спецификаций [http://www.freedesktop.org Freedesktop] . 

Unlike heavier desktop environments, such as [http://www.gnome.org Gnome] and [http://www.kde.org KDE], Xfce uses far fewer system resources. Additionally, it offers greater modularity and fewer dependencies; it takes up less space on your hard disk and takes less time to install. 

Это руководство не только покажет как установить и настроить минимальную среду Xfce, но также и рассмотрит возможности создания полнофункционального рабочего стола в соответствии с философией Xfce: легкого, быстрого и модульного. 

Последняя часть этого руководства перечисляет несколько команд для запуска после обновления до последнего выпуска Xfce, поэтому следуйте этим инструкциям при обновлении с более старой версии. 

== Установка ==

=== Основные действия ===

First make sure Xorg has been configured as instructed in the [[Xorg/Guide|Xorg Guide]]. If these steps have not been completed the rest of this guide will not apply as expected.

Next, double-check the USE flags in {{Path|/etc/portage/make.conf}}; most users will want to set the following:

{{FileBox|filename=/etc/portage/make.conf|title=Common USE flags settings for Xfce|lang=bash|1=
USE="-gnome -kde -minimal -qt4 dbus jpeg lock session startup-notification thunar udev X"
}}

=== Emerge ===

Now that the <code>USE</code> variables have been set in {{Path|/etc/portage/make.conf}}, it is time to install Xfce. 

{{Emerge|xfce-base/xfce4-meta}}

If desired add regular user(s) to the <code>cdrom</code>, <code>cdrw</code>, and <code>usb</code> groups, so that they can mount and use devices such as cameras, optical drives, and USB sticks.

{{RootCmd|for x in cdrom cdrw usb ; do gpasswd -a username $x ; done}}

Update the system's environment variables: 

{{RootCmd|env-update && source /etc/profile}}

A graphical terminal will be needed to continue working in the new desktop environment. The {{Package|x11-terms/xfce4-terminal}} package is a good choice; it is made specifically for Xfce. Install Terminal as shown: 

{{Emerge|x11-terms/xfce4-terminal}}

== Настройка ==

=== Запуск Xfce ===

Теперь, когда Xfce установлено, мы настроим его, чтобы оно было средой рабочего стола по умолчанию при запуске команды <tt>startx</tt> . Выйдите из оболочки администратора и войдите в качестве обычного пользователя. 

{{Cmd|echo "exec startxfce4" > ~/.xinitrc}}

{{Note/ru|Если у вас установлен ConsoleKit, файл {{Path|~/.xinitrc}} должен вместо этого содержать <tt>exec startxfce4 --with-ck-launch</tt>. В противном случае некоторые из приложений могут прекратить работу. Вам также потребуется добавить consolekit в уровень запуска по умолчанию, запустив следующую команду под учетной записью root: <tt>rc-update add consolekit default</tt>.}}

Теперь запустите графическую среду, набрав <tt>startx</tt>: 

{{Cmd|startx}}

Поздравляем, и добро пожаловать в новое окружение рабочего стола Xfce. Продолжайте и исследуйте его немного. Затем продолжайте чтение, чтобы изучить как можно настроить Xfce, чтобы оно подходило вашим нуждам. 

=== Sessions and startup ===

Если вы установили (или планируете установить) популярные приложения Gnome или KDE, такие как <tt>k3b</tt>, <tt>nautilus</tt>, <tt>kmail</tt>, <tt>evolution</tt> и т.д., то необходимо убедиться, что Xfce запускает соответствующие этим приложениям службы при собственном запуске. Перейдите к {{Path|Menu --> Settings --> Sessions & Startup}}. На вкладке {{Path|Advanced}} выберите соответствующий флажок. Это может немного увеличить время запуска Xfce, но оно уменьшает время загрузки KDE и Gnome приложений. 

Xfce имеет возможность сохранять настройки сессии и запущенных программ из вкладки {{Path|General}} в меню {{Path|Sessions & Startup}}. Они могут автоматически сохраняться при выходе, или Xfce может спрашивать об этом каждый раз. В частности, эта функция является полезной для отмены ошибок конфигурации. Случайно отключили панель? Просто выберите "No" при запросе на сохранение текущей сессии, и в следующий раз при запуске Xfce старый рабочий стол будет восстановлен. Хотите автоматически запускать открытый веб-браузер, терминал и почтовый клиент в следующий раз при входе в систему? Просто сохраните сессию, перед тем как выйти. 

Теперь простая рабочая среда установлена и настроена. Но если вы заинтересованы в том, чтобы сделать больше, то продолжайте читать! 

=== Дополнительные приложения ===

Every user should consider installing some or all of the following useful applications and utilities:

{{Emerge|xfce-extra/xfce4-mixer xfce-extra/xfce4-taskmanager x11-themes/xfwm4-themes app-office/orage app-editors/mousepad xfce-extra/xfce4-power-manager x11-terms/xfce4-terminal xfce-base/thunar}}

{| class="table table-condensed table-striped"
|-
! Package 
! Description
|-
| {{Package|xfce-extra/xfce4-mixer}}
| A volume control for your sound card. It can also be run as a panel applet, giving you fast access to playback volume. {{Package|xfce-extra/xfce4-taskmanager}} displays a list of all running programs, and the CPU and memory consumption each one takes up. By right-clicking an item, you can kill a misbehaving application, pause and restart it, or even alter its run time priority, which lets you fine-tune how much of a demand it puts on your system's resources. 
|-
| {{Package|x11-themes/xfwm4-themes}}
| Adds several window manager themes. You may want to add a more full-coverage icon theme such as {{Package|x11-themes/tango-icon-theme}} just to round out your desktop. 
|-
| {{Package|app-office/orage}}
| A simple, handy calendar. {{Package|app-editors/mousepad}} is a bare bones text editor that starts up extremely quickly. 
|-
| {{Package|xfce-extra/xfce4-power-manager}}
| An application to monitor and manage power usage. This is especially important for laptops! The power manager allows user to adjust screen brightness, choose maximum performance or battery-saving modes, and setup hibernate, suspend, and shutdown actions when the lid is shut or buttons are pressed. [http://goodies.xfce.org/projects/applications/xfce4-power-manager xfce4-power-manager] can be set to provide warning when the battery reaches certain levels, or even turn off the machine. The application comes with a couple of helpful panel plugins to display battery/charging status, and a brightness control. 
|-
| {{Package|x11-terms/xfce4-terminal}}
| An X11 terminal emulator, far more configurable and useful than the barebones<code>xterm</code>. xfce4-terminal supports Unicode text, color schemes, pseudo-transparency and hardware-accelerated transparency via Xfce's built-in compositor, all out-of-the-box. Just make sure that the default action on the terminal launcher of your panel runs {{Path|/usr/bin/Terminal}} instead of <tt>xterm</tt>. Right-click the launcher and choose {{Path|Properties}} to change the command. 
|-
| {{Package|xfce-base/thunar}}
| Xfce's default graphical file manager. It is fast yet quite powerful, can support several plugins for even more functionality; just install them with <tt>emerge</tt>. These plugins include: {{Package|xfce-extra/thunar-archive-plugin}} which lets users create and extract archive files using the right-click menu. It provides a handy [http://goodies.xfce.org/projects/thunar-plugins/thunar-archive-plugin front-end] for graphical archiving applications such as <tt>xarchiver</tt> and <tt>file-roller</tt>.
|-
| {{Package|xfce-extra/tumbler}}
| Lets users preview certain types of files from within Thunar, such as images and fonts.
|-
| {{Package|xfce-extra/thunar-volman}}
| Automatically [http://goodies.xfce.org/projects/thunar-plugins/thunar-volman manages] removable media and drives.
|}
 
==== Desktop applications ====

Next, let's see about adding some useful but lightweight desktop applications, staying with Xfce's philosophy. 

Хотя программа {{Package|app-editors/mousepad}} довольно приятна при использовании в качестве простого текстового редактора, если вам требуется полнофункциональный текстовый редактор без тяжеловесности LibreOffice, попытайтесь установить {{Package|app-office/abiword}}.  [http://www.abisource.com AbiWord] легче, быстрее и полностью совместим со стандартными типами документов. 

Требуется отличная почтовый клиент/программа для чтения новостей, которая не такая требовательная к ресурсам как {{Package|mail-client/thunderbird}} или {{Package|mail-client/evolution}}? Попробуйте {{Package|mail-client/claws-mail}}. 

Для потребностей в интернет-общении, {{Package|net-irc/irssi}} является отличным, небольшим, невероятно настраиваемым IRC-клиентом, работающим в терминале. Если вы предпочитаете компактный, "все-в-одном" клиент, обрабатывающий почти все протоколы чатов, можете попробовать <tt>emerge</tt> {{Package|net-im/pidgin}}. 

Если требуются проигрыватели фильмов и музыки, не ищите ничего кроме {{Package|media-video/mplayer}} и [http://www.gentoo.org//proj/en/desktop/sound/decibel.xml decibel-audio-player]. Они довольно неплохо могут проигрывать практически каждый доступный медиа-формат. 

Finally, you'll need a web browser. Nearly all graphical web browsers require more resources than most of your other desktop applications. Still, Firefox and Medori are always good choices. Alternatively, you may find Opera to be quite fast. However, Opera is not available on as many processor architectures as Firefox, and it has more dependencies unless you override them with a few USE flags. 

{{Emerge|www-client/firefox}}

{{Emerge|www-client/midori}}

{{RootCmd|echo "www-client/opera gtk -kde" >> /etc/portage/package.use}}

{{Emerge|www-client/opera}}

Теперь, когда мы исследовали несколько неплохих предложений по улучшению вида приложений рабочего стола, давайте рассмотрим что еще мы можем сделать для улучшения опыта работы с Xfce. 

==== Расширения панели ====

В этом разделе мы обсудим некоторые полезные расширения и приложения для ежедневного использования с Xfce. 

В дереве Portage существует множество расширений для панели; убедитесь сами с помощью команды <tt>emerge --search xfce</tt>. Хотя большая часть их имен не требует пояснений, некоторые заслуживают дополнительного внимания, так как они довольно полезны. Чтобы их использовать, просто установите их командой <tt>emerge</tt>. Они будут добавлены в список доступных элементов меню {{Path|Add New Items}}, показываемом при нажатии по панели правой клавишей мыши. 

{| class="table table-condensed table-striped"
|-
! Package
! Description
|-
| {{Package|xfce-extra/xfce4-battery-plugin}}
| Perfect for laptop users. It displays battery percentage, time remaining, power source (AC or battery), fan status, warnings, and can even be configured to execute commands at certain power levels. This feature can be used to put the laptop into hibernate mode when the battery is almost exhausted.
|-
| {{Package|xfce-extra/xfce4-verve-plugin}}
| A small command line embedded into the panel. It is quicker than opening up a terminal to run a command.
|-
| {{Package|xfce-extra/xfce4-mount-plugin}}
| Provides a handy method of mounting devices listed in {{Path|/etc/fstab}} just by clicking the mouse.
|-
| {{Package|xfce-extra/xfce4-sensors-plugin}}
| Lets users monitor hardware sensors, such as CPU temperature, fan RPM, hard drive temp, motherboard voltage, and more.
|}

=== Графический вход в систему ===

Помните как добавили команду {{c|startxfce4}} в {{Path|~/.xinitrc}}? Все, что требуется сделать для того, чтобы попасть на рабочий стол, это ввести {{c|startx}} после входа в систему. Это неплохо, если предпочитается загрузка и вход в систему полностью в текстовом режиме, но давайте воспользуемся менеджером дисплея, который автоматически запустит Xfce после загрузки (так чтобы можно было выполнить графический вход). 

Сначала давайте убедимся что Xfce загружается при запуске системы: 

{{RootCmd|rc-update add xdm default}}

Мы еще не завершили. Давайте подберем менеджер дисплея и установим соответствующие переменные. Хотя есть несколько вариантов, доступных в Portage, в этом руководстве мы будем придерживаться [[SLiM]], Simple Login Manager (простой менеджер входа). 

{{Package|x11-misc/slim}} - быстрый и легковесный, с минимальным количеством зависимостей. Отличный выбор для Xfce! 

{{Emerge|x11-misc/slim}}

{{Note/ru|USE флаг <code>branding</code> установит в качестве зависимости пакет {{Package|x11-themes/slim-themes}}, который предоставит ассортимент тем, включая тему Gentoo Linux.}}

Затем отредактируйте переменную <code>DISPLAYMANAGER</code> в файле {{Path|/etc/conf.d/xdm}}: 

{{File|/etc/conf.d/xdm||<pre>
DISPLAYMANAGER="slim"
</pre>
}}

SLiM может автоматически запускать сессию Xfce после добавления <code>XSESSION="Xfce4"</code> в файл {{Path|/etc/env.d/90xsession}}: 

{{RootCmd|echo XSESSION{{=}}\"Xfce4\" > /etc/env.d/90xsession
|env-update && source /etc/profile}}

=== Украшение рабочего стола ===

A little customization of the desktop's appearance can go a long way. Xfce has all the options one would expect from a modern desktop environment, font anti-aliasing settings, color schemes, dozens of window decorations, themes, and more. If these are not enough, it is easy to install third-party themes, icon sets, mouse cursor themes, and wallpapers. 

A selection of nice Gentoo wallpapers in a variety of resolutions are hosted on the [https://www.gentoo.org/inside-gentoo/artwork/#wallpapers Gentoo website]. When looking for icon sets and complete Xfce themes, [http://www.xfce-look.org/ Xfce-Look] has a huge collection. The important thing to remember about any third-party eye candy is that it will usually need to be unpacked and then installed to the proper directory. Icon sets go in {{Path|/usr/share/icons/}}, and themes go to {{Path|/usr/share/themes/}}; use these directories for all users to be able to access themes and icon sets. Individual users can install themes and icon sets to their home directories in {{Path|~/.themes/}} and {{Path|~/.icons/}}. 

If SLiM  has been installed as the display manager, there are lots of themes in the {{Package|x11-themes/slim-themes}} package available in the main Gentoo repository. Also, be sure to check the SLiM [http://slim.berlios.de/themes01.php themes page] for more themes. Creating your own SLiM theme is fairly easy; just read the [http://slim.berlios.de/themes_howto.php Themes HowTo].

Finally, Xfce has its own built-in compositor to manage window transparency. This option can be found in {{Path|Menu --> Settings --> Window Manager}}. For best performance, you will need to be running a graphics card with drivers that support hardware-accelerated rendering. Make sure the {{Package|xfce-base/xfwm4}} package has been emerged with the <code>xcomposite</code> USE flag, then enable compositing in {{Path|/etc/X11/xorg.conf}} by adding the following section: 

{{File|xorg.conf|Включение композитинга|<pre>
Section "Extensions"
    Option  "Composite"  "Enable"
EndSection
</pre>
}}

This is the bare minimum configuration required for Xfce and Xorg-X11. However, setting up hardware-accelerated rendering depends on the system's graphics card, and is beyond the scope of this guide. Please see the other guides in the [[Project:Desktop|Desktop resources]] to learn about configuring hardware-accelerated rendering for various graphic cards. 

Once finished setting up a beautiful Xfce desktop, the next thing to do is take a screenshot of it to share with other folks! Install {{Package|xfce-extra/xfce4-screenshooter}} and post the pictures somewhere for all to admire.

=== Обобщение ===

Поздравляем с тем, что добрались до этого момента! Вы установили и настроили быстрое окружение рабочего стола с веским набором приложений для ваших вычислительных нужд.

== Upgrading ==

When upgrading Xfce from earlier major versions (4.x), the old cached sessions and profiles will need to be removed; they are incompatible with new releases. For each user, run the following commands to remove the old incompatible cached sessions and profile: 

{{RootCmd|rm -r ~/.cache/sessions
|rm -r ~/.config/xfce*
|rm -r ~/.config/Thunar}}

Users will be greeted with a new and shiny interface, but will lose many of their individual settings. Sadly, no migration of configuration(s) exist... 

== External resources ==

Нужна дополнительная помощь в конфигурации и использовании Xfce? Требуется больше легковесных приложений? Попробуйте что-нибудь из этого: 

* [http://forums.gentoo.org The Gentoo forums]
* The installed help files and other documentation provided by Xfce: {{Path|/usr/share/xfce4/doc/C/index.html}}. Just point your browser at it and start reading. There are even a lot of "hidden" configuration options detailed in the help files.

{{Migrated|originalauthors=nightmorph}}
