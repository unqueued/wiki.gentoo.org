<languages />


{{Metadata|abstract=这是Gentoo Linux在AMD64平台上经常被问到的问题}}

这是 Gentoo Linux 在 AMD64 平台上经常被问到的问题的文章。

=== 介绍 ===

这个文档包括在AMD64平台上使用Gentoo Linux的最常见问题。其中的很多问题都来自于[//forums.gentoo.org/ forums]，IRC聊天频道，以及其他来源 [//www.gentoo.org/main/en/lists.xml mailing lists]。[//www.gentoo.org/proj/en/base/amd64/ Gentoo/AMD64 Project] 提供在此架构上Gentoo Linux的支持。如果您对这个常见问答有疑问或建议，欢迎您发送邮件给{{Mail|amd64@gentoo.org}}.

== 安装 ==

===AMD64 和 EM64T 有什么区别？===

AMD64 和 EM64T 指的都是64位处理器，只是一个是AMD的（AMD64）,一个是英特尔的（EM64T）。AMD的64位处理器包括Athlon 64（速龙64）, Turion（炫龙）, Neo（速龙 Neo）, Phenom（羿龙）, 和 Opteron（皓龙）系列。英特尔的64位处理器包括 Core 2（酷睿2），Core i3/i5/i7，Xeon（至强）和Pentium（奔腾）（它们全都基于Core 2 架构。[//en.wikipedia.org/wiki/x86-64#Intel_64 last few versions] 中的较老的奔腾四代和至强处理器也支持M64T。

AMD的64位处理器生产线的发布远远早于英特尔。因此，出于历史原因，在 Gentoo 中所有兼容 x86-64 的架构的关键字都是{{keyword|amd64}}。所以，"AMD64"只是个64位处理器芯片的通称，并不专指某个公司的处理器。

===我该使用哪种CFLAGS参数?===

你只需简单地使用<code>CFLAGS</code>来避免你的系统未来可能会出现的问题。 既支持AMD又支持英特尔的 <code>CFLAGS</code> 有 <code>-O2 -march=native -pipe</code>。

===我该使用哪种内核？===

您可以使用 Portage 中几乎所有的内核源代码。我们推荐使用{{Package|sys-kernel/gentoo-sources}} 因为它是专为 Gentoo Linux 设计的。它包含了许多针对AMD64构架的补丁，因此是在 AMD64 平台上受 Gentoo 官方支持的唯一的内核。

请确保您激活了内核中<code> IA32_EMULATION</ code>的选项。

{{RootCmd|cd /usr/src/linux
|make menuconfig}}

{{KernelBox|title=Enabling IA32 emulation|1=
Executable file formats / Emulations  --->
  [*] IA32 Emulation
}}

{{Warning|You may experience build failures on [[multilib]] systems if you deactivate this option.}}

===如果我从32位系统升级到64位系统，电脑会有更好的表现么？===

这是一个很难回答的问题。在某些情况下，你将会体验到性能的提高，但这不是绝对的。仅就日常使用而言，64位和32位之间几乎没有差别。当涉及到浮点运算时， 64位通常的速度更快，这是通常运行多媒体应用程序和3D渲染的情形。您可能会对Linux.com的文章 [http://www.linux.com/articles/114024?tid=121 "64-bit performance in Gentoo Linux"] 和[http://www.linux.com/feature/43873 "64-bit Linux and BSD are maturing steadily"]感兴趣。在我们的论坛里，还有一个很好的帖子：[https://forums.gentoo.org/viewtopic-t-349691.html "Article: 64-bit performance in Gentoo Linux"] 。

===什么是multilib，我该怎么使用它？===

每一台AMD64处理器都能够运行32位代码和64位代码。但是，当你使用一个32位的应用程序，你将不能把它和64位的库混用，反之亦然。然而，如果一个32位程序所需要的共享库都完备地作为32位对象，你就可以以原生（无仿真）的方式运行32位应用程序，这就是multilib。您可以通过配置选择是否要[multilib的]支持。默认配置是启用multilib的。

{{Warning|Switching from a no-multilib to a multilib-enabled profile is currently not supported ([http://jkroon.blogs.uls.co.za/it/gentoo/gentoo-converting-no-multilib-to-multilib conversion hints]), so think over your decision twice before you use the no-multilib profile.}}

=== 我该怎么创建一个32位的chroot? ===

请阅读[//www.gentoo.org/proj/en/base/amd64/howtos/chroot.xml 32bit chroot guide]。

=== 我能通过 <code>emerge -e @world</code> 的方式升级我的x86系统到AMD64系统么? ===

Due to several differences between {{keyword|x86}} (32-bit) and {{keyword|amd64}} (64-bit) installations, it is impossible to upgrade this way. Please perform a fresh install using the [[Handbook:AMD64|AMD64 Handbook]].

Note that binary files created on an x86 system most likely cannot be read by packages on an AMD64 system. In particular, databases such as MySQL, innoDB, Berkeley&nbsp;DB, SQLite, OpenLDAP, etc. cannot simply be copied as-is. You will need to dump the database into an architecture-independent format, such as a text file, before attempting to restore it on an AMD64 system.

=== Can I use Reiser4? ===

Reiser4 is not available from any kernel offered by the Gentoo Kernel project, thus the AMD64 team doesn't support it. The answer is no.

== Hardware ==

=== Will my binary NVIDIA/ATI drivers work? ===

Yes, NVIDIA and ATI provide drivers that work on AMD64. You can install them by executing <kbd>emerge x11-drivers/nvidia-drivers</kbd> or <kbd>emerge x11-drivers/ati-drivers</kbd>. If you have more questions about these drivers, you should read the [[NVidia/nvidia-drivers|nvidia-drivers guide]] or the [[ATI FAQ]].

=== How do I use Cool'n'Quiet/PowerNow/SpeedStep features? ===

You have to compile your kernel with support for these features. You just need to enable the features below: 

{{KernelBox|title=Kernel options for Cool'n'Quiet/PowerNow/SpeedStep|1=
Power management options --->
  [*] Run-time PM core functionality
  [*] ACPI (Advanced Configuration and Power Interface) Support --->
    <*>   Processor
    <*>     Thermal Zone
  CPU Frequency scaling --->
  [*] CPU Frequency scaling
         Default CPUFreq governor (ondemand) --->
  -*-   'performance' governor
  <*>   'userspace' governor for userspace frequency scaling
  -*-   'ondemand' cpufreq policy governor
  <*>   ACPI Processor P-States driver
  <*>   AMD Opteron/Athlon64 PowerNow!
-*- CPU idle PM support
}}

Then <kbd>emerge sys-power/cpufrequtils</kbd> and edit {{Path|/etc/conf.d/cpufrequtils}} with a preferred text editor. 

{{FileBox|filename=/etc/conf.d/cpufrequtils|title=Example configuration|1=
# Options when starting cpufreq (given to the 'cpufreq-set' program)
START_OPTS="--governor ondemand"
  
# Options when stopping cpufreq (given to the 'cpufreq-set' program)
STOP_OPTS="--governor performance"
}}

Now you only have to run <kbd>rc-update add cpufrequtils boot</kbd> to make sure it is started every time the system boots. 

{{Note|You may want to read the [[Power management/HOWTO|Power Management Guide]] for more tips on CPU power management.}}

== Applications ==

=== Can I get Adobe Flash working? ===

Yes. Emerge {{Package|www-plugins/adobe-flash}}. Be sure to read any messages displayed by the ebuild once it has been emerged.

=== I want to install package foo, but emerge says: (masked by: ~amd64 keyword) ===

This means that the package is still in the 'testing' tree. Please read Portage's manual page (<kbd>man portage</kbd>) or the [http://www.gentoo.org/doc/en/handbook/handbook-amd64.xml?part=3&chap=3 Mixing Software Branches] chapter of the [http://www.gentoo.org/doc/en/handbook/handbook-amd64.xml AMD64 Handbook] for more information.

=== I want to install package foo, but emerge says: (masked by: missing keyword) ===

This means that the package has not been tested yet. It does ''not necessarily'' mean that the package does not work. You can unmask it by accepting another architecture (or set of architectures) for the package. The following example shows you can tell Portage to accept the installation of the given package under any keyword.

{{RootCmd|echo "category/packagename **" >> /etc/portage/package.accept_keywords
|emerge packagename}}

If it works fine for you, please let us know and file a bug on [https://bugs.gentoo.org/ Gentoo's Bugzilla], so that the AMD64 team can keyword the package and other users can benefit from your test. 

{{Warning|Do not try to invoke commands like <kbd>ACCEPT_KEYWORDS{{=}}"~x86" emerge packagename</kbd>. It will most certainly break the Portage tree and render the system useless.}}

== How can I help the Gentoo/AMD64 project? ==

=== How can I help? ===

With a growing popularity of the amd64 architecture, we also increasingly need more help. There's still much work to be done to improve the quality of Gentoo/AMD64. An average user can help us by: 

* Filing general bug reports;
* Testing software that does not yet have the <code>~amd64</code> keyword;
* Participating in the [http://www.gentoo.org//proj/en/base/amd64/at/ Arch Testers project];
* Help answering questions on the mailing lists, forums and IRC channels;
* Sending patches.

== Other Resources ==

=== Where can I get more help or information about Gentoo/AMD64? ===

If any of your questions wasn't answered here, you can try other resources listed on [http://www.gentoo.org/proj/en/base/amd64/ our project homepage] . You can also ask us at <code>#gentoo-amd64</code> on <code>chat.freenode.net</code>, [https://forums.gentoo.org/viewforum-f-46.html Gentoo/AMD64 Forums], or on the <code>gentoo-amd64@lists.gentoo.org</code> mailing list.

[[Category:Core system]] {{Migrated|originalauthors= Simon Stelling, Luis Medinas, Gerald J. Normandin Jr., Xavier Neys, nightmorph+}}
