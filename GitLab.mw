{{Stub}}

GitLab is a Git management web application, this page will summarize the [https://github.com/gitlabhq/gitlabhq/blob/stable/doc/install/installation.md upstream installation instructions] without the use of overlays.

First, you need to obtain Git, Ruby, MySQL and sudo.

{{RootCmd|emerge dev-vcs/git dev-lang/ruby dev-db/mysql app-admin/sudo}}

After you finish merging everything we first need to set a compatible version of Python, like 2.7:

{{RootCmd|eselect python set 1}}

We then start the git daemon which we will need at a later step:

{{RootCmd|/etc/init.d/git-daemon start}}

Now it is time to add our gitlab user:

{{RootCmd
|useradd -s /sbin/nologin gitlab
|mkdir /home/gitlab
|chown gitlab:gitlab /home/gitlab
|gpasswd -a gitlab git}}

After that, we can work further as our gitlab and git user; we set up gitolite:

{{Cmd
|cd /home/git
|sudo -u gitlab -H ssh-keygen -t rsa -f /home/gitlab/.ssh/id_rsa
|sudo -u git -H git clone -b gl-v320 https://github.com/gitlabhq/gitolite.git /home/git/gitolite
|sudo -u git -H mkdir /home/git/bin
|sudo -u git -H sh -c 'printf "%b\n%b\n" "PATH{{=}}\$PATH:/home/git/bin" "export PATH" >> /home/git/.profile'
|sudo -u git -H sh -c 'gitolite/install -ln /home/git/bin'
}}

And gitolite:

{{RootCmd
|cp /home/gitlab/.ssh/id_rsa.pub /home/git/gitlab.pub
|chmod 0444 /home/git/gitlab.pub
|sudo -u git -H sh -c "PATH{{=}}/home/git/bin:$PATH; gitolite setup -pk /home/git/gitlab.pub"
|chmod 750 /home/git/.gitolite/
|chown -R git:git /home/git/.gitolite/
|chmod -R ug+rwXs,o-rwx /home/git/repositories/
|chown -R git:git /home/git/repositories/}}

Add any domains to your known hosts, an example for localhost:

{{Cmd|sudo -u gitlab -H ssh git@localhost}}

Now we can do a test to make sure the git daemon is running:

{{RootCmd
|sudo -u gitlab -H git clone git@localhost:gitolite-admin.git /tmp/gitolite-admin
|rm -rf /tmp/gitolite-admin
}}

Since this article is still a stub, you can follow the rest [https://github.com/gitlabhq/gitlabhq/blob/stable/doc/install/databases.md here].
