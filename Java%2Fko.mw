<languages />


{{Metadata|abstract=This guide introduces the reader to Java and explains how to use Java with Gentoo Linux.}}

이 안내서는 독자 여러분께 자바 언어를 소개하고 젠투 리눅스에서 자바를 활용하는 방법을 설명합니다.

== 자바란 무엇인가요? ==

=== 간단히 살펴보기 ===

자바는 썬 마이크로시스템즈의 엔지니어가 개발한 프로그래밍 언어입니다. 언어는 객체지향이며 각각의 플랫폼에서 코드를 다시 컴파일하지 않아도 여러 플랫폼에서 동작하도록 설계했습니다. 비록 자바를 네이티브 프로그램처럼 컴파일 할 수 있지만 대부분의 자바 배포 프로그램은, 가비지 콜렉션과 같은 기능을 붙여가며 이식성을 부여할 수 있습니다. 플랫폼은 독립적으로 자바 컴파일러가 운영체제가 아닌 JRE(자바 런타임 환경)에서 실행할 "자바 바이트 코드"라고 하는 중간 형태의 자바 코드로 컴파일 할 수 있습니다. 

자바 바이트 코드를 실행하려면 JRE(자바 런타임 환경)을 설치해야합니다. JRE는 핵심 라이브러리, 플랫폼과 별개로 동작하는 자바 가상 머신, 브라우저 플러그인, 등을 제공합니다. JDK(자바 개발 키트)는 바이트 코드 컴파일러 및 디버거와 같은 프로그래밍 도구를 추가합니다. 

== 가상 머신 설치 ==

=== 선택 ===

젠투는 다양한 런타임 환경(JRE)과 개발 키트(JDK)를 제공합니다. 현재 선택할 수 있는 방안은 다음과 같습니다: 

{| class="table" style="text-align: left;" 
|- 
! 제작 주체
! JDK
! JRE
|- 
| The IcedTea Open Java SE (formerly icedtea6-bin)
| {{Package|dev-java/icedtea-bin}}
| 
|- 
| Oracle's Java 7 SE
| {{Package|dev-java/oracle-jdk-bin}}
| {{Package|dev-java/oracle-jre-bin}}
|- 
| Sun's Java 6 SE (오라클이 썬을 인수한 후 가려서 비활성화)
| {{Package|dev-java/sun-jdk}}
| {{Package|dev-java/sun-jre-bin}}
|- 
| The IBM Java SE
| {{Package|dev-java/ibm-jdk-bin}}
| {{Package|dev-java/ibm-jre-bin}}
|-
|}

=== JRE/JDK 설치 ===

기본 '''JDK'''를 설치하려면 {{c||emerge virtual/jdk}}를 실행하십시오. 또는 프로파일의 기본 '''JRE'''를 설치하려면 {{c|emerge virtual/jre}}를 실행하십시오. 

Some JDKs and JREs, including the Sun packages, require accepting an End User License Agreement, or EULA. If its license (such as dlj-1.1) is not listed in the <code>ACCEPT_LICENSE</code> variable (found in {{Path|/etc/portage/make.conf}}), then  the JDK/JRE will be unable to be installed. For more information on how to add acceptable licenses to {{Path|make.conf}} read the [[Handbook:X86/Working/Portage#Licenses|Licenses chapter]] of the Portage Handbook. 

To avoid any restrictive license hassle, consider installing icedtea-bin, which is an open Java implementation from the OpenJDK project. 

{{Note|Be aware each ''JDK'' will include a ''JRE''; installing a JRE is not necessary if a JDK has been emerged.}}

=== Installing fetch-restricted virtual machines ===

Some of the JDKs and JREs require a few extra steps in their configurations. Emerge the packages as normal. If additional steps are required the ebuilds will provide instruction for the user on where to go and what to download.

Download the indicated file(s) into {{Path|/usr/portage/distfiles}} Once the files are in the right directories, rerun the <tt>emerge</tt> command, at which point the JRE/JDK will be begin to install.

=== 헤드리스 JRE 설정 === 

Sometimes there is no need for a full JRE with all the capabilities of java. Using java on a server often does not require any GUI, graphical, sound or even printer related features. To install a simplified (sometimes also referred to as headless) JRE 3 USE flags need to be unset. 

{{FileBox|filename=/etc/portage/package.use|title=Required USE-Flag changes|1=
virtual/jre -X -alsa -cups
}}

Depending on the current Gentoo profile, this might already be the case. As usual, the USE flag settings that are applicable to a particular package can be checked by running <tt>emerge</tt> in pretend mode:

{{Cmd|emerge -pv virtual/jre}}

== Configuring the java virtual machine ==

=== 간단히 살펴보기 ===

Gentoo has the ability to have multiple JDKs and JREs installed without causing conflicts. 

Using the <tt>java-config</tt> tool with root privileges, a system-wide default java virtual machine (VM) can be set. Users can also use java-config to custom set their personal VM on a user-by-user basis. 

{{Note|<tt>eselect</tt> can also be used to change the system and user VM. See <kbd>eselect java-vm help</kbd>.}}

=== 기본 가상 머신 설정 ===

Running the <kbd>java-config --list-available-vms</kbd> command will output a list of all JREs and JDKs installed on the system. Here is an example of the output: 

{{RootCmd|java-config --list-available-vms|output=<pre>
The following VMs are available for generation-2:
1&#41;      IcedTea-bin 1.10.4 [icedtea-bin]
2&#41;      Sun JDK 1.5.0.20 [sun-jdk-1.5] (Build Only)
*&#41;      Sun JDK 1.6.0.16 [sun-jdk-1.6]
</pre>
}}

{{Note|VMs marked as 'Build Only' may contain security vulnerabilities and/or be end of life (EOL). Gentoo recommends not setting these VMs as the system's ''or'' the user's VM. Please see [[Java#Build_Only_VM|Build Only VM]] for more information.}}

The ''*'' indicates this is the current active JVM (system-vm or user-vm when set). The name in the brackets (''[]'') is the handle or ID for that particular VM. The handle or the number to <kbd>java-config --set-system-vm</kbd> can be used to set the VM. The following text provides an example of how to set the system VM.

(원하는대로)직접 system VM을 설정하려면:

{{RootCmd|java-config --set-system-vm sun-jdk-1.6|output=<pre>
Now using sun-jdk-1.6 as your generation-2 system JVM
</pre>}}

Alternate method: select VM by number handle number:

{{RootCmd|java-config --set-system-vm 3|output=<pre>
Now using sun-jdk-1.6 as your generation-2 system JVM
</pre>
}}

As a regular user, use java-config <code>--set-user-vm</code>. 

{{Note|<tt>source</tt>-ing the profile is no longer needed for updates to the user's or the system's VM.}}

=== 빌드만 하는 VM ===

Some virtual machines are flagged as build-only due to being EOL and/or containing security vulnerabilities. These virtual machines will not automatically be used by Gentoo for the running of applications using Gentoo launchers (run-java-tool script designed for switching VMs), but will still be available for use by Gentoo's build environment as some packages may require them for building. The setting of these virtual machines as either the system or user VM is strongly discouraged as these VMs will then be used when running the {{Path|/usr/bin/{java,javac,..}}} executables, as well as used by any packages not using Gentoo's launcher scripts. 

=== 이미 빌드한 VM ===

While merging Java packages, the VM used for building can sometimes be different from the one currently set as the system VM. 

This merge time VM switching is needed when, for example, the system-vm is set to a 1.6 VM and the package being merge requires a 1.5 VM. While merging it will select and use a 1.5 VM, leaving the system-vm choice intact. 

To define which VM is selected when a switch is needed, a list of ''default/supported VMs'' per arch has been created. It can be found in {{Path|/usr/share/java-config-2/config/jdk-defaults.conf}}. 

These defaults can be over written (even the selected system VM) in {{Path|/etc/java-config-2/build/jdk.conf}} for complete control over which VM will get used for merging.

sun-jdk를 항상 활용하려면:

{{FileBox|filename=/etc/java-config-2/build/jdk.conf|title=sun-jdk 요구|1=
*=sun-jdk
}}

Or, to always use sun-jdk-1.5 wherever possible, except for when a 1.4 or 1.3 VM is explicitly required:

{{FileBox|filename=/etc/java-config-2/build/jdk.conf|title=1.5VM에 대해 sun-jdk-1.5 요구|1=
*=sun-jdk-1.5
}}

Or to use different providers for different versions, such as requiring <code>sun-jdk-1.4</code> if a 1.3 (yes, 1.3) VM is asked, and fall back to ibm-jdk-bin otherwise:

{{FileBox|filename=/etc/java-config-2/build/jdk.conf|title=다중 수식 활용|1=
1.3=sun-jdk-1.4 ibm-jdk-bin
1.5=sun-jdk
}}


{{Warning|This file does not ''have'' to be edited. If these options are changed to use a unsupported VM, things could possibly break. Because of the wide variety of available VMs, the resources are not available to test and verify every package works on all of them. Bugs reported with a unsupported VM will not be prioritized as much as bugs present within supported VMs.}}

== 컴파일러 ==

소스코드를 빌드할 때 표즌 자바 컴파일러는 JDK에 딸려오는 {{c|javac}}를 사용합니다. 빌드시 VM을 설정할 때 어던 컴파일러를 사용할지 설정할 수도 있습니다. 근본적으로 사용할 컴파일러가 무엇인지에 대한 속성 목록을 {{Path|/etc/java-config-2/build/compilers.conf}} 에 정의했습니다. 

{{FileBox|filename=/etc/java-config-2/build/compilers.conf|title=컴파일러 기본 설정|1=
COMPILERS="ecj-X.Y jikes javac"
}}

Some compilers do not support all possible <code>-target</code> and <code>-source</code> arguments. Therefore, each compiler in the list is checked to see if it can support the desired <code>-source</code>/<code>-target</code>. javac will work in all cases, so if no other suitable compiler is found, it will be used instead. 

More details about each compiler are provided below: 

{| class="table" style="text-align: left;" 
|- 
! Name
! Handle
! Package
! Description
|- 
| javac
| javac
| N/A
| This is the default compiler that will be used, and comes with each JDK.
|- 
| jikes
| jikes
| dev-java/jikes
| Jikes was originally developed by IBM. Anecdotally, it is generally quicker than javac. Note however, that it is more pedantic, and will fail under a few circumstances where javac has no issue. It also does not support Java 1.5 syntax yet.
|- 
| Eclipse Compiler for Java
| ecj
| dev-java/eclipse-ecj
| ECJ is the compiler used by the Eclipse software development kit. It is very full featured, and is pretty fast. It does support Java 1.5 syntax.
|-
|}

== 기본 CLASSPATH 값 설정 ==

{{Warning|The options explained in this section should be considered deprecated and will most likely be removed in the future. It is strongly recommended against using these, because Java projects or applications should ideally manage their own classpaths. When choosing to specify a default CLASSPATH, some applications may behave unexpectedly, because classes they were not expecting to be on the classpath.}}

<tt>java-config</tt> can also be used to set a system-wide default CLASSPATH, as well a user-specific default CLASSPATH. 

First, list available Java libraries installed on the system to possibly put in the <code>CLASSPATH</code> variable. Here is an example of output: 

{{RootCmd|java-config --list-available-packages|output=<pre>
[xerces-2] The next generation of high performance, fully compliant XML parsers in the Apache Xerces family (/usr/share/xerces-2/package.env)
[junit] Simple framework to write repeatable tests (/usr/share/junit/package.env)
[bsh] BeanShell: A small embeddable Java source interpreter (/usr/share/bsh/package.env)
[bcel] The Byte Code Engineering Library: analyze, create, manipulate Java class files (/usr/share/bcel/package.env)
[log4j] A low-overhead robust logging package for Java (/usr/share/log4j/package.env)
...
</pre>
}}

Again, the names in brackets ([]) are the IDs to pass to java-config --set-system-classpath. Here is an example: 


{{RootCmd|java-config --set-system-classpath log4j,xerces-2}}

{{Note|The current directory ({{Path|.}}) will not be part of the system classpath, as that should be added to the system's login profile.}}

Update the environment by logging out, then in again or by typing <kbd>source {{Path|/etc/profile}}</kbd>. 

For users, java-config --set-user-classpath will create {{Path|~/.gentoo/java-env-classpath}}, which should then source from the shell's profile. 

{{CodeBox|title=지정 클래스경로 가져오기|1=
if [[ -f "${HOME}/.gentoo/java-env-classpath" ]]; then
       source ${HOME}/.gentoo/java-env-classpath
fi
}}

If desiring a system wide or user default classpath add something like the following to the shell's profile. This is advised against: 

{{RootCmd|export CLASSPATH{{=}}"${CLASSPATH}:$(java-config --classpath log4j,xerces-2)"}}

== Java 브라우저 플러그인 ==

=== 플러그인 설치 ===

<code>nsplugin</code> USE 플래그를 설정하면 Java VM을 이머징할 때 웹 브라우저용 Java 플러그인도 설치할 수 있습니다.

{{Note|<code>nsplugin</code> is not available for all architectures. Check for available plugins for the specific arch before trying to install a VM by running <kbd>emerge -pv <java-vm></kbd>.}}

Portage will allow installations of multiple Java plugins versions, though only one will be used by the web browser. Check the list of available plugins by running: 

{{RootCmd|eselect java-nsplugin list|output=<pre>
   [1]   sun-jre-bin-1.6
   [2]   icedtea-bin
</pre>
}}

In this example, <tt>sun-jre-bin</tt> is selected for the browser plugin. 

{{RootCmd|eselect java-nsplugin set sun-jre-bin-1.6}}

Verify that the correct plugin was selected: 

{{RootCmd|eselect java-nsplugin list|output=<pre>
   [1]   sun-jre-bin-1.6  current
   [2]   icedtea-bin
</pre>
}}

Java.com also provides a link to [http://java.com/en/download/installed.jsp verify the installed plugin]. Additionally, if a Mozilla-based browser is being used, verification of the Java plugin can be performed by typing <kbd>about:plugins</kbd> into the address bar.

=== multilib 시스템에 플러그인 설치하기 ===

If running a mixed 64-bit and 32-bit multilib system (for example, on AMD64), use both 64-bit and 32-bit Java plugins. Unless there is a pressing need to run 32-bit Java applications, users have been recommended to use native 64-bit plugins on 64-bit web browsers. 

There are several native 64-bit browser plugins available. The default JDK/JRE pair, <code>sun-jdk</code> and <code>sun-jre-bin</code>, both include browser plugins. Just emerge one of them with <code>nsplugin</code> USE enabled. 

{{RootCmd|echo "dev-java/sun-jre-bin nsplugin" >> /etc/portage/package.use
|emerge sun-jre-bin}}

To use a 32-bit plugin on a 32-bit browser, the {{Package|app-emulation/emul-linux-x86-java}} package will need to be emerged with <code>nsplugin</code> USE enabled. 

{{RootCmd|echo "app-emulation/emul-linux-x86-java nsplugin" >> /etc/portage/package.use
|emerge emul-linux-x86-java}}

Next, check which plugins are available: 

{{RootCmd|eselect java-nsplugin list|output=<pre>
Available 32-bit Java browser plugins
  [1]   emul-linux-x86-java-1.5
  [2]   emul-linux-x86-java-1.6
Available 64-bit Java browser plugins
  [1]   icedtea-bin
  [2]   sun-jre-bin-1.6
</pre>
}}

Now select the right plugin for the browser: 

{{RootCmd|eselect java-nsplugin set 32bit emul-linux-x86-java-1.6
|eselect java-nsplugin set 64bit sun-jre-bin-1.6}}

Verify the correct plugin was selected: 

{{RootCmd|eselect java-nsplugin list|output=<pre>
Available 32-bit Java browser plugins
  [1]   emul-linux-x86-java-1.5
  [2]   emul-linux-x86-java-1.6  current
Available 64-bit Java browser plugins
  [1]   icedtea-bin
  [2]   sun-jre-bin-1.6  current
</pre>
}}

== Java에서 사용할 USE 플래그 ==

=== USE 플래그 설정 ===

For more information regarding USE flags, refer to the [[Handbook:X86/Working/USE|USE flags]] chapter from the Gentoo Handbook. 

=== USE 플래그 ===

* The <code>java</code> flag adds support for Java in a variety of programs;
* The <code>nsplugin</code> flag adds support for Mozilla-like browsers (including Firefox). This is needed for viewing Java applets in a Mozilla-like browser;
* The <code>source</code> flag installs a zip of the source code of a package. This is traditionally used for IDEs to 'attach' source to the libraries that are being use;
* The <code>jce</code> flag adds support for the Java Cryptography Engine;
* For Java packages, the <code>doc</code> flag will build API documentation using javadoc.

== 추가 참조 ==

* The [[Project:Java|Java Project Page]] 
* The [[Project:Java/User_Guide|Java User Guide]] in the Java project

== 외부 자료 ==

* The [http://news.gmane.org/gmane.linux.gentoo.java gentoo-java], [http://news.gmane.org/gmane.linux.gentoo.user gentoo-user], and [http://news.gmane.org/gmane.linux.gentoo.devel gentoo-dev] mailing list archives
* [irc://chat.freenode.net/gentoo #gentoo] and [irc://chat.freenode.net/gentoo-java #gentoo-java] on IRC
* [[Wikipedia:Java_programming_language|Wikipedia's entry for Java]]
* [https://forums.gentoo.org/viewtopic-t-901036.html Java 7 and bootstrapping icedtea] on the Gentoo forums

More information can be found offline:
* <kbd>man java-config</kbd>
* <kbd>java-config --help</kbd>

For suggestions or questions regarding this document, please email the Gentoo Java team: {{Mail|java@gentoo.org}}

[[Category:Programming_language]]

{{Migrated|originalauthors=Joshua Nichols, Karl Trygve Kalleberg, Joshua Saddler}}
