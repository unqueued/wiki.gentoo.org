{{InfoBox stack
|{{InfoBox homepage|http://rubyonrails.org|header=true}}
|{{InfoBox wikipedia|Ruby on Rails}}
}}
Rails or [[Ruby]] on Rails is a web application framework.

== Installation ==
Install {{Package|dev-ruby/rails}}:
{{Emerge|dev-ruby/rails}}

== Setup ==
{{Cmd|cd
|mkdir rails
|cd rails
|rails new ror
|~/rails/ror/script/rails server}}

Point your browser @ http://0.0.0.0:3000 and your are riding rails.

== passenger ==
this was setup using

{{RootCmd|gem install rails passenger
|passenger-install-apache2-module}}

Emerge passenger should work equally as well.
{{Emerge|passenger}}

{{file|/etc/conf.d/apache2|add -D PASSENGER to apache's config|<pre>
APACHE2_OPTS="-D PASSENGER"
</pre>}}

apache's user needs to control enviroment.rb
{{RootCmd|chown apache:apache ~/rails/ror/config/environment.rb}}

link your working rails to {{Path|/var/www/ror}} using [[sudo]] to keep the $HOME of your user (and not have $HOME show as /root):
{{Cmd|sudo ln -s $HOME/rails/ror /var/www/ror}}

passenger needs apache to relax the rules a little bit you need to edit {{Path|/etc/apache2/modules.d/00_default_settings.conf}} and comment out the draconian settings and insert the relaxed settings:
{{File|/etc/apache2/modules.d/00_default_settings.conf||<pre>
# We configure the "default" to be a very restrictive set of features.
#<Directory />
#	Options FollowSymLinks
#	AllowOverride None
#	Order deny,allow
#	Deny from all
#</Directory>

<Directory />
	Options FollowSymLinks
	AllowOverride all
	Order allow,deny
	Allow from all
</Directory>
</pre>}}

backup your original apache vhost:
{{RootCmd|mv /etc/apache2/vhosts.d/00_default_vhost.conf /etc/apache2/vhosts.d/00_default_vhost.conf.backup}}

you need to drop in the passenger vhost file for apache:
{{File|/etc/apache2/vhosts.d/00_default_vhost.conf||<pre>
<IfDefine DEFAULT_VHOST>
Listen 80
NameVirtualHost *:80
   <VirtualHost *:80>
      DocumentRoot /var/www/ror/public    
      <Directory /var/www/ror/public>
      </Directory>
   </VirtualHost>
</IfDefine>
</pre>}}

add to {{Path|/etc/apache2/modules.d/30_mod_passenger.conf}}:
{{File|/etc/apache2/modules.d/30_mod_passenger.conf||<pre>   LoadModule passenger_module /usr/local/lib64/ruby/gems/1.8/gems/passenger-3.0.19/ext/apache2/mod_passenger.so
   PassengerRoot /usr/local/lib64/ruby/gems/1.8/gems/passenger-3.0.19
   PassengerRuby /usr/bin/ruby18
</pre>}}

{{RootCmd|/etc/init.d/apache2 restart}}

point your browser to http://0.0.0.0 or http://127.0.0.1 or http://localhost and your rocking passenger now

[[Category:Web application]]
