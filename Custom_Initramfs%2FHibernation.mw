{{WIP|author=frostschutz}}

Hibernation (''suspend to disk'') is a special case. If you intend to use it in your [[Custom Initramfs]], you need to be aware of the pitfalls, or you will suffer from utter and complete data loss. If you intend to use this, you should have a really good understanding of how Linux works, particularly how its various storage layers play together. Alternatives are available. You could Suspend to RAM, which does not involve ''initramfs'' at all. Or you could just shutdown properly...

{{Warning|To quote relevant Linux Documentation: ([https://www.kernel.org/doc/Documentation/power/swsusp.txt swsusp.txt], [https://www.kernel.org/doc/Documentation/power/swsusp-dmcrypt.txt swsusp-dmcrypt.txt] and [https://www.kernel.org/doc/Documentation/power/swsusp-and-swap-files.txt swsusp-and-swap-files.txt])
::
: If you touch anything on disk between suspend and resume...
::: '''...kiss your data goodbye.'''
: If you do resume from initrd after your filesystems are mounted...
::: '''...bye bye root partition.'''}}

This article assumes you already have written your custom and fully operational {{Path|{{Highlight|color=darkgreen|'''/init'''}}}} and now wish to add Hibernation support to it. If you are not using a [[Custom Initramfs]], or for a less specific introduction to the topic, see [[Suspend and hibernate]] instead. 

== Pitfalls ==

== Kernel configuration ==

{{KernelBox|title=<nowiki>CONFIG_SWAP=y CONFIG_HIBERNATION=y</nowiki>|1=<pre>
General setup  --->
[*] Support for paging of anonymous memory (swap)

Power management and ACPI options  --->
[*] Hibernation (aka 'suspend to disk')
</pre>}}

== Resume from ==
=== LVM ===
=== LUKS ===
=== Swapfile ===

{{WIP|author=frostschutz}}
[[Category:Initramfs]]
[[Category:Power management]]
