The '''selected set''', also known as the world file, [[Article description::contains the packages the user has explicitly installed.]] The selected set, together with the [[System set (Portage)|system set]], make up the [[World set (Portage)|world set]].
With a couple of exceptions, Portage will register select set package atoms to the {{Path|/var/lib/portage/world}} file.

== Managing the selected set ==

=== Avoiding an atom in the world file ===

In order to avoid problems in dependency resolution when updating the system, the {{Path|/var/lib/portage/world}} file should contain as few dependencies as possible.  So use the <code>--oneshot</code> (<code>-1</code>) option for emerging dependencies.  

{{Emerge|params+=--oneshot|<category/atom>}}

=== Checking the world file ===

The {{c|emaint}} command can be used to see if any problems exist in the world file:

{{Cmd|/usr/sbin/emaint --check world|output=<pre>
Emaint: check world        100% [============================================>]
</pre>}}

=== Keeping the world file clean ===

{{Warning|The application qdepends has several [https://bugs.gentoo.org/buglist.cgi?quicksearch{{=}}qdepends known bugs]. In particular, see the {{Bug|390749}}.}}

Dependencies already listed in this file can be found using the {{c|[[Q_applets#Listing_packages_which_depend_on_some_package_.28qdepends.29|qdepends]] -Q}} command and be collected in a file say {{Path|/tmp/deselect}}:

{{Important|The following script may have several issues so check the data carefully.<ref>https://forums.gentoo.org/viewtopic-t-1075276.html</ref>}}

{{CodeBox|title=Check world file bash example|lang=bash|<pre>#!/bin/bash

while read i ; do \
        if [ -n "$(qdepends -Q $i)" ]; then \
                echo '' ; echo 'checking '$i ; 
                if [ -n "$(emerge -p --quiet --depclean $i)" ]; then \
                        echo $i' needs to stay in @world'
                else
                        echo $i' can be deselected' 
                        echo $i >> /tmp/deselect
                fi
        fi 
done < /var/lib/portage/world
</pre>}} 

Entries collected in {{Path|/tmp/deselect}} can be cross-checked using the <code>--depclean</code> option:

{{Cmd|emerge -pv --depclean $(< /tmp/deselect)}}

The {{c|emerge --deselect}} option will remove these entries without unmerging them.

{{RootCmd|emerge --ask --deselect $(< /tmp/deselect)}}

In case {{c|emerge --depclean -p}} indicates some needed or wanted package would be unmerged, those can be re-added using the {{c|--noreplace}} option:

{{RootCmd|emerge --ask --noreplace <atom>}}

It will add the atom to the {{Path|/var/lib/portage/world}} file without compiling it again.

=== Adding an atom without recompilation ===

To add a package to the selected set without ''recompiling'' the package:

{{Emerge|params+=--noreplace|<category/atom>}}

== See also ==

* {{See also|System set (Portage)}}
* {{See also|World set (Portage)}}
* {{See also|Profile (Portage)}}

== External resources ==

* https://forums.gentoo.org/viewtopic-t-1042252-start-11.html - A forum thread that discusses dependency calculation using the world file.

== References ==

{{reflist}}

[[Category:Portage]]
