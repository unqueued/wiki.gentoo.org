<languages />

{{InfoBox stack
|{{InfoBox homepage|http://www.openssh.org|header=true}}
|{{InfoBox wikipedia|Secure Shell}}
}}
'''SSH''' ('''S'''ecure '''SH'''ell) ist ein verschlüsseltes Terminal-Programm, das das klassische [[Wikipedia:telnet|telnet]] Tool auf Unixoiden Betriebssystemen ersetzt.

Zusätzlich zu Terminal-Fernzugriff, welcher durch das Hauptprogramm "ssh" bereitgestellt wird, enthält die SSH-Programmsammlung inzwischen auch andere Werkzeuge wie "scp" (häufig in Gebrauch) oder "sftp" (weniger häufig).

SSH war nicht immer frei. Heute ist allerdings die Implementation von [http://www.openbsd.org/ OpenBSD], OpenSSH, die am meisten genutzte und in Gentoo vorinstallierte Version.

== OpenSSH verwenden ==

=== Server ===
Der OpenSSH server kann wie jeder andere [[OpenRC]]-Service mit "/etc/init.d/ssh start", "/etc/init.d/ssh stop" und "/etc/init.d/ssh restart" kontrolliert werden.

Zu bemerken ist hierbei, dass aktive Verbindungen unberührt bleiben, wenn "/etc/init.d/ssh restart" verwendet wird; dies kann bei Benutzung von "/etc/init.d/ssh stop", gefolgt von "/etc/init.d/ssh start" nicht garantiert werden, und kann zu Verbindungsabbrüchen führen.

== Konfiguration ==

=== Serverkonfiguration ===
Der SSH Server wird normalerweise in {{Path|/etc/ssh/sshd_config}} konfiguriert. Weitere Einstellungen, einschliesslich des Ortes, an dem sich die obige Konfiguration befindet, können in {{Path|/etc/conf.d/sshd}} getätigt werden. Für Details über die Konfiguration sollte die [[man page]] "sshd_config" konsultiert werden.

Für eine Konfiguration, die sich besonders auf Sicherheit konzentriert, sollte [https://dev.gentoo.org/~swift/docs/security_benchmarks/openssh.html guide] (Englisch) gelesen werden.

=== Client configuration ===
The '''ssh''' client and related programs ('''scp''', '''sftp''', etc.) are configured in the {{Path|/etc/ssh/ssh_config}} file.  For more information on how to configure these programs see the ''ssh_config'' man page.

=== Passwordless Authentication ===
very handy for [[git]] server management

==== Client ====
on your client run
{{Cmd|ssh-keygen -t rsa}}
then hit enter like 5 times to generate your key
move the client ~/.ssh/id_rsa.pub to the server user your logging in as ~/.ssh/authorized_keys

==== Server ====
useradd a user

then place clients id_rsa.pub file into the new users ~/.ssh/authorized_keys

==== Single Machine Testing ====
{{Cmd|ssh-keygen -t rsa}}
enter 5 times

{{Cmd|mv ~/.ssh/id_rsa.pub ~/.ssh/authorized_keys}}
{{Cmd|ssh localhost}}

== Troubleshooting ==
There are 3 different levels of debug modes.  ''-v'' Causes ssh to print debugging messages about its progress.  This is helpful in debugging connection, authentication, and configuration problems.  Multiple -v options increase the verbosity.  The maximum is 3.

debug1 mode:
{{Cmd|ssh example.org -v}}

debug2 mode:
{{Cmd|ssh example.org -vv}}

debug3 mode:
{{Cmd|ssh example.org -vvv}}

=== Death of Long-lived Connections ===
Many internet access devices perform network address translation ([[NAT]]), a process that enables devices on a private network such as that typically found in a home or business place to access foreign networks, such as the internet, despite only having a single IP address on that network.  Unfortunately, not all NAT devices are created equal, and some of them incorrectly close long-lived, occasional-use TCP connections such as those used by SSH.  This is generally observable as a sudden inability to interact with the remote server, though the '''ssh''' client program has not exited.

In order to resolve the issue, OpenSSH clients and servers can be configured to send a 'keep alive', or invisible message aimed at maintaining and confirming the live status of the link.
* To enable keep alive '''for all clients connecting to your local server''', set ''ClientAliveInterval 30'' (or some other value, in seconds) within the {{Path|/etc/ssh/sshd_config}} file.
* To enable keep alive '''for all servers connected to by your local client''', set ''ServerAliveInterval 30'' (or some other value, in seconds) within the {{Path|/etc/ssh/ssh_config}} file.

== See also ==
* [https://dev.gentoo.org/~swift/docs/security_benchmarks/openssh.html Securing OpenSSH] - Gentoo developer documentation.
* [http://www.gentoo.org/doc/en/articles/openssh-key-management-p1.xml OpenSSH Key Management Part1] - Gentoo documentation, have a look at all 3 parts.
* [http://www.gentoo.org/doc/en/keychain-guide.xml Gentoo Linux Keychain Guide]
* [[autossh]] - Detects when SSH connections drop and auto-reconnects.


[[Category:SSH]]
[[Category:Server]]
[[Category:Daemons]]
