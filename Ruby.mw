{{InfoBox stack
|{{InfoBox homepage|http://www.ruby-lang.org/en/|header=true}}
|{{InfoBox wikipedia|Ruby (programming language)}}
|{{InfoBox github|ruby/ruby}}
}}

Ruby is a programming language, it is required for software like [[Rails]], [[Rails#passenger_via_apache|passenger]], and [[GitLab]].

== Installation ==

=== USE flags ===

{{USEflag|package=dev-lang/ruby}}

=== Emerge ===

Install {{Package|dev-lang/ruby}}:

{{emerge|dev-lang/ruby}}

== Configuration ==

=== make.conf ===

One can activate specific ruby implementations by adding <code>RUBY_TARGETS="$implementation"</code> to {{Path|/etc/portage/make.conf}}. Please note: setting the <var>RUBY_TARGETS</var> variable may overwrite the implementations set by the systems base profile.

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
RUBY_TARGETS="ruby21 ruby22 ruby23 ruby24"
}}

Multiple Ruby implementations in can be installed in parallel. The <var>RUBY_TARGETS</var> variable picks the implementations from <var>USE_RUBY</var> (which is set ebuilds depending on Ruby) and (re)compiles packages with support for each selected implementation.

=== Select a Ruby slot with eselect ===

Ruby is slotted in Portage, to view which installed version slot the system is currently using, run:

{{RootCmd|eselect ruby list}}

To change the selected slot, issue:

{{RootCmd|eselect ruby set ruby23}}

== Upgrades ==

=== Adding or removing Ruby implementations ===

To add a new Ruby version, or remove an old version, first adjust the Ruby target variable in {{Path|/etc/portage/make.conf}}. 
For example, if upgrading from Ruby 2.2 to Ruby 2.3, add <code>ruby23</code> to the <var>RUBY_TARGETS</var> variable:

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
# RUBY_TARGETS="ruby22" # 2016-12-12 upgrade to ruby23, larry
RUBY_TARGETS="ruby22 ruby23"
}}

Or for example, if removing Ruby 2.2, remove <code>ruby22</code> from the <var>RUBY_TARGETS</var> variable:

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
# RUBY_TARGETS="ruby22 ruby23" # 2017-01-01 removed ruby22, larry
RUBY_TARGETS="ruby23"
}}

It is safe not to add and remove targets in one step.

Next, ask Portage to rebuild the [[World set (Portage)|@world set]] with the new Ruby target list:

{{Emerge|params+=--update --deep --newuse|@world}}

After the emerge completes, update the slot to the newly installed version (2.3 in this case) using {{c|eselect}} as [[#Slots|mentioned above]].

Finally, as long as no packages are still using the old version, it should be removable by asking Portage to do a dependency clean:

{{RootCmd|emerge --depclean}}

=== Installing a test implementation on an otherwise stable system ===

Starting with Ruby 2.2 we are now using the stable mask mechanism to keep Ruby 2.2 on testing until it is ready to be unmasked. If you want to use ruby23 on an otherwise stable system, you need to apply the following changes:

{{FileBox|filename=/etc/portage/profile/use.stable.mask|title=Unmasking flags for Ruby 2.3|1=
-ruby_targets_ruby23
}}

For further information please see the [[Project:Python/PYTHON_TARGETS#Unmasking_non-stable_implementation_on_a_stable_system|instructions for Python]].

== See also ==

* [[Python]] - An interpreted, interactive, object-oriented programming language. Without Python Gentoo would not be Gentoo.
* The [[Project:Ruby|Ruby Project]] page

== External resources ==

* [http://www.codecademy.com/tracks/ruby Codecademy's Ruby course]
* http://iwanttolearnruby.com/

[[Category:Programming language]]
