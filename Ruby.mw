{{InfoBox stack
|{{InfoBox homepage|http://www.ruby-lang.org/en/|header=true}}
|{{InfoBox wikipedia|Ruby (programming language)}}
|{{InfoBox github|ruby/ruby}}
}}

Ruby is a programming language, it is required for software like [[Rails]], [[Rails#passenger_via_apache|passenger]], and [[GitLab]].

== Installation ==

Install {{Package|dev-lang/ruby}}:

{{emerge|dev-lang/ruby}}

== Configuration ==

=== make.conf ===

Several packages built against ruby such as passenger require ruby targets to be defined in {{Path|/etc/portage/make.conf}}

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
RUBY_TARGETS="ruby21 ruby22 ruby23 ruby24"
}}

=== Slots ===

Ruby is slotted in Portage, to view which installed version slot the system is currently using, run:

{{RootCmd|eselect ruby list}}

To change the selected slot, issue:

{{RootCmd|eselect ruby set ruby23}}

== Upgrades ==

To upgrade Ruby, first add the new Ruby target into {{Path|/etc/portage/make.conf}}. For example, if upgrading from Ruby 2.2 to Ruby 2.3, add <code>ruby23</code> to the <var>RUBY_TARGETS</var> variable:

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
# RUBY_TARGETS="ruby22" # 2016-12-12 upgrade to ruby23, larry
RUBY_TARGETS="ruby22 ruby23"
}}

Next, ask Portage to rebuild the [[World set (Portage)|@world set]]:

{{Emerge|params+=--update --deep --newuse|@world}}

After that, update the slot to the newly installed version (2.3 in this case) using {{c|eselect}} as [[#Slots|mentioned above]].

Finally, as long as no packages are still using the old version, it should be removable by asking Portage to do a dependency clean:

{{RootCmd|emerge --depclean}}

=== Remove old ruby version ===
First verify, that no package depends on this specific version.

For example, if removing Ruby 2.2, remove <code>ruby22</code> from the <var>RUBY_TARGETS</var> variable:

{{FileBox|filename=/etc/portage/make.conf|lang=bash|1=
# RUBY_TARGETS="ruby22 ruby23" # 2017-01-01 removed ruby22, larry
RUBY_TARGETS="ruby23"
}}

Next, ask Portage to rebuild the [[World set (Portage)|@world set]] without the old Ruby version with
{{Emerge|params+=--update --deep --newuse|@world}}
and remove no longer needed packages again 
{{RootCmd|emerge --depclean}}

== See also ==

* [[Python]] - An interpreted, interactive, object-oriented programming language. Without Python Gentoo would not be Gentoo.

== External resources ==

* [http://www.codecademy.com/tracks/ruby Codecademy's Ruby course]
* http://iwanttolearnruby.com/

[[Category:Programming language]]
