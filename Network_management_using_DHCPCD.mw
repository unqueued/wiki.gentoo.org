{{Stub}}

{{InfoBox stack|{{InfoBox homepage|http://roy.marples.name/projects/dhcpcd/|header=true}}}}

== Abstract ==
Gentoo is about choice and also OpenRC can be used with one of several network managers or even with none.<ref>{{Package|sys-apps/openrc}}
<pre>if ! use newnet && ! use netifrc; then
		ewarn "You have emerged OpenRc without network support. This"
		ewarn "means you need to SET UP a network manager such as"
		ewarn "	net-misc/netifrc, net-misc/dhcpcd, net-misc/wicd,"
		ewarn "net-misc/NetworkManager, or net-misc/badvpn."
		ewarn "Or, you have the option of emerging openrc with the newnet"
		ewarn "use flag and configuring /etc/conf.d/network and"
		ewarn "/etc/conf.d/staticroute if you only use static interfaces."</pre></ref>  This is about using OpenRC with DHCPCD<ref>[http://roy.marples.name/projects/dhcpcd/index DHCPCD homepage]</ref><ref>[http://packages.gentoo.org/package/net-misc/dhcpcd net-misc/dhcpcd]</ref> as networkmanager. It is based on a posting in Gentoo Forums.<ref>https://forums.gentoo.org/viewtopic-t-965190.html</ref><br />
<br />
{{Important|It works without Gentoo net.* scripts, so these USE flags may be disabled in OpenRC
{{USEflag
|package=sys-apps/openrc
|desc=May be disabled in {{Package|sys-apps/openrc}}
|netifrc+yes+no+enable Gentoo's network stack (net.* scripts)
|newnet++no
}}
}}

== Installation ==
Install dhcpcd:
{{RootCmd|emerge  --ask net-misc/dhcpcd}}

Add it to the default runlevel: 
{{RootCmd|rc-update add dhcpcd default}}

== Wireless ==
When you need wireless support also install wpa_supplicant,<ref>[[wpa_supplicant]]</ref><ref>[http://hostap.epitest.fi/wpa_supplicant/ wpa_supplicant homepage]</ref> Also note that for wireless the older versions (â‰¤ 6.4.3) of dhcpcd need wireless extensions compatibility in the kernel.<ref>https://forums.gentoo.org/viewtopic-p-7611394.html#7611394</ref><ref>[[Wifi#WEXT|WEXT Kernel option]]</ref><ref>https://forums.gentoo.org/viewtopic-p-7617004.html#7617004</ref>
{{RootCmd|emerge  --ask net-wireless/wpa_supplicant}}
{{Important|Don't add wpa_supplicant to any runlevel.}}
For its detailed configuration and usage refer to [[wpa_supplicant]].
<br />
Don't forget to set up and test the necessary wireless device drivers<ref>[[Wifi|Setup of a Wifi network device]]</ref> in your kernel.

== Static IP address ==
In case the network interface card should be configured with a static IP address, add their data to the configuration file as shown for the following example.<ref>https://forums.gentoo.org/viewtopic-p-7356550.html#7356550</ref>
{{File|/etc/dhcpcd.conf||<pre>
interface eth0
static ip_address=192.168.0.10/24
static routers=192.168.0.1
static domain_name_servers=192.168.0.1</pre>}}

== Migration from Gentoo net.* scripts ==
{{Important|In case of migration from Gentoo net.* scripts it's essential to remove them all<ref>[[Complete_Handbook/Configuring_the_system#Networking_information]]</ref><ref>[http://www.gentoo.org/doc/en/handbook/handbook-amd64.xml?full=1#book_part1_chap9__chap6 Gentoo Linux AMD64 Handbook]</ref> and also wpa_supplicant from all runlevels.
{{RootCmd|rc-update del net.lo
|rc-update del net.eth0
|rc-update del net.wlan0
|rc-update del wpa_supplicant}}
}}

Once the network setup works well you might want to completely remove the old Gentoo net.* scripts setup.  So disable the netifrc useflag, re-emerge OpenRC and unmerge netifrc:
{{RootCmd|echo 'sys-apps/openrc -netifrc' >> /etc/portage/package.use
|emerge --ask --newuse --oneshot sys-apps/openrc
|emerge -C net-misc/netifrc}}

Also the old config files and symlinks can be removed
{{RootCmd|rm /etc/conf.d/net
|rm /etc/init.d/net.eth0
|rm /etc/init.d/net.wlan0
|rm /etc/init.d/net.lo}}

== Network dependant services ==
Starting/stopping network dependant services is still in development.<ref>{{Bug|522206}}</ref>  Services having "need net"
{{File|/etc/init.d/fetchmail||<pre>#!/sbin/runscript

piddir=${pid_dir:-/var/run/fetchmail}
pid_file=${piddir}/${RC_SVCNAME}.pid
rcfile=/etc/${RC_SVCNAME}rc

depend() {
        need net
        use mta
}</pre>}}

in their init.d scripts like fetchmail would then start after dhcpcd is started. 
{{File|/var/log/messages||<pre>
Sep 10 08:38:41 localhost /etc/init.d/fetchmail[10675]: WARNING: fetchmail is scheduled to start when dhcpcd has started
</pre>}}

They will be stopped when dhcpcd turns inactive and will be restarted when dhcpcd is back.
{{Cmd|rc-config show default|output=<pre>
  dhcpcd                    [inactive]
  fetchmail                 [stopped]
</pre>}}

== References ==
{{reflist}}

[[Category:Network_management]]
