<languages />
<translate>
{{InfoBox stack|{{InfoBox homepage|http://roy.marples.name/projects/dhcpcd/|header=true}}}}

'''D'''ynamic '''H'''ost '''C'''onfiguration '''P'''rotocol '''C'''lient '''D'''aemon ('''DHCPCD''') is a popular DHCP<ref>[http://tools.ietf.org/html/rfc2131 RFC 2131] [http://en.wikipedia.org/wiki/DHCP en.wikipedia.org/wiki/DHCP]</ref> client for Gentoo Linux users. '''DHCPCD'''<ref>[http://roy.marples.name/projects/dhcpcd/index DHCPCD homepage]</ref><ref>[http://packages.gentoo.org/package/net-misc/dhcpcd net-misc/dhcpcd]</ref> offers a large feature set and easily integrates into OpenRC.<ref>[[Network_management_using_DHCPCD/OpenRC message|Integration with OpenRC]]</ref>  This article is about using OpenRC with DHCPCD as network manager. It is based on a posting in Gentoo Forums.<ref>[https://forums.gentoo.org/viewtopic-t-965190.html Forum thread TIP: Complete network stack without net.* scripts]</ref>

== Installation ==
=== USE flags ===
{{USEflag|package=net-misc/dhcpcd|desc=Optional USE flags for {{Package|net-misc/dhcpcd}}:
|embedded+++Embed the definitions of dhcp options in the dhcpcd executable
|ipv6
|udev
}}
=== Emerge ===
Use the following commands to install dhcpcd, add it to the default runlevel, and start the service:

{{RootCmd
|emerge  --ask net-misc/dhcpcd
|rc-update add dhcpcd default
|/etc/init.d/dhcpcd start
}}

All its configuration goes into {{Path|/etc/dhcpcd.conf}} but for most installations nothing needs to be done there, presumed that most computers nowadays are behind a router or access point providing DHCP. Though <kbd>man 5 dhcpcd.conf</kbd><ref name=manpage>http://roy.marples.name/man/html5/dhcpcd.conf.html</ref> will be helpful in case of advanced configuration demand.

== Wireless ==
Dhcpcd comes with a built-in hook for wpa_supplicant, so it is best choice to install this for wireless. The necessary wireless device drivers<ref>[[Wifi|Setup of a Wifi network device]]</ref> in the kernel need to be installed. Also note that the older versions (â‰¤2.0-r2) of wpa_supplicant need "env wpa_supplicant_driver=nl80211" in {{Path|/etc.dhcpcd.conf}}.<ref>[https://forums.gentoo.org/viewtopic-p-7617004.html#7617004 Forum thread DHCPCD + wpa_supplicant without WEXT]</ref><br />

Create the configuration file, put the content shown below, install wpa_supplicant and restart dhcpcd:
{{FileBox|filename=/etc/wpa_supplicant/wpa_supplicant.conf|lang=bash|1=
# Allow users in the 'wheel' group to control wpa_supplicant
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=wheel

# Make this file writable for wpa_gui
update_config=1}}
{{RootCmd|echo 'net-wireless/wpa_supplicant qt4 wps' >> /etc/portage/package.use|emerge  --ask net-wireless/wpa_supplicant|/etc/init.d/dhcpcd restart}}{{Important|Don't add wpa_supplicant to any runlevel.}}
For any questions or problems with wpa_supplicant see the references.<ref>[[Wpa_supplicant#Setup]]</ref><ref>[http://hostap.epitest.fi/wpa_supplicant/ wpa_supplicant homepage]</ref><ref>See also [[Handbook:Parts/Networking/Wireless]]</ref>

== Static IP address ==
In case the network interface card should be configured with a static IP address, type it into the [[Network_management_using_DHCPCD/Dhcpcd-ui|Graphical User interface]]<br />
[[File:Dhcpcd-qt.png|Static IP address using dhcpcd-qt (from fluxbox)]]


If the system does not have a GUI, entries can also be manually added to the {{Path|/etc/dhcpcd.conf}} configuration file using the command line.<ref name=manpage>http://roy.marples.name/man/html5/dhcpcd.conf.html</ref> The following is an example of manually adding a static address, routes and DNS by editing the appropriate configuration file using a text editor of choice:
{{FileBox|filename=/etc/dhcpcd.conf|lang=bash|1=
static ip_address=192.168.0.10/24
static routers=192.168.0.1
static domain_name_servers=192.168.0.1
}}

== Migration from Gentoo net.* scripts ==
In case of migration from Gentoo net.* scripts<ref>[[Complete_Handbook/Configuring_the_system#Manging_network_with_Gentoo_net..2A_scripts]]</ref><ref>[[Handbook:Parts/Networking/Introduction]]</ref> it's essential to remove wpa_supplicant and the net.* scripts from the runlevels.
{{Cmd|rc-config list <nowiki>| grep 'wpa_supplicant\|dhcpcd\|net.'</nowiki>|output=<pre>
  net.wlp8s0                default
  dhcpcd                    default
  wpa_supplicant</pre>}}
Any lines starting with "net." must not have a runlevel assigned.  In this example, it's net.wlp8s0 to be removed.
{{RootCmd|rc-update del net.wlp8s0
|/etc/init.d/wlp8s0 stop}}

Once the network setup works well you might want to completely remove the old Gentoo net.* scripts setup.  So disable the netifrc useflag, re-emerge OpenRC without and unmerge netifrc:
{{RootCmd|echo 'sys-apps/openrc -netifrc' >> /etc/portage/package.use
|emerge --ask --newuse --oneshot sys-apps/openrc
|emerge -C net-misc/netifrc}}

Also the old config files and symlinks can be removed
{{RootCmd|rm /etc/conf.d/net
|rm /etc/init.d/net.*}}

== [[Network_management_using_DHCPCD/Network dependant services|Network dependant services]] ==

== [[Network_management_using_DHCPCD/Dhcpcd-ui|Graphical User interface]] ==

== [[Network_management_using_DHCPCD/Testing|Testing]] ==

== References ==
{{reflist}}

[[Category:Network_management]]
</translate>
