<languages />
<translate>
This article is based on a posting in Gentoo Forums.<ref>[https://forums.gentoo.org/viewtopic-t-965190.html Gentoo Forums :: View topic - TIP: Complete network stack without net.* scripts], [https://gentoo.org/ Welcome – Gentoo Linux], July 23rd, 2013. Retrieved on May 7th, 2015.</ref>

== Setup ==
Have [[Dhcpcd|dhcpcd]] installed, then add it to the default runlevel and start the service:

{{RootCmd
|rc-update add dhcpcd default
|/etc/init.d/dhcpcd start
}}
This setup provides automatical switching between wired and wireless network interfaces. It is deviating from Gentoo Handbook and should be changed there.<ref>{{Bug|534752|text=Bug 534752 - Handbook:Parts/Installation/System - Drop Gentoo net.* scripts in favour of dhcpcd }}, [https://bugs.gentoo.org/ Gentoo's Bugzilla Main Page], (Last modified) January 31st, 2015. Retrieved on May 10th, 2015.</ref>

== Wireless ==
Dhcpcd comes with a built-in hook for wpa_supplicant, so it is best choice to install this for wireless.  However, in dhcpcd-6.10.0, this hook is no longer installed in {{Path|/lib/dhcpcd/dhcpcd-hooks}} by default:<ref>[https://gentoo.org/support/news-items/2016-01-08-some-dhcpcd-hooks-are-now-examples.html News Items -  Some dhcpcd hooks are now examples] [https://gentoo.org/ Welcome – Gentoo Linux], January 8th, 2016. Retrieved on January 11th, 2016.</ref>  After activating that hook and [[Wpa_supplicant#Emerge|installation of wpa_supplicant]] restart dhcpcd:
{{RootCmd|/etc/init.d/dhcpcd restart}}{{Important|Don't add wpa_supplicant to any runlevel.}}
For any questions or problems with [[Wpa_supplicant#Configuration|wpa_supplicant]] see the reference.<ref>Jouni Malinen and contributors. [http://hostap.epitest.fi/wpa_supplicant/ Linux WPA Supplicant (IEEE 802.1X, WPA, WPA2, RSN, IEEE 802.11i)], [http://w1.fi/ hostapd and wpa_supplicant], Retrieved on May 7th, 2015.</ref> or [[Handbook:Parts/Networking/Wireless|the handbook]].

== Testing ==

Stop dhcpcd and wpa_supplicant, then start dhcpcd with debugging in foreground and you should see dhcpcd starting the connection.<ref>[https://forums.gentoo.org/viewtopic-t-965190-start-93.html Post 93 of Gentoo Forums :: View topic - TIP: Complete network stack without net.* scripts], [https://gentoo.org/ Welcome – Gentoo Linux], September 9th, 2014. Retrieved on May 10th, 2015.</ref>

{{RootCmd|/etc/init.d/dhcpcd stop
|killall wpa_supplicant
|dhcpcd -dB
|output=<pre>
dhcpcd[23772]: version 6.4.5 starting
dhcpcd[23772]: udev: starting
dhcpcd[23772]: dev: loaded udev
...
...
</pre>}}

== Static IP address ==
In case the network interface card should be configured with a [[Static_Routing|static IP address]], type it into the [[dhcpcd-ui#Usage|graphical user interface]].  Without the [[dhcpcd-ui#Usage|graphical user interface]], entries can also be manually added to {{Path|/etc/dhcpcd.conf}}<ref name=manpage>Roy Marples. [http://roy.marples.name/man/html5/dhcpcd.conf.html DHCPCD.CONF(5)], [http://roy.marples.name/blog/ Roy Marples's personal blog], March 9th, 2015. Retrieved on May 07th, 2015.</ref> as described in [[Dhcpcd#Static_IP_addresses]].

== Migration from Gentoo net.* scripts ==
In case of migration from [[netifrc|Gentoo net.* scripts]] it's essential to remove wpa_supplicant and the net.* scripts from the runlevels.
{{Cmd|rc-config list <nowiki>| grep 'wpa_supplicant\|dhcpcd\|net.'</nowiki>|output=<pre>
  net.wlp8s0                default
  dhcpcd                    default
  wpa_supplicant</pre>}}
Any lines starting with "net." must not have a runlevel assigned.  In this example, it's net.wlp8s0 to be removed.
{{RootCmd|rc-update del net.wlp8s0
|/etc/init.d/wlp8s0 stop}}

Once the network setup works well you might want to completely remove the old Gentoo net.* scripts setup.  So disable the netifrc useflag, re-emerge OpenRC without and unmerge netifrc:
{{RootCmd|echo 'sys-apps/openrc -netifrc' >> /etc/portage/package.use
|emerge --ask --newuse --oneshot sys-apps/openrc
|emerge -C net-misc/netifrc}}

Also the old config files and symlinks can be removed
{{RootCmd|rm /etc/conf.d/net
|rm /etc/init.d/net.*}}

== Network dependent services ==
Start/Stop of [[Network_dependent_services]] by dhcpcd is no longer supported since openrc-0.16.4.

== Graphical User interface ==

A graphical user interface is provided by [[dhcpcd-ui|net-misc/dhcpcd-ui]].
== See also ==
[[Dhcpcd]]
== References ==
{{reflist}}

[[Category:Network_management]][[Category:Knowledge_Base]]
</translate>
