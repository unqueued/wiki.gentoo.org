<languages />


{{Metadata|abstract=Cette FAQ est un regroupement des questions et réponses collectées sur la liste de diffusion gentoo-dev et sur IRC.}}

Cette FAQ est un regroupement des questions et réponses collectées sur la liste de diffusion gentoo-dev et sur le canal Gentoo sur Freenode (IRC).

__TOC__

=== Introduction ===

Noter que beaucoup de ces questions trouvent leur réponse dans la documentation ou les guides officiels de Gentoo. Ce n'est qu'une simple liste de questions fréquemment posées. Ne pas hésiter à prendre le temps de lire la documentation et/ou les pages du manuel afin d'avoir une meilleure compréhension de la façon dont Gentoo et GNU/Linux fonctionnent, ou pour les réponses à des questions qui ne sont pas traitées ici. 

=== Pour commencer ===

=== Comment prononcer Gentoo, et qu'est-ce que cela signifie ? ===

''Gentoo'' se prononce « gen-too » (le « g » de « Gentoo » se prononce « j » comme dans le mot « geste »). Le nom latin du [https://fr.wikipedia.org/wiki/Manchot_papou pingouin Gentoo] est ''Pygoscelis papua''. Le nom ''Gentoo'' a été donné au pingouin par les habitants des [https://fr.wikipedia.org/wiki/%C3%8Eles_Malouines Îles_Malouines].

=== Qu'est-ce qui rend Gentoo différent ? ===

Gentoo utilise un système de ports semblable à BSD appelé [[Project:Portage|Portage]]. Portage est un système de gestion de paquets donnant une grande souplesse d'installation et de maintenance. Il offre des options de compilation à travers [[Handbook:AMD64/Working/USE|les variables USE]] (USE flags), des dépendances conditionnelles, un résumé avant installation des paquets, des installations et désinstallations sûres des paquets (via un bac à sable), des profils système, une [[Handbook:AMD64/Portage/Variables#Configuration_file_protection|protection des fichiers de configuration]] parmi nombreuses autres [[Handbook:AMD64/Working/Features|fonctionnalités]].

Dès l'origine un système Gentoo est entièrement construit à partir de codes source, en suivant les choix d'optimisation de l'utilisateur. Celui-ci choisit les paquets qui seront installés ou non. Gentoo offre de nombreux choix, les utilisateurs peuvent installer Gentoo selon leurs préférences, c'est pourquoi Gentoo est appelé une ''meta-distribution''. 

Gentoo est développé activement. La distribution entière se développe à un rythme rapide : les patchs sont rapidement intégrés à l'arbre principal, la documentation est mise à jour quotidiennement, des fonctionnalités sont souvent ajoutées à Portage, et des versions officielles paraissent deux fois par an.

== Installation ==

=== Tout est très instable en utilisant les optimisations '-O9 -ffast-math -fomit-frame-pointer'. Que se passe-t-il ? ===

Ne pas s’embêter avec quoi que ce soit de plus élevé que <code>-O3</code> car cela n'est pas supporté par les versions actuelles de GCC. Des optimisations très agressives font que le compilateur cherche sans fin à simplifier ou rationaliser le code assembleur. 

Avant de signaler un bug, essayer de compiler avec la variable CFLAGS <code>-O2 -march=<system-arch></code> .

=== Comment changer le mot de passe de root (ou n'importe quel autre utilisateur) ? ===

Utiliser la commande {{c|passwd}} pour modifier le mot de passe de l'utilisateur connecté. L'utilisateur root peut changer le mot de passe d'un utilisateur avec la commande {{c|passwd username}}. Pour des options supplémentaires voir la page de manuel de {{c|passwd}}, {{c|man passwd}}.

=== Comment ajouter un utilisateur ordinaire ? ===

La commande {{c|useradd larry}} ajoute un utilisateur nommé « larry ». Mais cela ne lui donne pas beaucoup des droits nécessaires à une utilisation courante, la commande suivante est préférée :

{{RootCmd|useradd -m -G users,audio,wheel larry}}

Cela crée l'utilisateur « larry ». L'option <code>-G</code> ajoute cet utilisateur à plusieurs groupes :
* <code>users</code>, le groupe standard des utilisateurs actifs
* <code>audio</code> permet d'accéder aux périphériques son
* <code>wheel</code> permet d'utiliser la commande {{c|su}} pour accéder aux privilèges de root (si son mot de passe est connu)

=== Pourquoi un utilisateur ne peut pas accéder à su comme root ? ===

Les utilisateurs ne peuvent utiliser {{c|su}} comme root que s'ils appartiennent au groupe wheel, pour des raisons de sécurité. Pour ajouter un utilisateur au groupe wheel, faire la commande suivante : 

{{RootCmd|gpasswd -a <username> wheel}}

=== Puis-je mettre Gentoo à jour d'une version à l'autre sans réinstallation ? ===

Il n'y a pas de différence entre les versions après leur installation. À partir de la version 1.4, Gentoo est basé sur la librairie <code>glibc-2.3.x</code>. À partir de cette version la commande {{c|emerge --sync && emerge -uDN @world}} met à jour le système entier vers la version de Gentoo la plus récente. La différence entre versions réside dans les médias d'installation et leurs paquets pré-compilés. Voir le [[Upgrading Gentoo/fr|guide de mise à jour]] pour plus d'informations sur les profils et leur rôle lors des mises à jour. 

Noter que la commande {{c|emerge -uDN @world}} met à jour les paquets installés et leurs dépendances, mais pas les dépendances de compilation – les paquets nécessaires lors de la compilation et non lors de l'utilisation des logiciels. Pour mettre également ces paquets à jour, ajouter l'option <code>--with-bdeps=y</code>.

=== Mon noyau ne démarre pas, que faire ? ===

Il n'est pas obligatoire de refaire toutes les étapes de l'installation, mais il est nécessaire d'examiner le noyau et les étapes de son installation. Supposons que Gentoo est installé sur {{Path|/dev/sda1}} ({{Path|/boot}}) et {{Path|/dev/sda3}} ({{Path|/}}), {{Path|/dev/sda2}} étant la partition de swap.

Démarrer depuis le CD d'installation et attendre l'invite de commandes.

D'abord, monter ({{c|mount}}) toutes les partitions :

{{RootCmd|mount /dev/sda3 /mnt/gentoo
|mount /dev/sda1 /mnt/gentoo/boot
|swapon /dev/sda2
|mount -t proc proc /mnt/gentoo/proc}}

Puis, chrooter ({{c|chroot}}) dans l’environnement Gentoo et lancer la configuration du noyau :

{{RootCmd|chroot /mnt/gentoo /bin/bash
|env-update && source /etc/profile
|cd /usr/src/linux
|make menuconfig}}

Refaire le paramétrage en corrigeant les erreurs (éléments sélectionnés, ou non, à tort), quitter puis compiler le noyau :

{{RootCmd|make && make modules_install}}

Copier le fichier {{Path|bzImage}} en écrasant le précédent :

{{RootCmd|cp arch/i386/boot/bzImage /boot/<kernel_name>}}

Si le gestionnaire d'amorçage est LILO, relancer {{c|lilo}} – les utilisateurs de GRUB doivent sauter cette étape :

{{RootCmd|/sbin/lilo}}

Quitter l'environnement chrooté, démonter les partitions et relancer le système :

{{RootCmd|exit
|umount /mnt/gentoo/proc /mnt/gentoo/boot /mnt/gentoo
|reboot}}

Si le problème vient de la configuration du gestionnaire d'amorçage, suivre les mêmes étapes mais, au lieu de reconfigurer puis recompiler le noyau, reconfigurer le gestionnaire d'amorçage (sa recompilation n'est habituellement pas nécessaire).

=== Mon proxy demande une authentification, que faire ? ===

Pour que Portage utilise automatiquement un proxy, le définir dans {{Path|/etc/portage/make.conf}} : 

{{FileBox|filename=/etc/portage/make.conf|title=Configurer un proxy|1=
http_proxy="http://username:password@yourproxybox.org:portnumber"
ftp_proxy="ftp://username:password@yourproxybox.org:portnumber"
RSYNC_PROXY="rsync://username:password@yourproxybox.server:portnumber"
}}

Garder à l'esprtie que le proxy doit accepter la méthode <code>CONNECT</code> pour le(s) port(s) rsync.

=== Comment graver un fichier ISO ? ===

Les fichiers ISO doivent être gravés en mode ''raw'', ce qui implique qu'ils ne doivent pas être simplement placés sur le CD, mais que celui-ci doit être un volume montable. 

Il y a beaucoup de logiciels de gravure de CDs, les décrire tous serait un travail de Titan. Voici la description de certains d'entre-eux : 

* Dans EasyCD Creator choisir {{Path|Fichier}}, {{Path|Enregistrer un CD depuis une image CD}}. Puis changer le {{Path|Type de fichier}} en {{Path|ISO image file}}. Puis localiser le fichier ISO à graver et choisir {{Path|Ouvrir}}. Après un clic sur {{Path|Commencer l'enregistrement}} l'image ISO sera gravée sur le CD ou DVD. <small>La traduction des menus est approximative, le traducteur ne disposant pas d'EasyCD Creator.</small>

* Avec Nero Burning ROM, annuler le guide qui apparaît automatiquement et choisir {{Path|Graver une image}} dans le menu {{Path|Fichier}}. Choisir l'image à graver et cliquer {{Path|Ouvrir}}. Puis cliquer le bouton {{Path|Graver}}… et observer la gravure en cours du CD Gentoo.

* En ligne de commande avec {{c|cdrecord}}, saisir {{c|cdrecord dev{{=}}/dev/cdrom}} (remplacer {{Path|/dev/cdrom}} par le chemin du lecteur de CD/DVD), le tout suivi du chemin du fichier ISO.

* Avec K3B, choisir {{Path|Outils}} → {{Path|CD}} → {{Path|Graver une image CD}}. Puis choisir le fichier ISO dans le dialogue « Image à graver ». Cliquer {{Path|Commencer}} pour commencer la gravure.

* Sous Mac OS X Panther, lancer l'utilitaire de disque depuis {{Path|/Applications/Utilities}}, choisir {{Path|Ouvrir}} dans le menu {{Path|Images}}, puis l'image disque montée la fenêtre principale, puis {{Path|Graver}} dans le menu {{Path|Images}}.

* Sous Mac OS X Jaguar, lancer <code>Disk Copy</code> depuis {{Path|/Applications/Utilities}}, choisir {{Path|Graver l'image}} dans le menu {{Path|Fichier}}, puis l'image ISO, puis cliquer le bouton {{Path|Graver}}.

=== Quel CD/Stage choisir ? ===

D'abord, il faut déterminer le processeur utilisé par la machine sur laquelle Gentoo sera installé (un Pentium-M par exemple). Puis, déterminer quelle architecture correspond (amd64, ppc, x86, etc.) et prendre le CD de Gentoo ou l'archive [[Stage tarball|stages]] adapté. Voir le site web du fabriquant du processeur pour ces informations, mais la consultation d'un moteur de recherche est souvent plus efficace.

Dans le doute, choisir un fichier CD ou Stage « plus bas », par exemple i686 ou même un x86 générique (ou l'équivalent dans une autre architecture). Le système sera sûrement fonctionnel mais peut être pas aussi rapide car moins optimisé. 

Beaucoup d'autres options existent que celles pour lesquelles Gentoo fournit des binaires d'installation. Voir le [http://gcc.gnu.org/onlinedocs/gcc-4.7.3/gcc/i386-and-x86_002d64-Options.html#i386-and-x86_002d64- Guide des options GCC] (en anglais) pour déterminer la valeur de la variable <code>-march</code>.

=== Internet ne marche pas après redémarrage. Qu'est-ce qui ne va pas ? ===

Vérifier d'abord que la carte réseau est correctement trouvée par le noyau. Lancer {{c|ifconfig -a}} pour voir les interfaces réseau. Quelque chose comme eth0, eno1, enp2s0, enp0s8, wlan0 (dans le cas de certaines cartes wifi) devrait figurer. Des modules spécifiques du noyau peuvent être requis pour qu'il détecte la carte réseau. Si c'est le cas, s'assurer qu'ils figurent dans le fichier {{Path|/etc/conf.d/modules}}.

Si le support de la carte réseau n'a pas été configuré dans le noyau, celui-ci devra être reconfiguré et, dans certains cas, recompilé. 

Si la carte réseau ''est trouvée'' par le noyau, et que le réseau a été configuré en DHCP, un client DHCP n'a peut être pas été installé. Beaucoup de ceux-ci existent dans Gentoo, {{c|dhcpcd}} étant souvent utilisé. S'il est besoin de retrouver une connexion à internet, redémarrer sur le CD d'installation et faire {{c|emerge -a dhcpcd}}.

Des informations sur la restauration du système depuis le CD d'installation figurent [[#Mon_noyau_ne_démarre_pas,_que_faire_?|ici]].

=== Puis-je faire cohabiter Windows ou d'autres systèmes d'exploitation avec Gentoo ? ===

Oui ! Le moyen le plus rapide est d'installer GRUB2 avec l'outil {{Package|sys-boot/os-prober}}. Lire la documentation à ce propos dans [[GRUB2/fr|l'article sur GRUB2]] et plus spécialement le passage sur le dual-boot avec GRUB2 [[GRUB2#Additional_software/fr|ici]].

=== Quand j'essaye de démarrer Windows depuis GRUB Legacy ou LILO je n'ai qu'un écran noir. Que faire ? ===

C'est un problème connu qui se rencontre seulement quand de vieux systèmes d’amorçage comme [[GRUB Legacy]] et [[LILO]] sont utilisés. Windows refuse de démarrer s'il n'est pas installé sur le premier disque dur et affiche une écran noir/blanc. Pour gérer ce problème, il est nécessaire de faire croire à Windows qu'il est installé sur le premier disque dur avec une petite astuce dans la configuration du système d'amorçage. Noter que dans l'exemple ci-dessous, Gentoo est installé sur {{Path|/dev/sda}} (premier disque) et Windows sur {{Path|/dev/sdb}} (second disque). Ajuster la configuration si besoin :

{{FileBox|filename=/boot/grub/grub.conf|title=Exemple de configuration pour un dual-boot avec Windows dans grub.conf|1=
title Windows XP
     map (hd1) (hd0)
     map (hd0) (hd1)
     rootnoverify (hd1,0)
     chainloader +1
}}

{{Note|L'exemple ci-dessus est pour le système d'amorçage [[GRUB|GRUB Legacy]], et non GRUB2. Pour plus d'informations sur comment dual-boot avec Windows sous GRUB2 voir cet [[GRUB2|article]].}}

{{FileBox|filename=/etc/lilo.conf|title=Exemple de configuration pour un dual-boot avec Windows dans lilo.conf|1=
other=/dev/sdb1
     label=WindowsXP
     table=/dev/sdb
     map-drive = 0x80
     to = 0x81
     map-drive = 0x81
     to = 0x80
}}

Cela va faire croire à Windows qu'il est installé sur le premier disque dur et il démarrera sans problèmes. Plus d'information peut être trouvé sur la [https://www.gnu.org/software/grub/ documentation GRUB] officielle et dans {{c|man lilo.conf}}.

=== Comment installer Gentoo en utilisant une archive stage1 ou stage2 ? ===

Le Manuel Gentoo décrit seulement une installation de Gentoo utilisant une [[Stage tarball#Stage 3|archive de stage3]]. Cependant, Gentoo propose toujours des archives de stage1 et stage2. Ces dernières sont utilisées par les développeurs et ne devraient pas être utilisées par les utilisateurs : une archive de stage3 peut très bien être utilisées pour amorcer (bootstrap) le système. Une connexion internet est requise. 

''Bootstrapping'' signifie construire la chaîne de compilation (la librairie C et le compilateur) pour le  système à partir de laquelle tous les paquets importants du systèmes sont installés. Pour ''bootstrap'' le système, effectuer une installation à partir de stage3. Avant de commencer le chapitre sur ''Configurer le Noyau'', il peut être nécessaire de modifier le script {{Path|bootstrap.sh}} pour satisfaire des besoins personnels.

{{RootCmd|cd /usr/portage/scripts
|vi bootstrap.sh}}

Après modifications, exécuter le script.

{{RootCmd|./bootstrap.sh}}

Ensuite, recompiler tous les paquets importants du système avec la nouvelle chaîne de compilation. Il est nécessaire de les recompiler car l'archive de stage3 les contient déjà : 

{{RootCmd|emerge -e system}}

Maintenant, continuer avec ''Configurer le noyau''

== Gestion des paquets ==

=== Sous quels formats sont stockés les paquets ? ===

Packages are not "stored" per se. Instead, Gentoo provides a set of scripts which can resolve dependencies, fetch source code, and compile a version of the package tailored to the user's needs. Generally Gentoo only builds binaries for releases and snapshots. The [https://devmanual.gentoo.org/ebuild-writing/index.html Gentoo Developer Manual] covers the contents of an ebuild script in detail. 

For full ISO releases, a full suite of binary packages will be created using an enhanced {{Path|.tbz2}} format, which is {{Path|.tar.bz2}} compatible with meta-information attached to the end of the file. These can be used to install a working (though not fully optimized) version of the package quickly and efficiently.

It is possible to create RPMs (Red Hat package manager files) using Gentoo's Portage, but it is not currently possible to use existing RPMs to install packages.

=== I want to perform the ./configure step myself. Can I? ===

Yes, but it is not trivial, nor is it recommended. Since the method to do this requires a good understanding of Portage internals and commands, it is instead recommended that the ebuild is patched to do whatever it is that the user wants and place it in a Portage overlay (that is why overlays exist). This is ''much'' better for maintainability, and usually easier. See the [https://devmanual.gentoo.org/ebuild-writing/index.html Gentoo Developer Manual] for more information.

=== What if rsync does not work for me? ===

When behind a firewall that does not permit rsync traffic through port 873, the {{c|emerge-webrsync}} command can be used to fetch and install a Portage snapshot through regular HTTP. See [[#My proxy requires authentication, what do I have to do?|this section]] for information on downloading source files and Portage snapshots via a proxy.

=== I have a slow (or no) Internet connection at home. Can I download sources somewhere else and add them to my system? ===

Definitely. Run {{c|emerge --pretend package/atom}} to see what programs are going to be installed. To find out the sources for those packages and where to download the sources from, run {{c|emerge -fp package/atom}}. Download sources and bring them on any media home. Put the sources into the {{Path|/usr/portage/distfiles/}} folder and then simply run {{c|emerge package/atom}}. Be warned: this can be a ''very'' tedious process.

=== Source tarballs are collecting in /usr/portage/distfiles/. Is it safe to delete these files? ===

Deleting these files will have no negative impact on day-to-day performance. However, it might be wise to keep the most recent version of the files; often several ebuilds will be released for the same version of a specific piece of software. If the archive is deleted and the software is upgraded or rebuilt it will be necessary to download them from the Internet again. 

Use the {{c|[[eclean]]}} script from {{Package|app-portage/gentoolkit}} to manage the contents of {{Path|/usr/portage/distfiles/}} and a few other locations. Please read {{c|man eclean}} to learn more about its usage, as well as the [[Gentoolkit|Gentoolkit article]].

=== What is in /var/tmp/portage? Is it safe to delete the files and directories in /var/tmp/portage? ===

During compilation, Gentoo saves the sources of the package in {{Path|/var/tmp/portage}}. These files and folder are usually deleted upon a successful merge, but this sometimes fails. It is safe to clean out all contents of this directory ''if'' the {{c|emerge}} command is not running. Be sure to always {{c|pgrep emerge}} before cleaning out this directory.

== Usage ==

=== How do I set up an International Keyboard Layout? ===

Edit the <code>keymap</code> variable in {{Path|/etc/conf.d/keymaps}}. To have console working correctly with extended characters in the keymap, it might be necessary to set up the variables <code>consolefont</code> and <code>consoletransation</code> in the {{Path|/etc/conf.d/consolefont}} file (for further information on localizing the environment, refer to the [[Localization/Guide|localization guide]]). Then, issue a {{c|reboot}}, or restart the {{Path|keymaps}} and {{Path|consolefont}} scripts: 

{{RootCmd|/etc/init.d/keymaps restart
|/etc/init.d/consolefont restart}}

=== DNS name resolution works for root only ===

{{Path|/etc/resolv.conf}} has the wrong permissions; {{c|chmod}} it as follows: 

{{RootCmd|chmod 0644 /etc/resolv.conf}}

=== Why can't my user use their own crontab? ===

Add that user to the cron group:

{{RootCmd|gpasswd -a <username> cron}}

=== How do I get numlock to start on boot? ===

The following command will add the numlock service to the default runlevel, enabling numlock at boot:

{{RootCmd|rc-update add numlock default
|/etc/init.d/numlock start}}

Each GUI provides different tools for this sort of thing; please check the help section or online manuals for the GUI of choice for further assistance.

=== How do I have my terminal cleared when I log out? ===

To have the terminal cleared, add the {{c|clear}} command to the user's {{Path|~/.bash_logout}} script: 

{{Cmd|echo clear >> ~/.bash_logout}}

To have this happen automatically when adding a new user, do the same for the {{Path|/etc/skel/.bash_logout}} file: 

{{RootCmd|echo clear >> /etc/skel/.bash_logout}}

== Maintenance ==

=== ReiserFS and filesystem corruption issues - how to fix them, etc ===

If the ReiserFS partition is corrupt, try booting the Gentoo Install CD and run {{c|reiserfsck --rebuild-tree}} on the corrupted filesystem. This should make the filesystem consistent again, although there may be some lost files or directories due to the corruption. 

== Development ==

=== Where can I report bugs? ===

Use the [https://bugs.gentoo.org Bugzilla] site to report bugs. Visit {{IRC|gentoo}} on the Freenode IRC network and ask around if it is unclear whether an issue is really a bug or not.

=== How often are new releases made? ===

Gentoo's packages are usually updated shortly after the upstream authors release new code. As for when Gentoo itself makes new stage/profile/ISO releases, check the [[Project:RelEng|Release Engineering Project]] page. New releases are announced on the [https://www.gentoo.org/get-involved/mailing-lists/ gentoo-announce] mailing list. See [[#Can I upgrade Gentoo from one release to another without reinstalling?|this section]] for more information.

=== My speaker beeps like crazy. How do I disable console beeps? ===

Console beeps can be turned off using {{c|setterm}}, like this: 

{{RootCmd|setterm -blength 0}}

To turn off the console beeps on boot, put the following command in the {{Path|/etc/conf.d/local.start}} file. However, this only disables beeps for the current terminal. To disable beeps for other terminals, pipe the command output to the target terminal, like this: 

{{RootCmd|setterm -blength 0 > /dev/vc/1}}

Replace {{Path|/dev/vc/1}} with the terminal for which console beeps need to be disabled.

== Resources ==

=== Where can I find more information about Gentoo Linux? ===

Much of the official Gentoo documentation can be found here on the Wiki.

=== Can I buy a CD of Gentoo Linux? ===

Users who are not able to download and burn installation CDs personally might find one through one of our licensed stores. However, most stores have dropped offering CDs and DVDs as these installation media quickly become obsolete. 

The licensed stores are listed on the [https://www.gentoo.org/inside-gentoo/stores/ stores page].

=== This FAQ has not answered my question. What do I do now? ===

A good first step is to browse through the relevant [https://www.gentoo.org/support/documentation/ documentation], failing that, the various Gentoo Linux mailing lists listed [https://www.gentoo.org/get-involved/mailing-lists/ here]. If all else fails, or to just hang out with Gentoo folks, visit us on the {{IRC|gentoo}} Freenode IRC channel.

[[Category:Core system]] {{Migrated|originalauthors=Daniel Robbins, Colin Morey, John P. Davis, Eric Stockbridge, Stoyan Zhekov, Carl Anderson, Jorge Paulo, Benny Chuang, Jonathan Smith, nightmorph}}
