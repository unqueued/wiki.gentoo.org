{{Stub}}
This is a reference card of useful commands for administrating Gentoo.

== Portage Package Management ==
Sync the Portage tree using the mirrors by fetching the latest differences:
{{RootCmd|emerge --sync}}

Sync the Portage tree using the mirrors by obtaining a Portage snapshot that is at most a day old:
{{RootCmd|emerge-webrsync}}

Sync the overlay and Portage tree using [[eix]]:
{{RootCmd|eix-sync}}

List what packages would be installed without installing them:
{{RootCmd|emerge -pv cat/pkg}}

Install a specific version of a package:
{{RootCmd|emerge {{=}}cat/pkg-1.0}}

Remove a package and the dependencies that no other packages depend on:
{{RootCmd|emerge -cav cat/pkg}}

Remove a package but not its dependencies:
{{RootCmd|emerge -C cat/pkg}}

Check for and rebuild missing libraries
{{RootCmd|revdep-rebuild -v}}

Remove no longer needed packages:
{{RootCmd|emerge -av --depclean}}

Upgrade the selected packages, dependencies and deep dependencies that are outdated or have USE flag changes:
{{RootCmd|emerge -uDN world}}

[[equery]] is a collection of modules for querying the state of Gentoo packages, files and USE flags.
{{RootCmd|man equery}}

Tell which installed package provides a command.
{{Cmd|equery b `which vim`}}

Tell which packages depend on cat/pkg:
{{Cmd|equery d cat/pkg}}

Get information about a package using [[eix]]:
{{RootCmd|eix cat/pkg}}

A graphical user interface to use with the Portage tree:
{{RootCmd|porthole}}

Manage configuration changes after an emerge completes:
{{RootCmd|dispatch-conf}}

==== After installations / updates ====

Rebuilds packages that depend on an recently updated library:
{{RootCmd|revdep-rebuild}}

After updating [[Perl]]-core packages:
{{RootCmd|perl-cleaner --all}}

After updating [[python]] core packages:
{{RootCmd|python-updater}}

==== genlop ====
[[genlop]] is a portage log processor, also estimating build times when emerging packages.
{{RootCmd|man genlop}}

To view last 10 merges, run
{{RootCmd|genlop -l {{!}} tail -n 10}}

To view how long merging openoffice took
{{RootCmd|genlop -t openoffice}}

To estimate how much 'emerge -uU world' will take
{{RootCmd|emerge -pU world {{!}} genlop --pretend}}

Have a console watching the latest merging ebuild during upgrade
{{RootCmd|watch genlop -unc}}

=== USE flags ===
Obtain descriptions and usage of the USE flag X:
{{Cmd|euse -i X}}

Obtain a description of the png USE flag:
{{Cmd|euse -i {{!}} grep png}}

Show what packages have mysql use flag option:
{{Cmd|equery hasuse mysql}}

Show what use flags are available for a specific package:
{{Cmd|equery uses <package-name>}}

Quickly add a required USE flag for a package install
{{RootCmd|echo 'dev-util/cmake -qt4' >> /etc/portage/package.use}}

=== Typical Administration ===
Obtain root shell (if the current user is listed in the sudoers list):
{{Cmd|sudo -s}}

Start the ssh daemon in the default runlevel at boot:
{{RootCmd|rc-update add sshd default}}

Start the xdm service now:
{{RootCmd|rc-service xdm start}}

Check if the sshd service is running or not:
{{RootCmd|rc-status sshd}}

=== Important Files ===
* {{Path|/etc/portage/make.conf}}: Global settings (USE flags, compiler options)
* {{Path|/etc/portage/package.use}}: USE flags of individual packages
* {{Path|/etc/portage/package.accept_keywords}}: Keyword individual packages; e.g. ~amd64, ~x86, or ∼arm
* {{Path|/etc/portage/package.license}}: Accepted licenses
* {{Path|/var/lib/portage/world}}: List of explicitly installed package atoms
* {{Path|/var/db/pkg}}: Contains for every installed package a set of files about the installation

=== From GMN ===
Search packages in Portage by regular expressions:
{{RootCmd|emerge -s "%^python$"}}

Overlays vary from very small to big enough in size. As a result they slow down the majority of Portage operations. That happens because overlays do not contain metadata cache. The cache is used to speed up searches and the building of dependency trees. A neat trick is to generate local metadata cache after syncing overlays.
{{RootCmd|emerge --regen}}
This trick also works in conjunction with eix. eix-update can use metadata cache generated by emerge –-regen to speed up things. To enable this, add the following variable.
{{File|/etc/eixrc||<pre>
OVERLAY_CACHE_METHOD="assign"
</pre>}}

Use qcheck to verify installed packages:
{{RootCmd|qcheck -e vim-core}}

== External resources ==
* [https://github.com/jonasstein/gentoo-cheat Original gentoo-cheat repository]
* [http://forums.gentoo.org/viewtopic-p-7370146.html Forum post about gentoo-cheat]
* [http://forums.gentoo.org/viewtopic-t-529919.html Collection of gentoo tips]

[[Category:Core system]]
[[Category:Portage]]
