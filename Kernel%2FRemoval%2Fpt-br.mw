<languages />

{{Metadata|abstract=Este artigo descreve a remoção de kernels antigos.}}

Este artigo descreve a remoção de [[kernel]]s antigo.

== Removendo kernel sources ==

Depois que um novo kernel é instalado e se ele funciona de forma satisfatória, o kernel antigo pode ser removido. Para remover as sources antigas do kernel, a opção "--depclean" do emerge (forma abreviada "-c") pode também ser usada para remover todas as versões antigas ou não utilizadas de um pacote, e.g. {{Package|sys-kernel/gentoo-sources}}.

{{Emerge|params+=--depclean|gentoo-sources}}

Verifique se não está removendo as sources do kernel em execução no momento (Ver [[Kernel/Upgrade|kernel upgrade]] Artigo sobre como atualizar o kernel.)

=== Protegendo sources do kernel ===

Se as sources do kernel mais recentes tiverem sido mescladas e você executar "--depclean" antes de mudar para as sources mais recentes, as sources atuais serão removidas. Mas se você quiser ficar com as sources atuais, essa remoção não será desejada, porque você pode precisar das sources e.g. Para atualização de módulos externos do kernel. Portanto, é uma boa prática adicionar a versão específica do kernel ao seu @world para protegê-lo das operações "--depclean".

{{Emerge|params+=--noreplace|gentoo-sources:3.3.8}}

Observe a notação de slot, usando dois pontos em vez de um traço. Cada versão do kernel será seu próprio slot.

== Remover sobras do kernel ==

=== Usando eclean-kernel ===

{{Package|app-admin/eclean-kernel}} É uma ferramenta simples para limpeza/remoção do kernel antigo. Ele remove tanto os arquivos do kernel construídos como os diretórios de compilação se eles não forem mais referência por nenhum kernel preservado.

Por exemplo, para manter três kernels mais recentes:

{{RootCmd|eclean-kernel -n 3}}

=== Manual removal ===

Portage however only removes the files it installed - the files generated during the kernel build and installation remain. They can be safely removed.

* When a kernel is built in the source directory, files generated during the build process remain, and are not removed by Portage:

: {{RootCmd|rm -r /usr/src/linux-3.X.Y}}

* During kernel setup, the kernel modules are copied to a sub directory of {{Path|/lib/modules/}}:

: {{RootCmd|rm -r /lib/modules/3.X.Y}}

* The old files in {{Path|/boot}} can also be removed:

: {{RootCmd|rm /boot/vmlinuz-3.X.Y|rm /boot/System.map-3.X.Y|rm /boot/config-3.X.Y}}

* Lastly, remove all leftover entries from your bootloader's config file.

[[Category:Kernel]]
