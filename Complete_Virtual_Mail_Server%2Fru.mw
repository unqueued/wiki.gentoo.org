<languages/>
{{InfoBox stack
|{{InfoBox todo|[[Complete Virtual Mail Server/ToDo|ToDo subpage]]|header=true}}
}}

The purpose of this guide is to establish a virtual mail system that can handle multiple domains with a variety of different interface options. This is not intended to be used by the average user who is looking for a mail client, this is a full-scale Mail Transfer Agent (MTA) intended for individuals who are hosting their own domains and/or need to provide support for virtual domains.

By the end of this guide, an easy method to manage a mail server that supports the following features has passed the revue:

* Web based system administration
* Unlimited number of domains
* Virtual mail users without the need for shell accounts
* Domain (specific) user names
* Mailbox quotas
* Web access to email accounts
* IMAP and (very optional)POP3 support
* SMTP Authentication for secure relaying
* SSL for transport layer security
* Strong SPAM filtering
* Anti-Virus filtering
* Log Analysis

The real plus is that all of this is managed by a single database.

== Начнем ==

=== [[Complete_Virtual_Mail_Server/System_Setup_and_Packages/ru|Настройка системы и пакетов]] ===

В этом разделе описана настройка системы (реализация мульти-сервер), а также базовые пакеты, которые мы использовали. ОБЯЗАТЕЛЬНО прочитайте это, прежде чем читать дальше (не волнуйтесь, это коротко).

== Базовая настройка ==

=== [[Complete_Virtual_Mail_Server/Linux_vmail_user/ru|Учетная запись linux 'vmail' ]] ===

Почтовые ящики хранятся в обычном файловой системе и поэтому для них требуется специальный пользователь и группа для безопасности.

=== [[Complete_Virtual_Mail_Server/Admin_Support_Systems/ru|Поддержка систем администрирования]] ===

{{Package|www-apps/postfixadmin}} and {{Package|www-servers/apache}} were key tools in getting through testing and getting this to hang together. While the details of an Apache/PHP setup are not here, there is good information in here all the same.

=== [[Complete_Virtual_Mail_Server/Postfix_to_Database/ru|Подключение Postfix к базе данных]] ===

{{Package|mail-mta/postfix}} will be coupled to a database backend allowing virtual users on multiple domains.

=== [[Complete_Virtual_Mail_Server/Courier-IMAP_to_Database|Linking Courier-imap to database backend]] ===

{{Package|net-mail/courier-imap}} будет подключен к той же базе данных.

== Расширенная настройка ==

=== [[Complete_Virtual_Mail_Server/SMTP_Authentication/ru|SMTP аутентификация]] ===

Having a mailserver that relays local mail is good enough for most, being able to relay mail after authentication is extremely handy. 

=== [[Complete_Virtual_Mail_Server/Web_Access/ru|Веб доступ]] ===

Now that a basic mailserver has been setup, web access can be both useful and helpful during testing.

=== [[Complete_Virtual_Mail_Server/SSL_Certificates/ru|SSL сертификат]] ===

Securing the mail server with SSL certificates.

=== [[Postfix/DKIM|DKIM]] ===

Signing all outgoing messages with verification keys to prevent ending up in the junk box.

=== [[Complete_Virtual_Mail_Server/Postfix_additions/ru|Уточнение настройки]] ===

Using default Postfix configuration options, the server gets some performance tweaks and security settings.

== Anti-Spam Measures ==

=== [[Complete_Virtual_Mail_Server/amvisd_spamassassin_clamav/ru|Amavisd, Spam-Assassin и ClamAV]] ===

Defending against spam using Amavis, Spam-assassin and ClamAV for virus protection.

== Log Analyzer ==

=== [[Complete_Virtual_Mail_Server/awstats|Журналирование почтового трафика с помощью AWStats]] ===

Always important is monitoring. To do so AWStats is used to get a useful overview of passed messages.

[[Category:Mail Servers]]
