Currently editing the page



== Goal ==

The goal of these instructions is to have a running installation of Gentoo on a Cubox-i, with a kernel up-to-date enough to run on current btrfs root filesystem.

== Prerequisite ==

* Cubox-i
** if you want to configure over a serial console you need a CuBox-i2ultra or a CuBox-i4pro
** otherwise you need an hdmi display and and usb keyboard
* another (Linux) computer with a cross compiler for arm installed
* git
* tftp server
* [http://imx.solid-run.com/wiki/index.php?title=Beginner%27s_guide#Mini-Installer_Image mini-image]
* sd-card (with enough space, boot partition, rootfs with a git kernel and gentoo, 4GB+)
* network cable for an internet connection

== Installation ==

The install consists of partitioning and formatting, the sd-card. Copying over a stage3 tarball, configuring it so that it can boot and it can be accessed. Creating a kernel. Booting the kernel on the machine. Installing the kernel for an automatic boot. Continue a default Gentoo installation.

=== Setup Custom u-Boot ===

<TODO>
u-Boot can be compiled from source as well. Nevertheless we start with a precompiled  here, so this step can be skipped.

=== Setup serial console ===

If the model is a CuBox-i2ultra or a CuBox-i4pro it can be connected direclty with your other computer. If not you need to attach it to an hdmi display and connect a usb keyboard.


=== Preparing SD Card ===

To start we flash the mini-image on the sd-card. This way there is already u-boot properly installed and we can test if the serial connection (or connected keyboard and display) is working.

If the first test worked okay you can partition and format the card. As in the goal described in a two partition scheme will be used.
* /dev/mmcblk0p0 will be ext2 with 100MB (boot)
* /dev/mmcblk0p1 will be btrfs with the rest of the capacity (root)

/dev/mmcblk0 can be different in your computer probably /dev/sdX

=== Kernel ===

=== Bootloader / U-Boot ===

=== Continue Gentoo install ===

== Premade Image ==

<TODO>

== References ==

* [http://imx.solid-run.com/wiki/index.php?title=Serial_console#Linux SolidRun Wiki serial console]
* [http://imx.solid-run.com/wiki/index.php?title=Common_problems SolidRun Wiki common problems]
* [http://imx.solid-run.com/wiki/index.php?title=Flash_an_image SolidRun Wiki flash image]
* [https://dev.gentoo.org/~armin76/arm/beaglebone/install.xml armin76â€™s (un)official beaglebone howto]
* [http://imx.solid-run.com/wiki/index.php?title=CuBox-i_and_Carrier-One_Resources_Links SolidRun Wiki kernel resources]

== Open Questions ==

* HDMI
