<languages />

{{Metadata|abstract=Esta guía debería ayudar a los usuarios a realizar una correcta localización de su distribución Gentoo Linux en cualquier localización conocida. Se ha utilizado España como caso ejemplo. Incluye la configuración para utilizar el símbolo del Euro.}}

== Zona horaria ==

Para mantener la hora del sistema de forma adecuada a la localización actual, se necesita ajustar la zona horaria. Se pueden encontrar instrucciones para hacerlo en  [[System_time#OpenRC|sistemas basados en OpenRC]] y [[System_time#systemd|sistemas basados en systemd]] dentro del artículo sobre [[System_time|la hora del sistema]].

== Sistema de localizaciones ==

=== ¿Qué son las localizaciones? ===

Una localización es un conjunto de información que muchos programas utilizan para determinar los ajustes específicos de país e idioma. Las localizaciones y sus datos forman parte de la biblioteca del sistema y se encuentran en {{Path|/usr/share/i18n/locales/}} en la mayoría de los sistemas. Una localización, generalmente tiene el nombre de la forma <code>ab_CD</code> donde <code>ab</code> representa las dos (o tres) letras del código del idioma (según la ISO-639) y <code>CD</code> representa las dos letras del código del país (según la ISO-3166). Las variantes como <code>@euro</code> o <code>@latin</code> se suelen agregar a menudo a los nombres de las localizaciones, por ejemplo <code>es_ES@euro</code> o <code>nan_TW@latin</code>. Por favor, explore la  [http://es.wikipedia.org/wiki/Locale Wikipedia] para obtener más información acerca de las localizaciones y otros artículos relacionados.

=== Variables de entorno para localizaciones ===

Las variables que controlan diferentes aspectos de las configuraciones de las localizaciones se muestran abajo. Todas ellas toman un nombre de localización en el formato <code>ab_CD</code> usado arriba. 

{| class="table table-striped" style="text-align: left;" 
|- 
! scope=col width=25% | Variable name
! scope=col width=75% | Explanation
|- 
| <var>LANG</var>
| Defines all locale settings at once, while allowing further individual customization via the LC_* settings below.
|- 
| <var>LC_COLLATE</var>
| Define alphabetical ordering of strings. This affects e.g. output of sorted directory listings.
|- 
| <var>LC_CTYPE</var>
| Define the character-handling properties for the system. This determines which characters are seen as alphabetic, numeric, and so on. This also determines the character set used, if applicable.
|- 
| <var>LC_MESSAGES</var>
| Programs' localizations stored in {{Path|/usr/share/locale/}} for applications that use a message-based localization scheme (the majority of GNU programs; see the next chapters for further information on which programs do, and how to get the programs that don't to work).
|- 
| <var>LC_MONETARY</var>
| Defines currency units and formatting of currency-type numeric values.
|- 
| <var>LC_NUMERIC</var>
| Defines formatting of numeric values which aren't monetary. Affects things such as thousand separator and decimal separator.
|- 
| <var>LC_TIME</var>
| Defines formatting of dates and times.
|- 
| <var>LC_PAPER</var>
| Defines default paper size.
|- 
| <var>LC_ALL</var>
| Overrides all other settings.
|-
|}

{{Note|Algunos programas se escriben de una forma en la que esperan la ordenación tradicional del alfabeto del idioma inglés, pero algunas localizaciones, mayoritariamente la estonia, utiliza una ordenación diferente. Por lo tanto se recomienda definir explicitamente <var>LC_COLLATE</var> a C cuando se trate de ajustes al nivel de todo el sistema.}}

{{Warning|No se recomienda el uso de <var>LC_ALL</var> ya que sobrescribe de forma automática las demás variables <var>LC_*</var> (<var>LANG</var> no se ve afectada). Esto significa que los cambios realizados de otra forma se ocultarán hasta que <var>LC_ALL</var> se defina como cadena vacía. Seguramente la mejor opción es no definirla en un fichero de inicio.}}

La mayoría de los usuarios definirán la variable <var>LANG</var> al nivel global.

=== Generar localizaciones específicas ===

Most users will probably only use one or maybe two locales on their system. How additional locales can be specified is explained in the {{Path|/etc/locale.gen}} file. 

{{Code|Añadir localizaciones a /etc/locale.gen|<pre>
en_GB ISO-8859-1
en_GB.UTF-8 UTF-8
es_ES ISO-8859-1
es_ES@euro ISO-8859-15
</pre>
}}

{{Note|Utilizar un valor <code>@euro</code> de {{Path|/usr/share/i18n/SUPPORTED/}} como localización cuando se utilice el símbolo monetario del Euro (€) en localizaciones que no estén basadas en UTF-8.}}

El siguiente paso es lanzar {{c|locale-gen}} que generará todas las localizaciones especificadas en el archivo {{Path|/etc/locale.gen}} y escribirlas al archivo de localizaciones ({{Path|/usr/lib/locale/locale-archive}}). 

{{RootCmd|locale-gen|output=<pre>
 * Generating 4 locales (this might take a while) with 1 jobs
 *  (1/4) Generating en_GB.ISO-8859-1 ...                       [ ok ]
 *  (2/4) Generating en_GB.UTF-8 ...                            [ ok ]
 *  (3/4) Generating de_DE.ISO-8859-1 ...                       [ ok ]
 *  (4/4) Generating de_DE.ISO-8859-15@euro ...                 [ ok ]
 * Generation complete
</pre>}}

Verificar que las localizaciones seleccionadas están disponibles con la orden {{c|locale -a}}.

{{Cmd|locale -a|output=<pre>
C
POSIX
es_ES
es_ES.iso88591
es_ES.iso885915@euro
es_ES@euro
spanish
en_GB
en_GB.iso88591
en_GB.utf8
german
</pre>}}

Se puede mostar el fichero {{Path|/usr/lib/locale/locale-archive}} usando la orden {{c|localedef}}.

{{Cmd|localedef --list-archive}}

Su contenido en crudo se puede mostrar mediante la orden {{c|strings}}.

{{Cmd|strings /usr/lib/locale/locale-archive {{!}} less}}

=== Configurar una localización ===

==== OpenRC ==== 

Cuando se utiliza OpenRC, los ajustes de la localización se almacenan en variables de entorno. Estas se definen normalmente en el fichero {{Path|/etc/env.d/02locale}} (para ajustes que afectan a todo el sistema) y en el fichero {{Path|~/.bashrc}} (para ajustes específicos del usuario). Se pueden encontrar más detalles en el articulo sobre [[UTF-8/es#Configurar_la_localizaci.C3.B3n|UTF-8]]. Los ajustes para todo el sistema ({{Path|/etc/env.d/02locale}}) se pueden gestionar mediante {{c|eselect locale}}. Por ejemplo, para definir la variable <var>LANG</var> al valor <code>C</code>:

{{RootCmd|eselect locale list|output=<pre>
Available targets for the LANG variable:
[1] C
[2] POSIX
[3] en_ES
[4] en_ES.iso885915
[5] en_ES.utf8
[ ] (free form)
</pre>}}

{{RootCmd|eselect locale set 1}}

Por supuesto también se puede editar el fichero de forma manual para diversificar las variables de localización.

{{FileBox|filename=/etc/env.d/02locale|title=Definir la localización por defecto del sistemaen /etc/env.d/02locale|lang=bash|1=
LANG="es_ES.UTF-8"
LC_COLLATE="C"
}}

También es posible y muy común especialmente en entornos UNIX más tradicionales dejar sin cambiar los ajustes globales, esto es, definiendo la localización global a "<code>C</code>". Los usuarios pueden definir sus localizaciones preferidas en su propio fichero RC del intérprete de comandos. 

{{FileBox|filename=~/.bashrc|title=Definir la localización del usuario|lang=bash|1=
export LANG="es_ES.UTF-8"
export LC_COLLATE="C"
}}

Otra forma de configurar el sistema es dejarlo en una localización C por defecto y habilitar a la vez la representación de caracteres UTF-8. Esto se puede realizar utilizando los siguientes ajustes en {{Path|/etc/env.d/02locale}}: 

{{Code|Usar una localización C tradicional a la vez que se especifica UTF-8|
<pre>
LC_CTYPE=es_ES.UTF-8
</pre> 
}}

Al usar el fragmento de código de arriba, los usuarios puede ver los nombres de los ficheros de localización de forma correcta sin necesidad de forzarlos a utilizar siempre el idioma seleccionado. 

Once the right locale is set up, be sure to update the environment variables to make the system aware of the change.

Para una localización por defecto para todo el sistema:

{{RootCmd|env-update && source /etc/profile}}

Para una localización específica del usuario:

{{Cmd|source ~/.bashrc}}

Después de esto, se debe reiniciar el servidor X pulsando {{Key|Ctrl}} + {{Key|Alt}} + {{Key|Retroceso}}, salir y volver a entrar con el mismo usuario. 

Ahora, verifique que los cambios han surtido efecto: 

{{Cmd|locale}}

==== systemd ====

With systemd set the locale with the {{c|localectl}} command. Check the list of available locales with:

{{RootCmd|localectl list-locales}}

A continuación defina la localización deseada:

{{RootCmd|<nowiki>localectl set-locale
LANG=es_ES.utf8</nowiki>}}

Para terminar, compruebe si el resultado es correcto:

{{RootCmd|<nowiki>localectl | grep "System Locale"
</nowiki>|output=<pre>
  System Locale: LANG=es_ES.utf8
</pre>}}

== Distribución del teclado para la consola ==

=== OpenRC ===

The keyboard layout used by the console is set in {{Path|/etc/conf.d/keymaps}} by the <var>keymap</var> variable. Valid values can be found in {{Path|/usr/share/keymaps/YOUR_ARCH/}}. {{Path|i386}} has further subdivisions into layout ({{Path|qwerty/}}, {{Path|azerty/}}, etc.). Some languages have multiple options - experiment with the various options to decide which one fits the needs best. 

{{FileBox|filename=/etc/conf.d/keymaps|title=Definir el mapa de teclado de la consola|lang=bash|1=
keymap="es"
#keymap="es-cp850"
}}

=== systemd ===

With systemd the keymap layout used for the console can be set using the {{c|localectl}} command. First check the available keymap layouts:

{{RootCmd|localectl list-keymaps}}

Then set the requested console keymap layout:

{{RootCmd|localectl set-keymap es}}

Para terminar, compruebe si el mapa de teclado de la consola se definió correctamente:

{{RootCmd|<nowiki>localectl | grep "VC Keymap"</nowiki>|output=<pre>
     VC Keymap: es
</pre>}}

== Mapa de teclado para el servidor X ==

=== OpenRC ===

The keyboard layout to be used by the X server is specified in {{Path|/etc/X11/xorg.conf.d/30-keyboard.conf}} by the <var>XkbLayout</var> option. For details visit the [[Xorg/Guide#Configuring_the_keyboard|Xorg guide]] and the article about [[Keyboard_layout_switching#X11|Keyboard layout switching]].

=== systemd ===

En systemd el mapa de teclado para el servidor X11 se puede definir mediante la orden {{c|localectl}}. En primer lugar compruebe los mapas de teclado disponibles:

{{RootCmd|localectl list-x11-keymap-layouts}}

Then set the requested X11 keymap layout:

{{RootCmd|localectl set-x11-keymap es}}

Para terminar, compruebe si el mapa de teclado para X11 se definió correctamente:

{{RootCmd|<nowiki>localectl | grep "X11 Layout"</nowiki>|output=<pre>
    X11 Layout: es
</pre>}}

== NLS ==

For message based localization to work in programs that support it and have the [https://packages.gentoo.org/useflags/nls <code>nls</code> (Native language support) USE flag], compile the programs with this flag set. Message strings are installed in {{Path|/usr/share/locale/<locale>/LC_MESSAGES/<package>.mo}} files. Most of the programs using nls also need the gettext library to extract and use localized messages. Of course, Portage will automatically install it when needed.

After enabling the <code>nls</code> USE flag some packages might need to be re-emerged:

{{Emerge|params+=--newuse --deep --with-bdeps=y|@world}}

== LINGUAS ==

There is also an additional <var>USE_EXPAND</var> flag called <var>[https://packages.gentoo.org/useflags/linguas_en LINGUAS]</var> <ref>[https://devmanual.gentoo.org/general-concepts/linguas/ LINGUAS] in Gentoo Development Guide</ref>, which affects the localization files that get installed in gettext-based programs, and decides which GUI language packs should be downloaded and installed for some specific software packages, such as [[Firefox]], [[Thunderbird]], [[KDE#Localization|kde-base/kde-l10n]] or [[LibreOffice|app-office/libreoffice-l10n]]. The variable takes in ''space''-separated list of language codes, and a suggested place to set it is {{Path|[[:/etc/portage/make.conf#LINGUAS|/etc/portage/make.conf]]}}: 

{{RootCmd|nano -w /etc/portage/make.conf|output=<pre>
## (Añadir la variable LINGUAS. Por ejemplo para español, alemán e inglés:)
LINGUAS="es de en"
</pre>
}}

Con <code>LINGUAS=""</code> la mayoría de ebuilds deberían instalar únicamente el idioma por defecto del paquete pero ningún fichero <code>LC_MESSAGES</code>. Tampoco deberían instalar ningún otro paquete de idioma. Por ejemplo, la versión estable actual de [[LibreOffice|app-office/libreoffice]] recibe soporte de idioma adicional a través de {{Package|app-office/libreoffice-l10n}} que ofrecer soporte para la descarga e instalación de los paquetes de idioma definidos en <code>LINGUAS</code>. Debido a que el idioma origen de libreoffice es <code>en_US</code>, no aparece la definición para <code>en_US</code> en {{Package|app-office/libreoffice-l10n}}. Por lo tanto con <code>LINGUAS=""</code>, libreoffice aún ofrece soporte para <code>en_US</code>.

To see the status of GUI translation, hyphenation, spell checking and other localizations on the language, please refer to the [https://translations.documentfoundation.org/ LibreOffice translation web site].

For finer grained control the <var>USE_EXPAND</var> variables can be set per package in {{Path|[[:/etc/portage/package.use]]}}: 

{{FileBox|filename=/etc/portage/package.use|lang=bash|1=
www-client/firefox linguas_es linguas_pt_BR linguas_en_GB
}}

A list of installed programs making use of the <var>[https://packages.gentoo.org/useflags/linguas_en LINGUAS]</var> <var>USE_EXPAND</var> flag and their supported languages can be shown as follows:

{{Cmd|eix -I -U linguas}}

Se puede encontrar una lista de valores para <var>LINGUAS</var> en {{Path|/usr/portage/profiles/desc/linguas.desc}}: 

{{Cmd|grep -i spanish /usr/portage/profiles/desc/linguas.desc|output=<pre>
es - Spanish locale
es_AR - Spanish locale for Argentina
es_CL - Spanish locale for Chile
es_CO - Spanish locale for Columbia
es_CR - Spanish locale for Costa Rica
es_ES - Spanish locale for Spain
es_LA - Spanish locale for Latin America
es_MX - Spanish locale for Mexico
es_VE - Spanish locale for Venezuela
</pre> }}

After setting the <var>[https://packages.gentoo.org/useflags/linguas_en LINGUAS]</var> <var>USE_EXPAND</var> flag it may be necessary to re-emerge some packages:

{{Emerge|params+=--newuse --deep --with-bdeps=y|@world}}

== Ver también ==


* [[Handbook:AMD64/Installation/Base/es#Configurar_localizaciones|Configurar localizaciones]] (Manuales de Gentoo)
* [[Evdev#Keyboard_layout|Disposición del teclado]] dentro del artículo sobre Evdev
* [[X resources|Recursos para X]]
* [[Localization/Guide/The_Euro_symbol|El símbolo del euro]] ([http://unicode-table.com/en/20AC/ €]) para la consola y en X

== Recursos externos == 

* [http://www.gnu.org/software/libc/manual/html_node/Locales.html Localizaciones e internacionalización] (gnu.org)

== Referencias ==

{{reflist}}


[[Category:Localization]] {{Migrated|originalauthors=Alexander Holler, Steven Lucy, Benny Chuang, Lars Weiler, Tobias Scherbaum, Flammie Pirinen, nightmorph, klondike}}
