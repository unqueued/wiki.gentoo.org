<languages />

{{Metadata|abstract=Esta guía debería ayudar a los usuarios a realizar una correcta localización de su distribución Gentoo Linux en cualquier área europea. Se ha utilizado España como caso ejemplo. Incluye la configuración para utilizar el símbolo del Euro.}}

== Zona horaria ==

In order to keep the system time properly according to the present location, the timezone needs to be set.  Instructions how to do this for [[System_time#OpenRC|OpenRC based systems]] and [[System_time#systemd|systemd based systems]] can be found in the [[System_time|system time]] article.

== Sistema de localizaciones ==

=== ¿Qué son las localizaciones? ===

A locale is a set of information that most programs use for determining country and language specific settings. The locales and their data are part of the system library and can be found at {{Path|/usr/share/i18n/locales/}} on most systems. A locale name is generally named <code>ab_CD</code> where <code>ab</code> is your two (or three) letter language code (as specified in ISO-639) and <code>CD</code> is your two letter country code (as specified in ISO-3166). Variants are often appended to locale names, e.g. <code>en_GB.UTF-8</code> or <code>de_DE@euro</code>. Please explore [http://en.wikipedia.org/wiki/Locale Wikipedia] to read more about locales and related articles.

=== Variables de entorno para localizaciones ===

Las variables que controlan diferentes aspectos de las configuraciones de las localizaciones se muestran abajo. Todas ellas toman un nombre de localización en el formato <code>ab_CD</code> usado arriba. 

{| class="wikitable" style="text-align: left;" 
|- 
! Variable name
! Explanation
|- 
| LANG
| Defines all locale settings at once, while allowing further individual customization via the LC_* settings below.
|- 
| LC_COLLATE
| Define alphabetical ordering of strings. This affects e.g. output of sorted directory listing.
|- 
| LC_CTYPE
| Define the character handling properties for the system. This determines which characters are seen as part of alphabet, numeric and so on. This also determines the character set used, if applicable.
|- 
| LC_MESSAGES
| Programs' localizations stored in {{Path|/usr/share/locale/}} for applications that use message based localization scheme (majority of Gnu programs, see next chapters for closer information which do, and how to get the programs, that don't, to work).
|- 
| LC_MONETARY
| Defines currency units and formatting of currency type numeric values.
|- 
| LC_NUMERIC
| Defines formatting of numeric values which aren't monetary. Affects things such as thousand separator and decimal separator.
|- 
| LC_TIME
| Defines formatting of dates and times.
|- 
| LC_PAPER
| Defines default paper size.
|- 
| LC_ALL
| A special variable for overriding all other settings.
|-
|}

{{Note/es|Algunos programas se escriben de una forma en la que esperan la ordenación tradicional del alfabeto del idioma inglés, pero algunas localizaciones, mayoritariamente la estonia, utiliza una ordenación diferente. Por lo tanto se recomienda definir explicitamente LC_COLLATE a C cuando se trate de ajustes al nivel de todo el sistema.}}

{{Warning|Using LC_ALL is strongly discouraged as it automatically overrides all other LC_* variables (LANG is not affected). This means that changes made by other means will be hidden until LC_ALL is set to a null string. It is probably best not to set it in a startup file.}}

La mayoría de los usuarios definen la variable LANG al nivel global.

=== Generar localizaciones específicas ===

Probablemente utilice una o tal vez dos localizaciones en su sistema. Puede especificar las localizaciones que va a necesitar en {{Path|/etc/locale.gen}}. 

{{Code|Añadir localizaciones a /etc/locale.gen|<pre>
en_GB ISO-8859-1
en_GB.UTF-8 UTF-8
es_ES ISO-8859-1
es_ES@euro ISO-8859-15
</pre>
}}

The next step is to run <code>locale-gen</code>. It will generate all the locales you have specified in the {{Path|/etc/locale.gen}} file and write them to the locale-archive ({{Path|/usr/lib/locale/locale-archive}}). 

{{RootCmd|locale-gen|output=<pre>
 * Generating 4 locales (this might take a while) with 1 jobs
 *  (1/4) Generating en_GB.ISO-8859-1 ...                       [ ok ]
 *  (2/4) Generating en_GB.UTF-8 ...                            [ ok ]
 *  (3/4) Generating de_DE.ISO-8859-1 ...                       [ ok ]
 *  (4/4) Generating de_DE.ISO-8859-15@euro ...                 [ ok ]
 * Generation complete
</pre>}}

{{Note/es|<code>locale-gen</code> está disponible en <code>glibc-2.3.6-r4</code> y versiones posteriores. Si tiene una version anterior de glibc, deberá actualizarla cuanto antes.}}

Puede verificar que las localizaciones seleccionadas están disponibles con la orden <code>locale -a</code>.

{{Cmd|locale -a|output=<pre>
C
POSIX
es_ES
es_ES.iso88591
es_ES.iso885915@euro
es_ES@euro
spanish
en_GB
en_GB.iso88591
en_GB.utf8
german
</pre>}}

Se puede mostar el fichero {{Path|/usr/lib/locale/locale-archive}} usando la orden strings.

{{Cmd|strings /usr/lib/locale/locale-archive {{!}} less}}

=== Configurar una localización ===

==== OpenRC ==== 

When using OpenRC locale settings are stored in environment variables. These are typically set in the {{Path|/etc/env.d/02locale}} (for system-wide settings) and {{Path|~/.bashrc}} (for user-specific settings) file.  More details can be found in [[UTF-8#Setting_the_locale]].  The system wide settings ({{Path|/etc/env.d/02locale}}) can be managed through <code>eselect locale</code>. For instance, to set the <code>LANG</code> variable to the <code>C</code> value:

{{RootCmd|eselect locale list|output=<pre>
Available targets for the LANG variable:
[1] C
[2] POSIX
[3] en_ES
[4] en_ES.iso885915
[5] en_ES.utf8
[ ] (free form)
</pre>}}

{{RootCmd|eselect locale set 1}}

Por supuesto también puede editar el fichero manualmente y diversificar la variables de localización.

{{FileBox|filename=/etc/env.d/02locale|title=Setting the default system locale in /etc/env.d/02locale|lang=bash|1=
LANG="de_DE.UTF-8"
LC_COLLATE="C"
}}

{{Note/es|Utilice <code>es_ES@euro</code> como su LANG si quiere utilizar el símbolo del Euro (â‚¬) en localizaciones no basadas en UTF-8.}}

También es posible y muy común especialmente en entornos UNIX más tradicionales dejar sin cambiar los ajustes globales, esto es, definiendo la localización global a "<code>C</code>". Los usuarios pueden definir sus localizaciones preferidas en su propio fichero RC del intérprete de comandos. 

{{FileBox|filename=~/.bashrc|title=Definir la localización del usuario en ~/.bashrc|lang=bash|1=
export LANG="es_ES.UTF-8"
export LC_COLLATE="C"
}}

Otra forma de configurar el sistema es dejarlo en una localización C por defecto y habilitar a la vez la representación de caracteres UTF-8. Esto se puede realizar utilizando los siguientes ajustes en {{Path|/etc/env.d/02locale}}: 

{{Code|Usar una localización C tradicional a la vez que se especifica UTF-8|
<pre>
LC_CTYPE=es_ES.UTF-8
</pre> 
}}

Al usar el fragmento de código de arriba, los usuarios puede ver los nombres de los ficheros de localización de forma correcta sin necesidad de forzarlos a usar un idioma en particular. 

Una vez definida la localización correcta, asegúrese de actualizar sus variables de entorno para avisar al sistema del cambio realizado.

Para una localización por defecto para todo el sistema:

{{RootCmd|env-update && source /etc/profile}}

Para una localización específica del usuario:

{{Cmd|source ~/.bashrc}}

Después de esto, reinicie el servidor X con  {{Key|Ctrl}} + {{Key|Alt}} + {{Key|Retroceso}}, salga del sistema y vuelva a entrar con el mismo usuario. 

Ahora, verifique que los cambios han surtido efecto: 

{{Cmd|locale}}

==== systemd ====

Si utiliza systemd debería definir su localización con la orden <code>localectl</code>. Compruebe la lista de localizaciones disponibles con:

{{RootCmd|localectl list-locales}}

A continuación defina la localización que desee:

{{RootCmd|<nowiki>localectl set-locale
LANG=es_ES.utf8</nowiki>}}

Para terminar, compruebe si el resultado es correcto:

{{RootCmd|<nowiki>localectl | grep "System Locale"
</nowiki>|output=<pre>
  System Locale: LANG=es_ES.utf8
</pre>}}

== Distribución del teclado para la consola ==

=== OpenRC ===

La distribución del teclado usada por la consola se define en {{Path|/etc/conf.d/keymaps}} con la variable <code>keymap</code>. Los valores válidos para esta variable se pueden encontrar en  {{Path|/usr/share/keymaps/SU_ARQUITECTURA/}}. La arquitectura {{Path|i386}} tiene subdivisiones de disposiciones de teclado ({{Path|qwerty/}}, {{Path|azerty/}}, etc.). Algunos idiomas tienen multitud de opciones por lo que puede que quiera experimentar con algunas de ellas para ver cual se adapta mejor a su caso. 

{{FileBox|filename=/etc/conf.d/keymaps|title=Definir el mapa de teclado de la consola|lang=bash|1=
keymap="es"
#keymap="es-cp850"
}}

=== systemd ===

En systemd se puede definir el mapa de teclado de su consola con la orden <code>localectl</code>. En primer lugar, comprueba los mapas de teclado disponibles:

{{RootCmd|localectl list-keymaps}}

A continuación puede configurar el mapa de teclado que desee:

{{RootCmd|localectl set-keymap es}}

Para terminar, compruebe si el mapa de teclado de la consola se definió correctamente:

{{RootCmd|<nowiki>localectl | grep "VC Keymap"</nowiki>|output=<pre>
     VC Keymap: es
</pre>}}

== Mapa de teclado para el servidor X ==

=== OpenRC ===

The keyboard layout to be used by the X server is specified in {{Path|/etc/X11/xorg.conf.d/30-keyboard.conf}} by the <code>XkbLayout</code> option. For details see the [[Xorg/Guide#Configuring_the_keyboard|Xorg/Guide]].

=== systemd ===

En systemd el mapa de teclado para el servidor X11 se puede definir mediante la orden <code>localectl</code>. En primer lugar compruebe los mapas de teclado disponibles:

{{RootCmd|localectl list-x11-keymap-layouts}}

A continuación configure el mapa de teclado para X11 que desee:

{{RootCmd|localectl set-x11-keymap es}}

Para terminar, compruebe si el mapa de teclado para X11 se definió correctamente:

{{RootCmd|<nowiki>localectl | grep "X11 Layout"</nowiki>|output=<pre>
    X11 Layout: es
</pre>}}

== El símbolo del Euro y la consola ==

=== OpenRC ===

Para que se pueda mostrar el símbolo del Euro en su consola, necesitará definir <code>consolefont</code> en {{Path|/etc/conf.d/consolefont}} a un fichero de los que se pueden encontrar en {{Path|/usr/share/consolefonts/}} (sin la extensión <code>.psfu.gz</code> ). <code>lat9w-16</code> tiene el símbolo del Euro. 

{{Code|Configurar la tipografía de la consola|<pre>
consolefont="lat9w-16"
</pre>
}}

Deberá también comprobar que  <code>consolefont</code> está definido en el nivel de ejecución boot: 

{{RootCmd|rc-update -v show {{!}} grep consolefont}}

Si no se muestra ningún nivel de ejecución para <code>consolefont</code>, entonces añádalo al nivel adecuado: 

{{RootCmd|rc-update add consolefont boot}}

== El símbolo del Euro en X ==

=== En la mayoría de las aplicaciones ===

Hacer que el símbolo del Euro funcione correctamente en X es un poco más complicado. Lo primero que debe hacer es cambiar las definiciones de <code>fixed</code> y <code>variable</code> en {{Path|/usr/share/fonts/misc/fonts.alias}} para que terminen en <code>iso8859-15</code> en lugar de  <code>iso8859-1</code>. 

{{Code|Defini las tipografías por defecto en X|<pre>
fixed -misc-fixed-medium-r-semicondensed--13-120-75-75-c-60-iso8859-15
variable -*-helvetica-bold-r-normal-*-*-120-*-*-*-*-iso8859-15
</pre>
}}

Algunas aplicaciones usan su propia tipografía y tendrá que configurarlas independientemente para que usen una tipografía con el símbolo del Euro. Puede hacer esto al nivel de usuario en {{Path|.Xdefaults}} (puede copiar este fichero a {{Path|/etc/skel/}} para que lo utilicen los nuevos usuarios), o a un nivel global para cada aplicación con un fichero de recursos en {{Path|/usr/share/X11/app-defaults/}} (como xterm). En estos ficheros generalmente tendrá que cambiar una línea ya existente en lugar de añadir una nueva. Por ejemplo, para cambiar nuestra tipografía en xterm: 

{{Cmd|echo 'XTerm*font: fixed' >> ~/.Xresources
|xrdb -merge ~/.Xresources}}

=== El símbolo del Euro en (X)Emacs ===

Para utilizar el símbolo del Euro en (X)Emacs, añada lo siguiente en {{Path|.Xdefaults}}: 

{{Code|Definir la tipografía para emacs|<pre>
Emacs.default.attributeFont: -*-courier-medium-r-*-*-*-120-*-*-*-*-iso8859-15
</pre>
}}

Para XEmacs (no el plano Emacs), tendrá que trabajar un poco más. En {{Path|/home/user/.xemacs/init.el}}, añada: 

{{Code|Definir la tipografía para xemacs|<pre>
(define-key global-map '(EuroSign) '[€])
</pre>
}}

== NLS ==

For message based localization to work in programs that support it and have the <code>nls</code> (Native language support) USE flag, you will probably need to have the programs compiled with this flag set. Message strings are installed in {{Path|/usr/share/locale/<locale>/LC_MESSAGES/<package>.mo}} files. Most of the programs using nls also need the gettext library to extract and use localized messages. Of course, Portage will automatically install it when needed.

Después de habilitar el ajustes USE <code>nls</code> tendrá que volver a hacer emerge de algunos paquetes:

{{Emerge|params+=--newuse --deep --with-bdeps=y|@world}}

== LINGUAS ==

There is also an additional localization variable called [https://devmanual.gentoo.org/general-concepts/linguas/<code>LINGUAS</code>], which affects the localization files that get installed in gettext-based programs, and decides which GUI language packs should be downloaded and installed for some specific software packages, such as [[Firefox]], [[Thunderbird]], [[KDE#Localization|kde-base/kde-l10n]] or [[LibreOffice|app-office/libreoffice-l10n]]. The variable takes in ''space''-separated list of language codes, and a suggested place to set it is {{Path|[[:/etc/portage/make.conf]]}}: 

{{RootCmd|nano -w /etc/portage/make.conf|output=<pre>
## (Añadir la variable LINGUAS. Por ejemplo para español, alemán e inglés:)
LINGUAS="es de en"
</pre>
}}

With <code>LINGUAS=""</code>, most ebuilds would install only the packages' default language but none of the <code>LC_MESSAGES</code> files. They would also not download and install any of the further language packs. For instance, the currently stable [[LibreOffice|app-office/libreoffice]] receives further language support through {{Package|app-office/libreoffice-l10n}} which supports download and installation of the language packs defined in <code>LINGUAS</code>. Since the origin language of libreoffice is <code>en_US</code>, it does not have <code>en_US</code> flag in {{Package|app-office/libreoffice-l10n}}. So with <code>LINGUAS=""</code>, libreoffice still supports <code>en_US</code>.

To see the status of GUI translation, hyphenation, spell checking and other localisations on your language, please refer to the [https://translations.documentfoundation.org/ LibreOffice translation web site].

For finer grained control it can be set per package in {{Path|[[:/etc/portage/package.use]]}}: 

{{FileBox|filename=/etc/portage/package.use|lang=bash|1=
www-client/firefox linguas_es linguas_pt_BR linguas_en_GB
}}

Se pueden listar los programas instalados que utilizan la variable <code>LINGUAS</code> y sus idiomas soportados de la siguiente forma:

{{Cmd|eix -I -U linguas}}

Se puede encontrar una lista de valores para <code>LINGUAS</code> en {{Path|/usr/portage/profiles/desc/linguas.desc}}: 

{{Cmd|grep -i spanish /usr/portage/profiles/desc/linguas.desc|output=<pre>
es - Spanish locale
es_AR - Spanish locale for Argentina
es_CL - Spanish locale for Chile
es_CO - Spanish locale for Columbia
es_CR - Spanish locale for Costa Rica
es_ES - Spanish locale for Spain
es_LA - Spanish locale for Latin America
es_MX - Spanish locale for Mexico
es_VE - Spanish locale for Venezuela
</pre> }}

Después de definir el ajuste USE <code>LINGUAS</code> puede que se necesite volver a hacer emerge de algunos paquetes:

{{Emerge|params+=--newuse --deep --with-bdeps=y|@world}}

== Recursos externos ==

* [http://www.gnu.org/software/libc/manual/html_node/Locales.html Localizaciones e internacionalización] (gnu.org)

== Ver también ==

* [[Handbook:AMD64/Installation/Base/es#Configurar_localizaciones|Configurar localizaciones]] (Manuales de Gentoo)
* Recursos de Xorg:
** [[Evdev#Keyboard_layout|Keyboard layout]] en el artículo [[Evdev]].
** [[X resources|Recursos de X]]


[[Category:Localization]] {{Migrated|originalauthors=Alexander Holler, Steven Lucy, Benny Chuang, Lars Weiler, Tobias Scherbaum, Flammie Pirinen, nightmorph, klondike}}
