<languages />

{{Metadata|abstract=Esta guía debería ayudar a los usuarios a realizar una correcta localización de su distribución Gentoo Linux en cualquier área europea. Se ha utilizado España como caso ejemplo. Incluye la configuración para utilizar el símbolo del Euro.}}

== Zona horaria ==

Para mantener la hora del sistema de forma adecuada a la localización actual, se necesita ajustar la zona horaria. Se pueden encontrar instrucciones para hacerlo en  [[System_time#OpenRC|sistemas basados en OpenRC]] y [[System_time#systemd|sistemas basados en systemd]] dentro del artículo sobre [[System_time|la hora del sistema]].

== Sistema de localizaciones ==

=== ¿Qué son las localizaciones? ===

Una localización es un conjunto de información que muchos programas utilizan para determinar los ajustes específicos de país e idioma. Las
localizaciones y sus datos forman parte de la biblioteca del sistema y se encuentran en {{Path|/usr/share/i18n/locales/}} en la mayoría de los sistemas.
Una localización, generalmente tiene el nombre de la forma <code>ab_CD</code> donde <code>ab</code> representa las dos (o tres) letras del su código del idioma (según la ISO-639) y <code>CD</code> representa las dos letras del código del país (según la ISO-3166). Las variantes suelen agregarse a las localizaciones, por ejemplo <code>en_GB.UTF-8</code> o <code>es_ES@euro</code>. Por favor, explore la  [http://es.wikipedia.org/wiki/Locale Wikipedia] para obtener más información acerca de las localizaciones y otros artículos relacionados.

=== Variables de entorno para localizaciones ===

Las variables que controlan diferentes aspectos de las configuraciones de las localizaciones se muestran abajo. Todas ellas toman un nombre de localización en el formato <code>ab_CD</code> usado arriba. 

{| class="table table-stripe" style="text-align: left;"
|-
!scope=col width=25% | Nombre de la variable
!scope=col width=75% | Explicación
|-
| <var>LANG</var>
| Define todos los ajustes de localización de una sola vez mientras que permite personalizaciones individuales utilizando los ajustes LC_* de abajo.
|-
| <var>LC_COLLATE</var>
| Define la ordenación alfabética de las cadenas de caracteres. Este afecta, por ejemplo, a la salida de los listados de los directorios mostrados en orden.
|-
| <var>LC_CTYPE</var>
| Define las propiedades de gestión de caracteres para el sistema. Esto determina qué caracteres forman parte del alfabeto, los números, etc. También determina qué conjunto de caracteres se utiliza, si esto es aplicable.
|-
| <var>LC_MESSAGES</var>
| Localizaciones de los programas almacenados en {{Path|/usr/share/locale/}} para aplicaciones que utilicen un esquema de mensajes basado en localizaciones (la mayoría de los programas GNU, lea los siguientes capítulos para obtener información más detallada de cualés son y cómo hacer que estos programas funcionen).
|-
| <var>LC_MONETARY</var>
| Define la unidad monetaria y el formato de los números que representan moneda.
|-
| <var>LC_NUMERIC</var>
| Define el formato de valores numéricos que no son moneda. Afecta a cosas como el separador de millares y el separador decimal.
|-
| <var>LC_TIME</var>
| Define el formato de fecha y hora.
|-
| <var>LC_PAPER</var>
| Define el tamaño del papel por defecto.
|-
| <var>LC_ALL</var>
| Una variable especial para redefinir los demás ajustes.
|-
|}

{{Note|Some programs are written in such a way that they expect traditional English ordering of the alphabet, while some locales, most notably the Estonian one, use a different ordering. Therefore it's recommended to explicitly set <var>LC_COLLATE</var> to C when dealing with system-wide settings.}}

{{Warning|Using <var>LC_ALL</var> is strongly discouraged as it automatically overrides all other <var>LC_*</var> variables (<var>LANG</var> is not affected). This means that changes made by other means will be hidden until <var>LC_ALL</var> is set to a null string. It is probably best not to set it in a startup file.}}

Most typically users only set the <var>LANG</var> variable on the global basis.

=== Generar localizaciones específicas ===

Probablemente utilice una o tal vez dos localizaciones en su sistema. Puede especificar las localizaciones que va a necesitar en {{Path|/etc/locale.gen}}. 

{{Code|Añadir localizaciones a /etc/locale.gen|<pre>
en_GB ISO-8859-1
en_GB.UTF-8 UTF-8
es_ES ISO-8859-1
es_ES@euro ISO-8859-15
</pre>
}}

The next step is to run {{c|locale-gen}}. It will generate all the locales specified in the {{Path|/etc/locale.gen}} file and write them to the locale-archive ({{Path|/usr/lib/locale/locale-archive}}). 

{{RootCmd|locale-gen|output=<pre>
 * Generating 4 locales (this might take a while) with 1 jobs
 *  (1/4) Generating en_GB.ISO-8859-1 ...                       [ ok ]
 *  (2/4) Generating en_GB.UTF-8 ...                            [ ok ]
 *  (3/4) Generating de_DE.ISO-8859-1 ...                       [ ok ]
 *  (4/4) Generating de_DE.ISO-8859-15@euro ...                 [ ok ]
 * Generation complete
</pre>}}

{{Note|{{c|locale-gen}} is available in <code>glibc-2.3.6-r4</code> and newer. If you have an older version of glibc, you should update it now.}}

You can verify that your selected locales are available by running {{c|locale -a}}.

{{Cmd|locale -a|output=<pre>
C
POSIX
es_ES
es_ES.iso88591
es_ES.iso885915@euro
es_ES@euro
spanish
en_GB
en_GB.iso88591
en_GB.utf8
german
</pre>}}

Se puede mostar el fichero {{Path|/usr/lib/locale/locale-archive}} usando la orden strings.

{{Cmd|strings /usr/lib/locale/locale-archive {{!}} less}}

=== Configurar una localización ===

==== OpenRC ==== 

When using OpenRC locale settings are stored in environment variables. These are typically set in the {{Path|/etc/env.d/02locale}} (for system-wide settings) and {{Path|~/.bashrc}} (for user-specific settings) file.  More details can be found in the [[UTF-8#Setting_the_locale|UTF-8]] article.  The system wide settings ({{Path|/etc/env.d/02locale}}) can be managed through {{c|eselect locale}}. For instance, to set the <var>LANG</var> variable to the <code>C</code> value:

{{RootCmd|eselect locale list|output=<pre>
Available targets for the LANG variable:
[1] C
[2] POSIX
[3] en_ES
[4] en_ES.iso885915
[5] en_ES.utf8
[ ] (free form)
</pre>}}

{{RootCmd|eselect locale set 1}}

Por supuesto también puede editar el fichero manualmente y diversificar la variables de localización.

{{FileBox|filename=/etc/env.d/02locale|title=Definir la localización por defecto del sistemaen /etc/env.d/02locale|lang=bash|1=
LANG="es_ES.UTF-8"
LC_COLLATE="C"
}}

{{Note/es|Utilice <code>es_ES@euro</code> como su LANG si quiere utilizar el símbolo del Euro (â‚¬) en localizaciones no basadas en UTF-8.}}

También es posible y muy común especialmente en entornos UNIX más tradicionales dejar sin cambiar los ajustes globales, esto es, definiendo la localización global a "<code>C</code>". Los usuarios pueden definir sus localizaciones preferidas en su propio fichero RC del intérprete de comandos. 

{{FileBox|filename=~/.bashrc|title=Setting the user locale|lang=bash|1=
export LANG="de_DE.UTF-8"
export LC_COLLATE="C"
}}

Otra forma de configurar el sistema es dejarlo en una localización C por defecto y habilitar a la vez la representación de caracteres UTF-8. Esto se puede realizar utilizando los siguientes ajustes en {{Path|/etc/env.d/02locale}}: 

{{Code|Usar una localización C tradicional a la vez que se especifica UTF-8|
<pre>
LC_CTYPE=es_ES.UTF-8
</pre> 
}}

Al usar el fragmento de código de arriba, los usuarios puede ver los nombres de los ficheros de localización de forma correcta sin necesidad de forzarlos a usar un idioma en particular. 

Una vez definida la localización correcta, asegúrese de actualizar sus variables de entorno para avisar al sistema del cambio realizado.

Para una localización por defecto para todo el sistema:

{{RootCmd|env-update && source /etc/profile}}

Para una localización específica del usuario:

{{Cmd|source ~/.bashrc}}

After this, kill the X server by pressing {{Key|Ctrl}}+{{Key|Alt}}+{{Key|Backspace}}, log out, then log in as a user. 

Ahora, verifique que los cambios han surtido efecto: 

{{Cmd|locale}}

==== systemd ====

If you use systemd set locale with the {{c|localectl}} command. Check the list of available locales with:

{{RootCmd|localectl list-locales}}

Then set the desired locale:

{{RootCmd|<nowiki>localectl set-locale
LANG=es_ES.utf8</nowiki>}}

Para terminar, compruebe si el resultado es correcto:

{{RootCmd|<nowiki>localectl | grep "System Locale"
</nowiki>|output=<pre>
  System Locale: LANG=es_ES.utf8
</pre>}}

== Distribución del teclado para la consola ==

=== OpenRC ===

The keyboard layout used by the console is set in {{Path|/etc/conf.d/keymaps}} by the <var>keymap</var> variable. Valid values can be found in {{Path|/usr/share/keymaps/YOUR_ARCH/}}. {{Path|i386}} has further subdivisions into layout ({{Path|qwerty/}}, {{Path|azerty/}}, etc.). Some languages have multiple options, so you may wish to experiment to decide which one fits your needs best. 

{{FileBox|filename=/etc/conf.d/keymaps|title=Definir el mapa de teclado de la consola|lang=bash|1=
keymap="es"
#keymap="es-cp850"
}}

=== systemd ===

With systemd the keymap layout used for your console can be set using the {{c|localectl}} command. First check the available keymap layouts:

{{RootCmd|localectl list-keymaps}}

A continuación puede configurar el mapa de teclado que desee:

{{RootCmd|localectl set-keymap es}}

Para terminar, compruebe si el mapa de teclado de la consola se definió correctamente:

{{RootCmd|<nowiki>localectl | grep "VC Keymap"</nowiki>|output=<pre>
     VC Keymap: es
</pre>}}

== Mapa de teclado para el servidor X ==

=== OpenRC ===

The keyboard layout to be used by the X server is specified in {{Path|/etc/X11/xorg.conf.d/30-keyboard.conf}} by the <var>XkbLayout</var> option. For details visit the [[Xorg/Guide#Configuring_the_keyboard|Xorg guide]].

=== systemd ===

With systemd the keymap layout for the X11 server can be set using the {{c|localectl}} command. First check the available X11 keymap layouts:

{{RootCmd|localectl list-x11-keymap-layouts}}

A continuación configure el mapa de teclado para X11 que desee:

{{RootCmd|localectl set-x11-keymap es}}

Para terminar, compruebe si el mapa de teclado para X11 se definió correctamente:

{{RootCmd|<nowiki>localectl | grep "X11 Layout"</nowiki>|output=<pre>
    X11 Layout: es
</pre>}}

== El símbolo del Euro para la consola ==

=== OpenRC ===

In order to get your console to display the Euro symbol, you will need to set the <var>consolefont</var> variable in {{Path|/etc/conf.d/consolefont}} to a file found in {{Path|/usr/share/consolefonts/}} (without the <code>.psfu.gz</code>). <code>lat9w-16</code> has the Euro symbol. 

{{Code|Configurar la tipografía de la consola|<pre>
consolefont="lat9w-16"
</pre>
}}

You should verify that the {{c|consolefont}} service is in the boot runlevel: 

{{RootCmd|rc-update -v show {{!}} grep consolefont}}

If no runlevel is displayed for {{c|consolefont}}, then add it to the proper level: 

{{RootCmd|rc-update add consolefont boot}}

== The Euro symbol in X ==

=== Most applications ===

Getting the Euro symbol to work properly in X is a little bit tougher. The first thing you should do is change the <var>fixed</var> and <var>variable</var> definitions in {{Path|/usr/share/fonts/misc/fonts.alias}} to end in <code>iso8859-15</code> instead of <code>iso8859-1</code>. 

{{Code|Defini las tipografías por defecto en X|<pre>
fixed -misc-fixed-medium-r-semicondensed--13-120-75-75-c-60-iso8859-15
variable -*-helvetica-bold-r-normal-*-*-120-*-*-*-*-iso8859-15
</pre>
}}

Algunas aplicaciones usan su propia tipografía y tendrá que configurarlas independientemente para que usen una tipografía con el símbolo del Euro. Puede hacer esto al nivel de usuario en {{Path|.Xdefaults}} (puede copiar este fichero a {{Path|/etc/skel/}} para que lo utilicen los nuevos usuarios), o a un nivel global para cada aplicación con un fichero de recursos en {{Path|/usr/share/X11/app-defaults/}} (como xterm). En estos ficheros generalmente tendrá que cambiar una línea ya existente en lugar de añadir una nueva. Por ejemplo, para cambiar nuestra tipografía en xterm: 

{{Cmd|echo 'XTerm*font: fixed' >> ~/.Xresources
|xrdb -merge ~/.Xresources}}

=== El símbolo del Euro en (X)Emacs ===

Para utilizar el símbolo del Euro en (X)Emacs, añada lo siguiente en {{Path|.Xdefaults}}: 

{{FileBox|filename=~/.Xdefaults|title=Setting the font for emacs|1=
Emacs.default.attributeFont: -*-courier-medium-r-*-*-*-120-*-*-*-*-iso8859-15
}}

Para XEmacs (no el plano Emacs), tendrá que trabajar un poco más. En {{Path|/home/user/.xemacs/init.el}}, añada: 

{{FileBox|filename=~/.xemacs/init.el|title=Setting the font for xemacs|1=
(define-key global-map '(EuroSign) '[€])
}}

== NLS ==

Para que la localización basada en mensajes funcione en programas que ofrecen soporte para ello y disponen del ajuste USE <code>nls</code> (Native language support) definido, probablemente deberá tener los programas compilados con este ajuste definido. Las cadenas con los mensajes se instalan en los ficheros {{Path|/usr/share/locale/<localización>/LC_MESSAGES/<paquete>.mo}}. La mayoría de los programas que utilizan nls también necesitan la librería gettext para extraer y utilizar los mensajes apropiados de cada localización. Desde luego, Portage la instalará cuando sea necesaria.

Después de habilitar el ajustes USE <code>nls</code> tendrá que volver a hacer emerge de algunos paquetes:

{{Emerge|params+=--newuse --deep --with-bdeps=y|@world}}

== LINGUAS ==

There is also an additional localization variable called <var>[https://devmanual.gentoo.org/general-concepts/linguas/ LINGUAS]</var>, which affects the localization files that get installed in gettext-based programs, and decides which GUI language packs should be downloaded and installed for some specific software packages, such as [[Firefox]], [[Thunderbird]], [[KDE#Localization|kde-base/kde-l10n]] or [[LibreOffice|app-office/libreoffice-l10n]]. The variable takes in ''space''-separated list of language codes, and a suggested place to set it is {{Path|[[:/etc/portage/make.conf]]}}: 

{{RootCmd|nano -w /etc/portage/make.conf|output=<pre>
## (Añadir la variable LINGUAS. Por ejemplo para español, alemán e inglés:)
LINGUAS="es de en"
</pre>
}}

Con <code>LINGUAS=""</code> la mayoría de ebuilds deberían instalar únicamente el idioma por defecto del paquete pero ningún fichero <code>LC_MESSAGES</code>. Tampoco deberían instalar ningún otro paquete de idioma. Por ejemplo, la versión estable actual de [[LibreOffice|app-office/libreoffice]] recibe soporte de idioma adicional a través de {{Package|app-office/libreoffice-l10n}} que ofrecer soporte para la descarga e instalación de los paquetes de idioma definidos en <code>LINGUAS</code>. Debido a que el idioma origen de libreoffice es <code>en_US</code>, no aparece la definición para <code>en_US</code> en {{Package|app-office/libreoffice-l10n}}. Por lo tanto con <code>LINGUAS=""</code>, libreoffice aún ofrece soporte para <code>en_US</code>.

Para ver el estado de la traducción del GUI, puntuación, comprobación ortográfica y otras localizaciones de su idioma, por favor, eche un vistazo al [https://translations.documentfoundation.org/ sitio web de traducción de LibreOffice].

Para un control más detallado, se puede definir en cada paquete dentro de {{Path|[[:/etc/portage/package.use]]}}: 

{{FileBox|filename=/etc/portage/package.use|lang=bash|1=
www-client/firefox linguas_es linguas_pt_BR linguas_en_GB
}}

A list of installed programs making use of the <var>LINGUAS</var> variable and their supported languages can be shown as follows:

{{Cmd|eix -I -U linguas}}

A list of <var>LINGUAS</var> values that can be used is provided as {{Path|/usr/portage/profiles/desc/linguas.desc}}: 

{{Cmd|grep -i spanish /usr/portage/profiles/desc/linguas.desc|output=<pre>
es - Spanish locale
es_AR - Spanish locale for Argentina
es_CL - Spanish locale for Chile
es_CO - Spanish locale for Columbia
es_CR - Spanish locale for Costa Rica
es_ES - Spanish locale for Spain
es_LA - Spanish locale for Latin America
es_MX - Spanish locale for Mexico
es_VE - Spanish locale for Venezuela
</pre> }}

After setting the <code>linguas</code> USE flag it may be necessary to re-emerge some packages:

{{Emerge|params+=--newuse --deep --with-bdeps=y|@world}}

== Ver también ==


* [[Handbook:AMD64/Installation/Base/es#Configurar_localizaciones|Configurar localizaciones]] (Manuales de Gentoo)
* [[Evdev#Keyboard_layout|Disposición del teclado]] dentro del artículo sobre Evdev
* [[X resources|Recursos para X]]

== Recursos externos == 

* [http://www.gnu.org/software/libc/manual/html_node/Locales.html Localizaciones e internacionalización] (gnu.org)

[[Category:Localization]] {{Migrated|originalauthors=Alexander Holler, Steven Lucy, Benny Chuang, Lars Weiler, Tobias Scherbaum, Flammie Pirinen, nightmorph, klondike}}
