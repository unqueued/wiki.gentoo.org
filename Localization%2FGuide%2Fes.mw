<languages />

{{Metadata|abstract=Esta guía debería ayudar a los usuarios a realizar una correcta localización de su distribución Gentoo Linux en cualquier área europea. Se ha utilizado España como caso ejemplo. Incluye la configuración para utilizar el símbolo del Euro.}}

== Zona horaria ==

Para mantener la hora del sistema de forma adecuada a la localización actual, se necesita ajustar la zona horaria. Se pueden encontrar instrucciones para hacerlo en  [[System_time#OpenRC|sistemas basados en OpenRC]] y [[System_time#systemd|sistemas basados en systemd]] dentro del artículo sobre [[System_time|la hora del sistema]].

== Sistema de localizaciones ==

=== ¿Qué son las localizaciones? ===

Una localización es un conjunto de información que muchos programas utilizan para determinar los ajustes específicos de país e idioma. Las
localizaciones y sus datos forman parte de la biblioteca del sistema y se encuentran en {{Path|/usr/share/i18n/locales/}} en la mayoría de los sistemas.
Una localización, generalmente tiene el nombre de la forma <code>ab_CD</code> donde <code>ab</code> representa las dos (o tres) letras del su código del idioma (según la ISO-639) y <code>CD</code> representa las dos letras del código del país (según la ISO-3166). Las variantes suelen agregarse a las localizaciones, por ejemplo <code>en_GB.UTF-8</code> o <code>es_ES@euro</code>. Por favor, explore la  [http://es.wikipedia.org/wiki/Locale Wikipedia] para obtener más información acerca de las localizaciones y otros artículos relacionados.

=== Variables de entorno para localizaciones ===

Las variables que controlan diferentes aspectos de las configuraciones de las localizaciones se muestran abajo. Todas ellas toman un nombre de localización en el formato <code>ab_CD</code> usado arriba. 

{| class="wikitable" style="text-align: left;"
|-
! Nombre de la variable
! Explicación
|-
| LANG
| Define todos los ajustes de localización de una sola vez mientras que permite personalizaciones individuales utilizando los ajustes LC_* de abajo.
|-
| LC_COLLATE
| Define la ordenación alfabética de las cadenas de caracteres. Este afecta, por ejemplo, a la salida de los listados de los directorios mostrados en orden.
|-
| LC_CTYPE
| Define las propiedades de gestión de caracteres para el sistema. Esto determina qué caracteres forman parte del alfabeto, los números, etc. También determina qué conjunto de caracteres se utiliza, si esto es aplicable.
|-
| LC_MESSAGES
| Localizaciones de los programas almacenados en {{Path|/usr/share/locale/}} para aplicaciones que utilicen un esquema de mensajes basado en localizaciones (la mayoría de los programas GNU, lea los siguientes capítulos para obtener información más detallada de cualés son y cómo hacer que estos programas funcionen).
|-
| LC_MONETARY
| Define la unidad monetaria y el formato de los números que representan moneda.
|-
| LC_NUMERIC
| Define el formato de valores numéricos que no son moneda. Afecta a cosas como el separador de millares y el separador decimal.
|-
| LC_TIME
| Define el formato de fecha y hora.
|-
| LC_PAPER
| Define el tamaño del papel por defecto.
|-
| LC_ALL
| Una variable especial para redefinir los demás ajustes.
|-
|}

{{Note/es|Algunos programas se escriben de una forma en la que esperan la ordenación tradicional del alfabeto del idioma inglés, pero algunas localizaciones, mayoritariamente la estonia, utiliza una ordenación diferente. Por lo tanto se recomienda definir explicitamente LC_COLLATE a C cuando se trate de ajustes al nivel de todo el sistema.}}

{{Warning|No se recomienda el uso de LC_ALL ya que sobrescribe de forma automática las demás variables LC_* (LANG no se ve afectada). Esto significa que los cambios realizados de otra forma se ocultarán hasta que LC_ALL se defina como cadena vacía. Seguramente la mejor opción es no definirla en un fichero de inicio.}}

La mayoría de los usuarios definen la variable LANG al nivel global.

=== Generar localizaciones específicas ===

Probablemente utilice una o tal vez dos localizaciones en su sistema. Puede especificar las localizaciones que va a necesitar en {{Path|/etc/locale.gen}}. 

{{Code|Añadir localizaciones a /etc/locale.gen|<pre>
en_GB ISO-8859-1
en_GB.UTF-8 UTF-8
es_ES ISO-8859-1
es_ES@euro ISO-8859-15
</pre>
}}

El siguiente paso es lanzar <code>locale-gen</code> que generará todas las localizaciones especificadas en el archivo {{Path|/etc/locale.gen}} y escribirlas al archivo de localizaciones ({{Path|/usr/lib/locale/locale-archive}}). 

{{RootCmd|locale-gen|output=<pre>
 * Generating 4 locales (this might take a while) with 1 jobs
 *  (1/4) Generating en_GB.ISO-8859-1 ...                       [ ok ]
 *  (2/4) Generating en_GB.UTF-8 ...                            [ ok ]
 *  (3/4) Generating de_DE.ISO-8859-1 ...                       [ ok ]
 *  (4/4) Generating de_DE.ISO-8859-15@euro ...                 [ ok ]
 * Generation complete
</pre>}}

{{Note/es|<code>locale-gen</code> está disponible en <code>glibc-2.3.6-r4</code> y versiones posteriores. Si tiene una version anterior de glibc, deberá actualizarla cuanto antes.}}

Puede verificar que las localizaciones seleccionadas están disponibles con la orden <code>locale -a</code>.

{{Cmd|locale -a|output=<pre>
C
POSIX
es_ES
es_ES.iso88591
es_ES.iso885915@euro
es_ES@euro
spanish
en_GB
en_GB.iso88591
en_GB.utf8
german
</pre>}}

Se puede mostar el fichero {{Path|/usr/lib/locale/locale-archive}} usando la orden strings.

{{Cmd|strings /usr/lib/locale/locale-archive {{!}} less}}

=== Configurar una localización ===

==== OpenRC ==== 

Cuando se utiliza OpenRC, los ajustes de la localización se almacenan en variables de entorno. Estas se definen normalmente en el fichero {{Path|/etc/env.d/02locale}} (para ajustes que afectan a todo el sistema) y en el fichero {{Path|~/.bashrc}} (para ajustes específicos del usuario). Se pueden encontrar más detalles en 
[[UTF-8/es#Configurar_la_localizaci.C3.B3n|configurar la localización]]. Los ajustes para todo el sistema ({{Path|/etc/env.d/02locale}}) se pueden gestionar mediante <code>eselect locale</code>. Por ejemplo, jpara definir la variable <code>LANG</code> al valor <code>C</code>:

{{RootCmd|eselect locale list|output=<pre>
Available targets for the LANG variable:
[1] C
[2] POSIX
[3] en_ES
[4] en_ES.iso885915
[5] en_ES.utf8
[ ] (free form)
</pre>}}

{{RootCmd|eselect locale set 1}}

Por supuesto también puede editar el fichero manualmente y diversificar la variables de localización.

{{FileBox|filename=/etc/env.d/02locale|title=Definir la localización por defecto del sistemaen /etc/env.d/02locale|lang=bash|1=
LANG="es_ES.UTF-8"
LC_COLLATE="C"
}}

{{Note/es|Utilice <code>es_ES@euro</code> como su LANG si quiere utilizar el símbolo del Euro (â‚¬) en localizaciones no basadas en UTF-8.}}

También es posible y muy común especialmente en entornos UNIX más tradicionales dejar sin cambiar los ajustes globales, esto es, definiendo la localización global a "<code>C</code>". Los usuarios pueden definir sus localizaciones preferidas en su propio fichero RC del intérprete de comandos. 

{{FileBox|filename=~/.bashrc|title=Definir la localización del usuario en ~/.bashrc|lang=bash|1=
export LANG="es_ES.UTF-8"
export LC_COLLATE="C"
}}

Otra forma de configurar el sistema es dejarlo en una localización C por defecto y habilitar a la vez la representación de caracteres UTF-8. Esto se puede realizar utilizando los siguientes ajustes en {{Path|/etc/env.d/02locale}}: 

{{Code|Usar una localización C tradicional a la vez que se especifica UTF-8|
<pre>
LC_CTYPE=es_ES.UTF-8
</pre> 
}}

Al usar el fragmento de código de arriba, los usuarios puede ver los nombres de los ficheros de localización de forma correcta sin necesidad de forzarlos a usar un idioma en particular. 

Una vez definida la localización correcta, asegúrese de actualizar sus variables de entorno para avisar al sistema del cambio realizado.

Para una localización por defecto para todo el sistema:

{{RootCmd|env-update && source /etc/profile}}

Para una localización específica del usuario:

{{Cmd|source ~/.bashrc}}

Después de esto, reinicie el servidor X con  {{Key|Ctrl}} + {{Key|Alt}} + {{Key|Retroceso}}, salga del sistema y vuelva a entrar con el mismo usuario. 

Ahora, verifique que los cambios han surtido efecto: 

{{Cmd|locale}}

==== systemd ====

Si utiliza systemd debería definir su localización con la orden <code>localectl</code>. Compruebe la lista de localizaciones disponibles con:

{{RootCmd|localectl list-locales}}

A continuación defina la localización que desee:

{{RootCmd|<nowiki>localectl set-locale
LANG=es_ES.utf8</nowiki>}}

Para terminar, compruebe si el resultado es correcto:

{{RootCmd|<nowiki>localectl | grep "System Locale"
</nowiki>|output=<pre>
  System Locale: LANG=es_ES.utf8
</pre>}}

== Distribución del teclado para la consola ==

=== OpenRC ===

La distribución del teclado usada por la consola se define en {{Path|/etc/conf.d/keymaps}} con la variable <code>keymap</code>. Los valores válidos para esta variable se pueden encontrar en  {{Path|/usr/share/keymaps/SU_ARQUITECTURA/}}. La arquitectura {{Path|i386}} tiene subdivisiones de disposiciones de teclado ({{Path|qwerty/}}, {{Path|azerty/}}, etc.). Algunos idiomas tienen multitud de opciones por lo que puede que quiera experimentar con algunas de ellas para ver cual se adapta mejor a su caso. 

{{FileBox|filename=/etc/conf.d/keymaps|title=Definir el mapa de teclado de la consola|lang=bash|1=
keymap="es"
#keymap="es-cp850"
}}

=== systemd ===

En systemd se puede definir el mapa de teclado de su consola con la orden <code>localectl</code>. En primer lugar, comprueba los mapas de teclado disponibles:

{{RootCmd|localectl list-keymaps}}

A continuación puede configurar el mapa de teclado que desee:

{{RootCmd|localectl set-keymap es}}

Para terminar, compruebe si el mapa de teclado de la consola se definió correctamente:

{{RootCmd|<nowiki>localectl | grep "VC Keymap"</nowiki>|output=<pre>
     VC Keymap: es
</pre>}}

== Mapa de teclado para el servidor X ==

=== OpenRC ===

El mapa de teclado que utiliza el servidor X se especifica en {{Path|/etc/X11/xorg.conf.d/30-keyboard.conf}} mediante la opción <code>XkbLayout</code>. Para más detalles, eche un vistazo a la [[Xorg/Guide/es#Configurar_el_teclado|guía de Xorg]].

=== systemd ===

En systemd el mapa de teclado para el servidor X11 se puede definir mediante la orden <code>localectl</code>. En primer lugar compruebe los mapas de teclado disponibles:

{{RootCmd|localectl list-x11-keymap-layouts}}

A continuación configure el mapa de teclado para X11 que desee:

{{RootCmd|localectl set-x11-keymap es}}

Para terminar, compruebe si el mapa de teclado para X11 se definió correctamente:

{{RootCmd|<nowiki>localectl | grep "X11 Layout"</nowiki>|output=<pre>
    X11 Layout: es
</pre>}}

== El símbolo del Euro y la consola ==

=== OpenRC ===

Para que se pueda mostrar el símbolo del Euro en su consola, necesitará definir <code>consolefont</code> en {{Path|/etc/conf.d/consolefont}} a un fichero de los que se pueden encontrar en {{Path|/usr/share/consolefonts/}} (sin la extensión <code>.psfu.gz</code> ). <code>lat9w-16</code> tiene el símbolo del Euro. 

{{Code|Configurar la tipografía de la consola|<pre>
consolefont="lat9w-16"
</pre>
}}

Deberá también comprobar que  <code>consolefont</code> está definido en el nivel de ejecución boot: 

{{RootCmd|rc-update -v show {{!}} grep consolefont}}

Si no se muestra ningún nivel de ejecución para <code>consolefont</code>, entonces añádalo al nivel adecuado: 

{{RootCmd|rc-update add consolefont boot}}

== El símbolo del Euro en X ==

=== En la mayoría de las aplicaciones ===

Hacer que el símbolo del Euro funcione correctamente en X es un poco más complicado. Lo primero que debe hacer es cambiar las definiciones de <code>fixed</code> y <code>variable</code> en {{Path|/usr/share/fonts/misc/fonts.alias}} para que terminen en <code>iso8859-15</code> en lugar de  <code>iso8859-1</code>. 

{{Code|Defini las tipografías por defecto en X|<pre>
fixed -misc-fixed-medium-r-semicondensed--13-120-75-75-c-60-iso8859-15
variable -*-helvetica-bold-r-normal-*-*-120-*-*-*-*-iso8859-15
</pre>
}}

Algunas aplicaciones usan su propia tipografía y tendrá que configurarlas independientemente para que usen una tipografía con el símbolo del Euro. Puede hacer esto al nivel de usuario en {{Path|.Xdefaults}} (puede copiar este fichero a {{Path|/etc/skel/}} para que lo utilicen los nuevos usuarios), o a un nivel global para cada aplicación con un fichero de recursos en {{Path|/usr/share/X11/app-defaults/}} (como xterm). En estos ficheros generalmente tendrá que cambiar una línea ya existente en lugar de añadir una nueva. Por ejemplo, para cambiar nuestra tipografía en xterm: 

{{Cmd|echo 'XTerm*font: fixed' >> ~/.Xresources
|xrdb -merge ~/.Xresources}}

=== El símbolo del Euro en (X)Emacs ===

Para utilizar el símbolo del Euro en (X)Emacs, añada lo siguiente en {{Path|.Xdefaults}}: 

{{Code|Definir la tipografía para emacs|<pre>
Emacs.default.attributeFont: -*-courier-medium-r-*-*-*-120-*-*-*-*-iso8859-15
</pre>
}}

Para XEmacs (no el plano Emacs), tendrá que trabajar un poco más. En {{Path|/home/user/.xemacs/init.el}}, añada: 

{{Code|Definir la tipografía para xemacs|<pre>
(define-key global-map '(EuroSign) '[€])
</pre>
}}

== NLS ==

Para que la localización basada en mensajes funcione en programas que ofrecen soporte para ello y disponen del ajuste USE <code>nls</code> (Native language support) definido, probablemente deberá tener los programas compilados con este ajuste definido. Las cadenas con los mensajes se instalan en los ficheros {{Path|/usr/share/locale/<localización>/LC_MESSAGES/<paquete>.mo}}. La mayoría de los programas que utilizan nls también necesitan la librería gettext para extraer y utilizar los mensajes apropiados de cada localización. Desde luego, Portage la instalará cuando sea necesaria.

Después de habilitar el ajustes USE <code>nls</code> tendrá que volver a hacer emerge de algunos paquetes:

{{Emerge|params+=--newuse --deep --with-bdeps=y|@world}}

== LINGUAS ==

Existe también una variable de localización adicional llmada [https://devmanual.gentoo.org/general-concepts/linguas/<code>LINGUAS</code>] que afecta a qué ficheros de localización se instalan para los programas basados en gettext y decide qué paquetes de idiomas para el GUI se deben descargar e instalar para determinados paquetes, por ejemplo [[Firefox]], [[Thunderbird]], [[KDE#Localization|kde-base/kde-l10n]] o [[LibreOffice|app-office/libreoffice-l10n]]. Esta variable toma la forma de códigos de idioma separados por un ''espacio'' y un lugar sugerido para definirla es {{Path|[[:/etc/portage/make.conf]]}}: 

{{RootCmd|nano -w /etc/portage/make.conf|output=<pre>
## (Añadir la variable LINGUAS. Por ejemplo para español, alemán e inglés:)
LINGUAS="es de en"
</pre>
}}

Con <code>LINGUAS=""</code> la mayoría de ebuilds deberían instalar únicamente el idioma por defecto del paquete pero ningún fichero <code>LC_MESSAGES</code>. Tampoco deberían instalar ningún otro paquete de idioma. Por ejemplo, la versión estable actual de [[LibreOffice|app-office/libreoffice]] recibe soporte de idioma adicional a través de {{Package|app-office/libreoffice-l10n}} que ofrecer soporte para la descarga e instalación de los paquetes de idioma definidos en <code>LINGUAS</code>. Debido a que el idioma origen de libreoffice es <code>en_US</code>, no aparece la definición para <code>en_US</code> en {{Package|app-office/libreoffice-l10n}}. Por lo tanto con <code>LINGUAS=""</code>, libreoffice aún ofrece soporte para <code>en_US</code>.

Para ver el estado de la traducción del GUI, puntuación, comprobación ortográfica y otras localizaciones de su idioma, por favor, eche un vistazo al [https://translations.documentfoundation.org/ sitio web de traducción de LibreOffice].

Para un control más detallado, se puede definir en cada paquete dentro de {{Path|[[:/etc/portage/package.use]]}}: 

{{FileBox|filename=/etc/portage/package.use|lang=bash|1=
www-client/firefox linguas_es linguas_pt_BR linguas_en_GB
}}

Se pueden listar los programas instalados que utilizan la variable <code>LINGUAS</code> y sus idiomas soportados de la siguiente forma:

{{Cmd|eix -I -U linguas}}

Se puede encontrar una lista de valores para <code>LINGUAS</code> en {{Path|/usr/portage/profiles/desc/linguas.desc}}: 

{{Cmd|grep -i spanish /usr/portage/profiles/desc/linguas.desc|output=<pre>
es - Spanish locale
es_AR - Spanish locale for Argentina
es_CL - Spanish locale for Chile
es_CO - Spanish locale for Columbia
es_CR - Spanish locale for Costa Rica
es_ES - Spanish locale for Spain
es_LA - Spanish locale for Latin America
es_MX - Spanish locale for Mexico
es_VE - Spanish locale for Venezuela
</pre> }}

Después de definir el ajuste USE <code>LINGUAS</code> puede que se necesite volver a hacer emerge de algunos paquetes:

{{Emerge|params+=--newuse --deep --with-bdeps=y|@world}}

== Ver también ==


* [[Handbook:AMD64/Installation/Base#Configure_locales|Configuring locales]] (Gentoo Handbooks)
* [[Evdev#Keyboard_layout|Keyboard layout]] inside the Evdev article
* [[X resources]]

== External resources == 

* [http://www.gnu.org/software/libc/manual/html_node/Locales.html Locales and Internationalization] (gnu.org)

[[Category:Localization]] {{Migrated|originalauthors=Alexander Holler, Steven Lucy, Benny Chuang, Lars Weiler, Tobias Scherbaum, Flammie Pirinen, nightmorph, klondike}}
