Dropbox is a closed source file synchronization and cloud service utility built from open and closed source software.

== Installation ==

=== USE flags ===

{{USEflag|package=net-misc/dropbox|desc=Optional USE flags for {{Package|net-misc/dropbox}}:
|X+yes+yes
|librsync-bundled+yes+yes
}}

=== Emerge ===

{{Emerge|{{Package|net-misc/dropbox}}}}

== Configuration ==

Set the <var>DROPBOX_USERS</var> variable to the regular user name in {{Path|/etc/conf.d/dropbox}}

{{Cmd|nano -w /etc/conf.d/dropbox}}

<code>DROPBOX_USERS="user_name"</code>

Next, add the Dropbox init script to the default runlevel:

{{RootCmd|rc-update add dropbox default}}

Now as a regular user run the command line shown below:

{{Cmd|dropbox start}}

Which will create these directories in the user's directory:

* {{Path|Dropbox/}}
* {{Path|.dropbox-dist/}}
* {{Path|.dropbox/}}

{{Note|The command line above will also launch the Dropbox login window. Enter credentials or register an existing account to finish up the installation.}}

{{Note|The instructions shown above will not result in a GUI launcher for Dropbox being integrated into the window manager or desktop environment, so it seems. At least, some users have reported with XFCE4. A Dropbox launcher may need to be created for each desktop environment.}}

=== Xfce ===

==== Launcher ====

To create a Dropbox launcher for Xfce, 

Download an [https://www.dropbox.com/sh/y30u5e1hnnqmv22/AADAMMM-gFutPWsm_tDDAR8ka/png?dl=0 icon] and copy it into the {{Path|/opt/dropbox/images/hicolor/16x16/}} directory.

Here is a screenshot of the the launcher properties window:

[[File:dropbox_launcher_screenshot.png|352x409px]]

=== KDE ===

==== KDE4 ====
Adding Dropbox ServiceMenu to Dolphin, which allows easy access to most of Dropbox features. It uses Dropbox CLI to generate public urls, and pyndexer to allow sharing directories in public folder.

Download [http://kde-apps.org/CONTENT/content-files/124416-DropboxServiceMenu-0.16.1.tar.gz scripts] and unzip it.
unlessunless
{{Cmd|tar xvzf *DropboxServiceMenu*.tar.gz}}

Then you can use install script, which makes it all himself.
{{Cmd|./install-it.sh}}

After install you must some edit script, because original script-set no longer development (but it still works good).

{{Cmd|nano ~/.kde4/share/kde4/services/ServiceMenus/dropbox-scripts/dropbox_menu.sh}}

Find 37 line

<code>dropbox_path=`${SCRIPTS_PATH}get_dropbox_folder.sh`</code>

And change it to:

<code>dropbox_path="$HOME/Dropbox"</code>

Don't forget add dropbox-daemon to autorun in systemsettings.

[[File:Kde-dropbox-10.png|459x402px]]

==== KDE Plasma 5 ====

KDE Plasma dropped support for legacy Xembed-based systray support. In order for the systray icon to appear Plasma needs to be built with legacy systray support. Please refer to the [[KDE/Plasma_5_upgrade#Missing_systray_icons|Plasma 5 page]] for details.

=== Init systems ===

==== Systemd ====

For <tt>systemd</tt> users: enable it, passing a username as the instance identifier:

{{RootCmd|systemctl enable dropbox@<user_name>}}

Be sure to replace <code><user_name></code> in the example above with an appropriate user name.

By default, service will not display a tray-icon because it does not know which display to use. To repair this edit service:

{{RootCmd|systemctl edit dropbox@<user_name>}}

{{CodeBox|title=Adding display for DropBox|1=
[Service]
Environment=DISPLAY=:0
}}

== Troubleshooting ==

=== Crash with nvidia-drivers ===

When trying to launch Dropbox on a system with nVidia proprietary drivers ({{Package|x11-drivers/nvidia-drivers}}) Dropbox wouldn't start. It turns out that the problem is related to a bundled {{Path|libGL.so.1}} library inside the Dropbox installation.

In order to fix this it is necessary to remove this library and let Dropbox use the system-provided version. This is already done by the ebuild, however Dropbox is automatically updating itself into {{Path|~/.dropbox-dist/}} so it is necessary to also remove the library from there.

{{Cmd|rm ~/.dropbox-dist/dropbox-lnx.x86_64-3.8.8/libGL.so}}

== See also ==

* [[SparkleShare]] - An open source Dropbox alternative based on [[Git]].
* [[Owncloud]] - A self-hosted, cloud aware, sync service containing features similar to Dropbox.

[[Category:Software]]
[[Category:Closed source software]]
