<languages />


{{InfoBox stack
|{{InfoBox homepage|http://fluxbox.org/|header=true}}
|{{InfoBox wikipedia}}
}}

{{Metadata|abstract=В этой статье описаны инструкции по установке оконного менеджера Fluxbox.}}

В этой статье описаны инструкции по установке оконного менеджера Fluxbox.

== Введение ==

=== Общая информация о Fluxbox ===

Для тех кто не знаком с концепцией графических окружений Linux, оконные менеджеры (WMs) - приложения которые запускаются графическим сервером X11 для управления другими графическими приложениями. WM контролирует следующее: где расположено каждое окно, его размеры и на каком рабочем столе оно находится. Это может быть сделано автоматически через набор пользовательских правил или же вручную с помощью мыши или же горячих клавиш на клавиатуре. 

Однако некоторые WM предоставляют больший функционал нежели простой оконный менеджер.В добавок к основному функционалу WM Fluxbox также предоставляет платформу для запуска приложений, настройки горячих клавиш и фоновых изображений. Базовый WM окружения GNOME - Metacity не обладает данным функционалом, однако это корректируется дополнительными приложениями окружения GNOME. Таким образом нельзя сказать, что Fluxbox - легковесная WM. Однако, так как Fluxbox содержит всё необходимое для базового рабочего стола, многие люди используют его вместо больших и тяжёлых [[GNOME]] или [[KDE/ru|KDE]]

Fluxbox также может быть использован как стандартный WM для GNOME или KDE. Например, некоторые люди находят, что Metacity, оконный менеджер окружения GNOME, недостаточно гибок для их нужд, однако Fluxbox не имеет всех встроенных приложений и интеграций, которыми они хотят пользоваться. Поэтому они устанавливают Fluxbox в качестве стандартного оконного менеджера GNOME. Заметим, что при наборе Fluxbox+GNOME могут происходить некоторые эксцессы в связи с перекрыванием возможностей. 

Fluxbox также может быть расширен сторонними программами. Данную методику применяют в ситуациях ограниченности "железных" ресурсов или же по желанию пользователя. 

Эта статья нацелена на новичков в Fluxbox, любопытных людей, а также просто для тех, кто хочет получить опыт в Gentoo/Fluxbox. Статья также показывает, как добиться (при желании) большего функционала при использовании сторонних программ, которые хорошо работают в Fluxbox. 

== Установка ==

Сначала, убедитесь в работоспособности установленного X окружения, как показано в данной статье [https://wiki.gentoo.org/wiki/Xorg/Guide X Server's configuration article].

=== USE-флаги ===

{{USEflag|package=x11-wm/fluxbox}}

=== Специальные инструкции ===

Перед установкой Fluxbox давайте разберёмся в некоторых доступных USE-флагах (описанных ранее). 

Если есть <code>gnome</code> или <code>kde</code> USE-флаг, то Fluxbox будет совместим с данными графическими окружениями. Если необходимы qt, gtk+ или любая другая KDE/GNOME утилита, устанавливайте и настраивайте их отдельно. Флаги <code>gnome</code> или <code>kde</code> просто добавляют поддержку  соответствующих протоколов и не зависят от внешних библиотек. Однако данные флаги увеличивают размер бинарных файлов Fluxbox 

Также есть флаг <code>vim-syntax</code>, который облегчит настройку позже. Этот флаг установит <code>fluxbox-syntax</code> - специальную цветовую схему для текстового редактора {{c|vim}}. Это сделает тексты настроек более читаемыми. Это крошечное дополнение для vim крайне рекомендуется, если вы собираетесь корректировать настройки Fluxbox. 

В конечном итоге, Fluxbox имеет три флага функционала(кастомизации): <code>slit</code>, <code>systray</code> and <code>toolbar</code>. 
Эти флаги предоставляются так, что если пользователю не нужен [http://old.fluxbox-wiki.org/index.php?title=Faqs#What_is_the_slit slit] или [http://fluxbox.org/features/ toolbar], то можно скомпилировать Fluxbox без них. Это полезно, если необходимо запустить максимально облегчённое окружение или если планируются использоваться другие приложения предоставляющие данный функционал. 

Когда определитесь с необходимым набором USE-флагов добавьте их в файл {{Path|/etc/portage/package.use}}. Например, следующая команда настроит Fluxbox для использования с <code>truetype</code> и <code>vim-syntax</code>, но не будет поддерживать GNOME или KDE.

{{RootCmd|echo "x11-wm/fluxbox -gnome -kde truetype vim-syntax" >> /etc/portage/package.use}}

When dealing with WMs a ''must have'' is a program lock to the X display for preventing unauthorized system access. When installing Fluxbox it would be wise to emerge {{Package|x11-misc/xlockmore}} so the system can be locked. It is also advisable to enable autolocking of the screen when the system is idle. The package {{Package|x11-misc/xautolock}} can be used to execute {{c|xlock}} after a specified timeout. The vast majority of users will also want the ability to set their own background images on the desktop; emerging {{Package|x11-terms/eterm}} will make setting desktop background images a possibility. {{c|eterm}} also doubles as a nice X11 terminal. {{Package|media-gfx/feh}} is a more lightweight solution that doubles as a slimmed down image browser.

{{Emerge|x11-misc/xlockmore x11-misc/xautolock x11-terms/eterm media-gfx/feh}}

Для включения автоблокировки в файл {{Path|~/.fluxbox/startup}} перед строкой <code>exec fluxbox</code> добавьте следующее:

{{FileBox|filename=~/.fluxbox/startup|
xautolock -time 15 -locker "xlock -mode blank" -secure &
}}

=== Установка ===

{{Emerge|x11-wm/fluxbox}}

Fluxbox установлен! Однако самого Fluxbox часто недостаточно для нормальной работы. Следующие разделы помогут установить другие полезные пакеты и настроить Fluxbox и сторонние приложения для лучшей работы во благо пользователя =D
Помните, что все эти разделы опциональны, и вы можете спокойно их игнорировать.

== Configuration ==

=== Подготовка X11 ===

Fluxbox is simply another program that runs on X11. If desired, one can {{c|startx}} and then type {{c|fluxbox}} at in an {{c|xterm}} window. However, to say the least, this is annoying. If one does not desire to boot to the GUI, but instead wants to start X11 manually, it is possible to have X automatically load Fluxbox by executing, as a normal (non-root) user: 

{{Cmd|echo "exec startfluxbox" > ~/.xinitrc}}

The above method is also not ideal for most users, as they want to have the desktop environment ''all'' the time; it is a pain to type {{c|startx}} when desiring to use a GUI every time the system boots. It also presents a security risk to the unaware. If the X11 display is locked using {{c|xlock}}, but run X11 from a console, then someone with physical access to the system can switch to that console, kill X11, and use whatever account is logged in. The only way to prevent this is to either background X11 or run it in {{c|screen}}, detach the {{c|screen}} session, then logout of the console. This tedious task should not have to be performed. When graphical login manager this problem does not exist. However, graphical login managers require running X11 as root, which may be a bad thing. There are, as of this writing, no exploits that the author is aware of for the current version, but if one is concerned, then do not use X11 at all or use the above method with {{c|screen}}. Note that this is not a Fluxbox issue; it is an issue with X11 itself. 

Существует множество графических менеджеров входа, из которых можно выбрать любой, на предпочтение пользователя. В данной статье показан пример с использованием менеджера SLIM. SLIM работает довольно хорошо как с Fluxbox, так и с любым другим графическим окружением. 

{{Emerge|x11-misc/slim}}

{{RootCmd|rc-update add xdm default}}

{{Important|Be sure to emerge {{c|slim}} and add '''xdm''' to the bootscript, and not the other way around! Switching these will cause failure. One system-wide configuration file will need to be modified:}}

{{FileBox|filename=/etc/conf.d/xdm|title=Выставление SLiM стандартным менеджером входа |lang=bash|1=
DISPLAYMANAGER="slim"
}}

=== Темы и оформление ===

Эта секция может быть пропущена из соображений минимализма, однако почему бы не разрешить пользователю изменить внешний вид Fluxbox темами, заточеными под Fluxbox, изображениями Gentoo для любой WM и темами в любом *box окружении: 

{{Emerge|x11-themes/commonbox-styles x11-themes/commonbox-styles-extra x11-themes/fluxbox-styles-fluxmod x11-themes/gentoo-artwork}}

=== Первый запуск Fluxbox ===

Теперь Fluxbox готов для первого запуска. Он автоматически создаст директорию {{Path|~/.fluxbox/}} в каждом домашнем каталоге пользователей, где будет хранить настройки и некоторые стандартные значения. 

{{Cmd|startx}}

Если SLIM или любой другой менеджер входа установлен, запустите от рута данную команду, чтобы убедиться в работоспособности: 

{{RootCmd|/etc/init.d/xdm start}}

Выберите Fluxbox в качестве сессии и войдите обычным пользователем. 

Когда Fluxbox запущен, он выглядит очень просто. 	
Пустой рабочий стол с панелью инструментов внизу. При правом клике мыши где угодно на экране появится меню. Из него можно запускать графические приложения и терминал для запуска консольных приложений 

=== Горячие клавиши ===

По умолчанию в Fluxbox очень мало горячих клавиш. Есть наборы для переключения окон, рабочих столов и не более. Перед изменением этого набора вам стоит знать следующее: В файле Fluxbox комбинаций очень странные наименования. "Mod1" - {{Key|Alt}}, "Mod4" - Win клавиша. Ctrl и Shift - {{Key|Ctrl}} и {{Key|Shift}}. Однако обычно лучше создавать комбинации, основывающиеся на Alt/Win клавишах, так как Ctrl и Shift могут быть использованы для горячих клавиш графического приложения 

Все сочетания клавиш независимы друг от друга, так что можете их менять по собственному усмотрению. Для большей информации читайте страницу справки Fluxbox:
(<kbd>man fluxbox</kbd>). 

Можно также изменить горячие клавиши fluxbox. Для этого в текстовом редакторе (не от рута/суперпользователя) откройте файл {{Path|~/.fluxbox/keys}} и начинайте правки на ваш вкус. 

{{FileBox|filename=~/.fluxbox/keys|title=Изменение горячих клавиш|1=
# Блокировка экрана:
Mod4 l   :ExecCommand xlock
  
# Открытие приложений горячими клавишами
Mod1 f   :ExecCommand firefox
Mod1 t   :ExecCommand thunderbird
Mod1 o   :ExecCommand oowriter
Mod1 v   :ExecCommand gvim
  
# Запускает fbrun, который в свою очередь запускает другие
# программы:
Mod1 r   :ExecCommand fbrun
  
# Управление программами
Mod1 4   :Close
Mod1 m   :Minimize
  
# Если используется aterm (emerge x11-terms/aterm), Следующая команда открывает приятный
# прозрачный aterm без рамок, подогнанный под 1024x768
# разрешение, Оставляя комнату свободной для conky. 
Mod1 a   :ExecCommand aterm -name aterm -sl 3000 -tr +sb -sr -sk -bg black -fg \
white -fade 90 -bl -tn xterm -fn \
-misc-fixed-medium-r-normal-*-*-120-*-*-c-*-iso8859-15 -g 116x57
  
# То же самое только с рутовым терминалом.
# рутовый пароль должен быть известен для этого:
Mod1 s   :ExecCommand aterm -name aterm -sl 3000 -tr +sb -sr -sk -bg black -fg \
white -fade 90 -bl -tn xterm -fn \
-misc-fixed-medium-r-normal-*-*-120-*-*-c-*-iso8859-15 -g 116x57 -e su -
  
# Создание скриншота по нажатию на print кнопку; нужно установить media-gfx/imagemagick
None 107 :Exec tm=$(date +%F,%T) && import -window root /tmp/screenshot$tm.png \
&& display /tmp/screenshot$tm.png
Mod1 107 :Exec tm=$(date +%F,%T) && import -frame -window $(xprop _NET_ACTIVE_WINDOW \
-root {{!}} awk '{print $5}') /tmp/screenshot$tm.png && display /tmp/screenshot$tm.png
}}

=== Системный мониторинг ===

It is a common desire to setup a system monitor for X11 on desktop systems. Gkrellm ({{Package|app-admin/gkrellm}} is a commonly used monitor, but in the spirit of Fluxbox minimalism, a simpler monitor will be used. Welcome {{c|conky}}. If desired, use another monitor; there are plenty of instructions elsewhere on the wiki. 

{{Emerge|app-admin/conky}}

Стандатный файл конфигураций для conky слабоват, однако дополнительная информация может быль найдена в man страничке или на [[Conky/Guide|Gentoo Linux Conky Howto]].

=== Иконки ===

Fluxbox по умолчанию не поставляется с утилитой отрисовки иконок на рабочем столе. Всё здесь завязано на использовании горячих клавиш или же меню, вызываемого правым нажатием мыши. iDesk - программа, которая может выполнять функцию отрисовки. Оно рассчитано на пользователей минималистичных оконных менеджеров, таких как fluxbox, чтобы отрисовывать иконки на главном окне и даже поддерживать обалденные эффекты, такие как прозрачность! Не смотря на название, iDesk никак не связан с Apple или Mac. Установка iDesk крайне проста: 

{{Emerge|x11-misc/idesk}}

После установки iDesk его необходимо настроить для отображения иконок. Файл настройки может быть найден как {{Path|~/.ideskrc}}. Это достаточно длительный процесс, и он может быть не полностью раскрытым в этой статье. Следующие источники могут быть полезны для настройки iDesk: <kbd>man idesk</kbd>, [http://idesk.sourceforge.net/wiki/index.php/Idesk-usage Пользовательское руководство iDesk] и [https://forums.gentoo.org/viewtopic-t-87262.html форум Gentoo].

=== Графический файловый менеджер ===

Важно взять на заметку, что Gentoo не нужен файловый менеджер. Вполне возможно, и в самом деле просто (по скромному мнению автора), осуществлять файловые манипуляции из командной строки. Тем не менее, не все согласны...

Many users who are new to Gentoo/Fluxbox are put off by the lack of a graphical file manager such as {{c|nautilus}} in GNOME. Fluxbox itself does not provide such a program, but, as always, one is simple to acquire. There are many choices, but this article will only present three, one for the [[#Gentoo File Manager - Minimalism|gentoo]] who likes text only and two for the user who likes [[#Rox File Manager - Includes Icons|rox]] to [[#Thunar File Manager|thunar]]. It is also possible to install all three and try each one.

==== файловый менеджер gentoo  ====

Gentoo - минималистический файловый менеджер, который предоставляет преимущества графического интерфейса, но без дополнительного балласта огромных менеджеров. 

{{Emerge|app-misc/gentoo}}

{{Note|Файловый менеджер Gentoo - это отдельный проект от Gentoo Linux. Для большей информации, см. Gentoo [http://www.gentoo.org/main/en/name-logo.xml#doc_chap4 Name and Logo Usage Guidelines].}}

Файловый менеджер Gentoo стремится быть полностью настраиваемым через графический интерфейс, так что не стесняйтесь персонализировать.

==== Файловый менеджер rox ====

Rox - файловый менеджер, который использует как иконки, так и текст и очень сильно похож на старый проводник из Windows 

{{Emerge|rox-base/rox}}

Rox работает как "традиционный" файловый менеджер, так что его интерфейс должен быть интуитивным. Если нет, всегда есть страницы с руководствами для детальной информации.

==== Файловый менеджер thunar ====

[http://thunar.xfce.org/ Thunar] легковесный, быстрый файловый менеджер, как и Rox, работает как "традиционный". Он включает иконки и текст, прост в использовании. Хотя Thunar разработан для [http://www.xfce.org Xfce], он приятно дополнит систему на базе Fluxbox. 

{{Emerge|xfce-base/thunar}}

=== Утилиты просмотра изображений ===

Many WMs come with utilities to view pictures (images) in a directory. These applications are small and lightweight, and do not allow for editing (which is assumed to be done by tools such as {{c|gimp}}). This is necessary when using command line, {{c|gentoo}}, or {{c|rox}} as file managers. Although {{c|thunar}} can display image thumbnails having a separate lightweight image viewer is still a good idea. 

{{Emerge|media-gfx/gqview}}

{{c|gqview}} can be launched in any directory, and can browse through any supported picture format. 

=== Выставление темы, фона и автостартовых скриптов ===

Fluxbox имеет целый ряд тем, доступных через контекстное меню. Откройте {{Path|Fluxbox menu}} → {{Path|System Styles}}. Эти темы обычно устанавливают свои собственные фоновые изображения, или монотонный цвет, или различного типа градиент. Большинство пользователей предпочтет установить свой собственный фон, но фон не сохраняется несмотря на выбранную тему. Чтобы сделать это, другой файл Fluxbox должен быть изменен, тот, который регулирует поведение Fluxbox при запуске. Снова запустите текстовый редактор, на это раз указав ему на {{Path|~/.fluxbox/startup}}.

Если этот файл существует, убедитесь в том, что он пустой. Добавьте следующую строку в только что созданный файл, удаляя по мере необходимости, и подставляя значения для CAPS:

{{FileBox|filename=~/.fluxbox/startup|title=Редактирование стартовых скриптов Fluxbox|lang=bash|1=
# Gentoo's Fluxbox startup script
  
# Программы, которым нужно быть запущенными постоянно, в противоположность единожды выполняемым программам,
# это подразумевает указание "&" (амперсанд) в конце команды.
  
# Fluxbox splash-screen
#fbsetbg -C /usr/share/fluxbox/splash.jpg
  
# Установка фонового изображения. Для этого программа должна быть настроена
# (рекомендуется x11-terms/eterm)
#fbsetbg -f PATH_TO_IMAGE
  
# Пользовательские шрифты
#xset +fp PATH_TO_FONT_DIRECTORY
  
# Запуск программы для отображения иконок
#idesk &
  
# Это ДОЛЖНА быть последняя команда!
exec /usr/bin/fluxbox -log ~/.fluxbox/log
}}

=== Создание меню ===

Автор использует текстовый редактор для создания меню. Если это вам показалось интересным и умиляющим, то пропустите эту секцию и переходите сразу к [[#Редактирование меню вручную|Редактирование меню вручную]]. 

Возможно редактировать {{Path|~/.fluxbox/menu}} вручную после использования автоматического генератора (см. следующий раздел) для добавления или удаления неиспользуемых пунктов. Учтите, когда что-то удаляется из этого меню, оно не удаляет пакет из системы; только стирается ссылка из пользовательского файла. Программа все еще может быть запущена из командной строки или альтернативными методами (горячие клавиши, и т. д.). 

If Fluxbox has been installed then a program called {{c|fluxbox-generate_menu}} should also be installed. This program can be used to generate menus. Run it with the following options as a non-root user to generate a menu: 

{{Cmd|fluxbox-generate_menu -is -ds}}

It is recommended {{c|fluxbox-generate_menu}} (listed above) is used instead of other programs that accomplish similar tasks. The reason for the recommendation is that other programs may not understand Gentoo's filesystem directory structure, where {{c|fluxbox-generate_menu}} does.

Это также может быть выполнено из меню Fluxbox. Как правило пункт {{Path|Regen Menu}} в {{Path|Fluxbox}} повторно запускает этот скрипт, ищет новые приложения, установленные с момента его последнего запуска. 

{{Note|Возможно использовать этот метод для авто-генерации меню и сохранять некоторый контроль над ним. Создание и изменение файла {{Path|~/.fluxbox/usermenu}} вручную (см. следующий раздел для синтаксиса) дает пользователю свое меню, которое не сотрется при следующем запуске скрипта.}}

=== Редактирование меню вручную ===

Меню Fluxbox - текстовый файл, имеющий простой синтаксис, который описан в этой секции. Обычно описание меню расположено в файле {{Path|~/.fluxbox/menu}} 

Пункты меню для исполняемых приложений определены через элемент <code>[exec]</code>. Группы меню могут быть определены через <code>[begin]</code> (корневое меню), или между <code>[submenu]</code> и соответствующей строкой <code>[end]</code> (подменю). Например: 

{{FileBox|filename=~/.fluxbox/menu|title=Defining new menu entries|1=
# Custom fluxbox menu
[begin] (Fluxbox)
  (...)
  [exec] (XTerm White on Black) {xterm -ls -fg white -bg black}
  (...)
  [submenu] (More terminals)
    [exec] (Aterm default) {aterm}
    [exec] (Rxvt default) {rxvt}
  [end]
  (...)
[end]
}}

Определение корневого меню начинается с тэга <code>[begin]</code> и заканчивается соответствующим тэгом <code>[end]</code>. Все команды меню (здесь называемые тэгами) заключены в квадратные скобки, имена меню заключены между круглыми скобками и командами в скобках. В этом файле разрешены комментарии для строк, начинающихся с <code>#</code>. 

In the example shown above, the first <code>[exec]</code> line defines a new entry named "XTerm White on Black", which will execute {{c|xterm -ls -fg white -bg black}} as if from a command line. Next is a submenu which is defined using the <code>[submenu]</code> tag, and after that a section called "More terminals", with two more <code>[exec]</code> commands. Any submenu definition must have its corresponding <code>[end]</code> tag. 

Могут быть использованы другие команды для меню. Для более подробной информации прочитайте [http://fluxbox.org/docbook.php официальную документацию] 

=== Выбор стандартных приложений ===

See [[DefaultApplication]].

=== Итог ===

Поздравляем! Fluxbox установлен, настроен и готов к работе. Если появились некоторые вопросы или дополнительные идеи, то не стесняйтесь отредактировать эту страницу, добавить предложение в соответствующую страницу обсуждения, и/или уведомить о багах на [https://bugs.gentoo.org/ Bugzilla]

== Ссылки == 

* The [http://fluxbox-wiki.org Fluxbox wiki].
* Fluxbox developers and users in {{IRC|fluxbox}} on Freenode.net.


[[Category:Window manager]] {{Migrated|originalauthors=Jonathan Smith, Alin Dobre, Joshua Saddler, lack}}
