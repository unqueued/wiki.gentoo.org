<languages />

{{Metadata|abstract=This guide should help users localize their Gentoo Linux distribution to any known locale. It uses Germany as a case-study, since it is translated from the German doc. Includes configuration for use of the euro currency symbol.}}

== Zeitzonen ==

Damit die Systemzeit stets gültig ist, ist es notwendig die Zeitzone des aktuellen Standorts im System zu konfigurieren. Die Anleitungen für Systems auf Basis von [[System_time#OpenRC|OpenRC]] und [[System_time#systemd|systemd]] finden sich im Artikel zu [[System_time|system time]].

== Das Locale System ==

=== Was sind Locales? ===

Eine Locale ist Satz von Informationen die von den meisten Programmen zum setzen von landes- oder sprachspezifischen Einstellungen genutzt werden. Die Locales und ihre Daten sind Teil der Systembibliotheken und sind meist unter {{Path|/usr/share/locale}} gespeichert. Ein Lokalenname folgt dem Schema <code>ab_CD</code> wobei <code>ab</code> ein zwei- oder dreibuchstabiger Sprachcode nach ISO-369 und <code>AB</code> ein Ländercode nach ISO-3166 ist. Varianten von Localen werden durch zusätzliche Endungen unterschieden, etwa <code>en_GB.UTF-8</code> oder <code>de_DE@euro</code>. Mehr Informationen finden sie in der [http://de.wikipedia.org/wiki/Locale Wikipedia] und den dort angegebenen Quellen.

=== Umgebungsvariablen für Locale ===

Die einzelnen Variablen steuern verschiedene Aspekte der Lokalisierung. Jede Variable kann auf einen Localenname wie oben beschrieben gesetzt werden. Die folgende Tabelle fasst die Bedeutung der einzelnen Variablen zusammen: 

{| class="table table-striped" style="text-align: left;" 
|- 
! scope=col width=25% | Name der Variablen
! scope=col width=75% | Erläuterungen
|- 
| <var>LANG</var>
| Setzt alle Localeneinstellungen auf einmal, kann aber durch die LC_* Einstellungen individuell angepasst werden. 
|- 
| <var>LC_COLLATE</var>
| Steuert die Reihenfolge für alphabetische Sortierung von  Strings. Also etwa sortierte Dateiauflistungen. 
|- 
| <var>LC_CTYPE</var>
| Steuert die Behandlung einzelner Zeichen. Etwa welche Zeichen Teil des Alphabets sind, oder welche als numerische Zeichen zählen. Ebenso wird gesteuert welcher Zeichensatz verwendet wird.
|- 
| <var>LC_MESSAGES</var>
| Die Einstellung für Programme die das nachrichten basierte Schema benutzen (die Mehrheit der GNU-Porgramme, in den folgenden Kapiteln finden sich nährer Informationen hierzu).
|- 
| <var>LC_MONETARY</var>
| Definiert die Anzeige der Währungseinheiten und ihrer spezifischen Eigenschaften.
|- 
| <var>LC_NUMERIC</var>
| Legt die Darstellung der Zahlen fest, wie z.B. das Tausendertrennzeichen und das Komma.
|- 
| <var>LC_TIME</var>
| Steuert die Anzeige von Datum und Zeit.
|- 
| <var>LC_PAPER</var>
| Legt das Standardpapierformat fest.
|- 
| <var>LC_ALL</var>
| Eine besondere Variable die alle anderen Einstellungen überschreibt.
|-
|}

{{Note|Einige Programme erwarten eine Sortierung gemäß des normalen Englischem, während andere Lokales eine andere Sortierung benutzen. Aus diesem Grund wird ausdrücklich empfohlen die Variable <var>LC_COLLATE</var> auf den Wert C zu setzen, um die systemweiten Einstellungen zu beeinflussen.}}

{{Warning|Von der Benutzung der Variablen <var>LC_ALL</var> wird dringend abgeraten, da die automatisch alle anderen <var>LC_*</var> Variablen überschreibt, wobei <var>LANG</var> nicht betroffen ist. Dies bedeutet, dass Änderungen an den anderen Variablen durch <var>LC_ALL</var> überdeckt werden, ausser <var>LC_ALL</var> ist leer (Nullstring). is set to a null string. Es ist wahrscheinlich am besten es nicht in einer Startdatei zu setzen.}}

Für gewöhnlich setzen die meisten Nutzer die LANG Konfigurationsvariable lediglich global.

=== Erzeugen bestimmter locales ===

Die meisten Benutzer werden wahrscheinlich ein oder zwei Locale auf ihrem System benutzen. Wenn weitere locale installiert werden sollen, sind diese in {{Path|/etc/locale.gen}} anzugeben. 

{{CodeBox|title=Hinzufügen weiterer locales in /etc/locale.gen|1=
en_GB ISO-8859-1
en_GB.UTF-8 UTF-8
de_DE ISO-8859-1
de_DE@euro ISO-8859-15
}}

{{Note|Wenn keine UTF-8 Locale benutzt werden soll, empfiehlt es sich, eine Locale mit dem Zusatz <code>@euro</code> aus {{Path|/usr/share/i18n/SUPPORTED/}} zu benutzen, um die Darstellung des Euro-Symbol (€) möglich zu machen.}}

Der nächste Schritt ist die Ausführung von {{c|locale-gen}}. Die erzeugt alle in {{Path|/etc/locale.gen}} aufgezählten Locale und schreibt diese in das Archiv unter ({{Path|/usr/lib/locale/locale-archive}}). 

{{RootCmd|locale-gen|output=<pre>
 * Generating 4 locales (this might take a while) with 1 jobs
 *  (1/4) Generating en_GB.ISO-8859-1 ...                       [ ok ]
 *  (2/4) Generating en_GB.UTF-8 ...                            [ ok ]
 *  (3/4) Generating de_DE.ISO-8859-1 ...                       [ ok ]
 *  (4/4) Generating de_DE.ISO-8859-15@euro ...                 [ ok ]
 * Generation complete
</pre>}}

Die Verfügbarkeit der Locales kann man mit dem Befehl {{c|locale -a}} überprüfen.

{{Cmd|locale -a|output=<pre>
C
POSIX
de_DE
de_DE.iso88591
de_DE.iso885915@euro
de_DE@euro
deutsch
en_GB
en_GB.iso88591
en_GB.utf8
german
</pre>}}

Der Inhalt von {{Path|/usr/lib/locale/locale-archive}} kann durch den Befehl {{c|localedef}} angezeigt werden.

{{Cmd|localedef --list-archive}}

Eine ungefilterte Anzeige bekommt man durch das Kommando {{c|strings}}.

{{Cmd|strings /usr/lib/locale/locale-archive {{!}} less}}

=== Setzen einer Locale ===

==== OpenRC ==== 

Bei der Benutzung von OpenRC werden die Locale Einstellungen in Umgebungsvariablen gespeichert, die systemweit in {{Path|/etc/env.d/02locale}} und benutzerspezifisch in {{Path|~/.bashrc}} eingestellt werden. Weitere Einzelheiten finden sich im Artikel zu [[UTF-8#Setting_the_locale|UTF-8]]. Die Systemeinstellungen  ({{Path|/etc/env.d/02locale}}) werden durch {{c|eselect locale}} beeinflusst. Im folgenden Beispiel wird der Wert der Variablen  <var>LANG</var>  auf den wert <code>C</code> gesetzt:

{{RootCmd|eselect locale list|output=<pre>
Available targets for the LANG variable:
  [1]   C 
  [2]   POSIX
  [3]   en_US
  [4]   en_US.iso885915
  [5]   en_US.utf8
  [ ]   (free form)
</pre>}}

{{RootCmd|eselect locale set 1}}

Natürlich ist es auch möglich die Datei von Hand zu editieren und die Sprachvariable zu verändern.

{{FileBox|filename=/etc/env.d/02locale|title=Setzen der default System Locale in /etc/env.d/02locale|lang=bash|1=
LANG="de_DE.UTF-8"
LC_COLLATE="C"
}}

In einer tradidionellen UNIX-Umgebung ist es gebräuchlich, die globalen Einstellungen unverändert auf der <code>C</code> zu lassen. Die Benutzer können ihre Lieblingslocale dann in ihrer eigenen Shell-Umgebung setzen. 

{{FileBox|filename=~/.bashrc|title=Setzen der User Locale|lang=bash|1=
export LANG="de_DE.UTF-8"
export LC_COLLATE="C"
}}

Eine andere Möglichkeit, das System zu konfigurieren, besteht darin, die Standardeinstellung <code>C</code> beizubehalten, aber gleichzeitig die UTF-8-Zeichendarstellung zu aktivieren. Dieses Verhalten wird mit den folgenden Einstellungen in {{Path | /etc/env.d/02locale}} erreicht: 

{{CodeBox|title=Setzen der LC_CTYPE-Variable auf UTF-8|lang=bash|1= LC_CTYPE=de_DE.UTF-8
}}

Mit dem oben genannten Snippet können Benutzer lokalisierte Dateinamen richtig sehen, während sie nicht gezwungen werden, die ausgewählte Sprache vollständig zu benutzen. 

Sobald die richtigen Locale eingerichtet ist, müssen Sie die Umgebungsvariablen aktualisieren, um das System auf die Änderung aufmerksam zu machen.

Für eine systemweite Änderung der Locale:

{{RootCmd|env-update && source /etc/profile}}

Für eine nutzerspezifische Sprachvariable:

{{Cmd|source ~/.bashrc}}

Die nächsten Schriite sind: Beenden des X-Server durch  {{Key|Ctrl}}+{{Key|Alt}}+{{Key|Backspace}}, ausloggen und als normaler Benutzer wieder einloggen. 

Nun wird überprüft ob die Änderungen erfolgreich waren: 

{{Cmd|locale}}

=== Systemd ===

Bei Systemd kommt das {{c|localectl}} Kommando zum Einsatz. Die verfügbaren Locales listet der folgende Befehl auf:

{{RootCmd|localectl list-locales}}

Setzen der gewünschten Locale:

{{RootCmd|<nowiki>localectl set-locale LANG=de_DE.utf8</nowiki>}}

Die Änderung überprüfen:

{{RootCmd|<nowiki>localectl | grep "System Locale"</nowiki>|output=<pre>
   System Locale: LANG=de_DE.utf8
</pre>}}

== Tastaturlayout für die Konsole ==

=== OpenRC ===

Das von der Konsole verwendete Tastaturlayout wird durch die Variable <var>keymap</var> in {{Path | /etc/conf.d/keymaps}} gesetzt. Gültige Werte finden Sie unter {{Pfad | /usr/share/ keymaps/YOUR_ARCH/}}. {{Pfad | i386}} hat weitere Unterteilungen in das Layout ({{Pfad | qwerty/}}, {{Pfad | azerty/}} usw.). Einige Sprachen haben mehrere Möglichkeiten - experimentieren mit den verschiedenen Optionen zu entscheiden, welche passt die Bedürfnisse am besten. 

{{FileBox|filename=/etc/conf.d/keymaps|title=Setzen des Tastaturlayout für die Konsole|lang=bash|1=
keymap="de"
#keymap="de-latin1"
#keymap="de-latin1-nodeadkeys"
}}

=== Systemd ===

Mit systemd kann das Keymap-Layout, das für die Konsole verwendet wird, mit dem Befehl {{c | localectl}} gesetzt werden. Prüfen Sie zunächst die verfügbaren Keymap-Layouts:

{{RootCmd|localectl list-keymaps}}

Setzen des gewünschten Keyboard-Layout:

{{RootCmd|localectl set-keymap it}}

Testen ob der Befehl erfolgreich war:

{{RootCmd|<nowiki>localectl | grep "VC Keymap"</nowiki>|output=<pre>
       VC Keymap: it
</pre>}}

== Keyboard layout for the X server ==

=== OpenRC ===

The keyboard layout to be used by the X server is specified in {{Path|/etc/X11/xorg.conf.d/30-keyboard.conf}} by the <var>XkbLayout</var> option. For details visit the [[Xorg/Guide#Configuring_the_keyboard|Xorg guide]] and the article about [[Keyboard_layout_switching#X11|Keyboard layout switching]].

=== systemd ===

With systemd the keymap layout for the X11 server can be set using the {{c|localectl}} command. First check the available X11 keymap layouts:

{{RootCmd|localectl list-x11-keymap-layouts}}

Then set the requested X11 keymap layout:

{{RootCmd|localectl set-x11-keymap it}}

Finally check if the X11 keymap layout was set correctly:

{{RootCmd|<nowiki>localectl | grep "X11 Layout"</nowiki>|output=<pre>
      X11 Layout: it
</pre>}}

== NLS ==

For message based localization to work in programs that support it and have the [https://packages.gentoo.org/useflags/nls <code>nls</code> (Native Language Support) USE flag], compile the programs with this flag set. Message strings are installed in {{Path|/usr/share/locale/<locale>/LC_MESSAGES/<package>.mo}} files. Most of the programs using NLS also need the gettext library to extract and use localized messages. Of course, Portage will automatically install it when needed.

After enabling the <code>nls</code> USE flag some packages might need to be re-emerged:

{{Emerge|params+=--changed-use --deep --with-bdeps=y|@world}}

== LINGUAS ==

There is also an additional <var>USE_EXPAND</var> flag called <var>[https://packages.gentoo.org/useflags/linguas_en LINGUAS]</var> <ref>[https://devmanual.gentoo.org/general-concepts/linguas/ LINGUAS] in Gentoo Development Guide</ref>, which affects the localization files that get installed in gettext-based programs. The variable takes in ''space''-separated list of language codes, and a suggested place to set it is {{Path|[[:/etc/portage/make.conf|/etc/portage/make.conf]]}}: 

{{RootCmd|nano -w /etc/portage/make.conf|output=<pre>
## (Add in the LINGUAS variable. For instance, for German, Finnish and English:)
LINGUAS="de fi en"
</pre>}}

With <code>LINGUAS=""</code>, most ebuilds would install only the packages' default language but none of the <code>LC_MESSAGES</code> files.

A list of installed programs making use of the <var>[https://packages.gentoo.org/useflags/linguas_en LINGUAS]</var> <var>USE_EXPAND</var> flag and their supported languages can be shown as follows:

{{Cmd|eix -I -U linguas}}

A list of <var>LINGUAS</var> values that can be used is provided as {{Path|/usr/portage/profiles/desc/linguas.desc}}: 

{{Cmd|grep -i french /usr/portage/profiles/desc/linguas.desc|output=<pre>
fr - French locale
fr_CA - French locale for Canada
fr_FR - French locale for France
</pre>
}}

After setting the <var>[https://packages.gentoo.org/useflags/linguas_en LINGUAS]</var> <var>USE_EXPAND</var> flag it may be necessary to re-emerge some packages:

{{Emerge|params+=--changed-use --deep --with-bdeps=y|@world}}

{{Note|<var>LINGUAS</var> as a <var>USE_EXPAND</var>'ed variable is being replaced by the <var>L10N</var> variable (see below). This avoids a conceptual clash with the standard gettext behaviour. After a transition time for packages to be converted, <var>LINGUAS</var> will become a regular environment variable.}}

== L10N ==

Another <var>USE_EXPAND</var> variable called <var>L10N</var> decides which extra localization support will be installed. This is commonly used for downloads of additional language packs by packages. Similar to <var>LINGUAS</var>, the variable takes a space separated list of language tags, and it can be set in {{Path|/etc/portage/make.conf}}:

{{RootCmd|nano -w /etc/portage/make.conf|output=<pre>
## (Add in the L10N variable. For instance, for German and Brazilian Portuguese:)
L10N="de pt-BR"
</pre>}}

To set it per-package, edit {{Path|[[:/etc/portage/package.use]]}} and prefix the requested language packs with "l10n_", as shown in the next example:

{{FileBox|filename=/etc/portage/package.use|lang=bash|1=
app-text/aspell l10n_de l10n_pt_BR
}}

Note that while the common two letter language codes (like <code>de</code> or <code>fr</code>) are identical in <var>LINGUAS</var> and <var>L10N</var>, more complex entries have a different syntax because <var>L10N</var> uses [https://www.w3.org/International/articles/language-tags/ IETF language tags] (aka BCP 47). For example, <code>pt_BR</code> and <code>sr@latin</code> in <var>LINGUAS</var> become <code>pt-BR</code> and <code>sr-Latn</code> in <var>L10N</var>, respectively.

A list of <var>L10N</var> values that can be used is provided as {{Path|/usr/portage/profiles/desc/l10n.desc}}:

{{Cmd|grep -i portuguese /usr/portage/profiles/desc/l10n.desc|output=<pre>
pt - Portuguese
pt-BR - Portuguese (Brazil)
pt-PT - Portuguese (Portugal)
</pre>}}

After setting the <var>L10N</var> <var>USE_EXPAND</var> variable it may be necessary to re-emerge some packages:

{{Emerge|params+=--changed-use --deep --with-bdeps=y|@world}}

== See also ==


* [[Handbook:AMD64/Installation/Base#Configure_locales|Configuring locales]] (Gentoo Handbooks)
* [[Evdev#Keyboard_layout|Keyboard layout]] inside the Evdev article
* [[X resources]]
* [[Localization/Guide/The_Euro_symbol|The Euro symbol]] ([http://unicode-table.com/en/20AC/ €]) for the console and in X

== External resources == 

* [https://www.gnu.org/software/libc/manual/html_node/Locales.html Locales and Internationalization] (gnu.org)
* [https://gentoo.org/support/news-items/2016-06-23-l10n-use_expand.html L10N USE_EXPAND variable replacing LINGUAS]
* [https://blogs.gentoo.org/mgorny/2016/05/16/how-linguas-are-thrice-wrong/ Michał Górny:How LINGUAS are thrice wrong!]
* [https://archives.gentoo.org/gentoo-dev/message/a08ea09c2c8e534fd9bc1146703c66ff <nowiki>[gentoo-dev] [RFC] How to deal with LINGUAS mess?</nowiki>]
* [https://archives.gentoo.org/gentoo-dev/message/41e09d1ddc8b30abb9f9d21d205b7b82 <nowiki>[gentoo-dev] [RFC] Masterplan for solving LINGUAS problems</nowiki>]

== References ==

{{reflist}}


[[Category:Localization]] {{Migrated|originalauthors=Alexander Holler, Steven Lucy, Benny Chuang, Lars Weiler, Tobias Scherbaum, Flammie Pirinen, nightmorph, klondike}}
