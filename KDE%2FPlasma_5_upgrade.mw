Plasma 5 is the next generation of KDE's desktop environment, based on Qt 5 and KDE Frameworks 5. Upgrading is fairly simple, although it cannot be coinstalled with Plasma 4 due to upstream design decisions.

Note that while Plasma 5 is in a good state, it is still under heavy upstream development and is missing some features present in KDE 4.

== Overlay ==
Plasma 5 packages are not yet in the main tree. Install [[layman]] and add the [[KDE/Overlay|KDE Overlay]]:
{{RootCmd|echo "app-portage/layman sync-plugin-portage" >> /etc/portage/package.use|emerge --ask app-portage/layman|layman --fetch --add kde}}

== Profile ==
It is highly recommended to use the Plasma desktop profile as it sets a number of important options to ensure things run smoothly.

In order to choose the most suitable profile, first list what's available:

{{RootCmd|eselect profile list|output=<pre>
  [1]   default/linux/amd64/13.0
  [2]   default/linux/amd64/13.0/selinux
  [3]   default/linux/amd64/13.0/desktop
  [4]   default/linux/amd64/13.0/desktop/gnome
  [5]   default/linux/amd64/13.0/desktop/gnome/systemd
  [6]   default/linux/amd64/13.0/desktop/kde
  [7]   default/linux/amd64/13.0/desktop/kde/systemd
  [8]   default/linux/amd64/13.0/desktop/plasma
  [9]   default/linux/amd64/13.0/desktop/plasma/systemd
  ...
</pre>}}

Then, select the right profile, substituting the appropriate profile number (which may vary between configurations):

{{RootCmd|eselect profile set 8}}

Any packages affected by the profile change need to be rebuilt:
{{RootCmd|emerge --ask --changed-use --deep world}}

== Unmasking and keywording ==
In the following examples please adapt "/path/to/overlay/" with the actual path, this is probably: /var/lib/layman/.

Plasma 5 is currently masked. For your convenience, unmasking files are provided in the overlay:
{{RootCmd|cd /etc/portage/package.unmask|ln -s /path/to/overlay/kde/Documentation/package.unmask/kde-plasma-5.3}}

It's also necessary to unmask the qt5 USE flag:
{{RootCmd|echo "-qt5" >> /etc/portage/profile/use.stable.mask}}

For stable users, you also need to keyword the required packages:
{{RootCmd|cd /etc/portage/package.accept_keywords|
ln -s /path/to/overlay/kde/Documentation/package.keywords/kde-frameworks-5.9.keywords | ln -s /path/to/overlay/kde/Documentation/package.keywords/kde-plasma-5.3.keywords
}}

== Installation ==
The plasma-meta package provides the full Plasma 5 suite:
{{RootCmd|emerge --ask kde-plasma/plasma-meta}}

Alternatively, kde-plasma/plasma-desktop provides the basic desktop, leaving you free to install only the extra packages you require:
{{RootCmd|emerge --ask kde-plasma/plasma-desktop}}

== Troubleshooting ==
The most common issue with upgrading is running into blockers. Unfortunately, some packages just can't be coinstalled so they'll need to be removed. Feel free to drop by [irc://chat.freenode.net/#gentoo #gentoo] or [irc://chat.freenode.net/#gentoo-kde #gentoo-kde] for assistance with resolving any blockers.
