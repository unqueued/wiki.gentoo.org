[http://enlightenment.org/ Enlightenment] is a light weight and eye candy Desktop Environment. This guide will highlight and go trough installing enlightenment E17 or DR17 or 0.17 version. Although the stable 0.16 version is available in the official tree, I'd advise to make the plunge to install the live version. One of the advantages of E17 is that you can really build what you want/need {{Package|x11-wm/enlightenment}} with just enabling or disabling e_modules_$module USE flag which will permit to make a truly light weight and lean DE that nothing could match. [[LXDE]] can almost match the light weight and lean side of E17 with the old style or classical DE touch.

''Enlightenment is not just a window manager for Linux/X11 and others, but also a whole suite of libraries to help you create beautiful user interfaces with much less work than doing it the old fashioned way and fighting with traditional toolkits, not to mention a traditional window manager. It covers uses from small mobile devices like phones all the way to powerful multi-core desktops (which are the primary development environment).''

If you decided to install DR16 version, then go ahead and merge {{Package|x11-wm/enlightenment}} and unmask some package if not all, if need be, to get the latest bits of enlightenment development trunk.

From here on, this article will deal with installing E17 using enlightenment overlay maintained by the enlightenment and gentoo developers.

== Preparation ==
To install E17 you will need {{Package|sys-portage/layman}} with svn support. And then add enlightenement overlay with layman.

{{File|/etc/portage/package.use||sys-portage/layman subversion}}
{{Emerge|sys-portage/layman}}
{{RootCmd|layman -a enlightenment}}

With the premises done, we can now move into configuring the installation before merging the DE.

== Configuration ==
If you have an `/etc/portage/package.[accept_]keywords' directory, you can keywords all the base packages with a single line (lazy way).

{{RootCmd|ln -s /var/lib/layman/enlightenment/scripts/package.keywords.snapshots /etc/portage/package.keywords/enlightenment.keywords}}

Or else you will have to add every necessary package in that file with something like the following.

{{File|/etc/portage/package.accept_keywords||<pre>
# e17-base
=dev-libs/efreet-9999 ** 
=media-libs/evas-9999 ** 
=media-libs/edje-9999 ** 
=dev-libs/eina-9999 ** 
=dev-libs/e_dbus-9999 ** 
=dev-libs/embryo-9999 ** 
=dev-libs/ecore-9999 ** 
=x11-wm/enlightenment-9999 ** 
=dev-libs/eet-9999 ** 
=dev-libs/eeze-9999 ** 
# e17-modules
=x11-plugins/e_modules-cpu-9999 ** 
=x11-plugins/e_modules-eweather-9999 ** 
=x11-plugins/e_modules-mpdule-9999 ** 
=x11-plugins/e_modules-taskbar-9999 ** 
=x11-plugins/e_modules-winselector-9999 ** 
=x11-plugins/e_modules-mail-9999 ** 
=x11-plugins/e_modules-deskshow-9999 ** 
=x11-plugins/e_modules-screenshot-9999 ** 
=x11-plugins/e_modules-tclock-9999 ** 
=x11-plugins/e_modules-calendar-9999 ** 
=x11-plugins/e_modules-alarm-9999 ** 
=x11-plugins/e_modules-everything-aspell-9999 **
=x11-plugins/e_modules-everything-mpris-9999 **
=x11-plugins/e_modules-everything-wallpaper-9999 **
=x11-plugins/e_modules-engage-9999 ** 
=x11-plugins/e_modules-quickaccess-9999 **
# e17-extras
=dev-util/editje-9999 ** 
=net-libs/libeweather-9999 ** 
=x11-libs/elementary-9999 ** 
=x11-plugins/elsa-9999 ** 
=dev-python/python-ecore-9999 ** 
=dev-python/python-edje-9999 ** 
=dev-python/python-elementary-9999 ** 
=dev-python/python-evas-9999 ** 
=x11-plugins/ecomorph-9999 **
=x11-wm/ecomp-9999 **
=x11-themes/detourious-9999 ** 
=x11-themes/efenniht-9999 **
</pre>}}

Notice that there are a few package listed above, especially those after the `e17-extras' commented line that are not yet in the official overlay, so you will have to either add them to your local overlay or add another [https://github.com/tokiclover/bar-overlay bar-overlay] which had them. It's good to be able to get at least a few themes especially those that are supported and hosted on enlightenment trunk. So go ahead and the previous cited overlay if you don't want to make ebuilds.

I will also advise to add a few USE flags as sane default to be able to auto mount removable devices etc.

{{File|/etc/portage/package.use||<pre>
media-libs/evas fontconfig
dev-libs/ecore evas fbcon curl
media-libs/edje cache vim-syntax
x11-wm/enlightenment udev ukit
x11-libs/elementary -quicklaunch thumbnails weather xdg
x11-themes/efennhit gtk
</pre>}}

Some USE flag can be set globally like `jpeg png opengl nls gnutls ssl' ... in `/etc/make.conf'.

== Installation ==
If you don't want to undergo the painful manual installation of each package, you'd better use sets, which are supported by portage >=2.1.11. One can add these two sets to {{Path|/etc/portage/sets/}} to ease merging and rebuilding the packages.

{{File|/etc/portage/sets/e-base||<pre>
=dev-libs/eina-9999
=dev-libs/eet-9999
=media-libs/evas-9999
=dev-libs/ecore-9999
=dev-libs/efreet-9999
=dev-libs/embryo-9999
=media-libs/edje-9999
=dev-libs/e_dbus-9999
=dev-libs/eeze-9999
=x11-wm/enlightenment-9999
</pre>}}

{{File|/etc/portage/sets/e-xtra||<pre>
=dev-python/python-ecore-9999
=dev-python/python-edje-9999
=dev-python/python-elementary-9999
=dev-python/python-evas-9999
=net-libs/libeweather-9999
=x11-libs/elementary-9999
=dev-util/editje-9999
=x11-plugins/ecomorph-9999
=x11-wm/ecomp-9999
=x11-plugins/e_modules-cpu-9999
=x11-plugins/e_modules-engage-9999
=x11-plugins/e_modules-eweather-9999
=x11-plugins/e_modules-everything-aspell-9999
=x11-plugins/e_modules-everything-mpris-9999
=x11-plugins/e_modules-everything-wallpaper-9999
=x11-plugins/e_modules-everything-websearch-9999
=x11-plugins/e_modules-quickaccess-9999
=x11-plugins/e_modules-mail-9999
=x11-plugins/e_modules-screenshot-9999
=x11-plugins/e_modules-taskbar-9999
=x11-plugins/e_modules-tclock-9999
=x11-plugins/e_modules-winselector-9999
=x11-themes/detourious-9999
=x11-themes/efenniht-9999
=x11-plugins/ekbd-9999
=x11-plugins/elsa-9999
</pre>}}

And now one can finish the installation with:
{{Emerge|@e-base}}
{{Emerge|@e-xtra}}

== Tips and Tricks ==
There are two sets to avoid unnecessary issues implied by the order of merging. Now one can start E17 desktop environment by launching the default display manager.

Or else, one can use simple ~/.{xinitrc,bash_log{in,out}} or [[zsh]] version `~/.zlog{in,out}' scheme to avoid unnecessary extra packages to just be able to log into your session. And do not forget to install [[NetworkManager]] and {{Package|gnome-extra/nm-applet}} to be able to switch to different networks easily because, last time I've checked, {{Package|net-misc/connman}} did not work at all despite that there's a E17 module for it.

{{File|[https://github.com/tokiclover/dotfiles/blob/master/.xinitrc ~/.xinitrc]||<pre>
# $Id: ~/.xinitrc, 2012/06/23 02:33:53 -tclover Exp $
eval $(gnome-keyring-daemon --components=pkcs11,secrets,ssh,gpg)
export GNOME_KEYRING_PID
export GNOME_KEYRING_SOCKET
export SSH_AUTH_SOCK
export GPG_AGENT_INFO
dbus-launch nm-applet --sm-disable &
dbus-launch gcm-session &
/usr/libexec/polkit-gnome-authentication-agent-1 &
#xcalib -gc 1.0 -b 0.0 -co 100.0 .icc/sRGB_v4_ICC_preference.icc
laditray &>/dev/null &
unclutter -idle 8 -noevents &
[[ -f ~/.Xmodmap ]] && xmodmap ~/.Xmodmap
xset s off
xset fp+ /usr/share/fonts/TTF-FD/
xset fp+ /usr/share/fonts/artwiz-latin1
xset fp+ /usr/share/fonts/artwiz-aleczapka-en
xset fp+ /usr/share/fonts/terminus
xset fp rehash
xrdb -load ~/.Xresources
#xrdb -merge ~/.Xdefaults
#[[ -f ~/.xcolors/sj-bright ]] && xrdb -merge ~/.xcolors/sj-bright
urxvtd -q -o -f &
case $(tty | cut -b9-) in
    1) exec ck-launch-session dbus-launch --sh-syntax --exit-with-session enlightenment_start.sh;;
    2) exec ck-launch-session dbus-launch --sh-syntax --exit-with-session lxsession             ;;
    3) exec ck-launch-session dbus-launch --sh-syntax --exit-with-session openbox-session       ;;
esac
# vim:fenc=utf-8:ci:pi:sts=0:sw=4:ts=4:</pre>}}
{{Note|Notice that the E17 session uses ecomp+ecomorph combination, edit `~/.xinitrc' by removing the `.sh' suffix accordingly if not using it.}} 
{{File|[https://github.com/tokiclover/dotfiles/blob/master/.bash_login ~/.bash_login]||<pre>
# $Id: ~/.bash_login, 2012/06/23 02:26:52 -tclover Exp $
# auto startx depending on the tty
[[ -z $DISPLAY ]] && [[ $UID != 0 ]] && [[ $(tty | cut -c9) -le 3 ]] &&
    startx &> ~/.xsession-errors &
# start gnome-keyring
[[ -n $DISPLAY ]] && [[ -z $GNOME_KEYRING_PID ]] && {
    eval $(gnome-keyring-daemon)
    export GNOME_KEYRING_PID
    export GNOME_KEYRING_SOCKET
    export SSH_AUTH_SOCK
    export GPG_AGENT_INFO
}
# vim:fenc=utf-8:ci:pi:sts=0:sw=4:ts=4:</pre>}}
A zsh version could be used instead.
{{File|[https://github.com/tokiclover/dotfiles/blob/master/.zlogin ~/.zlogin]||<pre>
# $Id: ~/.zlogin, 2012/06/23 02:27:12 -tclover Exp $
# auto startx depending on the tty
if [[ -z $DISPLAY ]] && [[ $EUID != 0 ]] && [[ ${$(tty)#*tty} -le 3 ]] { 
	startx &> ~/.xsession-errors &
}
# start gnome-keyring
if [[ -n $DISPLAY ]] && [[ -z $GNOME_KEYRING_PID ]] {
	eval $(gnome-keyring-daemon)
	export GNOME_KEYRING_PID
	export GNOME_KEYRING_SOCKET
	export SSH_AUTH_SOCK
	export GPG_AGENT_INFO
}
# vim:fenc=utf-8:ci:pi:sts=0:sw=4:ts=4:</pre>}}
{{File|[https://github.com/tokiclover/dotfiles/blob/master/.bash_logout ~/.bash_logout]||<pre>
# $Id: ~/.bash_logout, 2011/11/15 -tclover Exp $
[[ -n $GNOME_KEYRING_PID ]] && kill -TERM $GNOME_KEYRING_PID
[[ -n $DISPLAY ]] && [[ $UID != 0 ]] && fhp &>/dev/null
# vim:fenc=utf-8:ci:pi:sts=0:sw=4:ts=4:</pre>}}
{{File|[https://github.com/tokiclover/dotfiles/blob/master/.zlogout ~/.zlogout]||<pre>
# $Id: ~/.zlogout$
if [[ -n $GNOME_KEYRING_PID ]] { kill -TERM $GNOME_KEYRING_PID }
if [[ -n $DISPLAY ]] && [[ $EUID != 0 ]] { fhp &>/dev/null }
# vim:fenc=utf-8:ci:pi:sts=0:sw=4:ts=4:</pre>}}

The previous can be used to login into an E17 session easily without needing any ''middle man'' like {{Package|x11-misc/slim}} depending on tty or console used to log in.

{{Important|You do need the *kits ({{Package|sys-auth/consolekit}} and {{Package|sys-auth/polkit}} {{Package|sys-fs/udisks}}) associated to {{Package|lxde-base/lxpolkit}} or {{Package|gnome-extra/polkit-gnome}} or {{Package|sys-auth/polkit-kde}} to get a valid session and be able to automount removable devices. Additionally, you will need the following file.}}

{{File|/etc/polkit-1/localauthority/50-local.d/11-udisks.pkla||<pre>
[udisks full access]
Identity=unix-user:users
Action=org.freedesktop.udisks.*
ResultAny=yes</pre>}}

== Additional applications ==
You may need a good and light weight terminal emulator: {{Package|x11-terms/rxvt-unicode}}, you may consider installing a perl module for copy/paste and url handling [https://github.com/tokiclover/bar-overlay x11-misc/urxvt-perls].

You may need a burning application: {{Package|app-cdr/brasero}} or {{Package|app-cdr/xfburn}} or a KDE alternative.

You may need a document viewer: you can try the excellent {{Package|app-text/evince}} or {{Package|kde-base/okular}}.

You may need color profile application: {{Package|gnome-extra/gnome-color-manager}} or {{Package|kde-base/kgamma}} or even better {{Package|x11-misc/xcalib}}.

You may try {{Package|www-client/midori}} or {{Package|www-client/xxxterm}} but avoid >=net-libs/webkit-gtk-1.8 or gtk+:3.

You may need a calculator: {{Package|x11-apps/xcalc}} or {{Package|kde-base/kcalc}} or {{Package|gnome-extra/gcalctool}}.

You may need a graphical file manager: try {{Package|x11-misc/pcmanfm}} or {{Package|x11-misc/thunar}} because the file manager mdule is not that usable.

For a complete office suite do no hesitate to merge {{Package|app-office/libreoffice}} moloch or the binary package if it's too much for you machine.

Tired of entering again and again your wifi pass and so on? You may look at {{Package|gnome-base/gnome-keyring}} or enable gnome-keyring USE flag globally ({{Package|sys-auth/pambase}} has that USE flag for example).

etc.

{{Warning|I'd advise to avoid gtk+:3 apps and mask them to be safe and get something that works without too much hassle. There are many threads in the forums about GNOME3 package.mask lists.}}

[[Category:Desktop environment]]
