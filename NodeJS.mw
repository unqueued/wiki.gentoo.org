{{Warning|This is a work in progress!}}

== About Installation ==

This guide will walk through installing NodeJS behind Nginx and using monic to keep node instances alive. Since NodeJS is a single-process application, we will launch multiple instances of the application and load balance using Nginx.

== Install Packages ==

{{Emerge|monit nginx nodejs}}

== Configure Monit ==

{{FileBox|filename=/etc/monit.d/my-app|title=Auto restart NodeJS App|1=
check process mysql with pidfile /var/run/my-app/mysqld.pid
    start program = "/bin/bash -c 'rc-service mysql start'"
    stop program  = "/bin/bash -c 'rc-service mysql stop'"
}}

== Configure Nginx ==

{{FileBox|filename=/etc/nginx/nginx.conf|title=Nginx Config|1=
http {
    upstream myapp1 {
        least_conn;
        server srv1.example.com;
        server srv2.example.com;
        server srv3.example.com;
    }

    server {
        listen 80;

        location / {
            proxy_pass http://myapp1;
        }
    }
}
}}
