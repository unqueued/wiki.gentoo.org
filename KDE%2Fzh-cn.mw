<languages />


{{InfoBox stack
|{{InfoBox homepage|http://www.kde.org/|header=true}}
|{{InfoBox wikipedia}}
|{{InfoBox gdoc|KDE}}
}}

'''KDE''' 是自由软件社区，提供为数众多的应用程序，包括流行的 Plasma 桌面环境。

Gentoo 有着优秀的 KDE 支持，其中包括传统 KDE SC 4 的集合，下一代的 KDE 框架，Plasma 5，Application 5，同时也支持其他大量基于 KDE 的软件。 

== 准备 ==

=== 配置 ===

选择一个适当的[[Profile (Portage)|Portage配置]]，尽管这不是必须的，但是我们仍建议这么做。因为这会设置一些全局或针对特定软件包的 USE 旗标来确保你能够获得顺畅的 KDE 使用体验。

为了选择适当的[[Profile (Portage)|Portage配置]]，首先需要列出有哪些可用的[[Profile (Portage)|Portage配置]]：

{{RootCmd|eselect profile list|output=<pre>
  [1]   default/linux/amd64/13.0
  [2]   default/linux/amd64/13.0/selinux
  [3]   default/linux/amd64/13.0/desktop
  [4]   default/linux/amd64/13.0/desktop/gnome
  [5]   default/linux/amd64/13.0/desktop/gnome/systemd
  [6]   default/linux/amd64/13.0/desktop/kde
  [7]   default/linux/amd64/13.0/desktop/kde/systemd
  [8]   default/linux/amd64/13.0/desktop/plasma
  [9]   default/linux/amd64/13.0/desktop/plasma/systemd
  ...
</pre>}}

然后选择正确的[[Profile (Portage)|Portage配置]]，把下面的命令中的<code>X</code>替换为合适的[[Profile (Portage)|Portage配置]]对应的数字：

{{RootCmd|eselect profile set X}}

如果需要一个完整的 KDE 桌面环境，建议使用<code>desktop/kde</code>，这是为 OpenRC 配置好的。如果你使用Systemd，请选择<code>desktop/kde/systemd</code>。 如果要使用 Plasma 5 桌面环境，请选择<code>desktop/plasma</code>（OpenRC） 或者 <code>desktop/plasma/systemd</code> （Systemd）。 

=== 服务 ===

在安装 KDE SC 之前，建议先设置并启用几个别的服务。它们当中的一部分已经由 ''desktop/kde'' 或 ''desktop'' 的 [[Profile (Portage)|Portage配置]]设定好了。这些服务是：
* [[D-Bus]]: 启用 D-Bus 信息总线系统（D-Bus message bus system）。
* [[polkit]]: 启用 polkit 框架以控制系统中的服务的权限。
* [[udev]]: 启用对 udev —— Linux 下的动态的、常驻后台的自动为设备命名的服务（dynamic and persistent device naming service） ——的支持。 
* [[udisks]]: 启用一些与存储相关的服务。

根据上面的链接中的信息来了解如何设置并启用那些服务。注意：别的 USE 旗标组合从技术上可能是可以让它们运行的，但是可能会出现不支持，或者是带来不可预期的功能缺失（特别是如果选择的 USE 旗标是与完整的 KDE 桌面环境冲突的）。

=== X server ===

阅读下列来自 [[X server]] 的介绍来设置 X 环境。

=== 框架（Frameworks） ===

KDE Frameworks 5 是为KDE Plasma 5 和 KDE Applications 5 的运行库和软件框架的合集，但是可能会受到一些 Qt 程序的影响。

KDE 框架大部分是运行库，只提供少量的面对用户的功能。它不需要被手动安装 —— 需要的软件包会被作为别的软件包的依赖自动安装。

=== Available versions ===

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Gentoo
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Repository
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Frameworks 5.23.0
| kde-frameworks/*-5.23.0
| gentoo
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Frameworks 5.24.0
| kde-frameworks/*-5.24.0
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Frameworks master branch
| kde-frameworks/*-9999
| [[KDE/Overlay|kde overlay]]
| Live version
|}

=== Plasma ===

Plasma 5 是 KDE 的下一代桌面环境，基于 Qt 5 和 KDE Framework 5 。 升级它相当简单，尽管上游使它不能和 Plasma 4 共存。

注意，虽然 Plasma 5 现在看起来还不错，但上游仍处于繁重的开发中，功能还不如 KDE 4 完整。

=== Available versions ===

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Gentoo
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Repository
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Plasma 5.6.5
| kde-plasma/plasma-meta-5.6.5
| gentoo
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Plasma 5.7.2
| kde-plasma/plasma-meta-5.7.2
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Plasma 5.7 stable branch
| kde-plasma/plasma-meta-5.7.49.9999
| [[KDE/Overlay|kde overlay]]
| Live version
|-
| KDE Plasma master branch
| kde-plasma/plasma-meta-9999
| [[KDE/Overlay|kde overlay]]
| Live version
|}

{{Note/zh-cn|在继续安装之前，请确保选择了一个 Plasma 的[[Profile (Portage)|Portage配置]]。 KDE 4 用户则需要一些额外的步骤。}}

==== 从 KDE SC 4 升级 ====

能在这个 [[KDE/Plasma_5_upgrade|升级页面]] 找到有关如何从 KDE SC 4 升级， 迁移和疑难解答的信息。

==== 安装 ====

 {{Package|kde-plasma/plasma-meta}} 包提供完整的 Plasma 5 套件，由以下 USE 旗标配置：
{{USEflag|package=kde-plasma/plasma-meta|desc=}}

{{RootCmd|emerge --ask kde-plasma/plasma-meta}}

你也可以选择通过安装 {{Package|kde-plasma/plasma-desktop}} 获得一个基本的桌面环境，让你用户自己安装需要的软件：

{{RootCmd|emerge --ask kde-plasma/plasma-desktop}}

{{Note/zh-cn|请注意这样的安装方式会导致一些重要的包缺失，比如 {{Package|kde-plasma/powerdevil}} （电源管理，睡眠和休眠选项）和 {{Package|kde-plasma/systemsettings}} ，如果你用了上面这种方式请手动安装这两个软件包。}}

==== 小工具 ====

{{Package|kde-plasma/kdeplasma-addons}} 提供了很多有用的小工具：

{{Emerge|kde-plasma/kdeplasma-addons}}

==== 显示管理器 ====

[[SDDM]] （Simple Desktop Display Manager） 是被推荐的登录管理器并且它默认会通过 {{package|kde-plasma/plasma-meta}} 被自动安装。 另外你也可以选择使用 [[LightDM]] ,这需要为 {{package|kde-plasma/plasma-meta}} 设置 <code>-sddm</code> 的 USE 旗标， 同时还要修改 {{Path| /etc/conf.d/xdm}} 中的设置。 同时在发生错误时请阅读 [[SDDM]] 页面。

=== 应用程序（KDE Applications） ===

与很多基于 Qt 5/KDE Frameworks 5 和/或 基于 Qt 4/KDElibs 4 的应用程序和支持库一起发布（而后者依旧处于长期服务模式）。在Portage 树当中，使用slots <code>4</code> 和 <code>5</code> 来区分。 上游正在进行从 KDE 4 到 5 的迁移，这可以从每次主要版本更新当中看出。这之中即有已经成熟的 Plasma 5 程序，也有新迁移过来的程序。注意，这同时意味着大版本更新时可能会造成依赖的冲突。当两个不同的软件包依赖于 slot 4 和 5 的相同库的时候将无法被安装。元包会说明这种情况，并且在这种情况下建议使用更加可靠的版本而不是新迁移的版本。

=== 可用版本 ===

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Gentoo
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Repository
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Applications 15.12.3
| kde-apps/kde-apps-meta-15.12.3
| gentoo
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Applications 16.04.3
| kde-apps/kde-apps-meta-16.04.3
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Applications 16.08 stable branch
| kde-apps/kde-apps-meta-16.08.49.9999
| [[KDE/Overlay|kde overlay]]
| Live version
|-
| KDE Applications master branch
| kde-apps/kde-apps-meta-9999
| [[KDE/Overlay|kde overlay]]
| Live version
|}

{{Package|kde-apps/kde-apps-meta}} 包提供完整的应用程序集合：

{{RootCmd|emerge --ask kde-apps/kde-apps-meta}}

这个元包会安装以下包（你也可以选择手动安装这些包）：

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Package name
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Description
|-
| {{Package|kde-apps/kdeaccessibility-meta}}
| Accessibility applications and utilities.
|-
| {{Package|kde-apps/kdeadmin-meta}}
| Administrative utilities, which helps in managing the system.
|-
| {{Package|kde-apps/kdecore-meta}}
| Basic applications such as file browser, editor, terminal emulator.
|-
| {{Package|kde-apps/kdeedu-meta}}
| Educational applications and games.
|-
| {{Package|kde-apps/kdegames-meta}}
| Standard desktop games.
|-
| {{Package|kde-apps/kdegraphics-meta}}
| Graphics applications such as image viewers, color pickers, etc.
|-
| {{Package|kde-apps/kdemultimedia-meta}}
| Audio and video playback applications and services.
|-
| {{Package|kde-apps/kdenetwork-meta}}
| Network applications and VNC services.
|-
| {{Package|kde-apps/kdepim-meta}}
| PIM applications such as emailer, addressbook, organizer, etc.
|-
| {{Package|kde-apps/kdesdk-meta}}
| Various development tools.
|-
| {{Package|kde-apps/kdeutils-meta}}
| Standard desktop utilities such as a archiver, a calculator, etc.
|-
| {{Package|kde-apps/kdewebdev-meta}}
| Web development tools.
|-
| {{Package|kde-apps/kdeartwork-meta}}
| Emoticons, wallpapers, etc.
|}

== 本地化 ==

为了[[localization|本地化]] KDE，安装 {{Package|kde-apps/kde4-l10n}}。 如果只需要一部分语言，请事先在{{Path|/etc/portage/make.conf}}中设置好 <var>LINGUAS</var> 变量。

比如需要德语，可以这样设置：

{{FileBox|filename=/etc/portage/make.conf|title=Setting the <var>LINGUAS</var> variable for the German language|lang=bash|1=
LINGUAS="de"
}}

{{Emerge|kde-apps/kde4-l10n}}

如果要使 {{Package|kde-apps/kdepim-meta}} 中的包本地化，请安装 {{Package|kde-apps/kdepim-l10n}}。

{{Package|app-office/calligra}} 有它自己本地化程序包： {{package|app-office/calligra-l10n}}.

=== KDE PIM ===

Two variants of KDE PIM, the KDE personal information management suite (including {{Package|kde-apps/kmail}}, {{Package|kde-apps/kontact}}, and {{Package|kde-apps/korganizer}}) are currently available, still based on Qt 4 / KDElibs 4. The current, up-to-date version including an Akonadi-based kmail (also known as kmail2) is installed by default. By locally placing a [https://gitweb.gentoo.org/proj/kde.git/plain/Documentation/package.mask/kdepim-4.7 mask file] into {{Path|/etc/portage/package.mask}}, the "[https://launchpad.net/~pali/+archive/ubuntu/kdepim-noakonadi noakonadi fork]" is used including a non-Akonadi kmail (also known as kmail1).

=== kdesu5 ===

该工具由 {{Package|kde-plasma/kde-cli-tools}} 提供，用于以 {{c|root}} 身份运行 GUI 程序。如果安装时启用了 <code>kdesu</code> 这个 USE 旗标，一个 {{Package|kde-frameworks/kdesu}} 的图形前端会被安装，你可以通过执行 {{c|kdesu5}} 来使用它。

请务必确保那条命令'''真的'''需要以 {{c|root}} 身份执行，而不是只需要添加普通用户到相关的用户组或者不需要特权也能运行。

== KDE SC 4 ==

KDE SC 4 在前段时间是 KDE 的主要版本。尽管它已经不再被上游所维护，但是毫无疑问它是很稳定的，并且对于大部分用户更建议使用它。 随着上游对于 KDE SC 4 的支持正慢慢迎来结束，现在所放出的包的版本号可能不符合 SC 的其余部分。 举个例子， <code>KDE Workspace</code> 和 <code>KDE PIM</code>的最后一次错误修复更新的版本号分别是 4.14.22 和 4.14.10，而这时 <code>kdelibs</code> 已经更新到了 4.14.X ，远远超过了它们。与此同时，从 4.14.3 开始依旧有基于 KDE 4 的应用程序在不间断的接受一些错误修复的更新。

{{Warning|Users need to be aware that Plasma 4 has been end-of-life since 19th August 2015, meaning no security bugs have been fixed since then.}}

=== 可用版本 ===

{| {{{!}} class{{=}}"table"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE version
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Plasma 4.11.22
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}; testing for {{Keyword|arm}}
|}

{{Emerge|kde-base/kdebase-startkde}}

This will pull in additional <code>kde-plasma/</code> and <code>kde-frameworks/</code> packages.

{{Note|Please note that previously used meta packages {{Package|kde-apps/kde-meta}} and {{Package|kde-apps/kdebase-meta}} are unfit as they are pulling in new Plasma 5 already.}}

=== 小工具 ===

一些实用的小工具可以通过安装 {{Package|kde-base/kdeplasma-addons}}  安装：

{{Emerge|kde-base/kdeplasma-addons}}

=== 显示管理器 ===

KDM （KDE 显示管理器，KDE Display Manager）被推荐用于 KDE 并且在没有别的显示管理器时默认会由{{package|kde-apps/kdebase-meta}} 自动安装。

{{Emerge|kde-base/kdm}}

==== OpenRC ====

把 KDM 设置为默认显示管理器（ [[display manager]]）：

{{FileBox|filename=/etc/conf.d/xdm|lang=bash|1=
DISPLAYMANAGER="kdm"
}}

把 xdm 添加到默认启动级别（runlevel）来使 KDM 开机启动：

{{RootCmd|rc-update add xdm default}}

如果要现在立即启动 KDM ：

{{RootCmd|/etc/init.d/xdm start}}

==== Systemd ====

通过 {{c|systemctl}}  使 KDM 开机启动：

{{RootCmd|systemctl enable kdm}}

现在启动 KDM ：

{{RootCmd|systemctl start kdm}}

== 更多KDE软件 ==

最主要的 KDE 应用程序在 Porage 树的
[http://packages.gentoo.org/category/kde-apps kde-apps] 和[http://packages.gentoo.org/category/kde-misc kde-misc] 分类中。

== 另请参阅 ==

* [[KDE/Hints|KDE 提示]] - 一些关于如何在 KDE 桌面环境中工作的提示。
* [[KDE/Troubleshooting|KDE 疑难解答]] - 一篇额外的关于 KDE 的疑难解答的文章。
* [[KDE/KDEPIM-4.7 upgrade/]]
* [[KDE/Overlay|KDE Overlay]] - 介绍如何添加 Gentoo 的 KDE Overlay。
* [[KDE/Removal|KDE的删除和清理 ]] - 关于如何删除并清理 KDE 的一些介绍。

== 外部资源 ==

* [http://userbase.kde.org/ 官方 KDE 用户 Wiki ]
* [http://forum.kde.org/ 官方 KDE 论坛]
* [http://www.kde-apps.org/ KDE-Apps.org]
* [http://www.kde-look.org/ KDE-Look.org]
* [http://www.kde-files.org/ KDE-Files.org]

[[Category:KDE]] [[Category:Desktop environment]]
