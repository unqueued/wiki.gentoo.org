<languages />


{{InfoBox stack
|{{InfoBox homepage|http://www.kde.org/|header=true}}
|{{InfoBox wikipedia}}
|{{InfoBox gdoc|KDE}}
}}

'''KDE''' 是自由软件社区，提供为数众多的应用程序，包括流行的 Plasma 桌面环境。

Gentoo 有着优秀的 KDE 支持，其中包括传统 KDE SC 4 的综合性包装，下一代的 KDE 框架，Plasma，Application 5，同样也支持其他大量基于 KDE 的软件。 

== 准备 ==

=== 配置 ===

选择一个适当的[[Profile (Portage)|Portage配置]]，尽管这不是必须的，但是我们仍建议这么做。因为这会设置一些全局或针对特定软件包的 USE 旗标来确保你能够获得顺畅的 KDE 使用体验。

为了选择适当的[[Profile (Portage)|Portage配置]]，首先需要列出有哪些可用的[[Profile (Portage)|Portage配置]]：

{{RootCmd|eselect profile list|output=<pre>
  [1]   default/linux/amd64/13.0
  [2]   default/linux/amd64/13.0/selinux
  [3]   default/linux/amd64/13.0/desktop
  [4]   default/linux/amd64/13.0/desktop/gnome
  [5]   default/linux/amd64/13.0/desktop/gnome/systemd
  [6]   default/linux/amd64/13.0/desktop/kde
  [7]   default/linux/amd64/13.0/desktop/kde/systemd
  [8]   default/linux/amd64/13.0/desktop/plasma
  [9]   default/linux/amd64/13.0/desktop/plasma/systemd
  ...
</pre>}}

然后选择正确的[[Profile (Portage)|Portage配置]]，把下面的命令中的<code>X</code>替换为合适的[[Profile (Portage)|Portage配置]]对应的数字：

{{RootCmd|eselect profile set X}}

如果需要一个完整的 KDE 桌面环境，建议使用<code>desktop/kde</code>，这是为 OpenRC 配置好的。如果你使用Systemd，请选择<code>desktop/kde/systemd</code>。 如果要使用 Plasma 5 桌面环境，请选择<code>desktop/plasma</code>（OpenRC） 或者 <code>desktop/plasma/systemd</code> （Systemd）。

=== 服务 ===

在安装 KDE SC 之前，建议先设置并启用几个别的服务。它们当中的一部分已经由 ''desktop/kde'' 或 ''desktop'' 的 [[Profile (Portage)|Portage配置]]设定好了。这些服务是：
* [[D-Bus]]: 启用 D-Bus 信息总线系统（D-Bus message bus system）。
* [[polkit]]: 启用 polkit 框架以控制系统中的服务的权限。
* [[udev]]: 启用对 udev —— Linux 下的动态的、常驻后台的自动为设备命名的服务（dynamic and persistent device naming service） ——的支持。 
* [[udisks]]: 启用一些与存储相关的服务。

根据上面的链接中的信息来了解如何设置并启用那些服务。注意：别的 USE 旗标组合从技术上可能是可以让它们运行的，但是可能会出现不支持，或者是带来不可预期的功能缺失（特别是如果选择的 USE 旗标是与完整的 KDE 桌面环境冲突的）。

=== X server ===

阅读下列来自 [[X server]] 的介绍来设置 X 环境。

== KDE SC 4 ==

KDE SC 4 在前段时间是 KDE 的主要版本。尽管它已经不再被上游所维护，但是毫无疑问它是很稳定的，并且对于大部分用户更建议使用它。 随着上游对于 KDE SC 4 的支持正慢慢迎来结束，现在所放出的包的版本号可能不符合 SC 的其余部分。 举个例子， <code>KDE Workspace</code> 和 <code>KDE PIM</code>的最后一次错误修复更新的版本号分别是 4.14.22 和 4.14.10，而这时 <code>kdelibs</code> 已经更新到了 4.14.X ，远远超过了它们。与此同时，从 4.14.3 开始依旧有基于 KDE 4 的应用程序在不间断的接受一些错误修复的更新。

=== 可用版本 ===

{| {{{!}} class{{=}}"table"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE version
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE SC 4.14.3
| Stable for {{Keyword|amd64}}, {{Keyword|ppc}}, {{Keyword|ppc64}} and {{Keyword|x86}}; testing for {{Keyword|arm}}
|-
| KDE Workspaces 4.11.19
| Stable for {{Keyword|amd64}}, {{Keyword|ppc}}, {{Keyword|ppc64}} and {{Keyword|x86}}; testing for {{Keyword|arm}}
|-
| KDE Workspaces 4.11.22
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}; testing for {{Keyword|arm}}, {{Keyword|ppc}} and {{Keyword|ppc64}}
|-
| KDE Applications 15.08.3 (KDE4-based)
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}
|}

=== 软件包 ===

在 Gentoo 中有许多不同的包可以安装 KDE 环境：
* {{Package|kde-apps/kde-meta}} - 完整的 KDE 套件。
* {{Package|kde-apps/kdebase-meta}} - 基本的 KDE 环境。
* {{Package|kde-base/kdebase-startkde}} - 一个非常小的，不保证可用性的 KDE 环境（没有 KDE 应用程序或美化）。

一般建议在最初安装 {{Package|kde-apps/kdebase-meta}} ，然后在需要的时候再安装额外的软件。

{{Emerge|kde-apps/kdebase-meta}}

另外还有一些元包可以安装 KDE 套件的一部分：

* {{Package|kde-apps/kdeaccessibility-meta}} - “无障碍”程序和工具。
* {{Package|kde-apps/kdeadmin-meta}} - 管理工具，用以管理系统。
* {{Package|kde-apps/kdeartwork-meta}} - 额外的主题，屏幕保护程序等等。
* {{Package|kde-base/kdebindings-meta}} - 一些语言的集合。
* {{Package|kde-apps/kdeedu-meta}} - 教育用程序和游戏。
* {{Package|kde-apps/kdegames-meta}} - 标准的桌面游戏。
* {{Package|kde-apps/kdegraphics-meta}} - 图形方面的程序，例如图片查看器，取色器等待。
* {{Package|kde-apps/kdemultimedia-meta}} - 多媒体程序和服务。
* {{Package|kde-apps/kdenetwork-meta}} - 网络程序和 VNC 服务。
* {{Package|kde-apps/kdepim-meta}} - 个人信息管理程序比如电子邮件客户端，通讯录等等。
* {{Package|kde-apps/kdesdk-meta}} - 一些开发用工具。
* {{Package|kde-apps/kdetoys-meta}} - 一些像玩具的程序（Toy like applications）。
* {{Package|kde-apps/kdeutils-meta}} - 基本的桌面程序，比如归档管理器，计算器等等。
* {{Package|kde-apps/kdewebdev-meta}} - 网络部署工具。

=== 小工具 ===

一些实用的小工具可以通过安装 {{Package|kde-base/kdeplasma-addons}}  安装：

{{Emerge|kde-base/kdeplasma-addons}}

== 本地化 ==

为了[[localization|本地化]] KDE，安装 {{Package|kde-apps/kde4-l10n}}。 如果只需要一部分语言，请事先在{{Path|/etc/portage/make.conf}}中设置好 <var>LINGUAS</var> 变量。

比如需要德语，可以这样设置：

{{FileBox|filename=/etc/portage/make.conf|title=Setting the <var>LINGUAS</var> variable for the German language|lang=bash|1=
LINGUAS="de"
}}

{{Emerge|kde-apps/kde4-l10n}}

如果要使 {{Package|kde-apps/kdepim-meta}} 中的包本地化，请安装 {{Package|kde-apps/kdepim-l10n}}。

{{Package|app-office/calligra}} 有它自己本地化程序包： {{package|app-office/calligra-l10n}}.

=== 显示管理器 ===

KDM （KDE 显示管理器，KDE Display Manager）被推荐用于 KDE 并且在没有别的显示管理器时默认会由{{package|kde-apps/kdebase-meta}} 自动安装。

==== OpenRC ====

把 KDM 设置为默认显示管理器（ [[display manager]]）：

{{FileBox|filename=/etc/conf.d/xdm|lang=bash|1=
DISPLAYMANAGER="kdm"
}}

把 xdm 添加到默认启动级别（runlevel）来使 KDM 开机启动：

{{RootCmd|rc-update add xdm default}}

如果要现在立即启动 KDM ：

{{RootCmd|/etc/init.d/xdm start}}

==== Systemd ====

通过 {{c|systemctl}}  使 KDM 开机启动：

{{RootCmd|systemctl enable kdm}}

现在启动 KDM ：

{{RootCmd|systemctl start kdm}}

== KDE Frameworks, Plasma,和 Applications 5 ==

下一代的 KDE 把 SC 分割成了三个部分，拥有独立的发布周期： KDE Frameworks 5， KDE Plasma 5，和 KDE Applications 。

=== 可用版本 ===
{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE component & version
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Gentoo package & version
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Repository
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Frameworks 5.18.0
| kde-frameworks/*-5.18.0
| gentoo
| Stable for {{Keyword|amd64}}; Testing for {{Keyword|x86}}
|-
| KDE Frameworks 5.21.0
| kde-frameworks/*-5.21.0
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Frameworks master branch
| kde-frameworks/*-9999
| [[KDE/Overlay|kde overlay]]
| Live version
|-
| KDE Plasma 5.5.5
| kde-plasma/plasma-meta-5.5.5
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Plasma 5.6.2
| kde-plasma/plasma-meta-5.6.2
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Plasma master branch
| kde-plasma/plasma-meta-9999
| [[KDE/Overlay|kde overlay]]
| Live version
|-
| KDE Applications 15.12.3
| kde-apps/kde-apps-meta-15.12.3
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Applications master branch
| kde-apps/kde-apps-meta-9999
| [[KDE/Overlay|kde overlay]]
| Live version
|}

=== 框架（Frameworks） ===

KDE Frameworks 5 是为KDE Plasma 5 和 KDE Applications 5 的运行库和软件框架的合集，但是可能会受到一些 Qt 程序的影响。

KDE 框架大部分是运行库，只提供少量的面对用户的功能。它不需要被手动安装 —— 需要的软件包会被作为别的软件包的依赖自动安装。

=== Plasma ===

Plasma 5 是 KDE 的下一代桌面环境，基于 Qt 5 和 KDE Framework 5 。 升级它相当简单，尽管上游使它不能和 Plasma 4 共存。

注意，虽然 Plasma 5 现在看起来还不错，但上游仍处于繁重的开发中，功能还不如 KDE 4 完整。

{{Note/zh-cn|在继续安装之前，请确保选择了一个 Plasma 的[[Profile (Portage)|Portage配置]]。 KDE 4 用户则需要一些额外的步骤。}}

==== 从 KDE SC 4 升级 ====

能在这个 [[KDE/Plasma_5_upgrade|升级页面]] 找到有关如何从 KDE SC 4 升级， 迁移和疑难解答的信息。

==== 安装 ====

 {{Package|kde-plasma/plasma-meta}} 包提供完整的 Plasma 5 套件，由以下 USE 旗标配置：
{{USEflag|package=kde-plasma/plasma-meta|desc=}}

{{RootCmd|emerge --ask kde-plasma/plasma-meta}}

Alternatively, {{Package|kde-plasma/plasma-desktop}} provides the basic desktop, leaving users free to install only the extra packages they require:

{{RootCmd|emerge --ask kde-plasma/plasma-desktop}}

{{Note|Please note that such installations will be missing important packages such as {{Package|kde-plasma/powerdevil}} (power management, suspend and hibernate options) and {{Package|kde-plasma/systemsettings}} if this alternative installation is used.}}

==== Widgets ====

Many useful widgets are in the {{Package|kde-plasma/kdeplasma-addons}} package:

{{Emerge|kde-plasma/kdeplasma-addons}}

==== Display manager ====

[[SDDM]] (Simple Desktop Display Manager) is the recommended login manager and is pulled in automatically via {{package|kde-plasma/plasma-meta}} by default. This is the preferred option. Alternatively, [[LightDM]] can be used and pulled in by setting USE flag <code>-sddm</code> for {{package|kde-plasma/plasma-meta}}. Change the setting accordingly in {{Path| /etc/conf.d/xdm}}. Also, be sure to read through the [[SDDM]] page if further issues appear.

=== Applications ===

Releases consist of various applications and supporting libraries based on Qt 5/KDE Frameworks 5 as well as Qt 4/KDElibs 4, with the latter still being in long term support mode. In Portage, the distinction is made using slots <code>4</code> and <code>5</code>. Porting is an ongoing process where each major release is making inroads to Frameworks 5, and therefore contains both well matured and newly ported applications. Note that it also means potential dependency conflicts even within one major release, when two packages depend on slot 4 and 5 of the same library that can not be installed at the same time. The meta packages are taking these conflicts into account and will in some cases prefer the more reliable version over a new port.

The {{Package|kde-apps/kde-apps-meta}} package provides the full Applications bundle:

{{RootCmd|emerge --ask kde-apps/kde-apps-meta}}

It will install the following smaller meta packages, which of course can also be hand-picked:

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Package name
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Available major version
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Description
|-
| {{Package|kde-apps/kdeaccessibility-meta}}
| 15.12
| Accessibility applications and utilities.
|-
| {{Package|kde-apps/kdeadmin-meta}}
| 15.12
| Administrative utilities, which helps in managing the system.
|-
| {{Package|kde-apps/kdecore-meta}}
| 15.12
| Most basic applications.
|-
| {{Package|kde-apps/kdeedu-meta}}
| 15.12
| Educational applications and games.
|-
| {{Package|kde-apps/kdegames-meta}}
| 15.12
| Standard desktop games.
|-
| {{Package|kde-apps/kdegraphics-meta}}
| 15.12
| Graphics applications such as image viewers, color pickers, etc.
|-
| {{Package|kde-apps/kdemultimedia-meta}}
| 15.12
| Audio and video playback applications and services.
|-
| {{Package|kde-apps/kdenetwork-meta}}
| 15.12
| Network applications and VNC services.
|-
| {{Package|kde-apps/kdepim-meta}}
| 4.4, 4.14
| PIM applications such as emailer, addressbook, organizer, etc.
|-
| {{Package|kde-apps/kdesdk-meta}}
| 15.12
| Various development tools.
|-
| {{Package|kde-apps/kdeutils-meta}}
| 15.12
| Standard desktop utilities such as a archiver, a calculator, etc.
|-
| {{Package|kde-apps/kdewebdev-meta}}
| 15.08
| Web development tools.
|-
| {{Package|kde-apps/kdeartwork-meta}}
| 15.08 (final)
| Emoticons, wallpapers, etc.
|-
| {{Package|kde-apps/kdetoys-meta}}
| 15.08 (final)
| Toy like applications.
|}

==== kdesu5 ====

The utility that is used to run GUI programs as {{c|root}} is provided by {{Package|kde-plasma/kde-cli-tools}}. If built with USE flag <code>kdesu</code>, a graphical frontend to {{Package|kde-frameworks/kdesu}} is installed, which can be used by invoking {{c|kdesu5}}.

As always, ensure that the command actually needs to run as {{c|root}}, versus adding the regular user to the relevant groups or simply just running the command unprivileged.

== More KDE software ==

The most important KDE applications are in the portage tree and many are located in the [http://packages.gentoo.org/category/kde-apps kde-apps] and [http://packages.gentoo.org/category/kde-misc kde-misc] categories.

== 另请参阅 ==

* [[KDE/Hints|KDE hints]] - Hints on working in a KDE desktop environment.
* [[KDE/Troubleshooting|KDE troubleshooting]] - An extended article on troubleshooting KDE.
* [[KDE/KDEPIM-4.7 upgrade]]
* [[KDE/Overlay|KDE overlay]] - Instructions on adding Gentoo's KDE overlay.
* [[KDE/Removal|KDE removal and clean up]] - Instructions on removing and cleaning up KDE.

== 外部资源 ==

* [http://userbase.kde.org/ Official KDE user wiki]
* [http://forum.kde.org/ Official KDE forum]
* [http://www.kde-apps.org/ KDE-Apps.org]
* [http://www.kde-look.org/ KDE-Look.org]
* [http://www.kde-files.org/ KDE-Files.org]

[[Category:KDE]] [[Category:Desktop environment]]
