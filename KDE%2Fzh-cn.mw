<languages />


{{InfoBox stack
|{{InfoBox homepage|http://www.kde.org/|header=true}}
|{{InfoBox wikipedia}}
|{{InfoBox gdoc|KDE}}
}}

'''KDE''' 是自由软件社区，提供为数众多的应用程序，包括流行的 Plasma 桌面环境。

Gentoo 有着优秀的 KDE 支持，其中包括传统 KDE SC 4 的综合性包装，下一代的 KDE 框架，Plasma，Application 5，同样也支持其他大量基于 KDE 的软件。 

== 准备 ==

=== 配置 ===

选择一个适当的[[Profile (Portage)|Portage配置]]，尽管这不是必须的，但是我们仍建议这么做。因为这会设置一些全局或针对特定软件包的 USE 旗标来确保你能够获得顺畅的 KDE 使用体验。

为了选择适当的[[Profile (Portage)|Portage配置]]，首先需要列出有哪些可用的[[Profile (Portage)|Portage配置]]：

{{RootCmd|eselect profile list|output=<pre>
  [1]   default/linux/amd64/13.0
  [2]   default/linux/amd64/13.0/selinux
  [3]   default/linux/amd64/13.0/desktop
  [4]   default/linux/amd64/13.0/desktop/gnome
  [5]   default/linux/amd64/13.0/desktop/gnome/systemd
  [6]   default/linux/amd64/13.0/desktop/kde
  [7]   default/linux/amd64/13.0/desktop/kde/systemd
  [8]   default/linux/amd64/13.0/desktop/plasma
  [9]   default/linux/amd64/13.0/desktop/plasma/systemd
  ...
</pre>}}

然后选择正确的[[Profile (Portage)|Portage配置]]，把下面的命令中的<code>X</code>替换为合适的[[Profile (Portage)|Portage配置]]对应的数字：

{{RootCmd|eselect profile set X}}

如果需要一个完整的 KDE 桌面环境，建议使用<code>desktop/kde</code>，这是为 OpenRC 配置好的。如果你使用Systemd，请选择<code>desktop/kde/systemd</code>。 如果要使用 Plasma 5 桌面环境，请选择<code>desktop/plasma</code>（OpenRC） 或者 <code>desktop/plasma/systemd</code> （Systemd）。

=== 服务 ===

Before installing KDE SC it is recommended that several other services are set up first. Part of that is done automatically if a ''desktop/kde'' or ''desktop'' [[Profile (Portage)|profile]] is used. These services are: 
* [[D-Bus]]: Enables use of the D-Bus message bus system.
* [[polkit]]: Enables the polkit framework for controlling privileges for system-wide services.
* [[udev]]: Enables support for udev Linux dynamic and persistent device naming.
* [[udisks]]: Enables support for some storage related services.

Follow the links for information how to set up these services. Note that other USE flag combinations than set in this profile may technically be possible (especially if selected applications are run instead of a full KDE desktop environment), but may be unsupported, untested, or lead to unexpected loss of functionality.

=== X server ===

Read and follow the instructions in the [[X server]] article to setup the X environment.

== KDE SC 4 ==

KDE SC 4 is the previous major version of KDE. Although it is no longer maintained upstream, it is considered stable, and is recommended for most users. As upstream support for KDE SC 4 has slowly come to an end, certain packages have releases with versions that do not match the rest of the SC. For example, KDE Workspaces and KDE PIM have received their last bugfix releases with 4.11.22 and 4.14.10 respectively, while kdelibs enjoys 4.14.x point releases well beyond. Meanwhile, newer Applications releases are still shipping with KDE4-based packages that are seamlessly able to serve as bugfix updates from 4.14.3.

=== 可用版本 ===

{| {{{!}} class{{=}}"table"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE version
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE SC 4.14.3
| Stable for {{Keyword|amd64}}, {{Keyword|ppc}}, {{Keyword|ppc64}} and {{Keyword|x86}}; testing for {{Keyword|arm}}
|-
| KDE Workspaces 4.11.19
| Stable for {{Keyword|amd64}}, {{Keyword|ppc}}, {{Keyword|ppc64}} and {{Keyword|x86}}; testing for {{Keyword|arm}}
|-
| KDE Workspaces 4.11.22
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}; testing for {{Keyword|arm}}, {{Keyword|ppc}} and {{Keyword|ppc64}}
|-
| KDE Applications 15.08.3 (KDE4-based)
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}
|}

=== 软件包 ===

In Gentoo there are various packages that will install a KDE environment:
* {{Package|kde-apps/kde-meta}} - The full KDE suite.
* {{Package|kde-apps/kdebase-meta}} - A basic KDE environment.
* {{Package|kde-base/kdebase-startkde}} - A very minimal, effectively unsupported KDE environment (no KDE applications or artwork).

It is usually a good idea to start with the {{Package|kde-apps/kdebase-meta}} package and install the additional software when needed:

{{Emerge|kde-apps/kdebase-meta}}

There are other meta packages that can be installed to pull in parts of the KDE suite:

* {{Package|kde-apps/kdeaccessibility-meta}} - Accessibility applications and utilities.
* {{Package|kde-apps/kdeadmin-meta}} - Administrative utilities, which helps in managing the system.
* {{Package|kde-apps/kdeartwork-meta}} - Extra themes, screensavers, etc.
* {{Package|kde-base/kdebindings-meta}} - Bindings for various languages.
* {{Package|kde-apps/kdeedu-meta}} - Educational applications and games.
* {{Package|kde-apps/kdegames-meta}} - Standard desktop games.
* {{Package|kde-apps/kdegraphics-meta}} - Graphics applications such as image viewers, color pickers, etc.
* {{Package|kde-apps/kdemultimedia-meta}} - Audio and video playback applications and services.
* {{Package|kde-apps/kdenetwork-meta}} - Network applications and VNC services.
* {{Package|kde-apps/kdepim-meta}} - PIM applications such as emailer, addressbook, organizer, etc.
* {{Package|kde-apps/kdesdk-meta}} - Various development tools.
* {{Package|kde-apps/kdetoys-meta}} - Toy like applications.
* {{Package|kde-apps/kdeutils-meta}} - Standard desktop utilities such as a archiver, a calculator, etc.
* {{Package|kde-apps/kdewebdev-meta}} - Web development tools.

==== Widgets ====

Many useful widgets are in the {{Package|kde-base/kdeplasma-addons}} package:

{{Emerge|kde-base/kdeplasma-addons}}

== 本地化 ==

To [[localization|localize]] the KDE installation, install the {{Package|kde-apps/kde4-l10n}} package. If only a selected few languages needs to set, define the <var>LINGUAS</var> variable beforehand in {{Path|/etc/portage/make.conf}}

E.g. to use the German language, set:

{{FileBox|filename=/etc/portage/make.conf|title=Setting the <var>LINGUAS</var> variable for the German language|lang=bash|1=
LINGUAS="de"
}}

{{Emerge|kde-apps/kde4-l10n}}

To localize the packages included in {{Package|kde-apps/kdepim-meta}} install the {{Package|kde-apps/kdepim-l10n}} package.

{{Package|app-office/calligra}} has its own localization package too: {{package|app-office/calligra-l10n}}.

=== Display manager ===

KDM (KDE Display Manager) is the recommended login manager and is pulled in automatically via {{package|kde-apps/kdebase-meta}} by default if no other login manager is installed.

==== OpenRC ====

Set KDM as the default [[display manager]]:

{{FileBox|filename=/etc/conf.d/xdm|lang=bash|1=
DISPLAYMANAGER="kdm"
}}

To start KDM on boot, add xdm to the default runlevel:

{{RootCmd|rc-update add xdm default}}

To start KDM now:

{{RootCmd|/etc/init.d/xdm start}}

==== systemd ====

Enable KDM at boot time through {{c|systemctl}}:

{{RootCmd|systemctl enable kdm}}

Now start the service:

{{RootCmd|systemctl start kdm}}

== KDE Frameworks, Plasma,和 Applications 5 ==

The next generation of KDE splits the SC into three components, each with their own individual release cycles: KDE Frameworks 5, KDE Plasma 5, and KDE Applications.

=== 可用版本 ===
{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE component & version
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Gentoo package & version
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Repository
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Frameworks 5.18.0
| kde-frameworks/*-5.18.0
| gentoo
| Stable for {{Keyword|amd64}}; Testing for {{Keyword|x86}}
|-
| KDE Frameworks 5.21.0
| kde-frameworks/*-5.21.0
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Frameworks master branch
| kde-frameworks/*-9999
| [[KDE/Overlay|kde overlay]]
| Live version
|-
| KDE Plasma 5.5.5
| kde-plasma/plasma-meta-5.5.5
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Plasma 5.6.2
| kde-plasma/plasma-meta-5.6.2
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Plasma master branch
| kde-plasma/plasma-meta-9999
| [[KDE/Overlay|kde overlay]]
| Live version
|-
| KDE Applications 15.12.3
| kde-apps/kde-apps-meta-15.12.3
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Applications master branch
| kde-apps/kde-apps-meta-9999
| [[KDE/Overlay|kde overlay]]
| Live version
|}

=== Frameworks ===

KDE Frameworks 5 is a collection of libraries and software frameworks that provide the foundation for KDE Plasma 5 and KDE Applications 5, but may be leveraged by any Qt application.

As Frameworks are mostly libraries and provide little user functionality, it's not necessary to install them manually - the required packages will be pulled in automatically as dependencies.

=== Plasma ===

Plasma 5 is the next generation of KDE's desktop environment, based on Qt 5 and KDE Frameworks 5. Upgrading is fairly simple, although it cannot be coinstalled with Plasma 4 due to upstream design decisions.

请注意，虽然等离子5是在一个良好的状态，但仍处于繁重的上游开发中，缺少目前在KDE4的一些功能。

{{Note|Before proceeding, make sure to choose a plasma profile. KDE 4 users will need to take extra steps.}}

==== Upgrade from KDE SC 4 ====

Information on how to upgrade from KDE SC 4, migration and troubleshooting can be found on the [[KDE/Plasma_5_upgrade|upgrade page]].

==== Installation ====

The {{Package|kde-plasma/plasma-meta}} package provides the full Plasma 5 suite, configured by the following USE flags:
{{USEflag|package=kde-plasma/plasma-meta|desc=}}

{{RootCmd|emerge --ask kde-plasma/plasma-meta}}

Alternatively, {{Package|kde-plasma/plasma-desktop}} provides the basic desktop, leaving users free to install only the extra packages they require:

{{RootCmd|emerge --ask kde-plasma/plasma-desktop}}

{{Note|Please note that such installations will be missing important packages such as {{Package|kde-plasma/powerdevil}} (power management, suspend and hibernate options) and {{Package|kde-plasma/systemsettings}} if this alternative installation is used.}}

==== Widgets ====

Many useful widgets are in the {{Package|kde-plasma/kdeplasma-addons}} package:

{{Emerge|kde-plasma/kdeplasma-addons}}

==== Display manager ====

[[SDDM]] (Simple Desktop Display Manager) is the recommended login manager and is pulled in automatically via {{package|kde-plasma/plasma-meta}} by default. This is the preferred option. Alternatively, [[LightDM]] can be used and pulled in by setting USE flag <code>-sddm</code> for {{package|kde-plasma/plasma-meta}}. Change the setting accordingly in {{Path| /etc/conf.d/xdm}}. Also, be sure to read through the [[SDDM]] page if further issues appear.

=== Applications ===

Releases consist of various applications and supporting libraries based on Qt 5/KDE Frameworks 5 as well as Qt 4/KDElibs 4, with the latter still being in long term support mode. In Portage, the distinction is made using slots <code>4</code> and <code>5</code>. Porting is an ongoing process where each major release is making inroads to Frameworks 5, and therefore contains both well matured and newly ported applications. Note that it also means potential dependency conflicts even within one major release, when two packages depend on slot 4 and 5 of the same library that can not be installed at the same time. The meta packages are taking these conflicts into account and will in some cases prefer the more reliable version over a new port.

The {{Package|kde-apps/kde-apps-meta}} package provides the full Applications bundle:

{{RootCmd|emerge --ask kde-apps/kde-apps-meta}}

It will install the following smaller meta packages, which of course can also be hand-picked:

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Package name
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Available major version
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Description
|-
| {{Package|kde-apps/kdeaccessibility-meta}}
| 15.12
| Accessibility applications and utilities.
|-
| {{Package|kde-apps/kdeadmin-meta}}
| 15.12
| Administrative utilities, which helps in managing the system.
|-
| {{Package|kde-apps/kdecore-meta}}
| 15.12
| Most basic applications.
|-
| {{Package|kde-apps/kdeedu-meta}}
| 15.12
| Educational applications and games.
|-
| {{Package|kde-apps/kdegames-meta}}
| 15.12
| Standard desktop games.
|-
| {{Package|kde-apps/kdegraphics-meta}}
| 15.12
| Graphics applications such as image viewers, color pickers, etc.
|-
| {{Package|kde-apps/kdemultimedia-meta}}
| 15.12
| Audio and video playback applications and services.
|-
| {{Package|kde-apps/kdenetwork-meta}}
| 15.12
| Network applications and VNC services.
|-
| {{Package|kde-apps/kdepim-meta}}
| 4.4, 4.14
| PIM applications such as emailer, addressbook, organizer, etc.
|-
| {{Package|kde-apps/kdesdk-meta}}
| 15.12
| Various development tools.
|-
| {{Package|kde-apps/kdeutils-meta}}
| 15.12
| Standard desktop utilities such as a archiver, a calculator, etc.
|-
| {{Package|kde-apps/kdewebdev-meta}}
| 15.08
| Web development tools.
|-
| {{Package|kde-apps/kdeartwork-meta}}
| 15.08 (final)
| Emoticons, wallpapers, etc.
|-
| {{Package|kde-apps/kdetoys-meta}}
| 15.08 (final)
| Toy like applications.
|}

==== kdesu5 ====

The utility that is used to run GUI programs as {{c|root}} is provided by {{Package|kde-plasma/kde-cli-tools}}. If built with USE flag <code>kdesu</code>, a graphical frontend to {{Package|kde-frameworks/kdesu}} is installed, which can be used by invoking {{c|kdesu5}}.

As always, ensure that the command actually needs to run as {{c|root}}, versus adding the regular user to the relevant groups or simply just running the command unprivileged.

== More KDE software ==

The most important KDE applications are in the portage tree and many are located in the [http://packages.gentoo.org/category/kde-apps kde-apps] and [http://packages.gentoo.org/category/kde-misc kde-misc] categories.

== 另请参阅 ==

* [[KDE/Hints|KDE hints]] - Hints on working in a KDE desktop environment.
* [[KDE/Troubleshooting|KDE troubleshooting]] - An extended article on troubleshooting KDE.
* [[KDE/KDEPIM-4.7 upgrade]]
* [[KDE/Overlay|KDE overlay]] - Instructions on adding Gentoo's KDE overlay.
* [[KDE/Removal|KDE removal and clean up]] - Instructions on removing and cleaning up KDE.

== 外部资源 ==

* [http://userbase.kde.org/ Official KDE user wiki]
* [http://forum.kde.org/ Official KDE forum]
* [http://www.kde-apps.org/ KDE-Apps.org]
* [http://www.kde-look.org/ KDE-Look.org]
* [http://www.kde-files.org/ KDE-Files.org]

[[Category:KDE]] [[Category:Desktop environment]]
