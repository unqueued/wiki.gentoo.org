<languages />
<translate>
<!--T:1-->
This document covers the installation of Brother printers.

<!--T:2-->
{{Important| While this page should be self-sufficient to install a printer,  it is recommended to read this page and the [[Printing|Printing]] page in their entirety before starting the installation.}} 

== User feedback == <!--T:3-->

<!--T:4-->
After having applied this guide to the printer, please update the following tableâ€¯ so that other users can easily confirm if successful installations have been performed with their printer model or not:

<!--T:5-->
{| class="table"
|-
!Printer model
!Arch.
! Gentoo configuration
! Printer driver
!Printer?
!Scanner?
!Remarks
|-
|[http://support.brother.com/g/b/spec.aspx?c=gb&lang=en&prod=dcp750cw_eu DCP-750CW]
|X86_64
|gnome3.8 systemd & gnome OpenRC
|?
|Works!
|Works!
|No remark
|-
|[http://support.brother.com/g/b/spec.aspx?c=gb&lang=en&prod=dcp1610w_eu_as DCP-1610WE]
|X86_64
|systemd
|?
|Works!
|TBD
|After WPS configuration printer used Zeroconf instead of DHCP!
|-
|[http://support.brother.com/g/b/spec.aspx?c=gb&lang=en&prod=dcp7055w_us_eu_as DCP-7055W]
|X86_64
|3.15.9-gentoo, KDE 4.14.3
|?
|Works!
|Works!
|No remark
|-
|[http://support.brother.com/g/b/spec.aspx?c=us&lang=en&prod=dcpj140w_all DCP-J140W]
|X86_64
|3.14.14-gentoo & genkernel
|?
|Works!
|Works!
|Scanner only works after emerging {{Package|dev-libs/libusb-compat}}. Thanks to i92guboj for discovering this and posting it on the Gentoo Forums.
|-
|[http://support.brother.com/g/b/spec.aspx?c=gb&lang=en&prod=dcpj925dw_eu_as DCP-J925DW]
|x86_64
|Xfce OpenRC
|[https://gitweb.gentoo.org/repo/dev/ulm.git/tree/net-print/brother-dcpj925dw net-print/brother-dcpj925dw] in [https://gitweb.gentoo.org/repo/dev/ulm.git/tree ulm overlay]
|Works!
|Works!
|Scanner driver ''media-gfx/brscan4'' in [https://gitweb.gentoo.org/repo/dev/ulm.git/tree ulm overlay]
|-
|[http://support.brother.com/g/b/spec.aspx?c=us&lang=en&prod=hl2240_us_eu HL-2240]
|x86_64
|OpenRC
|?
|Works!
|n/a
|[http://support.brother.com/g/b/downloadlist.aspx?c=us&lang=en&prod=hl2240_us_eu&os=127] Not networked printer
|-
|[http://support.brother.com/g/b/spec.aspx?c=us&lang=en&prod=hll2340dw_us_eu_as HL-L2340DW]
|amd64
|OpenRC
|[https://github.com/stefan-langenmaier/brother-overlay/tree/master/net-print/brother-genml1-bin net-print/brother-genml1-bin] from [https://github.com/stefan-langenmaier/brother-overlay/tree/master/ brother-overlay]
|Works!
|n/a
|No remark
|-
|MFC-J4410DW
|x86_64
|KDE SC 4.11.5 OpenRC
|
|Works!
|Works!
|Filter to copy is at {{Path|/opt/brother/Printers/mfcj4410dw/lpd/filtermfcj4410dw}} but scanner not detected by xsane at the moment though installation is OK.
|-
|MFC-J870DW
|x86_64
|Xfce OpenRC
|[https://gitweb.gentoo.org/repo/dev/ulm.git/tree/net-print/brother-mfcj870dw net-print/brother-mfcj870dw] in [https://gitweb.gentoo.org/repo/dev/ulm.git/tree ulm overlay]
|Works!
|Works!
|Scanner driver ''media-gfx/brscan4'' in [https://gitweb.gentoo.org/repo/dev/ulm.git/ ulm overlay]
|-
|MFC-J5910DW
|x86_64
|Gnome 3.12 Systemd
|
|Works!
|Works!
|Filter to copy is {{Path|/usr/lib64/cups/filter/brother_lpdwrapper_mfcj5910dw}}. Also requires {{Package|dev-libs/libusb-compat}} (see section ''Common Troubles'') 
|-
|MFC-J6920DW
|x86_64
|XFce
|
|Works!
|Works!
|[http://support.brother.com/g/b/downloadlist.aspx?c=us&lang=en&prod=mfcj6920dw_us_eu_as&os=127&flang=English download page], filter {{Path|/usr/lib64/cups/filter/brother_lpdwrapper_mfcj6920dw}}, scanner config command <tt>brsaneconfig4</tt>
|-
|MFC-9320CW
|x86_64
|Gnome 3.10
|[https://github.com/stefan-langenmaier/brother-overlay/tree/master/net-print/brother-mfc9320cw-bin net-print/brother-mfc9320cw-bin] from [https://github.com/stefan-langenmaier/brother-overlay/tree/master/ brother-overlay]
|Works!
|Works!
|No remark
|-
|HL-4570CDW
|x86_64
|Gnome 3.10
|[https://github.com/stefan-langenmaier/brother-overlay/tree/master/net-print/brother-hl4570cdw-bin net-print/brother-hl4570cdw-bin] from [https://github.com/stefan-langenmaier/brother-overlay/tree/master/ brother-overlay]
|Works!
|n/a
| [https://github.com/stefan-langenmaier/brother-overlay Overlay]
|-
|MFC-7460DN
|x86_64,x86
|
|?
|Works!
|unknown
| [https://github.com/stefan-langenmaier/brother-overlay Overlay]
|-
|DCP-7060D, DCP-7065DN, DCP-8080DN, DCP-L2520DW, DCP-L2540DW, HL-2230, HL-2240, HL-2240D, HL-2270DW, HL-2280DW, HL-5370DW/HL-5370DWT, HL-5440D, HL-5450DN, HL-5470DW, HL-6180DW, HL-L2320D, HL-L2360DW, HL-L2380DW, MFC-7360N, MFC-7460DN, MFC-7860DW, MFC-8480DN, MFC-8510DN, MFC-8710DW, MFC-8890DW, MFC-8910DW, MFC-8950DW, MFC-L2700DW, MFC-L2720DW, MFC-L2740DW
|x86_64,x86
|
|?
|Works!
|unknown
| [https://github.com/stefan-langenmaier/brother-overlay Overlay]
|-
|MFC-8950DW
|x86_64
|KDE 4.12.5
|
|Works!
|Works!
| Filter to copy is at {{Path|/opt/brother/Printers/MFC8950DW/lpd/filter_MFC8950DW}}
|-
|MFC-5890CN
|x86_64
|NO DEPENDENCY
|?
|Works!
|Works!
|scanner config command <tt>brsaneconfig3</tt>
|-
|MFC-9970CDW
|x86_64
|n/a
|?
|Works!
|unknown
|
|-
|MFC-9140CDN
|x86_64
|Xfce-4.10 OpenRC
|?
|Works!
|Works!
|scanner requires {{Package|dev-libs/libusb-compat}} to work (see section ''Common Troubles'')
|-
|[http://www.brother-usa.com/MultiFunction/ModelDetail/4/MFCJ5620DW/spec MFC-J5620DW]
|X86_64
|gnome3.18 systemd
|Brother linux-brprinter-installer-2.0.0-1
|Works!
|Works!
|installs nicely but needed libusb-compat to work. Maybe put a 'brother4' line in /etc/sane.d/dll.conf.
|-
|[http://support.brother.com/g/b/producttop.aspx?c=us&lang=en&prod=mfcj480dw_us_eu_as MFC-J480DW]
|x86_64
|OpenRC
|[https://gitweb.gentoo.org/user/andy.git/tree/net-print/brother-mfcj480dw brother-mfcj480dw] driver in [https://gitweb.gentoo.org/user/andy.git andy overlay]
|Works!
|Works!
|Scanner driver [https://gitweb.gentoo.org/user/andy.git/tree/media-gfx/brscan4 media-gfx/brscan4] in [https://gitweb.gentoo.org/user/andy.git andy overlay]
|}

== Prerequisites == <!--T:6-->

=== cups === <!--T:7-->

<!--T:8-->
Make sure {{Package|net-print/cups}} is installed:

<!--T:9-->
{{Emerge|net-print/cups}}

<!--T:10-->
The cups service must be started before the driver(s) can be installed.

===== OpenRC ===== <!--T:11-->

<!--T:12-->
If OpenRC is used, then the following command can be issued to start the ''cups'' service.

<!--T:13-->
{{RootCmd|/etc/init.d/cupsd start}}  

<!--T:14-->
To have it started automatically at boot time, use <tt>rc-update</tt>:

<!--T:15-->
{{RootCmd|rc-update add cupsd default}}

===== Systemd  ===== <!--T:16-->

<!--T:17-->
If systemd is used, then the following command can be issued to start the ''cups'' service.

<!--T:18-->
{{RootCmd|systemctl start cups.service}}  

<!--T:19-->
To have it started automatically at boot time, invoke the following:

<!--T:20-->
{{RootCmd|systemctl enable cups.service}}

== Installing the drivers == <!--T:21-->

=== Preferred: Using overlay drivers === <!--T:22-->

<!--T:23-->
If the printer is supported by an ebuild in [https://github.com/stefan-langenmaier/brother-overlay/tree/master/ brother-overlay] or some [http://gpo.zugaina.org/Search?search=brother other overlay], then please use it, as it usually contains all the prerequisites mentioned here. It would allow to skip the section "Alternative: rpm installation".

<!--T:101-->
To enable an [[Overlay|overlay]], create the proper [[:/etc/portage/repos.conf|{{Path|repos.conf}}]] file and {{c|emaint sync}} it as shown here for '''brother-overlay''':

<!--T:24-->
{{:/etc/portage/repos.conf/brother-overlay.conf/en}}

<!--T:102-->
{{RootCmd|emaint sync -r brother-overlay && eix-update}}

<!--T:103-->
For using <code>sync-type = git</code> the package {{Package|dev-vcs/git}} needs to be installed.  Alternatively, [[layman#Adding_custom_overlays|layman]] can be used for adding the overlay.

<!--T:108-->
From the overlay install the driver using {{c|emerge}} as shown here for Brother's Generic LPR and CUPSwrapper printer  driver.

<!--T:26-->
The [https://github.com/stefan-langenmaier/brother-overlay/tree/master/net-print/brother-genml1-bin net-print/brother-genml1-bin] ebuild from [https://github.com/stefan-langenmaier/brother-overlay/tree/master/ brother-overlay] contains the Generic printer drivers as offered on [http://support.brother.com/g/b/downloadlist.aspx?c=us&lang=en&prod=hll2340dw_us_eu_as&os=127 support.brother.com] for a wide range of compatible models (click the ''Compatible Model'' link on [http://support.brother.com/g/b/downloadend.aspx?c=us&lang=en&prod=hll2340dw_us_eu_as&os=127&dlid=dlf101124_000&flang=4&type3=10034#pane3 BrGenML1 Compatible Models]): 
* Generic LPR printer driver (rpm package)
* Generic CUPSwrapper printer driver (rpm package)

<!--T:27-->
{{Emerge|net-print/brother-genml1-bin}}

<!--T:28-->
The ppd file installed is {{Path|brother-BrGenML1-cups-en.ppd}} and the ''make and model'' is ''Brother BrGenML1 for CUPS''.

<!--T:109-->
{{Cmd|/usr/sbin/lpinfo -m {{!}} grep -i brother|output=<pre>
brother-BrGenML1-cups-en.ppd Brother BrGenML1 for CUPS
</pre>}}

=== Alternative: rpm installation === <!--T:29-->

<!--T:30-->
As the drivers are available from Brother in the form of an {{Path|.rpm}} file, the {{Package|app-arch/rpm}} package needs to be installed.

<!--T:31-->
{{Emerge|app-arch/rpm}}

==== Missing directories ==== <!--T:32-->

<!--T:33-->
Please create these directories up front; it will save a lot of trouble later:

<!--T:34-->
{{RootCmd| mkdir -p /var/spool/lpd}}
{{RootCmd| mkdir -p /usr/lib64/cups/filter}}

==== Downloading the driver from Brother ==== <!--T:35-->

<!--T:36-->
The drivers for Brother printers are available at [http://welcome.solutions.brother.com/bsc/public_s/id/linux/en/index.html Brother solutions'] web page.

<!--T:37-->
Search for the correct model name by following the directions given by the pages.

<!--T:38-->
After having chosen the right model, four drivers will be presented for download. Please download the two ones ending in {{Path|.rpm}} for ''LPR driver'' and ''cupswrapper driver''.

==== Installing the drivers ==== <!--T:39-->

<!--T:40-->
Installing the drivers may be a multiple-step process as some needed directories may appear missing on the system.

<!--T:41-->
To install a driver change to the directory where the downloaded {{Path|.rpm}} files are located.

<!--T:42-->
Next, issue the following command to see the filenames:

<!--T:43-->
{{RootCmd|ls -a |output=<pre>
.  ..  dcp750cwcupswrapper-1.0.1-1.i386.rpm  dcp750cwlpr-1.0.1-1.i386.rpm
</pre>}}

<!--T:44-->
Of course the driver names may change according to the model's name. The output of the previous command can be used to copy and paste the filenames in the rpm command to avoid typos when entering them.

<!--T:45-->
First install the LPR driver.

<!--T:46-->
{{RootCmd|rpm -i --nodeps dcp750cwlpr-1.0.1-1.i386.rpm}}

<!--T:47-->
The installation may give some warnings, telling that some directories are missing. In this case, add the missing directories by hand and re-install the driver with this command:

<!--T:48-->
{{RootCmd|rpm -i --nodeps --replacepkgs dcp750cwlpr-1.0.1-1.i386.rpm}}

<!--T:49-->
Next install the ''cupswrapper'' driver  the same way:

<!--T:50-->
{{RootCmd|rpm -i --nodeps dcp750cwcupswrapper-1.0.1-1.i386.rpm}}

<!--T:51-->
Again, the installation may give some warnings, telling that some directories are missing. Try to add the missing directories by hand and re-install the driver with this command:

<!--T:52-->
{{RootCmd|rpm -i --nodeps --replacepkgs dcp750cwcupswrapper-1.0.1-1.i386.rpm}}

<!--T:53-->
{{Note|Do not forget the --replacepkgs option to force the re-installation of all the necessary files.}}

==== Copying the filter at the right place ==== <!--T:54-->

<!--T:55-->
Copy the filter to the right place with the following command:

<!--T:107-->
{{Note| Have a look at the feedback table at the top of this page to know more about the filter's name.}}

<!--T:56-->
{{RootCmd|cp /usr/lib64/cups/filter/brlpdwrapperdcp750cw /usr/libexec/cups/filter/}}

== Installing the printer == <!--T:57-->

=== Connect the printer to the network === <!--T:58-->

<!--T:59-->
Connect the printer to the network as described in the network section of the printer model's [http://support.brother.com/g/b/manuallist.aspx?c=us&lang=en&prod=hll2340dw_us_eu_as&flang=English&type3=10014&type2=5 Online User Guide]. From this step, the printer's network address can be obtained which is needed for CUPS in the next step.  When pointing the browser to the printer's network address it will go to the printer's user interface.

<!--T:60-->
<gallery>
File:Myhomeprinter.png
</gallery>

=== Networked printer detection === <!--T:110-->

<!--T:111-->
CUPS is capable of automatically detecting networked printers. In case it does not work it might be blocked by a firewall. As a workaround, temporarily connect the printer to the computer.

=== Use CUPS' web interface to install the printer === <!--T:112-->

<!--T:113-->
Using CUPS' web interface [http://localhost:631/admin http://localhost:631/admin] is quite self-explanatory. The ''Add Printer'' button will list the networked printer(s) starting at the ''Discovered Network Printers'' line.

=== Use command line to install the printer === <!--T:114-->

<!--T:115-->
To find out the printer's device uri use {{c|lpinfo}}.

<!--T:116-->
{{RootCmd|lpinfo -v|output=<pre>
network ipp
network http
network socket
network https
network ipps
network lpd
network lpd://BRW67890ABCDEF/BINARY_P1
</pre>}}

<!--T:117-->
Running {{c|lpinfo -l -v}} would give a more verbose output.

<!--T:118-->
Add the printer with {{c|lpadmin}} using device uri and ppd file:

<!--T:119-->
{{RootCmd|lpadmin -p Brother_HL-L2340DW -E -v lpd://BRW67890ABCDEF/BINARY_P1 -m brother-BrGenML1-cups-en.ppd}}

<!--T:120-->
For further options see {{c|man 8 lpadmin}}.

<!--T:121-->
Check the setup with {{c|lpstat}}:

<!--T:122-->
{{Cmd|lpstat -d -l -t|output=<pre>
no system default destination
scheduler is running
no system default destination
device for Brother_HL-L2340DW: lpd://BRW1008B1372DF2/BINARY_P1
Brother_HL-L2340DW accepting requests since Fri 30 Oct 2015 05:36:25 PM CET
printer Brother_HL-L2340DW is idle.  enabled since Fri 30 Oct 2015 05:36:25 PM CET
        Form mounted:
        Content types: any
        Printer types: unknown
        Description: Brother_HL-L2340DW
        Alerts: none
        Location: 
        Connection: direct
        Interface: /etc/cups/ppd/Brother_HL-L2340DW.ppd
        On fault: no alert
        After fault: continue
        Users allowed:
                (all)
        Forms allowed:
                (none)
        Banner required
        Charset sets:
                (none)
        Default pitch:
        Default page size:
        Default port settings:
</pre>}}

<!--T:105-->
Don't forget to set the user's default printer

<!--T:106-->
{{Cmd|lpstat -a|output=<pre>
Brother_HL-L2340D_series accepting requests since Fri 29 May 2015 09:11:30 AM CEST
</pre>}}
{{Cmd|lpoptions -d Brother_HL-L2340D_series|output=<pre>
copies=1 device-uri=http://192.168.178.27:631/ipp/port1 finishings=3 job-cancel-after=10800 job-hold-until=no-hold job-priority=50 job-sheets=none,none marker-change-time=1432883490 marker-colors=#000000,none marker-high-levels=100 marker-levels=-1,95 marker-low-levels=16 marker-names='Black\ Toner\ Cartridge,Drum\ Unit' marker-types=toner number-up=1 printer-commands=AutoConfigure,Clean,PrintSelfTestPage printer-info='Brother HL-L2340D series' printer-is-accepting-jobs=true printer-is-shared=false printer-location='Local Printer' printer-make-and-model='Brother BrGenML1 for CUPS ' printer-state=3 printer-state-change-time=1432883490 printer-state-reasons=none printer-type=10522644 printer-uri-supported=ipp://localhost/printers/Brother_HL-L2340D_series
</pre>}}

== Installing the scanner  == <!--T:68-->

=== Prerequisites === <!--T:69-->

<!--T:70-->
Make sure the {{Package|media-gfx/sane-backends}} package is installed in order to install the driver for the scanner. As most users will use <tt>xsane</tt> to scan a document, just emerge it. The {{Package|media-gfx/sane-backends}} package will be pulled in as a dependency.

<!--T:71-->
{{Emerge|media-gfx/xsane}}

=== Installing the driver === <!--T:72-->

<!--T:73-->
Download the driver from the [http://welcome.solutions.brother.com/bsc/public_s/id/linux/en/download_scn.html Brother Solutions]'s download page for the scanner.

<!--T:74-->
{{Important|Pay attention to the family the printer belongs to. Depending on the family, the right brscan will need to be selected (brscan, brscan2, brscan3 or brscan4) as well as the right architecture (32 bits or 64 bits depending on the system installation).}}

<!--T:75-->
Change to the directory where the downloaded drivers are, and run the following command:

<!--T:76-->
{{RootCmd|ls -a}}

<!--T:77-->
This will show the file names of the downloaded files, allowing for easy copy/paste for the next commands.

<!--T:78-->
Install the drivers using <tt>rpm</tt>:

<!--T:79-->
{{RootCmd|rpm -i --nodeps brscan2-0.2.5-1.x86_64.rpm}}

<!--T:80-->
{{Note|If xsane was not installed yet, install it, then add <code>--replacepkgs</code> as an option to the previous command to reinstall the driver.}}

===Configuring the scanner === <!--T:81-->

<!--T:82-->
Once the driver is correctly installed, use the following command:

<!--T:83-->
{{RootCmd|brsaneconfig2 -a name{{=}}monScanner model{{=}}DCP-750CW ip{{=}}192.168.1.13}}

<!--T:84-->
{{Note| ''brsaneconfig2'' should be replaced with the command corresponding to the printer's family (see above), ''monScanner'' with any name of personal choice, and ''DCP-750CW'' with the printer's model name.}}

<!--T:85-->
Now check everything is correctly installed:

<!--T:86-->
{{RootCmd|brsaneconfig2 -q {{!}} grep monScanner|output=<pre>
  0 monScanner          "DCP-750CW"         I:192.168.1.13</pre>}}

<!--T:87-->
{{Note|Replace ''monScanner'' with the name chosen above.}}

<!--T:88-->
Congratulation! The scanner is now ready for use!

== Troubleshooting == <!--T:89-->

=== Generic LPR printer driver on amd64 === <!--T:90-->

<!--T:91-->
The [http://support.brother.com/g/b/downloadlist.aspx?c=us&lang=en&prod=hll2340dw_us_eu_as&os=127 printer driver] uses statically compiled x86 binaries. To be able to execute them the kernel needs to have the following configuration enabled: IA32_EMULATION

=== Text shifted up === <!--T:92-->

<!--T:93-->
Sometimes it happens that the text is shifted up toward the upper border of the page.

<!--T:94-->
To correct this, enter the following command:

<!--T:95-->
{{RootCmd| brprintconf_dcp750cw -pt A4}}

=== Scanner not detected === <!--T:96-->

<!--T:97-->
It may happen that, when xsane is launched, the scanner is not detected. This is probably due to a too recent version of libusb. In order to solve this, it might be necessary to install {{Package|dev-libs/libusb-compat}}. It was also necessary to get DCP-1610WE working over the network!

<!--T:98-->
{{Emerge|dev-libs/libusb-compat}}

== External resources == <!--T:99-->

<!--T:100-->
* [http://solutions.brother.com/linux/ Brother solutions, Linux page] on Brother.com
* [https://github.com/stefan-langenmaier/brother-overlay/tree/master/ brother-overlay] on Github.com

</translate>

[[Category:Brother]]
