<languages/>
{{InfoBox stack
|{{InfoBox github|rhinstaller/efibootmgr|header=true}}
|{{InfoBox package|sys-boot/efibootmgr}}
|{{InfoBox odoc|https://github.com/rhboot/efibootmgr/blob/master/README.md|text=README}}
{{InfoBox manpage|https://linux.die.net/man/8/efibootmgr|text=EFIBOOTMGR(8)|raw=true}}
}}

{{Metadata|abstract=La aplicación efibootmgr interactúa con el firmware UEFI del sistema, y ​​es una herramienta popular que sirve para manipular la configuración de EFI a fin de crear y gestionar entradas de arranque, capaces de arrancar Línux (u otros sistemas operativos).}}

La aplicación {{c|efibootmgr}} interactúa con el firmware UEFI del sistema. Es una [[Article description::herramienta popular para manipular los ajustes EFI a fin de crear y gestionar entradas de arranque]] capaces de arrancar Línux (o cualquier otro sistema operativo EFI).

La aplicación {{Package|sys-boot/efibootmgr}} '''no''' es un cargador de arranque. Se trata de una herramienta que interactúa con el firmware  EFI del sistema, el cual actúa como un cargador de arranque. Si se utilizar {{c|efibootmgr}} se pueden crear, editar, reordenar y eliminar entradas de arranque.

== Instalación ==

=== Núcleo ===

Se necesita habilitar <var>CONFIG_EFI_VARS</var>:

{{KernelBox|title=Habilitar soporte para EFI variable support|1=
Firmware Drivers  --->
   EFI (Extensible Firmware Interface) Support  --->
       <*> EFI Variable Support via sysfs
}}

=== Emerge ===

El paquete {{Package|sys-boot/efibootmgr}} no tiene ningún ajuste USE. Todo lo que se necesita es instalarlo:

{{Emerge|sys-boot/efibootmgr}}

== Configuración ==

=== Variables EFI ===

Para utilizar correctamente {{c|efibootmgr}}, se debe poder acceder al sistema de ficheros de las variables EFI. Esto requiere que se haya iniciado el sistema en modo EFI (y no a través del modo MBR del firmware), de lo contrario no se podrá acceder a las variables EFI. Si el sistema está en modo MBR, reiniciar y hacer todo lo necesario para indicarle al firmware que se debe iniciar en modo EFI. Normalmente esto implica cambiar una opción en la configuración del firmware o seleccionar una entrada de arranque EFI en el menú de inicio del sistema.

When the system is in EFI mode, run the following command to check for the existence of [[Filesystem#Disk_filesystems|efivarfs]]:

{{RootCmd|mount {{!}} grep efivars|output=<pre>
efivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)
</pre>}}

Si la partición efivars no está montada (que ha debido montarse a través del guión de inicio {{Path|sysfs}}), es posible montarla manualmente utilizando la siguiente orden:

{{RootCmd|mount -t efivarfs efivarfs /sys/firmware/efi/efivars}}

Ver [https://github.com/OpenRC/openrc/commit/3fd3bfc76dccc3752f4af949ad4076dab26357fb#diff-8312ad0561ef661716b48d09478362f3R6 las noticias de OpenRC-0.28].

== Precondiciones ==

Si no existe una sistema de particiones EFI (ESP), se necesitará crear uno, leer [[EFI System Partition]]

== Utilización ==

=== Listar las entradas de arranque ===

Para listar las entradas de inicio actuales se puede utilizar la opción <code>--verbose (-v)</code>:

{{RootCmd|efibootmgr -v|output=<pre>
BootCurrent: 0002
Timeout: 3 seconds
BootOrder: 0003,0003,0002,0000,0004
Boot0000* CD/DVD Drive  BIOS(3,0,00)
Boot0001* Hard Drive    BIOS(2,0,00)
Boot0002* Gentoo        HD(1,800,61800,6d98f360-cb3e-4727-8fed-5ce0c040365d)File(\EFI\boot\bootx64.efi)
Boot0003* Hard Drive    BIOS(2,0,00)P0: ST1500DM003-9YN16G
</pre>}}

=== Crear una entrada de arranque ===

Para crear una entrada de arranque EFI, pasaremos un par de argumentos a {{c|efibootmgr}}:

* <code>--create (-c)</code> para crear una nueva entrada;
* <code>--part (-p)</code>  seguido por el número de partición en la que se aloja la partición [[EFI System Partition]];
* <code>--disk (-d)</code> seguido por el disco en el que se aloja la partición EFI System Partition;
* <code>--label (-L)</code> seguida de la etiqueta que vamos a utilizar como entrada de arranque;
* <code>--loader (-l)</code> seguido de la ruta a la imagen EFI para arrancar.

{{Important/es|La ruta de la imagen de EFI a arrancar ''debe'' usar barra invertida ({{Key|\}}), en lugar de la barra diagonal ({{Key|/}}), como separador de ruta.}}

Por ejemplo:

{{RootCmd|efibootmgr -c -d /dev/sda -p 2 -L "Gentoo" -l "\efi\boot\bootx64.efi"}}

Optionally, additional kernels can be installed and made known to the UEFI firmware. This is especially useful when wanting to test more kernels or to dual-boot with another operating system. These will be shown in the boot selection prompt, normally after a keyboard hotkey is pressed at the right time during system initialization. The latest added entry always gets highest boot priority, so it will be default. If the hotkey combination is unknown, search for official documentation from the computer manufacturer. This information is usually not difficult to find.

=== Eliminar una entrada de arranque ===

Antes de eliminar una entrada, primero debemos averiguar qué identificador (ID) tiene la entrada.

Para eliminar, por ejemplo, la entrada de Gentoo que se muestra arriba (que tiene ''Boot0002'' como identificador), le indicaremos a {{c|efibootmgr}} que elimine la entrada con el identificador 2, para lo cual le pasaremos los argumentos <code>--bootnum (-b)</code> seguido del identificador, y <code>--delete-bootnum (-B)</code> para eliminar la entrada en cuestión:

{{RootCmd|efibootmgr -b 2 -B}}

== Eliminación ==

=== Desinstalación ===

{{Unmerge|sys-boot/efibootmgr}}

== Véase también ==

* {{See also|rEFInd}} 
* [[EFI_stub_kernel|EFI stub kernel]], este artículo explica cómo configurar el núcleo de Línux para poder arrancarlo directamente desde EFI
* [[Handbook:AMD64/Installation/Bootloader/es#Alternativa_2:_efibootmgr|Alternativa 2: efibootmgr]] en el Manual de Gentoo
