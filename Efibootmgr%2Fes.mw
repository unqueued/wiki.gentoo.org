<languages/>

{{Metadata|abstract=La aplicación efibootmgr interactúa con el firmware UEFI del sistema, y ​​es una herramienta popular que sirve para manipular la configuración de EFI a fin de crear y gestionar entradas de arranque, capaces de arrancar Línux (u otros sistemas operativos).}}

La aplicación <tt>efibootmgr</tt> interactúa con el firmware UEFI del sistema, y ​​es una herramienta popular que sirve para manipular la configuración de EFI a fin de crear y gestionar entradas de arranque, capaces de arrancar Línux (u otros sistemas operativos).

{{InfoBox stack
|{{InfoBox homepage|https://github.com/vathpela/efibootmgr|header=true}}
}}

== EFIbootmgr no es un gestor de arranque ==

La aplicación {{Package|sys-boot/efibootmgr}} no es propiamente un gestor de arranque. Es una herramienta que interactúa con el firmware EFI del sistema, que a su vez actúa como un gestor de arranque. Con la aplicación <tt>efibootmgr</tt> podemos crear, remodelar y actualizar entradas de arranque.

== Configuración ==

La aplicación {{Package|sys-boot/efibootmgr}} no requiere ninguna configuración. Todo lo que se necesita es instalarla.

{{Emerge|sys-boot/efibootmgr}}

Sin embargo, con el fin de usar correctamente <tt>efibootmgr</tt>, el sistema de ficheros de las variables EFI debe ser accesible. Esto requiere que el sistema se pueda arrancar con EFI (y no a través de la BIOS) ya que, de otro modo, significaría que las variables EFI en sí no están accesibles.

{{RootCmd|mount {{!}} grep efivars|output=<pre>
efivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)
</pre>}}

Si la partición efivars todavía no está montada (que ha debido montarse a través del script init {{Path|sysfs}}), es posible montarla manualmente de este modo:

{{RootCmd|mount -t efivars efivars /sys/firmware/efi/efivars}}

== Gestionar las entradas de arranque EFI ==

=== Listar las entradas de arranque ===

Para listar las entradas de arranque presentes, solo tenemos que lanzar <tt>efibootmgr</tt>. Podemos utilizar la opción <code>--verbose (-v)</code> para obtener una salida con información adicional:

{{RootCmd|efibootmgr -v|output=<pre>
BootCurrent: 0002
Timeout: 3 seconds
BootOrder: 0003,0003,0002,0000,0004
Boot0000* CD/DVD Drive  BIOS(3,0,00)
Boot0001* Hard Drive    BIOS(2,0,00)
Boot0002* Gentoo        HD(1,800,61800,6d98f360-cb3e-4727-8fed-5ce0c040365d)File(\EFI\boot\bootx64.efi)
Boot0003* Hard Drive    BIOS(2,0,00)P0: ST1500DM003-9YN16G
</pre>}}

=== Crear una entrada de arranque ===

Para crear una entrada de arranque EFI, pasaremos un par de argumentos a <tt>efibootmgr</tt>:

* <code>--create (-c)</code> para crear una nueva entrada;
* <code>--part (-p)</code>  seguido por el número de partición en la que se aloja la partición EFI System Partition;
* <code>--disk (-d)</code> seguido por el disco en el que se aloja la partición EFI System Partition;
* <code>--label (-L)</code> seguida de la etiqueta que vamos a utilizar como entrada de arranque;
* <code>--loader (-l)</code> seguido de la ruta a la imagen EFI para arrancar.

{{Important/es|La ruta de la imagen de EFI a arrancar ''debe'' usar barra invertida ({{Key|\}}), en lugar de la barra diagonal ({{Key|/}}), como separador de ruta.}}

Por ejemplo:

{{RootCmd|efibootmgr -c -d /dev/sda -p 2 -L "Gentoo" -l "\efi\boot\bootx64.efi"}}

=== Eliminar una entrada de arranque ===

Before deleting an entry, first figure out what ID the entry has.

To delete the Gentoo entry as shown above (which has ''Boot0002'' as the identifier), ask <tt>efibootmgr</tt> to delete the entry with id 2, passing the arguments <code>--bootnum (-b)</code> with the identifier, and <code>--delete-bootnum (-B)</code> to delete the entry:

{{RootCmd|efibootmgr -b 2 -B}}

== See also ==

* [[EFI_stub_kernel|EFI stub kernel]], este artículo explica cómo configurar el kérnel de Línux para poder ser arrancado desde EFI directamente.
