<languages/>
{{InfoBox stack
|{{InfoBox github|rhinstaller/efibootmgr|header=true}}
}}

{{Metadata|abstract=La aplicación efibootmgr interactúa con el firmware UEFI del sistema, y ​​es una herramienta popular que sirve para manipular la configuración de EFI a fin de crear y gestionar entradas de arranque, capaces de arrancar Línux (u otros sistemas operativos).}}

La aplicación {{c|efibootmgr}} interactúa con el firmware UEFI del sistema. Ees una herramienta popular para manipular los ajustes EFI a fin de crear y gestionar entradas de arranque, capaces de arrancar Línux (o cualquier otro sistema operativo EFI).

La aplicación {{Package|sys-boot/efibootmgr}} '''no''' es un cargador de arranque. Se trata de una herramienta que interactúa con el firmware  EFI del sistema, el cual actúa como un cargador de arranque. Si se utilizar {{c|efibootmgr}} se pueden crear, editar, reordenar y eliminar entradas de arranque.

== Instalación ==

=== Núcleo ===

Para arrancar directamente desde UEFI, el núcleo necesita tener el soporte de <var>CONFIG_EFI</var>, <var>CONFIG_EFI_STUB</var> y <var>CONFIG_EFI_VARS</var> habilitado:

{{KernelBox|title=Habilitar soporte EFI stub|1=
Processor type and features  --->
    [*] EFI runtime service support 
    [*]   EFI stub support
Firmware Drivers  --->
   EFI (Extensible Firmware Interface) Support  --->
       <*> EFI Variable Support via sysfs
}}

=== Emerge ===

El paquete {{Package|sys-boot/efibootmgr}} no tiene ningún ajuste USE. Todo lo que se necesita es instalarlo:

{{Emerge|sys-boot/efibootmgr}}

== Configuración ==

=== Variables EFI ===

In order to successfully use {{c|efibootmgr}} the EFI variables filesystem must be accessible. This requires that the system has been booted in EFI mode (and not through the firmware's MBR mode) as otherwise the EFI variables themselves cannot be accessed. If the system is in MBR mode, reboot and do what is necessary in order to tell the system firmware to boot in EFI mode. Usually this involved either changing an option in the firmware's settings or selecting an EFI boot entry in the system's boot menu.

When the system is in EFI mode, run the following command to check for the existence of efivarfs:

{{RootCmd|mount {{!}} grep efivars|output=<pre>
efivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)
</pre>}}

Si la partición efivars no está montada (que ha debido montarse a través del guión de inicio {{Path|sysfs}}), es posible montarla manualmente utilizando la siguiente orden:

{{RootCmd|mount -t efivars efivars /sys/firmware/efi/efivars}}

=== Gestionar las entradas de arranque EFI ===

==== Listar las entradas de arranque ====

Para listar las entradas de inicio actuales se puede utilizar la opción <code>--verbose (-v)</code>:

{{RootCmd|efibootmgr -v|output=<pre>
BootCurrent: 0002
Timeout: 3 seconds
BootOrder: 0003,0003,0002,0000,0004
Boot0000* CD/DVD Drive  BIOS(3,0,00)
Boot0001* Hard Drive    BIOS(2,0,00)
Boot0002* Gentoo        HD(1,800,61800,6d98f360-cb3e-4727-8fed-5ce0c040365d)File(\EFI\boot\bootx64.efi)
Boot0003* Hard Drive    BIOS(2,0,00)P0: ST1500DM003-9YN16G
</pre>}}

==== Crear una entrada de arranque ====

Para crear una entrada de arranque EFI, pasaremos un par de argumentos a {{c|efibootmgr}}:

* <code>--create (-c)</code> para crear una nueva entrada;
* <code>--part (-p)</code>  seguido por el número de partición en la que se aloja la partición EFI System Partition;
* <code>--disk (-d)</code> seguido por el disco en el que se aloja la partición EFI System Partition;
* <code>--label (-L)</code> seguida de la etiqueta que vamos a utilizar como entrada de arranque;
* <code>--loader (-l)</code> seguido de la ruta a la imagen EFI para arrancar.

{{Important/es|La ruta de la imagen de EFI a arrancar ''debe'' usar barra invertida ({{Key|\}}), en lugar de la barra diagonal ({{Key|/}}), como separador de ruta.}}

Por ejemplo:

{{RootCmd|efibootmgr -c -d /dev/sda -p 2 -L "Gentoo" -l "\efi\boot\bootx64.efi"}}

==== Eliminar una entrada de arranque ====

Antes de eliminar una entrada, primero debemos averiguar qué identificador (ID) tiene la entrada.

Para eliminar, por ejemplo, la entrada de Gentoo que se muestra arriba (que tiene ''Boot0002'' como identificador), le indicaremos a {{c|efibootmgr}} que elimine la entrada con el identificador 2, para lo cual le pasaremos los argumentos <code>--bootnum (-b)</code> seguido del identificador, y <code>--delete-bootnum (-B)</code> para eliminar la entrada en cuestión:

{{RootCmd|efibootmgr -b 2 -B}}

== Eliminación ==

=== Desinstalación ===

{{Unmerge|sys-boot/efibootmgr}}

== Véase también ==

* [[EFI_stub_kernel|EFI stub kernel]], este artículo explica cómo configurar el núcleo de Línux para poder arrancarlo directamente desde EFI.
* [[Handbook:AMD64/Installation/Bootloader/es#Alternativa:_Usar_efibootmgr|Alternativa: Usar efibootmgr]] en el manual de Gentoo
