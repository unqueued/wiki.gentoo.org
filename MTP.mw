{{InfoBox stack
|{{InfoBox wikipedia|Media Transfer Protocol|header=true}}
}}
'''MTP''' ('''M'''edia '''T'''ransfer '''P'''rotocol) is a protocol to allow the transfer of files to external devices.

== MTPfs ==

=== Installation ===
Install {{Package|sys-fs/mtpfs}}:
{{USEflag|package=sys-fs/mtpfs
|debug
|mad
}}

{{RootCmd|echo 'media-libs/libmtp-1.1.8 ~amd64' >> /etc/portage/package.keywords|emerge mtpfs}}

{{Kernel||<pre>File systems  ---> 
    ...
    <*> FUSE (Filesystem in Userspace) support</pre>}}

=== Configuration ===
Your user needs to be in the "plugdev" group:
{{RootCmd|gpasswd -a YOUR_USER plugdev}}

Modify your {{Path|/etc/fuse.conf}}:
{{File|/etc/fuse.conf||<pre>
user_allow_other
</pre>}}

=== Usage ===
* [[Mount]]:
: {{Cmd|mkdir ~/AndroidDevice|
  |mtpfs -o allow_other ~/AndroidDevice}}
: {{Note|Be patient, as this can take several minutes. Upon successful mount, mtpfs will background itself.}}

* Unmount:
: {{Cmd|fusermount -u ~/AndroidDevice}}

== Go-mtpfs ==
{{Note|Newer Galaxy Devices (S3, S4, Note2, etc.) use their own MTP-stack and don't work reliably, although this should be fixed in newer versions. See [https://github.com/hanwen/go-mtpfs/issues/29 Bug#29]}}

=== Installation ===
Install {{Package|sys-fs/go-mtpfs}}:

We need to unmask 2 packages in {{Path|/etc/portage/package.keywords}}:
{{File|/etc/portage/package.keywords||<pre>
dev-libs/go-fuse **
sys-fs/go-mtpfs **
</pre>}}

{{Emerge|go-mtpfs}}

=== Configuration ===
Your user needs to be in the "plugdev" group:
{{RootCmd|gpasswd -a YOUR_USER plugdev}}

=== Usage ===
* [[mount]]:
: {{Cmd|mkdir ~/AndroidDevice|
  |go-mtpfs ~/AndroidDevice &}}

Note: If you don't run go-mtpfs in the background (with & at the end), you will need another console to browse the device and to unmount it.

* unmount:
: {{Cmd|fusermount -u ~/AndroidDevice}}

When you unmount the device, go-mtpfs will quit.

== gphotofs ==
gphotofs is a FUSE file system for interfacing with digital cameras using gphoto2. Most modern mobile phones are cameras at the same time, and gphotofs can be a good alternative to tmpfs or go-mtpfs.

=== Installation ===
Install {{Package|media-gfx/gphotofs}}:

=== Usage ===
* [[mount]]:
: {{Cmd|mkdir ~/AndroidDevice|
  |gphotofs ~/AndroidDevice -o alllow_other}}

* unmount:
: {{Cmd|fusermount -u ~/AndroidDevice}}

== simple-mtpfs ==
Another FUSE file system implementation for use with MTP devices is simple-mtpfs.

=== Installation ===
Install {{Package|sys-fs/simple-mtpfs}}:

=== Usage ===
* [[mount]]:
: {{Cmd|mkdir ~/AndroidDevice|
  |simple-mtpfs ~/AndroidDevice}}

* unmount:
: {{Cmd|fusermount -u ~/AndroidDevice}}

== KDE ==
'''kio-mtp''' is a slave for [[KDE]]'s KIO framework.

As kio-mtp is still unstable, but is now part of main repository. Then:
{{RootCmd|echo kde-misc/kio-mtp >> /etc/portage/package.accept_keywords}}
{{Emerge|kio-mtp}}

Finally quit KDE, and relaunch it. Now your MTP devices appear e.g. in Dolphin.

== gMTP ==
'''gMTP''' is a simple MTP client for Solaris and Linux.

It is sufficient to just install and run {{Package|media-sound/gmtp}}:

{{Emerge|gmtp}}
{{Cmd|gmtp}}

Click on connect. A few second later, you will get the file hierarchy of your device. You can start to manipulate the files. It support features like Album Artwork and play lists.

== Troubleshooting ==
* If your device is not recognized by libmtp, try upgrading to latest (or even live) version.
* Sometimes (e.g. on HTC One X) USB debugging automatically turns on when device is connected to PC. You need to turn debugging off, otherwise libmtp can't recognize device.
* Make sure your Android device is not going to sleep and the screen is not getting locked. Set screen timeout to very long values, or enable in Development section flag "Do not turn off the screen".

[[Category:Software]]
