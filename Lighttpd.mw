{{Lowercase title}}
{{InfoBox stack
|{{InfoBox homepage|https://www.lighttpd.net|header=true}}
|{{InfoBox wikipedia}}
}}

{{c|lighttpd}} is [[Article description::a fast and lightweight [[:Category:Web Servers|web server]].]]

== Installation ==

=== USE flags ===

{{USEflag|package=www-servers/lighttpd}}

=== Emerge ===

Install {{Package|www-servers/lighttpd}}:

{{Emerge|www-servers/lighttpd}}

== Configuration ==

The lighttpd configuration is handled by {{Path|/etc/lighttpd/lighttpd.conf}}. The first example shows a single-site access, with SSL and no dynamic capabilities (such as [[PHP]]).

{{FileBox|filename=/etc/lighttpd/lighttpd.conf|title=Example 1|lang=ini|1=
$SERVER["socket"] == "192.0.2.10:443" {
  server.name = "www.genfic.com"
  server.document-root = "/var/www/www.genfic.com/"
  server.errorlog = "/var/log/lighttpd/http_error.log"
  accesslog.filename = "/var/log/lighttpd/http_access.log"
  ## SSL Configuration
  ssl.engine = "enable"
  ssl.pemfile = "/etc/ssl/lighttpd-ssl.pem"
  ssl.ca-file = "/etc/ssl/certs/ca-certificate.crt"
  # SSL options
  ssl.use-sslv2 = "disable"
  ssl.cipher-list = "TLSv1+HIGH !SSLv2 RC4+MEDIUM !aNULL !eNULL !3DES @STRENGTH"
}
}}

To enable additional functionalities configure needed modules in {{Path|/etc/lighttpd/lighttpd.conf}}. For instance, to enable PHP using the FastCGI processor:

{{FileBox|filename=/etc/lighttpd/lighttpd.conf|title=Example 2 - Enabling PHP support|lang=apache|1=
...
include "mod_fastcgi.conf"
...
}}

=== IP access lists ===

This third example shows how to allow access to a particular site ''/server-status'' only to certain IP addresses. To allow using service status on the ''198.51.100.1'' and ''127.0.0.1'' addresses, set the following lines in the {{Path|lighttpd.conf}} file:

{{FileBox|filename=/etc/lighttpd/lighttpd.conf|title=Example 3 - Enabling and configuring an IP access lists for /server-status page|lang=apache|1=
# enable access module
server.modules = {
  ...
  "mod_access",
}
...
# enable server-status page globally
status.status-url  = "/server-status"

...
# restrict access to server-status to listed IP hosts
$HTTP["remoteip"] !~ "198.51.100.1{{!}}127.0.0.1" {
      url.access-deny = ( "/server-status" )
}
}}

=== Start up ===

In order for the {{c|lighttpd}} service to start automatically it must be properly added to the init handler program. Gentoo has two main init handler programs: [[OpenRC]] and [[Systemd]].

==== OpenRC ====

With OpenRC use the {{c|rc-update}} command:

{{RootCmd|rc-update add lighttpd default}}

==== systemd ====

With systemd use the {{c|systemctl}} command:

{{RootCmd|systemctl enable lighttpd.service}}

== Troubleshooting ==

Verifying {{Path|/etc/lighttpd/lighttpd.conf}} configuration file with {{c|lighttpd-angel}}, it will return the exit code <code>0</code>, if everything is configured properly:

{{RootCmd|lighttpd-angel -t -f /etc/lighttpd/lighttpd.conf|output=<pre>
Syntax OK
lighttpd-angel.c.140: child (pid=32491) exited normally with exitcode: 0
</pre>}}

If the configuration file has errors, it will print it to stdout, like in the example below:

{{RootCmd|lighttpd-angel -t -f /etc/lighttpd/lighttpd.conf|output=<pre>
2012-09-02 12:52:08: (plugin.c.131) Cannot load plugin mod_fastcgi more than once, please fix your config
2012-09-02 12:52:08: (network.c.379) can't bind to port: 192.168.0.1 80 Address already in use 
lighttpd-angel.c.140: child (pid=32139) exited normally with exitcode: 255
</pre>}}

== See also ==

* {{See also|Apache}}
* {{See also|Nginx}}

== External resources ==

* http://redmine.lighttpd.net/projects/lighttpd/wiki - The Lighttpd wiki.

[[Category:Web Servers]]
