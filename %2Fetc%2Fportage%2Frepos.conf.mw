{{Path|/etc/portage/repos.conf}} is the directory of package repositories like [https://gitweb.gentoo.org/repo/gentoo.git/tree/ the Gentoo Portage tree] or [[Overlay|overlays]] used on a system. It can be a file or directory of files that specifies repository-specific configuration information.

== Format ==

{{Note|While Portage can handle {{Path|repos.conf}} as either a file or a directory of files. The preferred method to be used is a '''''directory'''''. Other tools like {{c|layman}} and {{c|mirrorselect}} require and expect it to be a directory. Layman creates and manages it's own {{Path|layman.conf}} file to register installed overlays with Portage. {{c|mirrorselect}} looks for the {{Path|repos.conf/gentoo.conf}} file in order to modify the <code>sync-uri</code> parameter for the Gentoo repository.
}}

* Comments begin with <code>#</code> (no inline comments)
* Configuration of each repository is specified in a separate file or section starting with <code>[repository_name]</code>. It is recommended that <code>[repository_name]</code> is the same as the name given in the [[Repository_format|repo_name]] file.
* Attributes are specified in <code>attribute = value</code> format

== Attributes supported in the default section ==

{| class="table"
|-
! Attribute !! Description
|-
| <code>main-repo</code> || Specifies main repository.
|-
| <code>eclass-overrides</code> || Makes all repositories inherit eclasses from specified repositories. Setting this attribute is generally not recommended since resulting changes in eclass inheritance may trigger performance issues due to invalidation of metadata cache. When <code>force = eclass-overrides</code> attribute is not set, {{c|egencache}}, {{c|emirrordist}}, and {{c|repoman}} ignore this attribute, since operations performed by these tools are inherently not site-specific.
|-
| <code>force</code> || Specifies names of attributes, which should be forcefully respected by {{c|egencache}}, {{c|emirrordist}}, and {{c|repoman}}. Valid values: <code>aliases</code>, <code>eclass-overrides</code>, and <code>masters</code>.
|}

== Attributes supported in sections of repositories ==

{| class="table"
|-
! Attribute !! Description
|-
| <code>aliases</code> ||  Specifies aliases of given repository. Setting this attribute is generally not recommended since resulting changes in eclass inheritance may trigger performance issues due to invalidation of metadata cache. When <code>force = eclass-overrides</code> attribute is not set, {{c|egencache}}, {{c|emirrordist}}, and {{c|repoman}} ignore this attribute, since operations performed by these tools are inherently not site-specific.
|-
| <code>auto-sync</code> || This setting determines if the repo will be synced during {{c|emerge --sync}} or {{c|emaint sync --auto}} runs. This allows for repositories to be synced only when desired via {{c|emaint sync --repo foo}}. Valid values: <code>yes</code>, <code>no</code>, <code>true</code>, <code>false</code>. If unset, the repo will be treated as set <code>yes</code>, <code>true</code>.
|-
| <code>eclass-overrides</code> || Makes all repositories inherit eclasses from specified repositories. Setting this attribute is generally not recommended since resulting changes in eclass inheritance may trigger performance issues due to invalidation of metadata cache. When <code>force = eclass-overrides</code> attribute is not set, {{c|egencache}}, {{c|emirrordist}}, and {{c|repoman}} ignore this attribute, since operations performed by these tools are inherently not site-specific.
|-
| <code>force</code> || Specifies names of attributes, which should be forcefully respected by {{c|egencache}}, {{c|emirrordist}}, and {{c|repoman}}. Valid values: <code>aliases</code>, <code>eclass-overrides</code>, and <code>masters</code>.
|-
| <code>location</code> ||  Specifies location of given repository.
|-
| <code>masters</code> || Specifies master repositories of given repository. Setting this attribute is generally not recommended since resulting changes in eclass inheritance may trigger performance issues due to invalidation of metadata cache. When <code>force = eclass-overrides</code> attribute is not set, {{c|egencache}}, {{c|emirrordist}}, and {{c|repoman}} ignore this attribute, since operations performed by these tools are inherently not site-specific.
|-
| <code>priority</code> || Specifies [[Overlay#Priorities|priority]] of given repository.
|-
| <code>sync-cvs-repo</code> || Specifies CVS repository.
|-
| <code>sync-depth</code> || Specifies  clone  depth to use for DVCS repositories. Defaults to <code>1</code> (only the newest commit). If set to <code>0</code>, the depth is unlimited.
|-
| <code>sync-type</code> || Specifies type of synchronization performed by {{c|emerge --sync}}. Valid non-empty values: <code>cvs</code>, <code>git</code>, <code>rsync</code>, <code>svn</code>, <code>websync</code> (<=portage-2.2.18), <code>webrsync</code> (>=portage-2.2.19). This attribute can be set to empty value to disable synchronization of given repository. Empty value is default.
|-
| <code>sync-umask</code> || Specifies umask used to synchronize the repository. Takes an octal permission mask, e.g. <code>022</code>.
|-
| <code>sync-uri</code> || Specifies URI of repository used for synchronization performed by {{c|emerge --sync}}. This attribute can be set to empty value to disable synchronization of given repository. Empty value is default.
<pre>Syntax:
cvs: [cvs://]:access_method:[username@]hostname[:port]:/path
git: (git|git+ssh|http|https)://[username@]hostname[:port]/path
rsync: (rsync|ssh)://[username@]hostname[:port]/(module|path)
</pre>
|-
| <code>sync-user</code> || Specifies the credentials used to perform the synchronization. If only user is provided, the primary group of the user will be used.  If only group is  provided, the current user will be preserved and only group id will be changed. This key takes precedence over <code>FEATURES=userpriv</code>. If user or group id is provided, Portage no longer uses owner of the directory.
<pre>Syntax: [user][:group]</pre>
|}

== Examples ==

=== Main Gentoo repository ===

{{:/etc/portage/repos.conf/gentoo.conf}}

=== Local overlay ===

{{:/etc/portage/repos.conf/local.conf}}

For further information see the [[Overlay/Local_overlay]] article.

=== External overlay ===

{{:/etc/portage/repos.conf/brother-overlay.conf/en}}

=== repos.conf as a single file ===

For an example of {{Path|repos.conf}} as a monolithic file, run this command and search for the {{Path|repos.conf}} section:

{{Cmd|man 5 portage}}

== Listing repositories ==

To see a compact list of repositories, formatted for easy reading:

{{Cmd|emerge --info --verbose {{!}} sed -n '/^Repo/,/^ABI/p' {{!}} head -n -1}}

To see a detailed list of repositories, without any formatting:

{{Cmd|portageq envvar PORTAGE_REPOSITORIES}}

== See also ==

* [[Handbook:Parts/Working/Features#Pulling_validated_Gentoo_ebuild_tree_snapshots|Handbook:Parts/Working/Features#Pulling validated Gentoo ebuild tree snapshots]]
* [[Project:Portage/Sync|Overview over the new Portage sync system]]
* [[Layman#Using_.27repos.conf.27_method_.28default_method_for_app-portage.2Flayman-2.1.0_or_later_.29|Layman - Using 'repos.conf' method]]
* [[Project:Overlays/User_Guide|Overlays user guide]]
* [[Repository_format|Repository format]]
* [[Project:Repository mirror and CI]]

== External resources ==

* [https://www.gentoo.org/support/news-items/2015-02-04-portage-sync-changes.html Portage Sync news announcement (2015-02-04)]

[[Category:Portage]]
