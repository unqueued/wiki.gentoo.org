<languages />
{{InfoBox stack
|{{InfoBox wikipedia|header=true}}
|{{InfoBox homepage|http://www.freedesktop.org/wiki/Software/fontconfig/}}
}}

La biblioteca <tt>fontconfig</tt> está pensada para ofrecer una selección y configuracion uniforme de tipografías entre todas las aplicaciones GUI. Aunque es algo común que los [[:Category:Desktop environment|entornos de escritorio]] ofrezcan sus propias tipografías y configuraciones, <tt>fontconfig</tt> es la librería que funciona por debajo.

== Configuración ==

{{Note|¡Los cambios realizados a los archivos de  <tt>fontconfig</tt> se reflejarán únicamente en aquéllas aplicaciones que se hayan arrancado después del cambio!}}

=== Generico ===

<tt>fontconfig</tt> utiliza archivos XML en el direcotrio {{Path|/etc/fonts/}} para generar su configuración interna. Por defecto analiza {{Path|/etc/fonts/fonts.conf}} (¡Los usuaios no deben editar este archivo!) el cual define algunos valores por defecto seguros y normalmente contiene código para analizar también el contenido de {{Path|/etc/fonts/conf.d/}}. Además está el directorio {{Path|/etc/fonts/conf.avail/}} que contiene algunos ficheros de configuración que cubren algún aspecto de <tt>fontconfig</tt>. Es una decisión personal crear enlaces simbólicos de los ficheros necesarios a {{Path|/etc/fonts/conf.d/}}. Estos ficheros se lanzan en un orden de acuerdo a su nombre. Debido a esto sus nombres comienzan con un número de dos dígitos en el que el primer dígito (las decenas) a lo que afecta el fichero (lo que se llama clase).

=== Específico de Gentoo ===

Gentoo incluye un módulo [[eselect]] (<tt>eselect fontconfig</tt>) que hace exactamente lo descrito de forma genérica, gestiona los enlaces simbólicos de ficheros en  {{Path|/etc/fonts/conf.avail/}} añadiéndolos o eliminándolos del directorio {{Path|/etc/fonts/conf.d/}}. Por razones obvias el cambio de la configuración que afecta a todo el sistema requiere los permisos apropiados.

Las siguientes subsecciones explica cómo tratar con el módulo eselect de <tt>fontconfig</tt>.

=== Listar los ficheros disponibles ===

La orden <tt>list</tt> muestra los ficheros de <tt>fontconfig</tt> disponibles y marca los habilitados con un asterisco (<code>*</code>).

{{RootCmd|eselect fontconfig list
|output=<pre>
Archivos .conf disponibles en fontconfig (* está habilitado):
  [1]   10-autohint.conf *
  [2]   10-no-sub-pixel.conf
  [3]   10-sub-pixel-bgr.conf
  [4]   10-sub-pixel-rgb.conf
  [5]   10-sub-pixel-vbgr.conf
  [6]   10-sub-pixel-vrgb.conf
  [7]   10-unhinted.conf
  [8]   11-lcdfilter-default.conf
  [9]   11-lcdfilter-legacy.conf
  ...
</pre>}}

{{Warning|Distintos sistemas tiene distintos ficheros en {{Path|fonts.avail}} de modo que la salida ''será'' diferente. Nunca se debe utilizar un número de la lista de otra fuente a ciegas (como entradas de blogs o artículos de wikis).}}

==== Habilitar un archivo ====

Los ficheros se pueden habilitar bien usando el nombre del archivo, bien usando el número entre corchetes. Ambas hacen lo mismo:

{{RootCmd
|eselect fontconfig enable 10-sub-pixel-rgb.conf
|eselect fontconfig enable 4
}}

==== Deshabilitar un archivo ====

Los archivos se pueden deshabilitar del mismo modo:

{{RootCmd
|eselect fontconfig disable 10-sub-pixel-rgb.conf
|eselect fontconfig disable 4
}}

=== Configuración personalizada para todo el sistema ===

Para crear un fichero de <tt>fontconfig</tt> personalizado que afecte a todo el sistema, se debe habilitar {{Path|51-local.conf}} y crear {{Path|/etc/fonts/local.conf}} (esto es un fichero XML).

{{FileBox|filename=/etc/fonts/local.conf|title=Archivo ejemplo que configura el orden de uso de tipografía preferida a sans serif cuando no se encuentran otras|lang=xml|1=
<?xml version="1.0"?>
<!DOCTYPE fontconfig SYSTEM "fonts.dtd">
<fontconfig>
  <alias>
    <family>sans-serif</family>
    <prefer>
      <family>Ubuntu</family>
      <family>TakaoPGothic</family>
      <family>Droid Sans</family>
    </prefer>
    <default><family>DejaVu Sans</family></default>
  </alias>
</fontconfig>
}}

=== Configuración para una cuenta de usuario ===

Para crear ficheros <tt>fontconfig</tt> para una cuenta de usuario, se debe habilitar {{Path|50-user.conf}} (que podría estar ya habilitado por defecto), y hacer que los usuaios finales utilicen {{Path|~/.fonts.conf}} (que tiene el mismo formato XML que {{Path|local.conf}}).

{{Note|Esta es una forma de cómo un entorno de escritorio podría intentar afectar al renderizado de las tipografías. Es recomendable deshabilitarlo cuando se configure para estar seguro de que lo que se muestra es realmente resultado de una configuración para tolo el sistema. Al deshabilitarlo también hace que el renderizado de la tipografía sea más uniforme al cambiar de una cuenta de usuario a otra.}}

=== Checking configuration ===

Check the default font replacement, for example for Arial, by typing:

{{Cmd|fc-match Arial}}

== Anti-aliasing, hinting and sub-pixel rendering ==

Rendering aspects can be tuned as well. In the following sections the ''Anti-aliasing'', ''Hinting'' and ''Sub-pixel rendering'' features are tuned.

{| class="table"
|-
! Característica
! Descripción
|-
| Anti-aliasing
| está activado por defecto y hace que la tipografía tenga un aspecto más suave.
|-
| Hinting
| es un intento de alcanzar un bajo número de píxeles por unidad de área de las pantallas actuales. Un ajuste correcto hace que los caracteres tengan un aspecto más crujiente pero debido a que las métricas de las tipografías no se cambian (y no deberían cambiar) afecta a cómo se muestra todo el texto renderizado.
|-
| Renderizado de Sub-pixel
| se basa en el hecho de que la matriz LCD tiene tres primarios para triplicar de forma efectiva al resolución del texto pero puede hacer que los caracteres no aparezcan completamente negros. Para combatir esto, <tt>lcdfilter</tt> se puede utilizar con renderizado de subpixel (está disponible para <tt>fontconfig</tt> actual) pero puede hacer que los caracteres aparezcan demasiado difuminados. Al final esto depende completamente de cómo le gusta a las personas ver su texto.
|}

=== Forzar el hinting ===

The default <tt>fontconfig</tt> behavior regarding hinting is rather undocumented, but it can be made deterministically sub-optimal by making a system wide default.

# [[#Custom system wide configuration|First enable {{Path|/etc/fonts/local.conf}}]]
# Edit the {{Path|local.conf}} file to include full hinting by default 

Este extracto de {{Path|local.conf}} habilita completamente el hinting:

{{FileBox|filename=/etc/fonts/local.conf|title=Configurar el hinting completo|lang=xml|1=
<match target="font">
  <edit mode="assign" name="hintstyle">
    <const>hintfull</const>
  </edit>
</match>
}}

{{Note|La mayoría de las tipografías tienen mejor aspecto usando hinting completo, sin embargo otras necesitan ligeras o más raras opciones de hinting a configurar. Algunas tipografías por alguna razón u otra siempre aparecerán con un aspecto antiestético.}}

=== Using sub-pixel rendering ===

It's important to determine the sub-pixel layout of the LCD matrix. It's usually RGB ({{Path|10-sub-pixel-rgb.conf}}) but the only way to be sure is to either consult display specification or use this [http://www.lagom.nl/lcd-test/subpixel.php sub-pixel layout test] to determine it.

Una vez se haya determinado, habilite el archivo {{Path|10-sub-pixel-''<matrix type>''.conf}} apropiado.

{{RootCmd|eselect fontconfig enable 10-sub-pixel-rgb.conf}}

It's strongly advised that <tt>lcdfilter</tt>, if available, is used with sub-pixel rendering. It comes in different varieties but the default ({{Path|11-lcdfilter-default.conf}}) should be appropriate for all common fonts.

{{RootCmd|eselect fontconfig enable 11-lcdfilter-default.conf}}

{{Warning|The <code>bindist</code> USE flag in {{Package|media-libs/freetype}} disables sub-pixel rendering altogether due to potential patenting issues. Make sure to disable it for this package.}}

=== Regarding autohinter ===

Autohinter attempts to do automatic hinting disregarding any existing hinting information. Until recently it was the default because TrueType2 was covered by patents but now that they have expired there's very little reason to use it. From technical point of view it does better than broken or no hinting information but it will be strongly sub-optimal for fonts with good hinting information. Generally system fonts are of the second kind so autohinter should not be used.

{{Warning|Autohinter no es compatible con el renderizado de subpíxel. ¡No los utilice al mismo tiempo!}}

== Infinality ==

Infinality is a (somewhat controversial) set of patches for FreeType and accompanying <tt>fontconfig</tt> files. The goal of Infinality is to provide higher quality font rendering including emulation of other OS font rendering styles.

{{Note|As usual with software still in development it is prudent to always use only the latest version available unless there are known problems with it.}}

=== Habilitar Infinality ===

Habilite el ajuste USE 'infinality' editando {{Path|make.conf}} bien manualmente, bien utilizando la herramienta euse.

{{RootCmd|euse -E infinality}}

{{Note|euse es parte de {{Package|app-portage/gentoolkit}}.}}

A continuación reconstruya los programas afectados.

{{Emerge|params+=-uvDU|@world}}

A menos que los mensajes que se muestran después de la reconstrucción digan lo contrario, habilite {{Path|52-infinality.conf}}.

{{RootCmd|eselect fontconfig enable 52-infinality.conf}}

=== Configurar Infinality ===

Infinality can be configured in various ways including custom configurations, but easiest is to use pre-made profiles shipped in {{Package|media-libs/fontconfig-infinality}} that along with eselect modules should have been installed as dependencies of the <code>infinality</code> USE flag.

==== Quick and reasonable config ====

{{RootCmd|eselect infinality set infinality
|eselect lcdfilter set infinality}}

{{Note|As always, <tt>fontconfig</tt> changes affect only applications started after changes have been made.}}

It's also recommended to disable all <tt>fontconfig</tt> settings except for {{Path|52-infinality.conf}} as they interfere with the rendering of infinality styles:

{{RootCmd|eselect fontconfig disable <número>}}

Certain <tt>fontconfig</tt> settings do not interfere with how the fonts are rendered, but rather determine the default fonts for font-types (such as Monospace, sans-serif, etc.). Such settings (for example the {{Path|62-croscore-*.conf}} configurations) can be left enabled.

==== Explanation ====

Infinality provides FreeType environment variables that can be used to configure features introduced with its patches as well as <tt>fontconfig</tt> files to be used with these changes. <tt>fontconfig</tt> file sets are administrated on Gentoo via <tt>eselect infinality</tt> while the FreeType behaviour is set using <tt>eselect lcdfilter</tt>.

These eselect modules function as usual:

* Listing available <tt>fontconfig</tt> file sets.
: {{RootCmd|eselect infinality list}}
* Listing available FreeType variable sets.
: {{RootCmd|eselect lcdfilter list}}
* Both sets should match of course except when there are multiple matches possible such as shown below.
: {{RootCmd|eselect infinality set win7|eselect lcdfilter set windows-7-light}}

== Picking fonts ==

Choosing the right font can be trickier than deciding on the right hinting type. For one reason or another fonts will not be perfect but it's certainly doable to make that same fonts look better than, say, Windows 7 default font configuration. 

{| class="table"
|-
!Font family
!Good
!Bad
|-
|Liberation ({{Package|media-fonts/liberation-fonts}}) || Metric compatible with MS TrueType corefonts, decent, modern look. Gentoo fonts team recommendation for default Latin fonts. || A few glyphs may have hinting trouble.
|-
|Noto ({{Package|media-fonts/noto}}) || Google's font family that aims to support all the world's languages. Goes well with Liberation or Droid. Includes Adobe's Source Han Sans fonts for CJK. Recommended as fallback for glyphs not covered by Liberation. || Big download.
|-
|DejaVu ({{Package|media-fonts/dejavu}}) || Many styles, covers a lot of code points || Exceptionally wide - even condensed is wider than same height monospace (not to mention average sans-serif font), overall second to Verdana (an MS font) in width.
|-
|Droid ({{Package|media-fonts/droid}}) || Covers a lot of code points and scripts || Very dry, wide yet thin glyphs is probably the most memorable aspect of Droid font family. Clearly designed with handheld devices and their small screens in mind.
|-
|Gentium Plus ({{Package|media-fonts/sil-gentium}}) || Fairly distinctive, might appeal to people who like narrow fonts || Only serif, as with other SIL fonts hinting is questionable.
|-
|Ubuntu ({{Package|media-fonts/ubuntu-font-family}}) || A distinctive font with style which might not appeal to everyone, overall looks good as well as covering a fair bit of code points. || Only default sans-serif is truly polished, narrow and monospaced versions are unfinished. No known serif font that would accompany it well.
|-
|URW ({{Package|media-fonts/urw-fonts}}) || Metric compatible with popular Adobe fonts (among others?) || Seem to require slight hinting.
|-<!--Keep below open source fonts.-->
|MS TrueType corefonts ({{Package|media-fonts/corefonts}}) || Includes most fonts used in documents or on web || MS does not distribute them nowadays so the available fonts are from many years ago and do not reflect the current state of them. Obviously lacks fonts introduced later. Require full hinting.
|-<!--Always keep this entry at the bottom as the only reason it's included is to warn people against using it!-->
|Unifont ({{Package|media-fonts/unifont}}) || Covers a lot of code points. || In addition to being ''ugly as sin'' it also fails basic requirements to be considered a typeface - is it sans-serif, is it serif? Please never use this.
|}

== Recursos externos ==

* [https://wiki.archlinux.org/index.php/Font_Configuration Arch Linux Wiki on this topic] - an in-depth article on Linux font configuration and font selection
* [http://freedesktop.org/software/fontconfig/fontconfig-user.html Official <tt>fontconfig</tt> documentation for users]
* [[Wikipedia:Hinting|Wikipedia article on font hinting]]

[[Category:Desktop]]
