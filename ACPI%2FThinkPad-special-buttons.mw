
==Preparation==
make sure [[ACPI]] is installed
To check what names ACPI uses on a specific button, start acpi_listen and press Fn+buttons and see output
 
{{RootCmd|acpi_listen||output=<pre>
button/fnf1 FNF1 00000080 00000000 K
button/screenlock SCRNLCK 00000080 00000000 K
^[[36~button/battery BAT 00000080 00000000 K
^[[37~button/sleep SBTN 00000080 00000000 K
</pre>}}

{| {{prettytable}}
|+ Lenovo ThinkPad T410 selected ACPI key events
! Keys !! Event name !! Short name !! Numerical part !! Note
|-
| {{key|Fn}}{{key|F1}} || button/fnf1 || FNF1 || 00000080 00000000 K ||
|-
| {{key|Fn}}{{key|F2}} || button/screenlock || SCRNLCK || 00000080 00000000 K ||
|-
| {{key|Fn}}{{key|F3}} || button/battery || BAT || 00000080 00000000 K ||
|-
| {{key|Fn}}{{key|F4}} || button/sleep || SBTN || 00000080 00000000 K ||
|-
| {{key|Fn}}{{key|F5}} || button/wlan || WLAN || 00000080 00000000 K ||
|- 
| {{key|Fn}}{{key|F6}} || (not reported to handler) ||  ||  ||
|-
| {{key|Fn}}{{key|F7}} || video/switchmode || VMOD || 00000080 00000000 K ||
|-
| {{key|Fn}}{{key|F8}} || (not reported to handler) ||  ||  ||
|- 
| {{key|Fn}}{{key|F9}} || button/f24 || F24 || 00000080 00000000 K ||
|-
| {{key|Fn}}{{key|F10}} || (not reported to handler) ||  ||  ||
|-
| {{key|Fn}}{{key|F11}} || button/fnf11 || FF11 || 00000080 00000000 K ||
|-
| {{key|Fn}}{{key|F12}} || button/suspend || SUSP || 00000080 00000000 K ||
|-
| {{key|Fn}}{{key|Space}} || button/zoom || ZOOM || 00000080 00000000 K ||
|-
| {{key|ThinkVantage}} || button/prog1 || PROG1 || 00000080 00000000 K ||
|-
| {{key|Mute}} || button/mute || MUTE || 00000080 00000000 K ||
|-
| {{key|VolumeDown}} || button/volumedown || VOLDN || 00000080 00000000 K ||
|-
| {{key|VolumeUp}} || botton/volumeup || VOLUP || 00000080 00000000 K ||
|-
| {{key|MuteMic}} || button/f20 || F20 || 00000080 00000000 K ||
|-
| {{key|Fn}}{{key|Home}} || video/brightnessup || BRTUP || 00000086 00000000 ||
|-
| {{key|Fn}}{{key|End}} || video/brightnessdown || BRTDN || 00000087 00000000 ||
|-
| {{key|Fn}}{{key|PgUp}} || (not reported to handler) ||  ||  ||hardware light switch
|-
| {{key|Fn}}{{key|PrtSc}} || (not reported to handler) ||  ||  ||
|-
| {{key|Fn}}{{key|ScrLk}} || (not reported to handler) ||  ||  ||
|-
| {{key|Fn}}{{key|Pause}} || (not reported to handler) ||  ||  ||
|}

Collect those names.
Now create an event for each button in /etc/acpi/events, I named them by the location-function, but it's up to you.

==Recepies==
===Screen Lock button ===
{{File|/etc/acpi/events/FnF2-screenlock||<pre>
#Fn+F2 button/screenlock SCRNLCK 00000080 00000000 K
event=button/screenlock
action=/etc/acpi/actions/FnF2-screenlock.sh
</pre>}}

than create corresponding action for the button in /etc/acpi/actions, in this example
{{File|/etc/acpi/actions/FnF2-screenlock.sh||<pre>
#!/bin/bash
logger "[ACPI] Fn+F2 pressed, start Slimlock for logged-in user"
XUSER=$(ps aux | grep xinit | awk '{print $1}' | head -n1)
sudo -u $XUSER /usr/bin/slimlock&
</pre>}}
{{RootCmd|chmod +x /etc/acpi/actions/FnF2-screenlock.sh}}

how about using ScrLk key to lock console with app-misc/vlock
or it can be done through the same acpi action? dunno

===Sleep button===
{{File|/etc/acpi/events/FnF4-sleep||<pre>
#Fn+F4 button/sleep SBTN 00000080 00000000 K
event=button/sleep
action=/etc/acpi/actions/FnF4-sleep.sh
</pre>}}

{{File|/etc/acpi/actions/FnF4-sleep.sh||<pre>
#!/bin/sh
logger "[ACPI] Fn+F4 pressed, start Slimlock for current user and suspend to ram"
XUSER=$(ps aux | grep xinit | awk '{print $1}' | head -n1)
sudo -u $XUSER /usr/bin/slimlock&
echo -n mem >/sys/power/state
</pre>}}
{{RootCmd|chmod +x /etc/acpi/actions/FnF4-sleep.sh}}

===WiFi button===
{{File|/etc/acpi/events/FnF5-wifi||<pre>
#Fn+F5 button/wlan WLAN 00000080 00000000 K
event=button/wlan
action=/etc/acpi/actions/FnF5-wlan.sh
</pre>}}

{{File|/etc/acpi/actions/FnF5-wifi.sh||<pre>
#!/bin/sh
logger "[ACPI] Fn+F5 pressed, WiFi rfkill state toggle"
rf=/sys/class/rfkill/rfkill0
case $(< $rf/state) in
    0) echo 1 >$rf/state;;
    1) echo 0 >$rf/state;;
esac
</pre>}}
{{RootCmd|chmod +x /etc/acpi/actions/FnF5-wifi.sh}}

...to be continued

==Troubleshooting==
{{RootCmd|<pre>acpid -c /etc/acpi/events/ -s /var/run/acpid.socket -f -d -l | tee tmp</pre>}}
and see output when you press a key

Can I place all events in the same /etc/acpi/events/default ?
[[Category:ACPI]]
