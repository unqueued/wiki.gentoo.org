<languages />
I fabbricanti di hardware spesso forniscono degli aggiornamenti per il [[BIOS]] e per gli altri tipi di firmware. Installare (spesso indicato come "flash") gli aggiornamenti a volte non è facile sui sistemi GNU/Linux. Questo occasionalmente richiede qualche lavoro extra.

{{Warning|Se l'hardware è operativo spesso non c'è bisogno di aggiornare il BIOS. Se qualcosa va storto possono essere causati danni permanenti al BIOS o al firmware che possono far terminare la garanzia hardware. Procedere con cautela!}}

== Ottenere informazioni sul firmware ==

Per prima cosa trovare il produttore e il modello della scheda madre. Verificare il manuale utente relativo al sistema. Molte delle cose cercate possono essere trovate nel manuale utente.

Il pacchetto {{Package|sys-apps/dmidecode}} può essere utilizzato per richiamare le informazioni aggiuntive sul sistema hardware. {{c|dmidecode}} guarda alle tavole DMI della scheda madre, al fine di fornire informazioni dettagliate sui componenti del firmware e dell'hardware.

{{RootCmd|dmidecode -t bios -t baseboard}}

Come ultima cosa, se è possibile l'accesso fisico alla scheda madre, l'informazione richiesta può essere trovata direttamente nella scheda madre stessa.

{{Warning|L'accesso alla scheda madre di un computer può causare la perdita della garanzia!}}

Dopo aver cercato l'aggiornamento per il firmware, procedere al download del pacchetto necessario ad aggiornare l'hardware. E' normale per un produttore fornire il pacchetto dell'aggiornamento del firmware nel formato .zip, .exe o .iso. 

{{Cmd|unzip 7235v1A.zip
|output=<pre>Archive:  7235v1A.zip
   creating: 7235v1A/
inflating: 7235v1A/7235v1x.txt
inflating: 7235v1A/AWFL865.EXE
inflating: 7235v1A/How to flash the BIOS.DOC
inflating: 7235v1A/W7235IMS.1A0
</pre>}}

== Opzioni BIOS ==

Molti BIOS hanno un'opzione per leggere la nuova immagine binaria da una scheda di memoria esterna o da un floppy disk. Entrare nelle impostazioni del BIOS e vedere le opzioni. Se il BIOS non supporta ciò, continuare con la prossima sezione.

== Avvio da CD ==

Spesso i produttori forniscono una immagine CD-ROM da scaricare come supporto di avvio. Il file dovrebbe avere estensione {{Path|.iso}} e dovrebbe essere opportunamente scritto su un CD-R(W) vuoto. Uno degli strumenti per fare questo è {{c|cdrecord}}:

{{RootCmd|cdrecord BOOT-CD.iso}}

{{Note|{{c|cdrecord}} è provvisto di due pacchetti. Sceglierne uno dei seguenti: {{Package|app-cdr/cdrtools}} e {{Package|app-cdr/cdrkit}}.}}

Scegliere dal menu di avvio del BIOS l'avvio da CD e seguire le istruzioni del website del produttore o del manuale dell'utente.

== Ambiente FreeDOS ==

FreeDOS può essere utilizzato per eseguire l'utilità di aggiornamento del BIOS DOS-based. Una immagine FreeDOS "standard" che include i necessari strumenti BIOS  deve essere creata. Dopo che tale immagine è stata creata, avviarla tramite uno dei metodi mostrati sotto.

Scaricare FreeDOS e i suoi strumenti:

* [https://www.ibiblio.org/pub/micro/pc-stuff/freedos/files/distributions/1.0/ FreeDOS] - Scaricare il file {{Path|fdboot.img}}.
* [https://www.ibiblio.org/pub/micro/pc-stuff/freedos/files/dos/sys/sys-freedos-linux/ Settore di avvio FreeDOS] - Scaricare il file {{Path|sys-freedos-linux.zip}}.
* Il programma DOS-Flash e il nuovo BIOS dal sito internet del produttore.

=== Creare una immagine FreeDOS standard ===

Per prima cosa scaricare il software richiesto ed abilitare il dispositivo di loopback nel kernel:

{{KernelBox|title=abilitare il dispositivo di loopback|1=
Device Drivers  --->
    [*] Block devices  --->
        <M>   Loopback device support
}}

Se il modulo non è stato caricato utilizzare {{c|modprobe}} per caricarlo:

{{RootCmd|modprobe loop}}

Installare il software necessario:

{{Emerge|dev-lang/nasm app-arch/unzip sys-fs/dosfstools}}

Creare un file immagine di ~20MB utilizzando il comando {{c|dd}}. Il nome deve essere {{Path|freedos.img}} quando si sostituisce quello sul SystemRescueCD:

{{RootCmd|dd if{{=}}/dev/null of{{=}}freedos.img bs{{=}}1024 seek{{=}}20480}}

Scrivere un file system nell'immagine:

{{RootCmd|mkfs.msdos freedos.img}}

Scrivere un bootsector (settore di avvio) nel file di immagine:

{{RootCmd|unzip sys-freedos-linux.zip && ./sys-freedos.pl --disk{{=}}freedos.img}}

Ora copiare i files FreeDOS nella nuova immagine.

Create the mountpoints:

{{RootCmd|mkdir -p /mnt/freedos /mnt/freedos_new}}

Mount the original image:

{{RootCmd|mount -o loop fdboot.img /mnt/freedos}}

Mount the new image:

{{RootCmd|mount -o loop freedos.img /mnt/freedos_new}}

Copy the FreeDOS system files to the new image:

{{RootCmd|cp -ar /mnt/freedos/* /mnt/freedos_new/}}

Now copy the flash program and the new BIOS to the image file:

{{RootCmd|cp -ar FLASH-PROGRAM BIOS-UPDATE /mnt/freedos_new}}

Unmount both images:

{{RootCmd|umount /mnt/freedos_new /mnt/freedos}}

{{Note|DOS can only display names up to a length of 8 characters. It is a good idea to rename some of the files if their filenames are longer than this limit.}}

=== Using SystemRescueCD to boot FreeDOS ===

The SystemRescueCD comes with a version of FreeDOS. This version can replace the original image and create a bootable memory stick which contains the needed programs to flash the firmware.

==== Download SystemRescueCD and prepare LiveUSB ====

* [https://www.sysresccd.org/Download SystemRescueCD] - Download the normal ISO image.

==== Create a bootable memory stick ====

Use the default method to create the SystemRescueCD boot medium, the script {{Path|usb_inst.sh}} will provide guidance through the installation.

{{Warning|This will delete any data on the memory stick! Be sure all data has been properly backed up before using the memory stick for this task!}}

Create the folder in {{Path|/mnt}}:

{{RootCmd|mkdir /mnt/SysRescueCD}}

Mount the CD image:

{{RootCmd|mount -o loop systemrescuecd-x86-VERSION.iso /mnt/SysRescueCD}}

Start the installation script:

{{RootCmd|/mnt/SysRescueCD/usb_inst.sh}}

Unmount the CD image:

{{RootCmd|umount /mnt/SysRescueCD}}

==== Replace the FreeDOS image ====

It is time to replace the original FreeDOS image on the SystemRescueCD memory stick.

Mount the SystemRescueCD memory stick ({{Path|/dev/sdX1}} needs to be replaced by the device name of the memory stick):

{{RootCmd|mount /dev/sdX1 /mnt/SysRescueCD}}

Replace the {{Path|freedos.img}} file:

{{RootCmd|cp freedos.img /mnt/SysRescueCD/bootdisk/}}

Unmount the SystemRescueCD memory stick:

{{RootCmd|umount /mnt/SysRescueCD}}

=== Booting the FreeDOS image from GRUB directly ===

To boot FreeDOS without any external media use the {{c|memdisk}} tool from syslinux to allow grub (or another bootloader) to boot the FreeDOS image directly.

{{Emerge|sys-boot/syslinux}}

Mount the {{Path|/boot}} partition (if needed):

{{RootCmd|mount /boot}}

Copy the {{c|memdisk}} binary and the newly built FreeDOS image to {{Path|/boot}}:

{{RootCmd|cp /usr/share/syslinux/memdisk /boot}}
{{RootCmd|cp freedos.img /boot}}

Edit {{Path|/boot/grub/grub.conf}} and add an entry for FreeDOS:

{{FileBox|filename=/boot/grub/grub.conf|title=Example grub.conf entry|1=
title FreeDOS (BIOS update)
kernel /boot/memdisk floppy
initrd /boot/freedos.img
}}

=== BIOS update ===

Restart and choose to boot from the USB memory stick ''or'' the new grub entry. When using SystemRescueCD, in the GRUB command line type:

{{GenericCmd|freedos}}

This should boot into the new FreeDOS image. The DOS prompt should appear:

{{CodeBox|C:\}}

Now start the BIOS update by following the manufacturers instructions. Some useful commands in DOS:

; {{c|cd <dir>}}
: Change to the directory.

; {{c|dir}}
: List the files in the current directory.

; {{c|type [drive][path]filename}}
: Display the contents of a file.

== Flashrom ==

Some motherboards can support flashing (via the {{Package|sys-apps/flashrom}} package) directly from the system. In this case the only needed component is the BIOS image. Before continuing this path, first check the list of [https://flashrom.org/Supported_hardware supported hardware].

If the hardware is supported, verify the new BIOS image:

{{RootCmd|flashrom -v W7235IMS.1A0}}

If everything checks out, then flash it:

{{RootCmd|flashrom -vw W7235IMS.1A0}}

== See also ==

* [[BIOS]]
* [[Bootable DOS USB stick]]

[[Category:Core system]]
