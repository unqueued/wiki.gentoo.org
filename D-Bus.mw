{{InfoBox stack
|{{InfoBox homepage|https://www.freedesktop.org/wiki/Software/dbus/|header=true}}
|{{InfoBox wikipedia}}
|{{InfoBox odoc|https://dbus.freedesktop.org/doc/dbus-specification.html}}
|{{InfoBox gitweb|https://cgit.freedesktop.org/dbus/dbus/|raw=true}}
}}

'''D-Bus''' is [[Article description::an interprocess communication (IPC) system for software applications]]. Software makes use of D-Bus to communicate information between services.

== Installation ==

=== USE flags ===

Portage knows the global <code>dbus</code> USE flag for enabling support for D-Bus in other packages. Enabling this flag will pull in {{Package|sys-apps/dbus}} automatically. This is the default for ''desktop'' [[Profile (Portage)|profile]]s:

{{FileBox|filename=/etc/portage/make.conf|title=Enabling D-Bus globally|lang=bash|1=
USE="dbus"
}}

{{USEflag|package=sys-apps/dbus}}

=== Emerge ===

After setting the <code>dbus</code> global USE flag be sure to update the system using the <code>--changed-use</code> option:

{{Emerge|params+=--changed-use --deep|@world}}

== Configuration ==

=== Files ===

The main configuration files include:

* {{Path|/usr/share/dbus-1/system.conf}} for the system bus
* {{Path|/usr/share/dbus-1/session.conf}} for the session bus

=== Services ===

==== OpenRC ====

After configuration step, start D-Bus with:

{{RootCmd|/etc/init.d/dbus start}}

To start D-Bus at boot time, add it the default run level:

{{RootCmd|rc-update add dbus default}}

{{Tip|Even without adding D-Bus to the default runlevel it often will get started by D-Bus dependent services. This should explain why D-Bus mysteriously gets started even though it has not been formally added to a system runlevel.}}

== Usage ==

Some useful commands include:

* {{c|dbus-monitor --system}} - To monitor the activities in the system bus.
* {{c|dbus-monitor --session}} - To monitor the activities in the session bus.
* {{c|dbus-send <PARAMETER>}} - To send a message. See the dbus-send [[man page]] ({{c|man dbus-send}}) for more information.


To shutdown and reboot as a regular user:

Shutdown:

{{Cmd|dbus-send --system --print-reply --dest{{=}}"org.freedesktop.ConsoleKit" /org/freedesktop/ConsoleKit/Manager org.freedesktop.ConsoleKit.Manager.Stop}}

Reboot:

{{Cmd|dbus-send --system --print-reply --dest{{=}}"org.freedesktop.ConsoleKit" /org/freedesktop/ConsoleKit/Manager org.freedesktop.ConsoleKit.Manager.Restart}}

== Troubleshooting ==

Use the {{c|dbus-monitor}} command to monitor the buses. Errors are also redirected to the syslog ({{Path|/var/log/messages}}).

== See also ==

* [[eudev]] - A fork of systemd's udev with the goal of obtaining better compatibility with existing software such as OpenRC.
* [[udev]] - The device manager for the Linux kernel.

== External resources ==

* [https://www.freedesktop.org/wiki/IntroductionToDBus/ Introduction to D-Bus] (freedesktop.org)
* [https://dbus.freedesktop.org/doc/dbus-tutorial.html D-Bus tutorial] (freedesktop.org)

[[Category:Core system]]
[[Category:Daemons]]
