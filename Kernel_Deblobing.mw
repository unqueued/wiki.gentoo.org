<languages />
<translate>

From Wikipedia: ''A binary blob is a closed-source binary-only piece of software without publicly available source code.'' Since 1996, Linux kernel includes more and more binary blobs, to handle closed-sources devices (without technical documentation which would authorize free firmwares development for them). Proprietary softwares always introduce security or privacy concerns.

Linux kernel deblobing is the operation which removes binary blobs, to get a completly free kernel. This is done with shell scripts named deblob-main, deblob-check and deblob-version, where ''version'' represents the kernel revision. Thoses scripts are provided by the Free Software Foundation Latin America, for each kernel revision since 2.6.21 (FSFLA also provides Linux-libre distribution).

Deblobing kernel obviously means that devices with proprietary firmwares '''can't be used''', like closed-sources Intel Wifi or Nvidia graphics cards for example.

== Deblobing hardened-sources ==

For {{Package|sys-kernel/hardened-sources}} set the USE flag <code>deblob</code> in {{Path|/etc/portage/make.conf}}, sources will be automaticly deblobed after being emerged.

== Deblobing gentoo-sources (or any other sources) ==

<code>deblob</code> USE flag no more deblobs {{Package|sys-kernel/gentoo-sources}}, this must be manualy done.

<code>linux-4.4.26-gentoo</code> is used in the following commands, adapt them when needed.

=== Emerging Sources ===

If not done, first accept <code>freedist</code> licence, needed for gentoo-sources.

* If the file {{Path|/etc/portage/package.license}} exists:

{{RootCmd|echo freedist >> /etc/portage/package.license}}

* If the file doesn't exist:

{{RootCmd|echo freedist > /etc/portage/package.license}}

{{Note|{{Path|/etc/portage/package.license}} may be a directory, in this case issue for example:

{{RootCmd|echo freedist > /etc/portage/package.license/gentoo-sources}}
}}

Then emerge gentoo-sources:

{{Emerge|gentoo-sources}}

… and set {{Path|/usr/src/linux}} symlink to the emerged sources. First get the list of available sources:

{{RootCmd|eselect kernel list|output=<pre>
[1] linux-4.1.37-gentoo *
[2] linux-4.4.26-gentoo
</pre>}}

… then choose the right ones:

{{RootCmd|eselect kernel set linux-4.4.26-gentoo}}

Then change directory to {{Path|/usr/src/linux}}:

{{RootCmd|cd /usr/src/linux}}

=== Downloading Deblob Scripts ===

Explore [https://www.fsfla.org/svn/fsfla/software/linux-libre/releases/tags/ FSFLA's deblob scripts tree] and download the emerged kernel revision scripts. {{Path|4.4-gnu}} directory is choosen for <code>linux-4.4.26-gentoo</code> sources:

{{RootCmd
|wget https://www.fsfla.org/svn/fsfla/software/linux-libre/releases/tags/4.4-gnu/deblob-4.4
|wget https://www.fsfla.org/svn/fsfla/software/linux-libre/releases/tags/4.4-gnu/deblob-main
|wget https://www.fsfla.org/svn/fsfla/software/linux-libre/releases/tags/4.4-gnu/deblob-check
}}

Make the scripts executable (by root only):

{{RootCmd|chmod 744 deblob-4.4 deblob-main deblob-check}}

=== Python Version ===

Deblob scripts use Python 2.7 interpreter, set it at the beggining of the interpreters list. Get the list with:

{{RootCmd|eselect python list|output=<pre>
[1]   python3.4
[2]   python2.7
</pre>}}

{{Note|Emerge Python 2.7 if this version isn't installed:

{{Emerge|python:2.7}}
}}

… then:

{{RootCmd|eselect python set python2.7}}

=== Deblob Command ===

Then start deblobing:

{{RootCmd|./deblob-4.4}}

During the operation, which may be long, all deblobing information is displayed. After that the kernel can be compiled as usual. '''-gnu''' suffix will be appended to it's name, 4.4.26-gentoo-gnu in this example.

=== List of Removed Blobs ===

To get the list of removed blobs with their kernel symbol names, redirect the deblob command output to a file:

{{RootCmd|./deblob-4.4 > /path/to/file/deblob.log}}

As kernel sources can be re-emerged after being deblobed, this is a convenient way, without kernel compilation, to investigate if targeted hardware should work without binary blobs.

== External resources ==

* The [https://www.fsfla.org Free Software Foundation Latin America (FSFLA) web site]
* The [https://en.wikipedia.org/wiki/Binary_blob Binary blob Wikipedia article]

</translate>

[[Category:Kernel]]
