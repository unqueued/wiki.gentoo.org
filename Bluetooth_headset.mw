This article describes the setup of a '''bluetooth''' headset.

== Prerequisites ==
This article assumes that [[Bluetooth]] and [[ALSA]] have been previously configured.

== Configuration ==
===ALSA===
* Edit {{Path|/etc/asound.conf}} (system-wide) or {{Path|~/.asoundrc}} (user level). Add '''one''' of the following code snippets, and replace the MAC address with the one of your bluetooth device.

{{File|/etc/asound.conf or ~/.asoundrc||<pre>
# First try autodetection:
@hooks [
	{
		func load
		files [
			"/usr/share/alsa/bluetooth.conf"
		]
		errors false
	}
]

# Specify your device if autodetection doesn't work for you:

## To redirect ALL output to the headset
#pcm.!default {
#type bluetooth
#device 00:16:44:FD:6B:A0
#profile "auto"
#}

## OR: to create a new, additional output channel
#pcm.bluetooth {
#type bluetooth
#device 00:16:44:FD:6B:A0
#profile "auto"
#}
</pre>}}

* Restart ALSA.
{{RootCmd|/etc/init.d/alsasound restart}}

== Testing ==
Play a sound file. If it works, please add your device to the [[#Working_devices|table]] of working devices.
{{Cmd|mplayer -ao alsa:device{{=}}bluetooth ''filename''}}

== Troubleshooting ==

=== Audio socket ===
Some setups (non-PulseAudio) need ''Socket'' enabled, if there's no sound.
{{File|/etc/bluetooth/audio.conf|Enable audio socket|<pre>
[General]
Enable=Socket
</pre>}}

=== BlueZ 5 ===
Non-PulseAudio setups need to skip BlueZ 5 for now, as the ALSA plugin has been removed.
{{File|/etc/portage/package.mask|Mask BlueZ 5 versions|<pre>
>=net-wireless/bluez-5
</pre>}}

=== Can't open input device ===
Compile and load the ''uinput'' kernel module, when things don't work, and the logs show this error:
{{Code|Output of Syslog|<pre>
bluetoothd: Can't open input device: No such file or directory (2)
bluetoothd: AVRCP: failed to init uinput for 00:16:44:FD:6B:A0
bluetoothd: Unable to select SEP
</pre>}}

{{Kernel||<pre>
Device Drivers  --->
   Input device support  --->
      [*]   Miscellaneous devices  --->
         <M>   User level driver support
</pre>}}

=== No audio service is available ===
After updating to {{Package|net-wireless/bluez}}-5.xx it might happen, that a Bluetooth headset is connected, but [[ALSA]] / [[PulseAudio]] fails to pick up the connected device.

An error message like this might be shown in the output of PulseAudio:
{{Code|Debug output of PulseAudio|<pre>
I: [pulseaudio] module-card-restore.c: Restoring profile for card bluez_card.00_16_94_0B_6F_DE.
I: [pulseaudio] card.c: Created 10 "bluez_card.00_16_94_0B_6F_DE"
bt_audio_service_open: connect() failed: Connection refused (111)
W: [pulseaudio] module-bluetooth-device.c: Bluetooth audio service not available
W: [pulseaudio] module-bluetooth-device.c: Service not connected
I: [pulseaudio] card.c: Freed 10 "bluez_card.00_16_94_0B_6F_DE"
E: [pulseaudio] module.c: Failed to load module "module-bluetooth-device" (argument: "address="00:16:94:0B:6F:DE" path="/org/bluez/31716/hci0/dev_00_16_94_0B_6F_DE""): initialization failed.
</pre>}}

To fix this, the following needs to be done:
# Enable the audio socket of bluetoothd
{{File|/etc/bluetooth/audio.conf|Enable audio socket|<pre>
[General]
Enable=Socket
</pre>}}
# Restart ''bluetoothd'' by doing one of the following things:
#* Turn the software wireless kill switch off and on again
{{RootCmd|rfkill block bluetooth
|rfkill unblock bluetooth}}
#* Turn the hardware wireless kill switch off and on again
#* Reboot the computer
# Reconnect the Bluetooth headset

== Working devices ==
{{Note|The device capabilities are dependent on the Bluetooth controller being used.}}
{| class="wikitable"
|-
! Device
! Headphone
! Microphone
! Comments
|-
| Belkin F8Z492TTP
| {{Yes}}
| {{No}}
| The device is a receiver only and has no built-in microphone.
|-
| Cellular Innovations HFBLU-ST6
| {{Yes}}
| {{No}}
| 
|-
| Dell BH200
| {{Yes}}
| {{Partial|Not tested}}
| 
|-
| LG HBS730
| {{Yes}}
| {{No}}
| 
|-
| Nokia BH-214
| {{Yes}}
| {{No}}
| 
|-
| Nokia BH-604
| {{Yes}}
| {{Yes}}
| 
|-
| Parrot Zik
| {{Yes}}
| {{Partial|Not tested}}
| 
|-
| Philips SBH6201
| {{Yes}}
| {{Yes}}
| 
|-
| Philips SBH9100
| {{Yes}}
| {{Partial|Not tested}}
| 
|-
| Plantronics BackBeat GO
| {{Yes}}
| {{Partial|Not tested}}
| 
|-
| Prestigio PBHS1
| {{Yes}}
| {{Partial|Not tested}}
| 
|-
| Sony MDR-ZX750BN
| {{Yes}}
| {{No}}
| The change track and volume buttons work.
|-
| Sony SBH52
| {{Yes}}
| {{Yes}}
| The buttons work and can be assign actions in KDE. Supported rate 4800.
|-
| Sony Ericsson HBH-DS200
| {{Yes}}
| {{Partial|Not tested}}
| 
|-
| Sony Ericsson HBH-DS970
| {{Yes}}
| {{Partial|Not tested}}
| Requires ''Enable=Socket'' in {{Path|/etc/bluetooth/audio.conf}}.
|-
| T-2020A
| {{Yes}}
| {{Partial|Not tested}}
| The device is a receiver only and has no built-in microphone.
|}

[[Category:Sound devices]]
