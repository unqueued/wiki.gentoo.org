<languages />
<translate>

<!--T:130-->
{{Metadata|abstract=This guide should help users localize their Gentoo Linux distribution to any European locale. It uses Germany as a case-study, since it is translated from the German doc. Includes configuration for use of the euro currency symbol.}}

== Time zone == <!--T:1-->

<!--T:2-->
In order to keep the system time properly according to the present location, the timezone needs to be set.  Instructions how to do this for [[System_time#OpenRC|OpenRC based systems]] and [[System_time#systemd|systemd based systems]] can be found in the [[System_time|system time]] article.

== Locale system == <!--T:23-->

=== What are locales? === <!--T:24-->

<!--T:25-->
A locale is a set of information that most programs use for determining country and language specific settings. The locales and their data are part of the system library and can be found at {{Path|/usr/share/i18n/locales/}} on most systems. A locale name is generally named <code>ab_CD</code> where <code>ab</code> is your two (or three) letter language code (as specified in ISO-639) and <code>CD</code> is your two letter country code (as specified in ISO-3166). Variants like <code>@euro</code> or <code>@latin</code> are often appended to locale names, e.g. <code>de_DE@euro</code> or <code>nan_TW@latin</code>. Please explore [http://en.wikipedia.org/wiki/Locale Wikipedia] to read more about locales and related articles.

=== Environment variables for locales === <!--T:26-->

<!--T:27-->
The variables controlling different aspects of locale settings are given in the table below. All of them take one name of a locale in <code>ab_CD</code> format given above. 

<!--T:28-->
{| class="table table-striped" style="text-align: left;" 
|- 
! scope=col width=25% | Variable name
! scope=col width=75% | Explanation
|- 
| <var>LANG</var>
| Defines all locale settings at once, while allowing further individual customization via the LC_* settings below.
|- 
| <var>LC_COLLATE</var>
| Define alphabetical ordering of strings. This affects e.g. output of sorted directory listings.
|- 
| <var>LC_CTYPE</var>
| Define the character-handling properties for the system. This determines which characters are seen as alphabetic, numeric, and so on. This also determines the character set used, if applicable.
|- 
| <var>LC_MESSAGES</var>
| Programs' localizations stored in {{Path|/usr/share/locale/}} for applications that use a message-based localization scheme (the majority of GNU programs; see the next chapters for further information on which programs do, and how to get the programs that don't to work).
|- 
| <var>LC_MONETARY</var>
| Defines currency units and formatting of currency-type numeric values.
|- 
| <var>LC_NUMERIC</var>
| Defines formatting of numeric values which aren't monetary. Affects things such as thousand separator and decimal separator.
|- 
| <var>LC_TIME</var>
| Defines formatting of dates and times.
|- 
| <var>LC_PAPER</var>
| Defines default paper size.
|- 
| <var>LC_ALL</var>
| Overrides all other settings.
|-
|}

<!--T:29-->
{{Note|Some programs are written in such a way that they expect traditional English ordering of the alphabet, while some locales, most notably the Estonian one, use a different ordering. Therefore it's recommended to explicitly set <var>LC_COLLATE</var> to C when dealing with system-wide settings.}}

<!--T:30-->
{{Warning|Using <var>LC_ALL</var> is strongly discouraged as it automatically overrides all other <var>LC_*</var> variables (<var>LANG</var> is not affected). This means that changes made by other means will be hidden until <var>LC_ALL</var> is set to a null string. It is probably best not to set it in a startup file.}}

<!--T:31-->
Most typically, users only set the <var>LANG</var> variable globally.

=== Generating specific locales === <!--T:32-->

<!--T:33-->
You will probably only use one or maybe two locales on your system. You can specify locales you will need in {{Path|/etc/locale.gen}}. 

<!--T:34-->
{{CodeBox|title=Adding locales to /etc/locale.gen|1=
en_GB ISO-8859-1
en_GB.UTF-8 UTF-8
de_DE ISO-8859-1
de_DE@euro ISO-8859-15
}}

<!--T:35-->
The next step is to run {{c|locale-gen}}. It will generate all the locales specified in the {{Path|/etc/locale.gen}} file and write them to the locale-archive ({{Path|/usr/lib/locale/locale-archive}}). 

<!--T:137-->
{{RootCmd|locale-gen|output=<pre>
 * Generating 4 locales (this might take a while) with 1 jobs
 *  (1/4) Generating en_GB.ISO-8859-1 ...                       [ ok ]
 *  (2/4) Generating en_GB.UTF-8 ...                            [ ok ]
 *  (3/4) Generating de_DE.ISO-8859-1 ...                       [ ok ]
 *  (4/4) Generating de_DE.ISO-8859-15@euro ...                 [ ok ]
 * Generation complete
</pre>}}

<!--T:36-->
{{Note|{{c|locale-gen}} is available in <code>glibc-2.3.6-r4</code> and newer. If you have an older version of glibc, you should update it now.}}

<!--T:37-->
You can verify that your selected locales are available by running {{c|locale -a}}.

<!--T:138-->
{{Cmd|locale -a|output=<pre>
C
POSIX
de_DE
de_DE.iso88591
de_DE.iso885915@euro
de_DE@euro
deutsch
en_GB
en_GB.iso88591
en_GB.utf8
german
</pre>}}

<!--T:145-->
The {{Path|/usr/lib/locale/locale-archive}} file can be displayed using the strings command.

<!--T:146-->
{{Cmd|strings /usr/lib/locale/locale-archive {{!}} less}}

=== Setting a locale === <!--T:38-->

==== OpenRC ==== <!--T:39--> 

<!--T:40-->
When using OpenRC locale settings are stored in environment variables. These are typically set in the {{Path|/etc/env.d/02locale}} (for system-wide settings) and {{Path|~/.bashrc}} (for user-specific settings) file.  More details can be found in the [[UTF-8#Setting_the_locale|UTF-8]] article.  The system wide settings ({{Path|/etc/env.d/02locale}}) can be managed through {{c|eselect locale}}. For instance, to set the <var>LANG</var> variable to the <code>C</code> value:

<!--T:41-->
{{RootCmd|eselect locale list|output=<pre>
Available targets for the LANG variable:
  [1]   C 
  [2]   POSIX
  [3]   en_US
  [4]   en_US.iso885915
  [5]   en_US.utf8
  [ ]   (free form)
</pre>}}

<!--T:42-->
{{RootCmd|eselect locale set 1}}

<!--T:43-->
Of course, you can edit the file manually as well and diversify the locale variables.

<!--T:44-->
{{FileBox|filename=/etc/env.d/02locale|title=Setting the default system locale in /etc/env.d/02locale|lang=bash|1=
LANG="de_DE.UTF-8"
LC_COLLATE="C"
}}

<!--T:45-->
{{Note|Use <code>de_DE@euro</code> as your LANG if you want to use the Euro currency symbol (â‚¬) on non UTF-8 based locales.}}

<!--T:46-->
It's also possible, and pretty common especially in a more traditional UNIX environment, to leave the global settings unchanged, i.e. in the "<code>C</code>" locale. Users can still specify their preferred locale in their own shell RC file: 

<!--T:47-->
{{FileBox|filename=~/.bashrc|title=Setting the user locale|lang=bash|1=
export LANG="de_DE.UTF-8"
export LC_COLLATE="C"
}}

<!--T:48-->
Another way of configuring system is to leave it in the default C locale, but enable UTF-8 character representation at the same time. This option is achieved using the following settings in {{Path|/etc/env.d/02locale}}: 

<!--T:49-->
{{CodeBox|title=Using traditional C locale while specifying UTF-8|lang=bash|1=
LC_CTYPE=de_DE.UTF-8
}}

<!--T:50-->
Using the above snippet, users will be able to see localized file names properly, while not being forced to your preferred language. 

<!--T:51-->
Once you have set the right locale, be sure to update your environment variables to make your system aware of the change.

<!--T:52-->
For a system-wide default locale:

<!--T:53-->
{{RootCmd|env-update && source /etc/profile}}

<!--T:54-->
For a user-specific locale:

<!--T:55-->
{{Cmd|source ~/.bashrc}}

<!--T:56-->
After this, kill the X server by pressing {{Key|Ctrl}}+{{Key|Alt}}+{{Key|Backspace}}, log out, then log in as a user. 

<!--T:57-->
Now, verify that the changes have taken effect: 

<!--T:58-->
{{Cmd|locale}}

==== systemd ==== <!--T:59-->

<!--T:60-->
If you use systemd set locale with the {{c|localectl}} command. Check the list of available locales with:

<!--T:61-->
{{RootCmd|localectl list-locales}}

<!--T:62-->
Then set the desired locale:

<!--T:63-->
{{RootCmd|<nowiki>localectl set-locale LANG=de_DE.utf8</nowiki>}}

<!--T:64-->
Finally check if the result is good:

<!--T:65-->
{{RootCmd|<nowiki>localectl | grep "System Locale"</nowiki>|output=<pre>
   System Locale: LANG=de_DE.utf8
</pre>}}

== Keyboard layout for the console == <!--T:66-->

=== OpenRC === <!--T:67-->

<!--T:68-->
The keyboard layout used by the console is set in {{Path|/etc/conf.d/keymaps}} by the <var>keymap</var> variable. Valid values can be found in {{Path|/usr/share/keymaps/YOUR_ARCH/}}. {{Path|i386}} has further subdivisions into layout ({{Path|qwerty/}}, {{Path|azerty/}}, etc.). Some languages have multiple options, so you may wish to experiment to decide which one fits your needs best. 

<!--T:69-->
{{FileBox|filename=/etc/conf.d/keymaps|title=Setting the console keymap|lang=bash|1=
keymap="de"
#keymap="de-latin1"
#keymap="de-latin1-nodeadkeys"
}}

=== systemd === <!--T:70-->

<!--T:71-->
With systemd the keymap layout used for your console can be set using the {{c|localectl}} command. First check the available keymap layouts:

<!--T:72-->
{{RootCmd|localectl list-keymaps}}

<!--T:73-->
Then set the console keymap layout you want:

<!--T:74-->
{{RootCmd|localectl set-keymap it}}

<!--T:75-->
Finally check if the console keymap layout was set correctly:

<!--T:76-->
{{RootCmd|<nowiki>localectl | grep "VC Keymap"</nowiki>|output=<pre>
       VC Keymap: it
</pre>}}

== Keyboard layout for the X server == <!--T:77-->

=== OpenRC === <!--T:149-->

<!--T:78-->
The keyboard layout to be used by the X server is specified in {{Path|/etc/X11/xorg.conf.d/30-keyboard.conf}} by the <var>XkbLayout</var> option. For details visit the [[Xorg/Guide#Configuring_the_keyboard|Xorg guide]].

=== systemd === <!--T:85-->

<!--T:86-->
With systemd the keymap layout for the X11 server can be set using the {{c|localectl}} command. First check the available X11 keymap layouts:

<!--T:87-->
{{RootCmd|localectl list-x11-keymap-layouts}}

<!--T:88-->
Then set the X11 keymap layout you want:

<!--T:89-->
{{RootCmd|localectl set-x11-keymap it}}

<!--T:90-->
Finally check if the X11 keymap layout was set correctly:

<!--T:91-->
{{RootCmd|<nowiki>localectl | grep "X11 Layout"</nowiki>|output=<pre>
      X11 Layout: it
</pre>}}

== The Euro symbol for the console == <!--T:94-->

=== OpenRC === <!--T:134-->

<!--T:95-->
In order to get your console to display the Euro symbol, you will need to set the <var>consolefont</var> variable in {{Path|/etc/conf.d/consolefont}} to a file found in {{Path|/usr/share/consolefonts/}} (without the <code>.psfu.gz</code>). <code>lat9w-16</code> has the Euro symbol. 

<!--T:96-->
{{FileBox|filename=/etc/conf.d/consolefont|title=Setting the console font|lang=bash|1=
consolefont="lat9w-16"
}}

<!--T:97-->
You should verify that the {{c|consolefont}} service is in the boot runlevel: 

<!--T:98-->
{{RootCmd|rc-update -v show {{!}} grep consolefont}}

<!--T:99-->
If no runlevel is displayed for {{c|consolefont}}, then add it to the proper level: 

<!--T:100-->
{{RootCmd|rc-update add consolefont boot}}

== The Euro symbol in X == <!--T:101-->

=== Most applications === <!--T:102-->

<!--T:103-->
Getting the Euro symbol to work properly in X is a little bit tougher. The first thing you should do is change the <var>fixed</var> and <var>variable</var> definitions in {{Path|/usr/share/fonts/misc/fonts.alias}} to end in <code>iso8859-15</code> instead of <code>iso8859-1</code>. 

<!--T:104-->
{{CodeBox|filename=/etc/X11/xorg.conf|title=Setting default X fonts|1=
fixed        -misc-fixed-medium-r-semicondensed--13-120-75-75-c-60-iso8859-15
variable     -*-helvetica-bold-r-normal-*-*-120-*-*-*-*-iso8859-15
}}

<!--T:105-->
Some applications use their own font, and you will have to tell them separately to use a font with the Euro symbol. You can do this at a user-specific level in {{Path|.Xdefaults}} (you can copy this file to {{Path|/etc/skel/}} for use by new users), or at a global level for any application with a resource file in {{Path|/usr/share/X11/app-defaults/}} (like xterm). In these files you generally have to change an existing line, rather than adding a new one. To change our xterm font, for instance: 

<!--T:106-->
{{Cmd|echo 'XTerm*font: fixed' >> ~/.Xresources 
|xrdb -merge ~/.Xresources}}

=== The Euro symbol in (X)Emacs === <!--T:107-->

<!--T:108-->
To use the Euro symbol in (X)Emacs, add the following to {{Path|.Xdefaults}} : 

<!--T:109-->
{{FileBox|filename=~/.Xdefaults|title=Setting the font for emacs|1=
Emacs.default.attributeFont: -*-courier-medium-r-*-*-*-120-*-*-*-*-iso8859-15
}}

<!--T:110-->
For XEmacs (not plain Emacs), you have to do a little more. In {{Path|/home/user/.xemacs/init.el}} , add: 

<!--T:111-->
{{FileBox|filename=~/.xemacs/init.el|title=Setting the font for xemacs|1=
(define-key global-map '(EuroSign) '[€])
}}

== NLS == <!--T:114-->

<!--T:115-->
For message based localization to work in programs that support it and have the <code>nls</code> (Native language support) USE flag, you will probably need to have the programs compiled with this flag set. Message strings are installed in {{Path|/usr/share/locale/<locale>/LC_MESSAGES/<package>.mo}} files. Most of the programs using nls also need the gettext library to extract and use localized messages. Of course, Portage will automatically install it when needed.

<!--T:116-->
After enabling the <code>nls</code> USE flag you may need to re-emerge some packages:

<!--T:117-->
{{Emerge|params+=--newuse --deep --with-bdeps=y|@world}}

== LINGUAS == <!--T:118-->

<!--T:119-->
There is also an additional localization variable called <var>[https://devmanual.gentoo.org/general-concepts/linguas/ LINGUAS]</var>, which affects the localization files that get installed in gettext-based programs, and decides which GUI language packs should be downloaded and installed for some specific software packages, such as [[Firefox]], [[Thunderbird]], [[KDE#Localization|kde-base/kde-l10n]] or [[LibreOffice|app-office/libreoffice-l10n]]. The variable takes in ''space''-separated list of language codes, and a suggested place to set it is {{Path|[[:/etc/portage/make.conf]]}}: 

<!--T:120-->
{{RootCmd|nano -w /etc/portage/make.conf|output=<pre>
## (Add in the LINGUAS variable. For instance, for German, Finnish and English:)
LINGUAS="de fi en"
</pre>}}

<!--T:147-->
With <code>LINGUAS=""</code>, most ebuilds would install only the packages' default language but none of the <code>LC_MESSAGES</code> files. They would also not download and install any of the further language packs. For instance, the currently stable [[LibreOffice|app-office/libreoffice]] receives further language support through {{Package|app-office/libreoffice-l10n}} which supports download and installation of the language packs defined in <code>LINGUAS</code>. Since the origin language of libreoffice is <code>en_US</code>, it does not have <code>en_US</code> flag in {{Package|app-office/libreoffice-l10n}}. So with <code>LINGUAS=""</code>, libreoffice still supports <code>en_US</code>.

<!--T:148-->
To see the status of GUI translation, hyphenation, spell checking and other localisations on your language, please refer to the [https://translations.documentfoundation.org/ LibreOffice translation web site].

<!--T:139-->
For finer grained control it can be set per package in {{Path|[[:/etc/portage/package.use]]}}: 

<!--T:140-->
{{FileBox|filename=/etc/portage/package.use|lang=bash|1=
www-client/firefox linguas_de linguas_pt_BR linguas_en_GB
}}

<!--T:135-->
A list of installed programs making use of the <var>LINGUAS</var> variable and their supported languages can be shown as follows:

<!--T:136-->
{{Cmd|eix -I -U linguas}}

<!--T:121-->
A list of <var>LINGUAS</var> values that can be used is provided as {{Path|/usr/portage/profiles/desc/linguas.desc}}: 

<!--T:122-->
{{Cmd|grep -i french /usr/portage/profiles/desc/linguas.desc|output=<pre>
fr - French locale
fr_CA - French locale for Canada
fr_FR - French locale for France
</pre>
}}

<!--T:123-->
After setting the <code>linguas</code> USE flag it may be necessary to re-emerge some packages:

<!--T:124-->
{{Emerge|params+=--newuse --deep --with-bdeps=y|@world}}

== See also == <!--T:142-->


<!--T:150-->
* [[Handbook:AMD64/Installation/Base#Configure_locales|Configuring locales]] (Gentoo Handbooks)
* [[Evdev#Keyboard_layout|Keyboard layout]] inside the Evdev article
* [[X resources]]

== External resources == <!--T:151--> 

<!--T:152-->
* [http://www.gnu.org/software/libc/manual/html_node/Locales.html Locales and Internationalization] (gnu.org)
</translate>

[[Category:Localization]] {{Migrated|originalauthors=Alexander Holler, Steven Lucy, Benny Chuang, Lars Weiler, Tobias Scherbaum, Flammie Pirinen, nightmorph, klondike}}
