Mediawiki is a powerful wiki framework used by wikipedia and wiki.gentoo.org (this page is on top of a media wiki)

== Preinstall ==

Media wiki is a lamp stack web application.  As such we need apache mysql & php.  Mediawiki requires the xmlreader useflag for php.

{{RootCmd|echo "dev-lang/php xmlreader" >> /etc/portage/package.use}}

{{emerge|apache mysql php}}

Edit /etc/conf.d/apache and add -D PHP5 to APACHE2_OPTS 

{{RootCmd|/etc/init.d/mysql start}}
{{RootCmd|/etc/init.d/apache2 start}}

=== Mysql ===

Create a database for mediawiki to interact with.

{{RootCmd
|mysql -u root -p
|output=<pre>
mysql> CREATE DATABASE IF NOT EXISTS `mediawiki` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`;
mysql> CREATE USER 'mediawiki'@'localhost' IDENTIFIED BY 'changeme';
mysql> GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, INDEX, ALTER ON `mediawiki`.* TO 'mediawiki'@'localhost' IDENTIFIED BY 'changeme';
mysql> \q
</pre>}}

== Install ==

{{emerge|mediawiki}}

point your browser @ http://127.0.0.1/mediawiki/mw-config/index.php

Page 3 database name is mediawiki & database user name is mediawiki.

Page 4 database character set is utf-8

Page 5 name your wiki, set your name, password, and email.  select I'm bored already, just install the wiki.

save your LocalSettings.php configuration page and move it to /var/www/localhost/htdocs/mediawiki/LocalSettings.php

point your browser @ http://127.0.0.1/mediawiki/ to see your installed and configured wiki.

=== Postinstall ===

By default the landing page in Mediawiki is unlocked for anyone to edit.  login as admin.  By the top right of the page is an arrow that points down, click it and the 3rd option down is "protect" to lock down the page.

Set an avatar for your wiki.  Copy the default mediawiki image to your wiki root.

{{RootCmd|cp /var/www/localhost/htdocs/mediawiki/skins/monobook/wiki.png /var/www/localhost/htdocs/mediawiki/}}

Add to the bottom of /var/www/localhost/htdocs/mediawiki/LocalSettings.php

<pre>
$wgLogo = "/mediawiki/wiki.png";
</pre>

[[Category:Software]]
