<languages />

{{Metadata|abstract=Xorg ist der X Window Server, der es Benutzern gestattet stets eine grafische Umgebung zur Verfügung zu haben. Dieser Leitfaden befasst sich damit was Xorg ist, wie man es installiert und welche unterschiedlichen Konfigurations-Optionen es gibt.}}

Xorg ist der X Window Server, der es Benutzern gestattet stets eine grafische Umgebung zur Verfügung zu haben. Dieser Leitfaden befasst sich damit was Xorg ist, wie man es installiert und welche unterschiedlichen Konfigurations-Optionen es gibt.

== Was ist der X Window Server? ==

=== Grafisch gegen Kommandozeile ===

Der durchschnittliche Benutzer mag vielleicht bei dem Gedanken beängstigt sein, Befehle eintippen zu müssen. Warum sollte er sich nicht per grafischer Benutzeroberfläche seinen Weg durch die Freiheit von Gentoo (und Linux im allgemeinen) klicken können? Nun, natürlich können sie das machen! Linux bietet eine grosse Auswahl an auffälligen Benutzerschnittstellen und Umgebungen, die Sie auf der Basis Ihrer vorhandenen Installation installieren können. 

Dies ist eine der grössten Überraschungen auf die neue Benutzer stossen: Eine grafische Benutzerschnittstelle ist nichts anderes als ein Programm, das auf Ihrem System läuft. Es ist ''kein'' Teil des Linux Kernel oder irgendein anderes Interna des Systems. Es ist ein mächtiges Werkzeug, das die grafischen Fähigkeiten Ihres Arbeitsplatzrechners ermöglicht. 

Weil Standards wichtig sind, wurde ein Standard für die Darstellung und das Verschieben von Fenstern auf einem Bildschirm, die Interaktion mit dem Benutzer über Maus, Keyboard und andere Grundlagen, aber dennoch wichtige Aspekte geschaffen und als ''X Window System'' bezeichnet; Allgemein abgekürzt als ''X11'' oder nur ''X''. Es wird auf Unix, Linux und Unix-ähnlichen Betriebssystemen überall auf der Welt verwendet. 

Das Programm das Linux Nutzern die Möglichkeit bietet grafische Benutzerschnittstellen zu verwenden und das den X11 Standard nutzt ist Xorg-X11, eine Abspaltung des XFree86 Projektes. XFree86 hat sich dazu entschlossen eine Lizenz zu verwenden, die möglicherweise nicht mit der GPL Lizenz kompatibel ist. Es wird daher empfohlen Xorg zu verwenden. Der offizielle Portage-Tree stellt keine XFree86 Paket mehr zur Verfügung.

=== Das X.org Projekt ===

Das [http://www.x.org X.org] Projekt erschuf und pflegt eine frei verteilbare Open Source Implementierung des X11 Systems. Es ist eine Open Source X11-basierte Desktop Infrastruktur. 

Xorg bietet eine Schnittstelle zwischen Ihrer Hardware und der grafischen Software, die sie benutzen wollen. Zudem ist Xorg komplett "Netzwerk-bewusst". Das bedeutet, dass sie eine Anwendung auf einem System laufen lassen können, während Sie sie auf einem anderen betrachten. 

== Installation ==

Before you can install Xorg, you need to prepare your system for it. First, we'll set up the kernel to support input devices and video cards. Then we'll prepare {{Path|[[:/etc/portage/make.conf]]}} so that the right drivers and Xorg packages are built and installed. 

=== Eingabetreiber-Unterstützung ===

In der Voreinstellung nutzt Xorg <code>evdev</code><ref name=evdev>[[evdev]]</ref>, einen Universaltreiber für Eingabegeräte. Zur Aktivierung von <code>evdev</code> müssen Sie eine Veränderung in Ihrer Kernel-Konfiguration vornehmen. Lesen Sie den [[Kernel/Gentoo_Kernel_Configuration_Guide/de|Kernel Konfigurationsleitfaden]], wenn Sie nicht wissen wie Sie Ihren Kernel konfigurieren. 

{{KernelBox|title=evdev im Kernel aktivieren|<pre>
Device Drivers --->
  Input device support --->
  <*>  Event interface
</pre>
}}

=== Kernel Mode-Setting ===

Modern open source video drivers rely on kernel mode setting (KMS). KMS provides an improved graphical boot with less flickering, faster user switching, a built-in framebuffer console, seamless switching from the console to Xorg, and other features.

{{Important|KMS conflicts with legacy framebuffer drivers, which must remain '''disabled''' in the kernel configuration.}}

First prepare the kernel for KMS. This step regardless of which Xorg video driver will be used: 

{{KernelBox|title=Disable legacy framebuffer support and enable basic console FB support|<pre>
Device Drivers --->
   Graphics support --->
      Frame Buffer Devices --->
         <*> Support for frame buffer devices --->
         ## (Disable all drivers, including VGA, Intel, nVidia, and ATI, except EFI-based Framebuffer Support, only if you are using UEFI)
 
    ## (Further down, enable basic console support. KMS uses this.)
    Console display driver support --->
      <*>  Framebuffer Console Support
</pre>
}}

Next configure the kernel to use the proper KMS driver for the video card. Intel, nVidia, and AMD/ATI are the most common cards, so follow code listing for each card below. 

For Intel cards see the [[Intel#Kernel|kernel section of the Intel article]].

Für nVidia Karten: 

{{KernelBox|title=nVidia settings|<pre>
Device Drivers --->
   Graphics support --->
      Direct Rendering Manager (XFree86 4.1.0 and higher DRI support) --->
         <*>  Nouveau (nVidia) cards
</pre>
}}

Für neuere AMD/ATI Karten ([[ATI_FAQ/de|RadeonHD 2000 und aufwärts]]), emergen Sie {{Package|x11-drivers/radeon-ucode}} oder {{Package|sys-kernel/linux-firmware}}. Sobald Sie eines dieser Pakete installiert haben, konfigurieren Sie den Kernel wie im [[Radeon#Firmware|Firmware-Abschnitt]] des [[Radeon|Radeon Artikels]] beschrieben: 

{{KernelBox|title=AMD/ATI settings|<pre>
## (Setup the kernel to use the radeon-ucode firmware)
Device Drivers --->
   Generic Driver Options --->
   [*]  Include in-kernel firmware blobs in kernel binary
  ## # ATI card specific, (see Radeon page for details which firmware files to include)
   (radeon/<CARD-MODEL>.bin ...)
  ## # Specify the root directory
   (/lib/firmware/) External firmware blobs to build into the kernel binary

## (Enable Radeon KMS support)
Device Drivers --->
   Graphics support --->
   <*>  Direct Rendering Manager --->
   <*>    ATI Radeon
   [*]      Enable modesetting on radeon by default
   [ ]      Enable userspace modesetting on radeon (DEPRECATED)
</pre>
}}

{{Note|Old Radeon cards (X1900 series and older) do not need the {{Package|x11-drivers/radeon-ucode}} package or any firmware configuration.  For them simply enable the Direct Rendering Manager (DRM) and ATI Radeon modesetting.}}

{{Note|Linux kernel >{{=}} 3.9 does not have the ''Enable modesetting on radeon by default'' since it is already implied by default. Do not be alarmed if you find this option missing in new kernels.}}

Exit the kernel configuration, [[Kernel/Rebuild|rebuild the kernel, and reboot]].

Now that KMS has been set up, continue preparing {{Path|[[:/etc/portage/make.conf]]}} in the next section.

=== make.conf Konfiguration ===

Now that the kernel is prepared, two important variables in the {{Path|[[:/etc/portage/make.conf]]}} file must be configured before installing Xorg. 

The first variable is <var>[[:/etc/portage/make.conf#VIDEO_CARDS|VIDEO_CARDS]]</var>. This is used to set the video drivers that you intend to use and is usually based on the kind of video card you have. The most common settings are <code>nouveau</code> for nVidia cards or <code>radeon</code> for ATI cards. Both have actively developed, well-supported open-source drivers. 

{{Note|Sie können ebenfalls die proprietären Treiber von nVidia und AMD/ATI, <code>nvidia</code> bzw. <code>fglrx</code> versuchen. Die Einrichtung der proprietären Treiber ist allerdings abseits des Fokus dieser Anleitung. Bitte lesen Sie den [[NVidia/nvidia-drivers/de|Gentoo Linux nVidia Leitfaden]] und die [[ATI_FAQ/de|Gentoo Linux ATI FAQ]]. Wenn Sie nicht wissen für welchen Treiber Sie sich entscheiden sollen, schauen Sie sich diese Anleitungen an, um weitere Informationen zu erhalten.}}

Der <code>intel</code> Treiber kann für Desktop-PCs und Laptops mit gewöhnlichen integrierten Grafik-Chipsätzen von Intel verwendet werden. 

{{Note|The <var>VIDEO_CARDS</var> variable may contain more than one value as long as each value is separated by a space.}}

The second variable is <var>INPUT_DEVICES</var> and is used to determine which drivers are to be built for input devices. In most cases setting it to <code>[[evdev]]</code> should work just fine. If you use alternative input devices, such as a Synaptics touchpad for a laptop, be sure to add it to <var>INPUT_DEVICES</var>. 

Decide which drivers will be used and add necessary settings to the {{Path|[[:/etc/portage/make.conf]]}} file: 

{{CodeBox|title=make.conf Beispieleinträge|lang=bash|1=
## (Für Maus, Tastatur und Synaptics Touchpad Unterstützung)
INPUT_DEVICES="evdev synaptics"
## (Für nVidia Karten)
VIDEO_CARDS="nouveau"
## (Für AMD/ATI Karten)
VIDEO_CARDS="radeon"
}}

Wenn die vorgeschlagen Einstellungen nicht funktionieren, emergen Sie das Paket {{Package|x11-base/xorg-drivers}} (siehe die Schritte unterhalb). Prüfen Sie alle verfügbaren Optionen und wählen Sie jene, die auf das System zutreffen. Dieses Beispiel ist auf ein System mit Keyboard, Maus, Synaptics Touchpad und Radeon Grafikkarte zugeschnitten. 

{{Emerge|x11-base/xorg-drivers|params+=--verbose|output=<pre>
 
These are the packages that would be merged, in order:
 
Calculating dependencies... done!
[ebuild   R   ]  x11-base/xorg-drivers-1.9  INPUT_DEVICES="evdev synaptics
-acecad -aiptek -elographics% -fpit% -joystick -keyboard -mouse -penmount -tslib
-virtualbox -vmmouse -void -wacom"
VIDEO_CARDS="radeon -apm -ark -ast -chips -cirrus -dummy -epson -fbdev -fglrx
(-geode) -glint -i128 (-i740) (-impact) -intel -mach64 -mga -neomagic (-newport)
-nouveau -nv -nvidia -r128 -rendition -s3 -s3virge -savage -siliconmotion -sis
-sisusb (-sunbw2) (-suncg14) (-suncg3) (-suncg6) (-sunffb) (-sunleo) (-suntcx)
-tdfx -tga -trident -tseng -v4l -vesa -via -virtualbox -vmware (-voodoo) (-xgi)"
0 kB
</pre>
}}

Nach dem Setzen aller notwendiger Variablen kann Xorg installiert werden:

{{Emerge|x11-base/xorg-server}}

{{Note|Das Meta-Paket {{Package|x11-base/xorg-x11}} könnte anstelle des leichtgewichtigeren {{Package|x11-base/xorg-server}} installiert werden. Funktional sind {{Package|x11-base/xorg-x11}} und {{Package|x11-base/xorg-server}} das Gleiche. Allerdings bringt {{Package|x11-base/xorg-x11}} viele weitere Pakete mit sich, die die meisten Systeme wahrscheinlich nicht benötigen. Zusätzliche Pakete binden eine große Auswahl an Schriften in vielen Sprachen ein. Diese sind für ein funktionierendes X11 Grundgerüst nicht notwendig.}}

Wenn die Installation abgeschlossen ist, brauchen einige Umgebungsvariablen eine Reinitialisierung bevor es weiter geht. Lesen Sie das Profil mit diesem Befehl neu ein:

{{RootCmd
|env-update
|source /etc/profile
}}

=== NVidia Benutzer ===

For NVidia users it might be beneficial to run {{c|nvidia-xconfig}} in order to generate a working {{Path|xorg.conf}} file for the selected graphics card. Without this step the {{Path|xorg.conf}} file will need to be created manually as described below. Missing the {{Path|xorg.conf}} will sometimes generate a "No screens found" error to the terminal when attempting to {{c|startx}}.

Also the NVidia driver will only work after a reboot, so be sure to restart the system after running {{c|nvidia-xconfig}}.

{{RootCmd|nvidia-xconfig}}

Es ist möglich und empfehlenswert den OpenGL Renderer auf den Hardware-Renderer anstelle eines Software-Renderer einzustellen:

{{RootCmd|eselect opengl set nvidia}}

== Konfiguration ==

Der X Server ist dafür entworfen ohne weiteres Zutun zu funktionieren, ohne Notwendigkeit die Xorg Konfigurations-Dateien vorher manuell zu bearbeiten. Er ''sollte'' Geräte wie Bildschirme, Tastaturen und Mäuse erkennen und konfigurieren.

Versuchen Sie [[#startx_benutzen|startx]] ohne Bearbeitung einer Konfigurationsdatei zu benutzen. Wenn Xorg nicht startet oder es ein anderes Problem gibt, dann müssen Sie eine manuelle Konfiguration von Xorg vornehmen. Dies wird im folgenden Abschnitt erklärt. 

{{Note|If changes have been made to the kernel, do not forget to '''restart the system''' ''before'' using {{c|startx}} in order to be using the newly built kernel. If the kernel was updated to a newer version in the process this will most likely require the bootloader's configuration files to be updated as well.}}

=== Das Verzeichnis {{Path|xorg.conf.d}} ===

{{Important|Die Konfiguration der Dateien in {{Path|xorg.conf.d}} sollte als letzter Ausweg gesehen werden. Falls möglich ist es erstrebenswert Xorg ohne jegliche spezielle Konfiguration zu betreiben.}}

Die meisten der Konfigurationsdateien für Xorg sind im Verzeichnis {{Path|/etc/X11/xorg.conf.d/}} gespeichert. Jede Datei hat einen eindeutiger Namen und endet mit {{Path|.conf}}. Die Dateinamen im Konfigurations-Verzeichnis von Xorg's werden in alphanumerischer Reihenfolge gelesen. Beispielsweise wird {{Path|10-evdev.conf}} vor {{Path|20-synaptics.conf}} gelesen; {{Path|a-evdev.conf}} wird vor {{Path|b-synaptics.conf}} gelesen und so weiter. Die Dateien in diesem Verzeichnis brauchen nicht nummeriert zu sein, dies hilft aber sie geordnet zu halten. Ordnung ist hilfreich bei der Fehlersuche fehlerhafter Konfigurations-Dateien.

{{Note|Xorg provides example configurations in {{Path|/usr/share/doc/xorg-server-${version}/xorg.conf.example.bz2}}. These can be used to create custom configuration files in {{Path|[[Xorg.conf#xorg.conf.d.2C_xorg.conf|/etc/X11/xorg.conf.d/]]}}. The examples are heavily commented, but if more documentation regarding the syntax is needed, {{c|man xorg.conf}} is always available. Other examples can be found in the section [[#Other_resources|Other resources]] at the end of this guide.}}

=== startx benutzen ===

Try {{c|startx}} to start up the [[X server]]. {{c|startx}} is a script (it's installed by {{Package|x11-apps/xinit}}) that executes an ''X session''; that is, it starts the [[X server]] and some graphical applications on top of it. It decides which applications to run using the following logic: 

* Wenn eine Datei mit dem Namen {{Path|.xinitrc}} im Home-Verzeichnis existiert, wird es die hier aufgeführten Befehle ausführen.

*  Otherwise, it will read the value of the <var>XSESSION</var> variable from the {{Path|/etc/env.d/90xsession}} file and execute the relevant session accordingly. Values for <var>XSESSION</var> are available in {{Path|/etc/X11/Sessions/}}. To set a system wide default session run:

: {{RootCmd|echo XSESSION{{=}}"Xfce4" > /etc/env.d/90xsession}}

: This will create the {{Path|90xsession}} file and set the default X session to [[Xfce/Guide|Xfce]]. Remember to run {{c|env-update}} after making changes to {{Path|90xsession}}.

{{Cmd|startx}}

Wenn kein Window Manager installiert ist, wird ein durchgängig schwarzer Bildschirm erscheinen. Weil dies ebenso ein Zeichen dafür sein kann, dass etwas nicht stimmt, können die Pakete {{Package|x11-wm/twm}} und {{Package|x11-terms/xterm}} dafür installiert werden um X zu testen. 

Once the programs are installed, run {{c|startx}} again. A few {{c|xterm}} windows should appear, making it easy to verify the [[X server]] is working correctly. Once satisfied with the results, unmerge {{Package|x11-wm/twm}} and {{Package|x11-terms/xterm}} if installed in the step above to remove the testing packages. They will not be needed to setup a proper desktop environment.

The session (program to start) could also be given as an argument to {{c|startx}}:

{{Cmd|startx /usr/bin/startfluxbox}}

You can also pass X11 server options, by preceding them with a double dash:

{{Cmd|startx -- vt7}}

=== X Einstellungen optimieren ===

==== Bildschirmauflösung einstellen ====

Wenn die Bildschirmauflösung falsch aussieht, sollten Sie zwei Abschnitte in Ihrer {{Path|xorg.conf.d}} Konfiguration überprüfen. Als erstes gibt es den ''Screen'' Abschnitt, unter dem die Auflösungen aufgeführt sind, mit denen Ihr X Server läuft. Dieser Abschnitt listet möglicherweise überhaupt gar keine Auflösung auf. Falls dies der Fall, ist schätzt Xorg die Auflösung auf Grundlage der Informationen im zweiten Abschnitt ''Monitor''. 

Now let us change the resolution. In the next example from {{Path|/etc/X11/xorg.conf.d/40-monitor.conf}} we add the <code>PreferredMode</code> line so that our [[X server]] starts at 1440x900 by default. The <code>Option</code> in the <code>Device</code> section must match the name of your monitor (<code>DVI-0</code>), which can be obtained by running {{c|xrandr}}. Install {{c|xrandr}} ({{c|emerge xrandr}}) just long enough to get this information. The argument after the monitor name (in the <code>Device</code> section) must match the <code>Identifier</code> in the <code>Monitor</code> section. 

{{RootCmd|nano -w /etc/X11/xorg.conf.d/40-monitor.conf|output=<pre>
Section "Device"
  Identifier  "RadeonHD 4550"
  Option      "Monitor-DVI-0" "DVI screen"
EndSection
Section "Monitor"
  Identifier  "DVI screen"
  Option      "PreferredMode" "1440x900"
EndSection
</pre>
}}

Run X ({{c|startx}}) to discover it uses the desired resolution.

==== Mehrere Monitore ====

In {{Path|/etc/X11/xorg.conf.d/}} können mehr als ein Monitor eingerichtet werden. Vergeben Sie jedem Monitor einen eindeutigen Namen und nennen Sie seine physische Position - wie "RightOf" (rechts von) oder "Above" (über) einem anderen Monitor. Das folgende Beispiel zeigt die Konfiguration eines DVI- und eines VGA-Monitors, wobei sich der VGA-Monitor auf der rechten Seite befindet: 

{{RootCmd|nano -w /etc/X11/xorg.conf.d/40-monitor.conf|output=<pre>
Section "Device"
  Identifier "RadeonHD 4550"
  Option     "Monitor-DVI-0" "DVI screen"
  Option     "Monitor-VGA-0" "VGA screen"
EndSection
Section "Monitor"
  Identifier "DVI screen"
EndSection
Section "Monitor"
  Identifier "VGA screen"
  Option     "RightOf" "DVI screen"
EndSection
</pre>
}}

==== Tastatur konfigurieren ====

Um X zur Nutzung einer internationalen Tastatur einzurichten, erzeugen Sie eine passende Konfigurationstdatei in {{Path|/etc/X11/xorg.conf.d/}}. Dieses Beispiel nutzt ein tschechisches Tastaturlayout: 

{{RootCmd|nano -w /etc/X11/xorg.conf.d/30-keyboard.conf|output=<pre>
Section "InputClass"
        Identifier "keyboard-all"
        Driver "evdev"
        Option "XkbLayout" "us,cz"
        Option "XkbModel" "logitech_g15"
        Option "XkbRules" "xorg"
        Option "XkbOptions" "grp:alt_shift_toggle,grp:switch,grp_led:scroll,compose:rwin,terminate:ctrl_alt_bksp"
        Option "XkbVariant" ",qwerty"
        MatchIsKeyboard "on"
EndSection
</pre>
}}

For methods of switching the keyboard layout see the [[Keyboard_layout_switching#X11|Keyboard layout switching]] article.

Der "terminate" Befehl (<code>terminate:ctrl_alt_bksp</code>) erlaubt es den Benutzern die X Sitzung durch die Tastenkombination {{Key|Ctrl}}+{{Key|Alt}}+{{Key|Backspace}} zu beenden. Allerdings beendet dies X schmachvoll -- etwas das der Nutzer möglicherweise vermeiden möchte. Es kann sinnvoll sein, wenn Programme den Bildschirm komplett eingefroren haben, oder beim Konfigurieren und Optimieren der Xorg Umgebung. Seien Sie jedoch vorsichtig beim Beenden der Desktop-Umgebung mit dieser Tastenkombination. Den meisten Programmen gefällt es nicht, auf diese Weise beendet zu werden. Einige, wenn nicht sogar alle Informationen die noch nicht auf die Festplatte geschrieben wurden sind verloren (die in "offenen Dokumenten" abgelegten Informationen).

==== Fertigstellung ====

Run {{c|startx}} and be happy about the result. Congratulations, you now (hopefully) have a working Xorg! The next step is to install a useful window manager or desktop environment such as [[KDE]], [[GNOME]], or [[Xfce]]. Information on installing these desktop environments can be found here on the wiki.

== Siehe auch ==

* [[Wayland]] - Der Window-Manager der nächsten Generation für Linux.

== Externe Ressourcen ==

=== Konfigurationsdateien erstellen und bearbeiten ===

First of all, {{c|man xorg.conf}} and {{c|man evdev}} provide quick yet complete references about the syntax used by these configuration files. Be sure to have them open on a terminal when editing Xorg configuration files! 

Es gibt ebenfalls viele Online-Ressourcen über die Bearbeitung von Konfigurationsdateien in {{Path|/etc/X11/}}. Nur wenige sind hier aufgeführt. Verwenden Sie eine Auswahl Ihrer Lieblingssuchmaschinen um weitere zu finden.

=== Weitere Hilfsmittel ===

More information about installing and configuring various graphical desktop environments and applications can be found in the [[Category:Desktop|Gentoo desktop resources]] section of our documentation. 

When upgrading to xorg-server 1.9 or higher, be sure to read the [[X_server/upgrade|migration guide]]. 

X.org bietet viele [http://www.x.org/wiki/FAQ FAQs] auf ihrer Webseite, zusätzlich zu ihrer anderen Dokumentation.

{{Migrated|originalauthors=swift, nightmorph}}
[[Category:X.Org]]
