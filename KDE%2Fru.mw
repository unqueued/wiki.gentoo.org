<languages />


{{InfoBox stack
|{{InfoBox homepage|https://www.kde.org/|header=true}}
|{{InfoBox wikipedia}}
|{{InfoBox project|KDE}}
}}

'''KDE''' — это сообщество свободного программного обеспечения, разрабатывающее множество приложений, в том числе Plasma - популярную среду рабочего стола.

Проект Gentoo обеспечивает прекрасную поддержку KDE, включая предыдущую версию Plasma 4, новые библиотеки KDE Frameworks 5, новое рабочее окружение Plasma 5 и Applications 5, а также широкий спектр дополнительного программного обеспечения на базе проекта KDE. 

== Предварительные требования ==

=== Профиль ===

Выбор подходящего [[Profile (Portage)|профиля]], хоть и не требуется, но рекомендуется, так как он устанавливает ряд глобальных и пакетных USE-флагов для более простой установки и не требует большого опыта в настройке KDE.

При выборе наиболее подходящего профиля сперва посмотрите какие доступны:

{{RootCmd|eselect profile list|output=<pre>
  [1]   default/linux/amd64/13.0
  [2]   default/linux/amd64/13.0/selinux
  [3]   default/linux/amd64/13.0/desktop
  [4]   default/linux/amd64/13.0/desktop/gnome
  [5]   default/linux/amd64/13.0/desktop/gnome/systemd
  [6]   default/linux/amd64/13.0/desktop/kde
  [7]   default/linux/amd64/13.0/desktop/kde/systemd
  [8]   default/linux/amd64/13.0/desktop/plasma
  [9]   default/linux/amd64/13.0/desktop/plasma/systemd
  ...
</pre>}}

Выберите подходящий профиль, заменив <code>X</code> соответствующим номером:

{{RootCmd|eselect profile set X}}

Для окружения рабочего стола Plasma 5 выберите профиль <code>desktop/plasma</code> для [[OpenRC]] или <code>desktop/plasma/systemd</code> для [[systemd]]. Для старого рабочего стола Plasma 4 рекомендуется использовать профиль <code>desktop/kde</code> при работе с OpenRC. Выберите <code>desktop/kde/systemd</code>, если используется systemd. 

=== Сервисы ===

Перед установкой связанного с KDE программного обеспечения рекомендуется настроить несколько сервисов. Если используется [[Profile (Portage)|профиль]] "desktop/plasma" или "desktop", то часть работы делается автоматически. Вот необходимые сервисы:
*[[D-Bus]]: Включает использование системы межпроцессного взаимодействия D-Bus.
*[[polkit]]: Включает набор инструментов polkit для контроля привилегий системных сервисов.
*[[udev/ru|udev]]: Включает поддержку динамического и постоянного именования устройств Linux через udev.
*[[udisks]]: Включает поддержку некоторых сервисов, связанных с хранением данных.

Информация по настройке этих сервисов приведена по ссылкам. Заметьте, что другие комбинации USE-флагов, отличные от установленных в профиле, технически возможны (особенно если используется свой набор приложений вместо полного окружения KDE Plasma), но могут не поддерживаться, не быть протестированными или приводить к неожиданным потерям в функциональности.

=== X-сервер ===

Для установки X-окружения следуйте инструкциям статьи [[X server|X-сервер]].

== Plasma ==

Plasma 5 - новое поколение рабочего окружения KDE, основано на Qt 5 и KDE Frameworks 5. Обновление достаточно простое, хотя и исключает возможность сосуществования с Plasma 4 из-за несовместимости дизайнерских решений.

=== Доступные версии ===

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Gentoo
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Repository
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Plasma 5.7.5
| kde-plasma/plasma-meta-5.7.5
| gentoo
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Plasma 5.8.3 LTS
| kde-plasma/plasma-meta-5.8.3
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Plasma 5.8 stable branch
| kde-plasma/plasma-meta-5.8.49.9999
| [[KDE/Overlay|kde overlay]]
| Live version
|-
| KDE Plasma master branch
| kde-plasma/plasma-meta-9999
| [[KDE/Overlay|kde overlay]]
| Live version
|}

{{Note|Перед продолжением убедитесь, что выбран профиль plasma. Пользователям KDE 4 необходимо предпринять дополнительные действия.}}

=== Обновление с Plasma 4 ===

Информацию об обновлении с Plasma 4, миграции и устранение неполадок можно найти на [[KDE/Plasma_5_upgrade|upgrade page]].

=== Установка ===

Пакет {{Package|kde-plasma/plasma-meta}} включает полный набор Plasma 5, настраивается следующими USE флагами:
{{USEflag|package=kde-plasma/plasma-meta|desc=}}

{{Emerge|kde-plasma/plasma-meta}}

В качестве альтернативы пакет {{Package|kde-plasma/plasma-desktop}} включает в себя базовый рабочий стол, предоставляя пользователям свободу в установке дополнительных пакетов.

{{Emerge|kde-plasma/plasma-desktop}}

{{Note|Пожалуйста, обратите внимание, что при такой установке будут пропущены важные пакеты, такие как {{Package|kde-plasma/powerdevil}} (управление питанием, режимы сна и гибернации) и {{Package|kde-plasma/systemsettings}}, если установлен другой пакет выполняющий те же функции.}}

=== Виджеты ===

Много полезных виджетов в пакете {{Package|kde-plasma/kdeplasma-addons}} (уже установленный пакетом {{package|kde-plasma/plasma-meta}}):

{{Emerge|kde-plasma/kdeplasma-addons}}

=== Дисплей менеджер ===

[[SDDM]] (Simple Desktop Display Manager) — рекомендуемый менеджер входа (login manager), который автоматически установится как зависимость от {{package|kde-plasma/plasma-meta}}. Это предпочтительное приложение. В качестве альтернативы [[LightDM/ru|LightDM]] может быть использован; он установится автоматически, если установлен USE-флаг <code>-sddm</code> для пакета {{package|kde-plasma/plasma-meta}}. Измените настройки соответственно в {{Path| /etc/conf.d/xdm}}. Кроме того, убедитесь, что прочитали страницу [[SDDM]], если появляются дополнительные вопросы.

=== Автоматическая разблокировка KWallet ===

В процессе добавления (беспроводного) сетевого соединения после входа в систему, многие пользователи столкнутся с {{Package|kde-frameworks/kwallet}}, системой безопасного управления паролями Plasma. На многих системах одновременно присутствует другой сервис KWallet — {{Package|kde-apps/kwalletd}}. Он предоставляет те же функции хранения паролей приложениям, основанным на kdelibs4. Пакет {{Package|kde-plasma/kwallet-pam}} предоставляет механизм, позволяющий избежать запроса доступа к kwallet после входа в систему.

{{Emerge|kde-plasma/kwallet-pam}}

Этому пакету требуется следующая настройка:
*Для безопасности KWallet, используйте классическое шифрование blowfish вместо GPG
*Используйте один и тот же пароль и для входа в систему и для kwallet
*Настройте менеджер экрана с поддержкой PAM — как {{Package|x11-misc/sddm}}, так и {{Package|x11-misc/lightdm}} удовлетворяют этому требованию:

{{FileBox|filename=/etc/pam.d/sddm|title=Строки для разблокировки KWallet PAM с помощью SDDM|lang=bash|1=
-auth           optional        pam_kwallet5.so
-session        optional        pam_kwallet5.so auto_start
# Следующие две строки также разблокируют kwalletd для приложений на базе kdelibs4
-auth           optional        pam_kwallet.so kdehome=.kde4
-session        optional        pam_kwallet.so
}}

{{Note|Для LightDM, редактируйте файл {{Path|/etc/pam.d/lightdm}}.}}

Для управления kwallet'ами, а также для импорта и экспорта паролей, существует пакет {{Package|kde-apps/kwalletmanager}}:

{{Emerge|kde-apps/kwalletmanager}}

Для управления kwallet'ами приложений на базе kdelibs4, таких как kopete или kmail:4:

{{Emerge|kde-apps/kwalletmanager:4}}

=== Сценарии для запуска/остановки агента SSH/GPG ===

Сценарии агента ssh-agent находятся в {{Path|/etc/plasma/startup}} и {{Path|/etc/plasma/shutdown}}. Статья [[Keychain/ru|Keychain]] содержит более подробную информацию на эту тему.

== Приложения ==

Релизы состоят из разных приложений и поддерживающих их библиотек, основанных на Qt 5/KDE Frameworks 5 так же как Qt 4/KDElibs 4, последние имеют статус LTS (Long Term Support). В Portage различие осуществляется через слоты <code>4</code> и <code>5</code>. Портирование является постоянным процессом, когда каждый крупный релиз основан на Frameworks 5, и следовательно включает обе версии приложения - классическую и новейшую портированную. Обратите внимание на возможные конфликты зависимостей, когда для двух пакетов со слотов 4 и 5 две версии одних и тех же библиотек не могут быть установлены в одно время. Мета-пакеты принимают во внимание эти конфликты и в некоторых случаях предпочитают более надежную версию, а не новый порт.

=== Доступные версии ===

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Gentoo
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Repository
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Applications 16.04.3
| kde-apps/kde-apps-meta-16.04.3
| gentoo
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Applications 16.08.2
| kde-apps/kde-apps-meta-16.08.2
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Applications 16.08 stable branch
| kde-apps/kde-apps-meta-16.08.49.9999
| [[KDE/Overlay|kde overlay]]
| Live version
|-
| KDE Applications master branch
| kde-apps/kde-apps-meta-9999
| [[KDE/Overlay|kde overlay]]
| Live version
|}

KDE Applications is divided in the following meta packages:

{| {{{!}}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Название пакета
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Описание
|-
| {{Package|kde-apps/kdeaccessibility-meta}}
| Приложения и утилиты для людей с ограниченными возможностями.
|-
| {{Package|kde-apps/kdeadmin-meta}}
| Административные утилиты для управления системой.
|-
| {{Package|kde-apps/kdecore-meta}}
| Базовые приложения, такие как менеджер файлов, текстовый редактор, эмулятор терминала.
|-
| {{Package|kde-apps/kdeedu-meta}}
| Образовательные приложения и игры.
|-
| {{Package|kde-apps/kdegames-meta}}
| Стандартные игры.
|-
| {{Package|kde-apps/kdegraphics-meta}}
| Графические приложения, такие как программы для просмотра изображений, выделения цвета и так далее
|-
| {{Package|kde-apps/kdemultimedia-meta}}
| Приложения и сервисы для проигрывания аудио и видео.
|-
| {{Package|kde-apps/kdenetwork-meta}}
| Сетевые приложения и сервисы VNC.
|-
| {{Package|kde-apps/kdepim-meta}}
| Приложения PIM, такие как почтовая программа, адресная книга, органайзер, и так далее
|-
| {{Package|kde-apps/kdesdk-meta}}
| Различные инструменты разработки.
|-
| {{Package|kde-apps/kdeutils-meta}}
| Стандартные утилиты рабочего стола, такие как архиватор, калькулятор, и так далее
|-
| {{Package|kde-apps/kdewebdev-meta}}
| Инструменты для веб-разработки.
|}

=== Установка ===

The {{Package|kde-apps/kde-apps-meta}} package provides the full Applications bundle, but alternatively, one or several smaller meta packages from the list above may be picked instead:

{{Emerge| kde-apps/kde-apps-meta}}

=== Локализация ===

While Frameworks and Plasma are shipping their translations per-package, [[localization]] of KDE Applications is provided via separate <code>*-l10n</code> packages. The <code>nls</code> USE flag is enabled by default for linux [[Profile_(Portage)|profiles]], and it is used by KDE Applications meta packages to pull in the necessary dependencies.

Для установки поддержки только некоторых языков, установите переменную L10N в {{Path|/etc/portage/make.conf}}. Например, для немецкого языка:

{{FileBox|filename=/etc/portage/make.conf|title=Установка переменной <var>L10N</var> для немецкого языка|lang=bash|1=
L10N="de"
}}

{{Note|Current stable KDE Applications 16.04.3 only pulls in localization via {{Package|kde-apps/kde-apps-meta}}, {{Package|kde-apps/kdepim-meta}} and {{Package|kde-apps/plasma-telepathy-meta}}, so manual install will be required in cases where only other select meta packages are installed. This is fixed in 16.08.}}

Для того, чтобы '''вручную''' установить эти пакеты локализации, используйте следующий (полный) список, или выберите нужное:

{{Emerge|kde-l10n kde4-l10n kdepim-l10n ktp-l10n}}

While the first two contain translations for the majority of KDE Applications (slot <code>5</code> and <code>4</code>), the latter two directly correspond to - and are only relevant to users of - {{Package|kde-apps/kdepim-meta}} and {{Package|kde-apps/plasma-telepathy-meta}} and their related packages.

{{Note|In 16.08.2 and above, {{Package|kde-apps/ktp-l10n}} is merged back into {{Package|kde-apps/kde-l10n}} and needs to be removed.}}

{{Package|app-office/calligra}} также имеет свой собственный пакет локализации: {{package|app-office/calligra-l10n}}.

=== KDE PIM ===

==== Доступные версии ====

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Gentoo
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Repository
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE PIM 4.4.2016.01
| kde-apps/kdepim-meta-4.4.2016.01
| gentoo
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE PIM 4.14.11_pre20160211
| kde-apps/kdepim-meta-4.14.11_pre20160211
| gentoo
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE PIM 16.08.2
| kde-apps/kdepim-meta-16.08.2
| gentoo
| Masked, Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|}

In Portage, three variants of KDE PIM, the KDE personal information management suite (including {{Package|kde-apps/kmail}}, {{Package|kde-apps/kontact}}, and {{Package|kde-apps/korganizer}}) are available. The current stable version with an Akonadi-based kmail (also known as kmail2) is installed by default, still based on Qt 4/KDElibs 4. By locally placing a [https://gitweb.gentoo.org/proj/kde.git/plain/Documentation/package.mask/kdepim-4.7 mask file] into {{Path|/etc/portage/package.mask}}, the "[https://launchpad.net/~pali/+archive/ubuntu/kdepim-noakonadi noakonadi fork]" is used including a non-Akonadi kmail (also known as kmail1). Finally, the latest upstream release based on Qt 5/KF 5 remains masked until it is deemed suitable for wider use, but testing is appreciated. Adding an [https://gitweb.gentoo.org/proj/kde.git/plain/Documentation/package.unmask/kdepim-16.08 unmask file] to {{Path|/etc/portage/package.unmask}} is necessary to get it.

==== Обновление для KDE PIM 16.08 и более поздних ====

Большая часть кодовой базы, но не вся, была портирована с {{Package|dev-qt/qtwebkit}} на {{Package|dev-qt/qtwebengine}}, которая основана на Chromium's Blink. По умолчанию, этот пакет устанавливает и использует USE-флаг <code>system-ffmpeg</code>. Это означает, что он зависит от пакета {{Package|media-video/ffmpeg}}, поэтому пользователям, предпочитающим использовать {{Package|media-video/libav}} для остальной системы, необходимо выключить этот USE-флаг.

К сожалению, не все приложения KDE на данный момент совместимы. Некоторые пакеты все еще зависят от частей, основанных на Qt 4/KDElibs 4, которые не могут быть установлены совместно с современным KDE PIM. Это такие пакеты, как {{Package|kde-apps/kopete}}, {{Package|kde-apps/kgpg}}, {{Package|kde-apps/kuser}} и, возможно, другие пакеты не из категории kde-apps. По умолчанию, {{Package|kde-apps/kde-apps-meta}} больше не устанавливает эти пакеты.

Следующие команды убирают из world все пакеты, которые все еще зависят от этих конфликтующих пакетов:

{{RootCmd|equery -q d kde-apps/kdepim-common-libs &#124; sed -e "s/-[0-9].*//" &#124; xargs emerge --deselect
|equery -q d kde-apps/kdepimlibs &#124; sed -e "s/-[0-9].*//" &#124; xargs emerge --deselect
|equery -q d kde-apps/akonadi &#124; sed -e "s/-[0-9].*//" &#124; xargs emerge --deselect}}

{{Note|Для этого должен быть установлен {{Package|app-portage/gentoolkit}}. Статья [[Gentoolkit/ru|Gentoolkit]] содержит более подробную информацию об этой полезной утилите.}}

Теперь, когда все готово, KDE PIM готов к установке:

{{Emerge|kde-apps/kdepim-meta}}

=== kdesu5 ===

Утилита, используемая для запуска графических программ от пользователя {{c|root}}, включена в {{Package|kde-plasma/kde-cli-tools}}. Если собирать с USE-флагом <code>kdesu</code>, установится графический фронтэнд для {{Package|kde-frameworks/kdesu}}, который может быть запущен через {{c|kdesu5}}.

Как всегда, убедитесь, что для команд, запускаемых от {{c|root}}, пользователь добавлен в соответствующие группы или просто есть возможность запускать их непривилегированно.

== Frameworks ==

KDE Frameworks 5 представляет собой набор библиотек и фреймворков в качестве основы для KDE Plasma 5 и KDE Applications 5, но может быть использован любым Qt-приложением.

Frameworks, в основном библиотеки, обеспечивающие небольшой функциональностью пользователя, не требуют отдельной установки - все необходимые пакеты будут затянуты автоматически в качестве зависимостей.

=== Доступные версии ===

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Gentoo
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Repository
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Frameworks 5.26.0
| kde-frameworks/*-5.26.0
| gentoo
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Frameworks 5.27.0
| kde-frameworks/*-5.27.0
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Frameworks master branch
| kde-frameworks/*-9999
| [[KDE/Overlay|kde overlay]]
| Live version
|}

== Plasma 4 ==

Plasma 4 — это предыдущая основная версия рабочего стола KDE. Хотя она больше не поддерживается разработчиками, она тем не менее считается стабильной и по-прежнему может быть подходящим альтернативным вариантом для некоторых пользователей.

{{Warning|Пользователям необходимо помнить, что Plasma 4 не поддерживается с 19-го августа 2015 года, что означает, что ошибки, связанные с безопасностью, не исправлялись с тех пор.}}

== Доступные версии ==

{| {{{!}} class{{=}}"table"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE version
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Plasma 4.11.22
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}; testing for {{Keyword|arm}}
|}

{{Emerge|kde-base/kdebase-startkde}}

Это установит дополнительные пакеты <code>kde-plasma/</code> и <code>kde-frameworks/</code>.

{{Note|Использовавшиеся ранее метапакеты {{Package|kde-apps/kde-meta}} и {{Package|kde-apps/kdebase-meta}} не подходят, так как сейчас они устанавливают Plasma 5.}}

=== Виджеты ===

Много полезных виджетов присутствует в пакете {{Package|kde-plasma/kdeplasma-addons}}:

{{Emerge|kde-plasma/kdeplasma-addons:4}}

== Менеджер экрана ==

KDM (KDE Display Manager) на протяжении долгого времени является менеджером входа в систему для Plasma 4. Тем не менее, можно использовать любой другой менеджер.

{{Emerge|kde-base/kdm}}

==== OpenRC ====

Установите KDM в качестве [[display manager|менеджера дисплея]] по умолчанию:

{{FileBox|filename=/etc/conf.d/xdm|lang=bash|1=
DISPLAYMANAGER="kdm"
}}

Чтобы запустить KDM при загрузке, добавьте xdm в уровень выполнения по умолчанию:

{{RootCmd|rc-update add xdm default}}

Для немедленного запуска KDM:

{{RootCmd|/etc/init.d/xdm start}}

==== systemd ====

Включите KDM для запуска во время загрузки с помощью {{c|systemctl}}:

{{RootCmd|systemctl enable kdm}}

Теперь запустите сервис:

{{RootCmd|systemctl start kdm}}

== Другое ПО из состава KDE ==

Наиболее важные приложения KDE находятся в дереве portage и большинство размещается в категориях [https://packages.gentoo.org/category/kde-apps kde-apps] и [https://packages.gentoo.org/category/kde-misc kde-misc].

== Смотрите также ==

* [[KDE/Troubleshooting|KDE troubleshooting]] - An extended article on troubleshooting KDE.
* [[KDE/Overlay|KDE overlay]] - Instructions on adding Gentoo's KDE overlay.
* [[KDE/Removal|KDE removal and clean up]] - Instructions on removing and cleaning up KDE.
* [[Overlay:kde-sunset|kde-sunset overlay]] - For old KDE versions that have been removed from the main tree.

== External links ==

* [https://userbase.kde.org/ Официальная wiki для пользователей KDE]
* [https://forum.kde.org/ Официальный форум KDE]
* [https://store.kde.org/ KDE Store (темы, виджеты, обои, и так далее)]

[[Category:KDE]] [[Category:Desktop environment]]
