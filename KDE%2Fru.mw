<languages />


{{InfoBox stack
|{{InfoBox homepage|https://www.kde.org/|header=true}}
|{{InfoBox wikipedia}}
|{{InfoBox project|KDE}}
}}

'''KDE''' — это сообщество свободного программного обеспечения, разрабатывающее множество приложений, в том числе Plasma - популярную среду рабочего стола.

Проект Gentoo обеспечивает прекрасную поддержку KDE, включая предыдущую версию Plasma 4, новые библиотеки KDE Frameworks 5, новое рабочее окружение Plasma 5 и Applications 5, а также широкий спектр дополнительного программного обеспечения на базе проекта KDE. 

== Предварительные требования ==

=== Профиль ===

Выбор подходящего [[Profile (Portage)|профиля]], хоть и не требуется, но рекомендуется, так как он устанавливает ряд глобальных и пакетных USE-флагов для более простой установки и не требует большого опыта в настройке KDE.

При выборе наиболее подходящего профиля сперва посмотрите какие доступны:

{{RootCmd|eselect profile list|output=<pre>
  [1]   default/linux/amd64/13.0
  [2]   default/linux/amd64/13.0/selinux
  [3]   default/linux/amd64/13.0/desktop
  [4]   default/linux/amd64/13.0/desktop/gnome
  [5]   default/linux/amd64/13.0/desktop/gnome/systemd
  [6]   default/linux/amd64/13.0/desktop/kde
  [7]   default/linux/amd64/13.0/desktop/kde/systemd
  [8]   default/linux/amd64/13.0/desktop/plasma
  [9]   default/linux/amd64/13.0/desktop/plasma/systemd
  ...
</pre>}}

Выберите подходящий профиль, заменив <code>X</code> соответствующим номером:

{{RootCmd|eselect profile set X}}

Для окружения рабочего стола Plasma 5 выберите профиль <code>desktop/plasma</code> для [[OpenRC]] или <code>desktop/plasma/systemd</code> для [[systemd/ru|systemd]]. Для старого рабочего стола Plasma 4 рекомендуется использовать профиль <code>desktop/kde</code> при работе с OpenRC. Выберите <code>desktop/kde/systemd</code>, если используется systemd. 

=== Сервисы ===

Перед установкой связанного с KDE программного обеспечения рекомендуется настроить несколько сервисов. Если используется [[Profile (Portage)|профиль]] "desktop/plasma" или "desktop", то часть работы делается автоматически. Вот необходимые сервисы:
*[[D-Bus]]: Включает использование системы межпроцессного взаимодействия D-Bus.
*[[polkit]]: Включает набор инструментов polkit для контроля привилегий системных сервисов.
*[[udev/ru|udev]]: Включает поддержку динамического и постоянного именования устройств Linux через udev.
*[[udisks]]: Включает поддержку некоторых сервисов, связанных с хранением данных.

Информация по настройке этих сервисов приведена по ссылкам. Заметьте, что другие комбинации USE-флагов, отличные от установленных в профиле, технически возможны (особенно если используется свой набор приложений вместо полного окружения KDE Plasma), но могут не поддерживаться, не быть протестированными или приводить к неожиданным потерям в функциональности.

=== X-сервер ===

Для установки X-окружения следуйте инструкциям статьи [[X server|X-сервер]].

== Plasma ==

Plasma 5 - новое поколение рабочего окружения KDE, основано на Qt 5 и KDE Frameworks 5. Обновление достаточно простое, хотя и исключает возможность сосуществования с Plasma 4 из-за несовместимости дизайнерских решений.

=== Доступные версии ===

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Gentoo
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Repository
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Plasma 5.8.3 LTS
| kde-plasma/plasma-meta-5.8.3
| gentoo
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Plasma 5.8.5 LTS
| kde-plasma/plasma-meta-5.8.5
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Plasma 5.8 stable branch
| kde-plasma/plasma-meta-5.8.49.9999
| [[KDE/Overlay|kde overlay]]
| Live version
|-
| KDE Plasma master branch
| kde-plasma/plasma-meta-9999
| [[KDE/Overlay|kde overlay]]
| Live version
|}

{{Note|Перед продолжением убедитесь, что выбран профиль plasma. Пользователям KDE 4 необходимо предпринять дополнительные действия.}}

=== Обновление с Plasma 4 ===

Информацию об обновлении с Plasma 4, миграции и устранение неполадок можно найти на [[KDE/Plasma_5_upgrade|странице обновления]].

=== Установка ===

Пакет {{Package|kde-plasma/plasma-meta}} включает полный набор Plasma 5, настраивается следующими USE флагами:
{{USEflag|package=kde-plasma/plasma-meta|desc=}}

{{Emerge|kde-plasma/plasma-meta}}

В качестве альтернативы пакет {{Package|kde-plasma/plasma-desktop}} включает в себя базовый рабочий стол, предоставляя пользователям свободу в установке дополнительных пакетов.

{{Emerge|kde-plasma/plasma-desktop}}

{{Note|Пожалуйста, обратите внимание, что при такой установке будут пропущены важные пакеты, такие как {{Package|kde-plasma/powerdevil}} (управление питанием, режимы сна и гибернации) и {{Package|kde-plasma/systemsettings}}, если установлен другой пакет выполняющий те же функции.}}

=== Виджеты ===

Много полезных виджетов в пакете {{Package|kde-plasma/kdeplasma-addons}} (уже установленный пакетом {{package|kde-plasma/plasma-meta}}):

{{Emerge|kde-plasma/kdeplasma-addons}}

=== Дисплей менеджер ===

[[SDDM]] (Simple Desktop Display Manager) — рекомендуемый менеджер входа (login manager), который автоматически установится как зависимость от {{package|kde-plasma/plasma-meta}}. Это предпочтительное приложение. В качестве альтернативы [[LightDM/ru|LightDM]] может быть использован; он установится автоматически, если установлен USE-флаг <code>-sddm</code> для пакета {{package|kde-plasma/plasma-meta}}. Измените настройки соответственно в {{Path| /etc/conf.d/xdm}}. Кроме того, убедитесь, что прочитали страницу [[SDDM]], если появляются дополнительные вопросы.

=== Автоматическая разблокировка KWallet ===

В процессе добавления (беспроводного) сетевого соединения после входа в систему, многие пользователи столкнутся с {{Package|kde-frameworks/kwallet}}, системой безопасного управления паролями Plasma. На многих системах одновременно присутствует другой сервис KWallet — {{Package|kde-apps/kwalletd}}. Он предоставляет те же функции хранения паролей приложениям, основанным на kdelibs4. Пакет {{Package|kde-plasma/kwallet-pam}} предоставляет механизм, позволяющий избежать запроса доступа к kwallet после входа в систему.

{{Emerge|kde-plasma/kwallet-pam}}

Этому пакету требуется следующая настройка:
*Для безопасности KWallet, используйте классическое шифрование blowfish вместо GPG
*Используйте один и тот же пароль и для входа в систему и для kwallet
*Настройте менеджер экрана с поддержкой PAM — как {{Package|x11-misc/sddm}}, так и {{Package|x11-misc/lightdm}} удовлетворяют этому требованию:

{{FileBox|filename=/etc/pam.d/sddm|title=Строки для разблокировки KWallet PAM с помощью SDDM|lang=bash|1=
-auth           optional        pam_kwallet5.so
-session        optional        pam_kwallet5.so auto_start
# Следующие две строки также разблокируют kwalletd для приложений на базе kdelibs4
-auth           optional        pam_kwallet.so kdehome=.kde4
-session        optional        pam_kwallet.so
}}

{{Note|Для LightDM, редактируйте файл {{Path|/etc/pam.d/lightdm}}.}}

Для управления kwallet'ами, а также для импорта и экспорта паролей, существует пакет {{Package|kde-apps/kwalletmanager}}:

{{Emerge|kde-apps/kwalletmanager}}

Для управления kwallet'ами приложений на базе kdelibs4, таких как kopete или kmail:4:

{{Emerge|kde-apps/kwalletmanager:4}}

=== Сценарии для запуска/остановки агента SSH/GPG ===

Сценарии агента ssh-agent находятся в {{Path|/etc/plasma/startup}} и {{Path|/etc/plasma/shutdown}}. Статья [[Keychain/ru|Keychain]] содержит более подробную информацию на эту тему.

== Приложения ==

Releases consist of various applications and supporting libraries based on Qt 5/KDE Frameworks 5 as well as Qt 4/KDElibs 4, with the latter still being in long term support mode. In Portage, the distinction is made using slots <code>4</code> and <code>5</code>. Porting is an ongoing process where each major release is making inroads to Frameworks 5, and therefore contains both well matured and newly ported applications. Note that it also means potential dependency conflicts when two packages depend on slot 4 and 5 of the same library that can not be installed at the same time - such packages are dropped from *-meta.

=== Доступные версии ===

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Gentoo
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Repository
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Applications 16.08.3
| kde-apps/kde-apps-meta-16.08.3
| gentoo
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Applications 16.12.0
| kde-apps/kde-apps-meta-16.12.0
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Applications 16.12 stable branch
| kde-apps/kde-apps-meta-16.12.49.9999
| [[KDE/Overlay|kde overlay]]
| Live version
|-
| KDE Applications master branch
| kde-apps/kde-apps-meta-9999
| [[KDE/Overlay|kde overlay]]
| Live version
|}

Приложеня KDE подразделены на следующие мета-пакеты:

{| {{{!}}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Название пакета
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Описание
|-
| {{Package|kde-apps/kdeaccessibility-meta}}
| Приложения и утилиты для людей с ограниченными возможностями.
|-
| {{Package|kde-apps/kdeadmin-meta}}
| Административные утилиты для управления системой.
|-
| {{Package|kde-apps/kdecore-meta}}
| Базовые приложения, такие как менеджер файлов, текстовый редактор, эмулятор терминала.
|-
| {{Package|kde-apps/kdeedu-meta}}
| Образовательные приложения и игры.
|-
| {{Package|kde-apps/kdegames-meta}}
| Стандартные игры.
|-
| {{Package|kde-apps/kdegraphics-meta}}
| Графические приложения, такие как программы для просмотра изображений, выделения цвета и так далее
|-
| {{Package|kde-apps/kdemultimedia-meta}}
| Приложения и сервисы для проигрывания аудио и видео.
|-
| {{Package|kde-apps/kdenetwork-meta}}
| Сетевые приложения и сервисы VNC.
|-
| {{Package|kde-apps/kdepim-meta}}
| Приложения PIM, такие как почтовая программа, адресная книга, органайзер, и так далее
|-
| {{Package|kde-apps/kdesdk-meta}}
| Различные инструменты разработки.
|-
| {{Package|kde-apps/kdeutils-meta}}
| Стандартные утилиты рабочего стола, такие как архиватор, калькулятор, и так далее
|-
| {{Package|kde-apps/kdewebdev-meta}}
| Инструменты для веб-разработки.
|}

=== Установка ===

Пакет kde-apps/kde-apps-meta включает в себя полный набор Applications. Также можно выбрать один или несколько меньших мета-пакетов из вышеприведенного списка.

{{Emerge| kde-apps/kde-apps-meta}}

=== Локализация ===

Тогда как Frameworks и Plasma предоставляют перевод для каждого в отдельности из своих пакетов, [[localization|локализация]] KDE Applications осуществляется посредством отдельных пакетов <code>*-l10n</code>.
USE-флаг <code>nls</code>, установленный по умолчанию для [[Profile_(Portage)|профилей]] linux, используется мета-пакетами KDE Applications для установки необходимых зависимостей.

Для установки поддержки только некоторых языков, установите переменную L10N в {{Path|/etc/portage/make.conf}}. Например, для немецкого языка:

{{FileBox|filename=/etc/portage/make.conf|title=Установка переменной <var>L10N</var> для немецкого языка|lang=bash|1=
L10N="de"
}}

To '''manually''' install these localization packages instead, use the following (complete) list or pick as desired:

{{Emerge|kde-l10n kde4-l10n kdepim-l10n}}

While the first two contain translations for the majority of KDE Applications (slot <code>5</code> and <code>4</code>), the latter  directly corresponds to - and is only relevant to users of - {{Package|kde-apps/kdepim-meta}} or its related packages.

=== KDE PIM ===

==== Доступные версии ====

В Portage доступны три варианта набора утилит для управления персональными данными KDE (KDE PIM) (включающего в себя {{Package|kde-apps/kmail}}, {{Package|kde-apps/kontact}} и {{Package|kde-apps/korganizer}}).

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Gentoo
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Repository
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE PIM 4.4.2016.01
| kde-apps/kdepim-meta-4.4.2016.01
| gentoo
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE PIM 4.14.11_pre20160211
| kde-apps/kdepim-meta-4.14.11_pre20160211
| gentoo
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE PIM 16.12.0
| kde-apps/kdepim-meta-16.12.0
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|}

==== KDE PIM 4.14.11 и более ранние ====

Стабильной на данный момент является версия 4.14.11, включающая в себя kmail, основанный на Akonadi (также известный как kmail2). Она по-прежнему основана на Qt 4/KDElibs 4.

Кроме того, в качестве версии 4.4.2016.01 доступен "[https://launchpad.net/~pali/+archive/ubuntu/kdepim-noakonadi noakonadi fork]" (также известный как kmail1). Для установки этой версии необходимо добавить [https://gitweb.gentoo.org/proj/kde.git/plain/Documentation/package.mask/kdepim-4.7 файл маски] в каталог /etc/portage/package.mask:

{{RootCmd|wget https://gitweb.gentoo.org/proj/kde.git/plain/Documentation/package.mask/kdepim-4.7 -O /etc/portage/package.mask/kdepim-4.7}}

Оба варианта начинают конфликтовать с более новыми версиями пакетов. На данный момент, некоторые конфликты можно разрешить, добавив определенные USE-флаги для конкретных пакетов:

{{FileBox|filename=/etc/portage/package.use/kdepim-4|lang=bash|1=
>=app-crypt/gpgme-1.8.0 -cxx -qt5
app-office/kmymoney:4 pim
>=kde-apps/kwalletd-16.04.3-r1 -gpg
>=kde-frameworks/kwallet-5.29.0-r1 -gpg
}}

{{Emerge|kde-apps/kdepim-meta}}

==== KDE PIM 16.12 and later ====

The latest upstream release based on Qt 5/KF 5 remains testing until it is deemed suitable for stable use, but testing is appreciated.
 
Most, but not all of the codebase has been ported from {{Package|dev-qt/qtwebkit}} to {{Package|dev-qt/qtwebengine}} which is based on Chromium's Blink. By default, this package sets and uses the <code>system-ffmpeg</code> USE flag, which comes down to a {{Package|media-video/ffmpeg}} package dependency, so users preferring {{Package|media-video/libav}} for the rest of their system will need to switch off that USE flag.

Unfortunately, not all of the KDE Applications are compatible yet, with some packages still depending on Qt 4/KDElibs 4 based parts that can not be installed with modern KDE PIM at the same time. That includes {{Package|kde-apps/kopete}}, {{Package|kde-apps/klinkstatus}}, and possibly other packages outside of the kde-apps category. By default, these packages are no longer installed by {{Package|kde-apps/kde-apps-meta}}.

Следующие команды убирают из world все пакеты, которые все еще зависят от этих конфликтующих пакетов:

{{RootCmd|equery -q d kde-apps/kdepim-common-libs &#124; sed -e "s/-[0-9].*//" &#124; xargs emerge --deselect
|equery -q d kde-apps/kdepimlibs &#124; sed -e "s/-[0-9].*//" &#124; xargs emerge --deselect
|equery -q d kde-apps/akonadi &#124; sed -e "s/-[0-9].*//" &#124; xargs emerge --deselect}}

{{Note|Для этого должен быть установлен {{Package|app-portage/gentoolkit}}. Статья [[Gentoolkit/ru|Gentoolkit]] содержит более подробную информацию об этой полезной утилите.}}

Некоторые конфликты с более старыми пакетами можно разрешить, добавив определенные USE-флаги для конкретных пакетов:

{{FileBox|filename=/etc/portage/package.use/kdepim-16.12|lang=bash|1=
app-accessibility/simon -pim
app-office/calligra:4 -pim
kde-apps/kget:4 -gpg
<=kde-apps/kwalletd-16.04.3:4 -gpg
kde-base/pykde4 -akonadi
kde-misc/tellico:4 -addressbook
net-p2p/ktorrent:4 -rss
net-voip/ekiga -kontact
}}

Теперь, когда все готово, KDE PIM готов к установке:

{{Emerge|kde-apps/kdepim-meta}}

=== kdesu5 ===

Утилита, используемая для запуска графических программ от пользователя {{c|root}}, включена в {{Package|kde-plasma/kde-cli-tools}}. Если собирать с USE-флагом <code>kdesu</code>, установится графический фронтэнд для {{Package|kde-frameworks/kdesu}}, который может быть запущен через {{c|kdesu5}}.

Как всегда, убедитесь, что для команд, запускаемых от {{c|root}}, пользователь добавлен в соответствующие группы или просто есть возможность запускать их непривилегированно.

== Frameworks ==

KDE Frameworks 5 представляет собой набор библиотек и фреймворков в качестве основы для KDE Plasma 5 и KDE Applications 5, но может быть использован любым Qt-приложением.

Frameworks, в основном библиотеки, обеспечивающие небольшой функциональностью пользователя, не требуют отдельной установки - все необходимые пакеты будут затянуты автоматически в качестве зависимостей.

=== Доступные версии ===

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Gentoo
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Repository
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Frameworks 5.26.0
| kde-frameworks/*-5.26.0
| gentoo
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Frameworks 5.29.0
| kde-frameworks/*-5.29.0
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Frameworks master branch
| kde-frameworks/*-9999
| [[KDE/Overlay|kde overlay]]
| Live version
|}

== Plasma 4 ==

Plasma 4 — это предыдущая основная версия рабочего стола KDE. Хотя она больше не поддерживается разработчиками, она тем не менее считается стабильной и по-прежнему может быть подходящим альтернативным вариантом для некоторых пользователей.

{{Warning|Пользователям необходимо помнить, что Plasma 4 не поддерживается с 19-го августа 2015 года, что означает, что ошибки, связанные с безопасностью, не исправлялись с тех пор.}}

== Доступные версии ==

{| {{{!}} class{{=}}"table"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE version
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Plasma 4.11.22
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}; testing for {{Keyword|arm}}
|}

{{Emerge|kde-plasma/kdebase-startkde}}

Это установит дополнительные пакеты <code>kde-plasma/</code> и <code>kde-frameworks/</code>.

=== Виджеты ===

Много полезных виджетов присутствует в пакете {{Package|kde-plasma/kdeplasma-addons}}:

{{Emerge|kde-plasma/kdeplasma-addons:4}}

== Менеджер экрана ==

KDM (KDE Display Manager) на протяжении долгого времени является менеджером входа в систему для Plasma 4. Тем не менее, можно использовать любой другой менеджер.

{{Emerge|kde-plasma/kdm}}

==== OpenRC ====

Установите KDM в качестве [[display manager|менеджера дисплея]] по умолчанию:

{{FileBox|filename=/etc/conf.d/xdm|lang=bash|1=
DISPLAYMANAGER="kdm"
}}

Чтобы запустить KDM при загрузке, добавьте xdm в уровень выполнения по умолчанию:

{{RootCmd|rc-update add xdm default}}

Для немедленного запуска KDM:

{{RootCmd|/etc/init.d/xdm start}}

==== systemd ====

Включите KDM для запуска во время загрузки с помощью {{c|systemctl}}:

{{RootCmd|systemctl enable kdm}}

Теперь запустите сервис:

{{RootCmd|systemctl start kdm}}

== Другое ПО из состава KDE ==

Наиболее важные приложения KDE находятся в дереве portage и большинство размещается в категориях [https://packages.gentoo.org/category/kde-apps kde-apps] и [https://packages.gentoo.org/category/kde-misc kde-misc].

== Смотрите также ==

* [[KDE/Troubleshooting|Устранение проблем с KDE]] -  расширенная статья о поиске и устранении неисправностей в KDE
* [[KDE/Overlay|KDE-оверлей]] - инструкции как добавить Gentoo KDE оверлей
* [[KDE/Removal|Удаление KDE и очистка системы]] - инструкции о удалении и очистки системы после KDE.
* [[Overlay:kde-sunset|kde-sunset overlay]] - Для старых версий KDE, удаленных из основного дерева Portage.

== Внешние ссылки ==

* [https://userbase.kde.org/ Официальная wiki для пользователей KDE]
* [https://forum.kde.org/ Официальный форум KDE]
* [https://store.kde.org/ KDE Store (темы, виджеты, обои, и так далее)]

[[Category:KDE]] [[Category:Desktop environment]]
