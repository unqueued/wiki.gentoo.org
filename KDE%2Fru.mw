<languages />

{{InfoBox stack
|{{InfoBox homepage|https://www.kde.org/|header=true}}
|{{InfoBox wikipedia}}
|{{InfoBox project|KDE}}
}}

<div class="mw-translate-fuzzy">
'''KDE''' — это сообщество свободного программного обеспечения, разрабатывающее множество приложений, в том числе Plasma - популярную среду рабочего стола.
</div>

<div class="mw-translate-fuzzy">
Проект Gentoo обеспечивает прекрасную поддержку проекта KDE, и всех библиотек KDE Frameworks 5, новое рабочее окружение Plasma 5 и Applications 5, а также широкий спектр дополнительного программного обеспечения на базе проекта KDE.
</div> 

== Предварительные требования ==

=== Профиль ===

Выбор подходящего [[Profile (Portage)|профиля]], хоть и не требуется, но рекомендуется, так как он устанавливает ряд глобальных и пакетных USE-флагов для более простой установки и не требует большого опыта в настройке KDE.

При выборе наиболее подходящего профиля сперва посмотрите какие доступны:

<div class="mw-translate-fuzzy">
{{RootCmd|eselect profile list|output=<pre>
  [1]   default/linux/amd64/13.0
  [2]   default/linux/amd64/13.0/selinux
  [3]   default/linux/amd64/13.0/desktop
  [4]   default/linux/amd64/13.0/desktop/gnome
  [5]   default/linux/amd64/13.0/desktop/gnome/systemd
  [6]   default/linux/amd64/13.0/desktop/plasma
  [7]   default/linux/amd64/13.0/desktop/plasma/systemd
  ...
</pre>}}
</div>

Выберите подходящий профиль, заменив <code>X</code> соответствующим номером:

{{RootCmd|eselect profile set X}}

<div class="mw-translate-fuzzy">
Для окружения рабочего стола Plasma 5 выберите профиль <code>desktop/plasma</code> для [[OpenRC]] или <code>desktop/plasma/systemd</code> для [[systemd/ru|systemd]].
</div>

=== Сервисы ===

<div class="mw-translate-fuzzy">
Перед установкой связанного с KDE программного обеспечения рекомендуется настроить несколько сервисов. Если используется [[Profile (Portage)|профиль]] "desktop/plasma" или "desktop", то часть работы делается автоматически. Вот необходимые сервисы:
*[[D-Bus]]: Включает использование системы межпроцессного взаимодействия D-Bus.
*[[polkit]]: Включает набор инструментов polkit для контроля привилегий системных сервисов.
*[[udev/ru|udev]]: Включает поддержку динамического и постоянного именования устройств Linux через udev.
*[[udisks]]: Включает поддержку некоторых сервисов, связанных с хранением данных.
</div>

==== Session tracker ====

Choose exactly one of:

* [[elogind]]: Standalone logind package extracted from systemd project for use with [[OpenRC]] or other init systems.
* [[systemd]]: Uses the session tracker part of systemd. Users of systemd do not need to take any other initiative here.
* [[ConsoleKit|consolekit]]: Framework for defining and tracking users, login sessions, and seats. It is currently default for the {{Path|desktop/plasma}} profile.

For [[Wayland]] support, a logind implementation is required. Gentoo provides [[elogind]] as an alternative to [[systemd]].

==== Device manager ====

Choose exactly one of:

* [[eudev]]: Gentoo's fork of udev with the goal of obtaining better compatibility. It is the default for the {{Path|desktop/plasma}} profile.
* [[udev]]: Enables support for udev Linux dynamic and persistent device naming.
* [[systemd]]: Uses the device manager part of systemd. Users of systemd do not need to take any other initiative here.

==== Miscellaneous ====

* [[D-Bus]]: Enables use of the D-Bus message bus system.
* [[polkit]]: Enables the polkit framework for controlling privileges for system-wide services.
* [[udisks]]: Enables support for some storage related services.

=== X-сервер ===

Для установки X-окружения следуйте инструкциям статьи [[X server|X-сервер]].

=== Package conflicts ===

KDE Plasma and Applications come with many dependencies. Some of these dependencies will predetermine package choices where otherwise there would be options to choose from.

* [[FFmpeg]]: By default, {{Package|dev-qt/qtwebengine}} has USE <code>system-ffmpeg</code> enabled, making it depend on {{Package|media-video/ffmpeg}}. Users preferring {{Package|media-video/libav}} for the rest of their system will need to switch off that flag.
* JPEG: Since 5.11.1, {{Package|dev-qt/qtwebengine}} depends on {{Package|media-libs/libjpeg-turbo}}. It is Gentoo's recommended default over {{Package|media-libs/jpeg}} anyway.

== Plasma ==

Plasma 5 это текущее поколение рабочего окружения KDE, основано на Qt 5 и KDE Frameworks 5.

=== Доступные версии ===

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Gentoo
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Ebuild repository
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Plasma 5.14.3
| kde-plasma/plasma-meta-5.14.3
| gentoo
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}; Testing for {{Keyword|arm}} and {{Keyword|arm64}}
|-
| KDE Plasma 5.14.5
| kde-plasma/plasma-meta-5.14.5
| gentoo
| Testing for {{Keyword|amd64}}, {{Keyword|arm}}, {{Keyword|arm64}} and {{Keyword|x86}}
|-
| KDE Plasma master branch
| kde-plasma/plasma-meta-9999
| [[KDE/Ebuild repository|KDE]]
| Live version
|}

<div class="mw-translate-fuzzy">
{{Note|Перед продолжением убедитесь, что выбран профиль plasma. Пользователям KDE 4 необходимо предпринять дополнительные действия.}}
</div>

=== Установка ===

<div class="mw-translate-fuzzy">
Пакет {{Package|kde-plasma/plasma-meta}} включает полный набор Plasma 5, настраивается следующими USE флагами:
{{USEflag|package=kde-plasma/plasma-meta|desc=}}
</div>

{{Emerge|kde-plasma/plasma-meta}}

<div class="mw-translate-fuzzy">
В качестве альтернативы пакет {{Package|kde-plasma/plasma-desktop}} включает в себя базовый рабочий стол, предоставляя пользователям свободу в установке дополнительных пакетов.
</div>

{{Emerge|kde-plasma/plasma-desktop}}

{{Note|Пожалуйста, обратите внимание, что при такой установке будут пропущены важные пакеты, такие как {{Package|kde-plasma/powerdevil}} (управление питанием, режимы сна и гибернации) и {{Package|kde-plasma/systemsettings}}, если установлен другой пакет выполняющий те же функции.}}

By default the classic tree view of {{package|kde-plasma/systemsettings}} is not enabled. The following USE flag will enable it:
{{FileBox|filename=/etc/portage/package.use/systemsettings|title=Enable classic tree view|lang=bash|1=
kde-plasma/systemsettings classic
}}

Recompile systemsettings with new USE flags:
{{emerge|--changed-use kde-plasma/systemsettings}}

=== Виджеты ===

Много полезных виджетов в пакете {{Package|kde-plasma/kdeplasma-addons}} (уже установленный пакетом {{package|kde-plasma/plasma-meta}}):

{{Emerge|kde-plasma/kdeplasma-addons}}

=== Дисплей менеджер ===

[[SDDM]] (Simple Desktop Display Manager) — рекомендуемый менеджер входа (login manager), который автоматически установится как зависимость от {{package|kde-plasma/plasma-meta}}. Это предпочтительное приложение. В качестве альтернативы [[LightDM/ru|LightDM]] может быть использован; он установится автоматически, если установлен USE-флаг <code>-sddm</code> для пакета {{package|kde-plasma/plasma-meta}}. Измените настройки соответственно в {{Path| /etc/conf.d/xdm}}. Кроме того, убедитесь, что прочитали страницу [[SDDM]], если появляются дополнительные вопросы.

[[SDDM]] does not yet support [[Multiseat|multiseat]], while [[LightDM]] does.

==== No display manager ====

Plasma can be started the old-fashioned way with {{c|startx}}, but extra care needs to be taken to ensure it gets a valid session. The following solution is limited to [[ConsoleKit]]:

{{FileBox|filename=~/.xinitrc|lang=bash|1=
#!/bin/sh
exec ck-launch-session dbus-launch --sh-syntax --exit-with-session startkde
}}

=== System tray ===

Plasma 5 uses the StatusNotifier specification for systray icons <ref>http://blog.martin-graesslin.com/blog/2014/03/system-tray-in-plasma-next/</ref>. As not all applications have been ported to the new system, some workarounds exist <ref>http://blog.martin-graesslin.com/blog/2014/06/where-are-my-systray-icons/</ref>, and Plasma 5 has a means to convert old xembed-based system tray icons to StatusNotifier icons.

Legacy support is enabled by activating <code>legacy-systray</code> for {{package|kde-plasma/plasma-meta}}, which is pulling in {{package|kde-plasma/xembed-sni-proxy}}.

{{RootCmd|echo "kde-plasma/plasma-meta legacy-systray" >> /etc/portage/package.use/plasma-systray}}

==== Pidgin ====

{{Package|net-im/pidgin}} requires {{Package|x11-plugins/pidgin-indicator}}. After install, the ''Ubuntu Indicator'' plugin can be found under ''Tools | Plugins''.

=== KWallet ===

<div class="mw-translate-fuzzy">
В процессе добавления (беспроводного) сетевого соединения после входа в систему, многие пользователи столкнутся с {{Package|kde-frameworks/kwallet}}, системой безопасного управления паролями Plasma. На многих системах одновременно присутствует другой сервис KWallet — {{Package|kde-apps/kwalletd}}. Он предоставляет те же функции хранения паролей приложениям, основанным на kdelibs4. Пакет {{Package|kde-plasma/kwallet-pam}} предоставляет механизм, позволяющий избежать запроса доступа к kwallet после входа в систему.
</div>

<div class="mw-translate-fuzzy">
Для управления kwallet'ами, а также для импорта и экспорта паролей, существует пакет {{Package|kde-apps/kwalletmanager}}:
</div>

{{Emerge|kde-apps/kwalletmanager}}

<div class="mw-translate-fuzzy">
=== Автоматическая разблокировка KWallet ===
</div>

{{Package|kde-plasma/kwallet-pam}} provides a mechanism to avoid being subsequently asked for access to kwallet after login.

{{Emerge|kde-plasma/kwallet-pam}}

Этому пакету требуется следующая настройка:
*Для безопасности KWallet, используйте классическое шифрование blowfish вместо GPG
*Используйте один и тот же пароль и для входа в систему и для kwallet
*Настройте менеджер экрана с поддержкой PAM — как {{Package|x11-misc/sddm}}, так и {{Package|x11-misc/lightdm}} удовлетворяют этому требованию:

<div class="mw-translate-fuzzy">
{{FileBox|filename=/etc/pam.d/sddm|title=Строки для разблокировки KWallet PAM с помощью SDDM|lang=bash|1=
-auth           optional        pam_kwallet5.so
-session        optional        pam_kwallet5.so auto_start
# Следующие две строки также разблокируют kwalletd для приложений на базе kdelibs4
-auth           optional        pam_kwallet.so kdehome=.kde4
-session        optional        pam_kwallet.so
}}
</div>

<div class="mw-translate-fuzzy">
{{Note|Для LightDM, редактируйте файл {{Path|/etc/pam.d/lightdm}}.}}
</div>

==== Disabling KWallet ====

To disable the KWallet subsystem completely, edit the following file:

{{FileBox|filename=~/.config/kwalletrc|lang=bash|1=
[Wallet]
Enabled=false
}}

=== Скрипты для запуска/остановки агента SSH/GPG ===

Скрипты агента ssh-agent находятся в {{Path|/etc/plasma/startup}} и {{Path|/etc/plasma/shutdown}}. Статья [[Keychain/ru|Keychain]] содержит более подробную информацию на эту тему.

=== Run GUI applications with root privileges ===

{{Warning|It could be a ''very'' bad idea to start GUI applications with root privileges, versus adding the regular user to the relevant group or simply just running the command unprivileged. Only use {{c|kdesu}} when absolutely necessary.}}

KDE Plasma has a utility in order to start graphical programs with root privileges. It is provided by {{Package|kde-plasma/kde-cli-tools}} - if built with USE flag <code>kdesu</code>, a graphical frontend to {{Package|kde-frameworks/kdesu}} is installed, which can be used by invoking {{c|kdesu}}. This can be done either from KRunner or a terminal emulator:

{{Cmd|kdesu <program-name>}}

A message dialog will be displayed prompting for the root password.

{{Note|Some applications such as kwrite, dolphin etc. refuse to be opened with {{c|kdesu}} for security reasons.}}

== Приложения ==

<div class="mw-translate-fuzzy">
Релизы состоят из разных приложений и поддерживающих их библиотек, основанных на Qt 5/KDE Frameworks 5 так же как Qt 4/KDElibs 4, последние имеют статус LTS (Long Term Support). В Portage различие осуществляется через слоты <code>4</code> и <code>5</code>. Портирование является постоянным процессом, когда каждый крупный релиз основан на Frameworks 5, и следовательно включает обе версии приложения - классическую и новейшую портированную. Обратите внимание на возможные конфликты зависимостей даже в рамках одного крупного релиза, когда для двух пакетов со слотов 4 и 5 две версии одних и тех же библиотек не могут быть установлены в одно время — такие пакеты удаляются из пакетов *-meta.
</div>

=== Доступные версии ===

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Gentoo
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Ebuild repository
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Applications 18.08.3
| kde-apps/kde-apps-meta-18.08.3
| gentoo
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Applications 18.12.0
| kde-apps/kde-apps-meta-18.12.0
| gentoo
| Testing for {{Keyword|amd64}} and {{Keyword|x86}}
|-
| KDE Applications 18.12 stable branch
| kde-apps/kde-apps-meta-18.12.49.9999
| [[KDE/Ebuild repository|KDE]]
| Live version
|-
| KDE Applications master branch
| kde-apps/kde-apps-meta-9999
| [[KDE/Ebuild repository|KDE]]
| Live version
|}

Приложеня KDE подразделены на следующие мета-пакеты:

<div class="mw-translate-fuzzy">
{| {{{!}}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Название пакета
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Описание
|-
| {{Package|kde-apps/kdeaccessibility-meta}}
| Приложения и утилиты для людей с ограниченными возможностями.
|-
| {{Package|kde-apps/kdeadmin-meta}}
| Административные утилиты для управления системой.
|-
| {{Package|kde-apps/kdecore-meta}}
| Базовые приложения, такие как менеджер файлов, текстовый редактор, эмулятор терминала.
|-
| {{Package|kde-apps/kdeedu-meta}}
| Образовательные приложения и игры.
|-
| {{Package|kde-apps/kdegames-meta}}
| Стандартные игры.
|-
| {{Package|kde-apps/kdegraphics-meta}}
| Графические приложения, такие как программы для просмотра изображений, выделения цвета и так далее
|-
| {{Package|kde-apps/kdemultimedia-meta}}
| Приложения и сервисы для проигрывания аудио и видео.
|-
| {{Package|kde-apps/kdenetwork-meta}}
| Сетевые приложения и сервисы VNC.
|-
| {{Package|kde-apps/kdepim-meta}}
| Приложения PIM, такие как почтовая программа, адресная книга, органайзер, и так далее
|-
| {{Package|kde-apps/kdesdk-meta}}
| Различные инструменты разработки.
|-
| {{Package|kde-apps/kdeutils-meta}}
| Стандартные утилиты рабочего стола, такие как архиватор, калькулятор, и так далее
|-
| {{Package|kde-apps/kdewebdev-meta}}
| Инструменты для веб-разработки.
|}
</div>

=== Установка ===

Пакет kde-apps/kde-apps-meta включает в себя полный набор Applications. Также можно выбрать один или несколько меньших мета-пакетов из вышеприведенного списка.

{{Emerge| kde-apps/kde-apps-meta}}

=== Локализация ===

Plasma-5 and Applications are shipping their [[localization]] per-package. Enable your localization in systemsettings.

=== KDE PIM ===

KDE PIM is a whole suite of applications to manage personal information including mail, calendar, contacts and more. It has several optional runtime dependencies to extend its functionality:

* Virus detection: {{Package|app-antivirus/clamav}}
* Spam filtering: {{Package|mail-filter/bogofilter}} or {{Package|mail-filter/spamassassin}}

== Frameworks ==

<div class="mw-translate-fuzzy">
KDE Frameworks 5 представляет собой набор библиотек и фреймворков в качестве основы для KDE Plasma 5 и KDE Applications 5, но может быть использован любым Qt-приложением.
</div>

Frameworks, в основном библиотеки, обеспечивающие небольшой функциональностью пользователя, не требуют отдельной установки - все необходимые пакеты будут затянуты автоматически в качестве зависимостей.

=== Доступные версии ===

{| {{{!}} class{{=}}"table table-striped table-condensed"
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | KDE
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Gentoo
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Ebuild repository
! style{{=}}"background: #31206C; color: white; white-space: nowrap;" | Status
|-
| KDE Frameworks 5.52.0
| kde-frameworks/*-5.52.0
| gentoo
| Stable for {{Keyword|amd64}} and {{Keyword|x86}}, Testing for {{Keyword|arm}}
|-
| KDE Frameworks 5.53.0
| kde-frameworks/*-5.53.0
| gentoo
| Testing for {{Keyword|amd64}}, {{Keyword|arm}} and {{Keyword|x86}}
|-
| KDE Frameworks master branch
| kde-frameworks/*-9999
| [[KDE/Ebuild repository|KDE]]
| Live version
|}

== Другое ПО из состава KDE ==

<div class="mw-translate-fuzzy">
Наиболее важные приложения KDE находятся в Gentoo репозитории дереве и большинство размещается в категориях [https://packages.gentoo.org/category/kde-apps kde-apps] и [https://packages.gentoo.org/category/kde-misc kde-misc].
</div>

== Troubleshooting ==

Refer to the [[KDE/Troubleshooting|Troubleshooting]] sub-article.

== Смотрите также ==

<div class="mw-translate-fuzzy">
* [[KDE/Troubleshooting/ru|Устранение проблем с KDE]] -  расширенная статья о поиске и устранении неисправностей в KDE
* [[KDE/Overlay/ru|KDE-оверлей]] - инструкции как добавить Gentoo KDE оверлей
* [[KDE/Removal/ru|Удаление KDE и очистка системы]] - инструкции о удалении и очистки системы после KDE.
* [[Overlay:kde-sunset|kde-sunset overlay]] - Для старых версий KDE, удаленных из основного дерева Portage.
</div>

== Внешние ссылки ==

* [https://userbase.kde.org/ Официальная wiki для пользователей KDE]
* [https://forum.kde.org/ Официальный форум KDE]
* [https://store.kde.org/ KDE Store (темы, виджеты, обои, и так далее)]

== References ==

<references />

[[Category:KDE]] [[Category:Desktop environment]]
