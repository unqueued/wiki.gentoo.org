<languages />


{{Metadata|abstract=Gentoo AMD64 のよくある質問集の記事。}}

[[Article description::Gentoo AMD64 のよくある質問集の記事。]]

{{InfoBox stack|{{InfoBox todo|Add instructions for [[#How do I use Cool'n'Quiet/PowerNow/SpeedStep features?|Cool'n'Quiet/PowerNow/SpeedStep]] for systemd users|header=true}}}}


== はじめに ==

この文書は、{{Keyword|amd64}}システム上のGentoo Linuxについての最もよくある質問をまとめたものです。これらの質問の多くは、[https://forums.gentoo.org/ フォーラム]やIRC、[https:////www.gentoo.org/get-involved/mailing-lists/all-lists.html メーリングリスト]でされたものです。[[Project:AMD64|AMD64プロジェクト]]はこのアーキテクチャ上のGentoo Linuxのためのサポートを提供しています。このFAQについて提案や疑問がある場合には、[[Talk:AMD64/FAQ|議論ページ]]にコメントをお寄せください。

== インストール ==

=== AMD64 と EM64T の違いは何ですか? ===

それぞれ、AMD (AMD64) と Intel (EM64T) の64ビットプロセッサのことです。AMDの64ビットプロセッサとしては、Athlon 64やTurion、Neo、Phenom、FX、A''X''/E''X''/C''X''、Opteronのファミリーがあります。Intelの64ビットプロセッサとしては、Core 2や、（Core 2アーキテクチャまたはそれ以降を採用している）Core i ''X''、Celeron、Pentiumがあげられます。古いPentium 4やXeonチップのうち[https://ja.wikipedia.org/wiki/X64#Intel_64 最近のいくつかのバージョン]も、EM64Tをサポートしています。

AMDの64ビットプロセッサシリーズはよく、Intelが発売するものへ対抗しています。したがって、Gentooにおけるすべてのx86-64互換アーキテクチャのarchキーワードは、歴史的経緯で {{keyword|amd64}}になっています。よって、「AMD64」は、AMD製及びIntel製の64ビットチップのことを一般的に指します。

=== CFLAGSには何を設定すべきですか? ===

システム上で将来の問題発生を避けるためには、単純な <var>CFLAGS</var> を使用すべきです。AMD及びIntel(EM64T)に対応する <var>CFLAGS</var> 変数の値は、 <code>-O2 -march=native -pipe</code> です。

=== どのカーネルを使用すべきですか? ===

Portage のなかにあるほぼすべてのカーネルソースが利用可能です。ただし、 {{Package|sys-kernel/gentoo-sources}} の使用をお奨めします。Gentoo Linux向けに設計された特別なカーネルだからです。これは、AMD64特有のパッチが適用されており、Gentoo/AMD64に公式に対応する唯一のカーネルです。

カーネルの <var>IA32_EMULATION</var> オプションを有効にすることを忘れないでください。

{{RootCmd|cd /usr/src/linux
|make menuconfig}}

{{KernelBox|title=IA32 エミュレーションの有効化|1=
Executable file formats / Emulations  --->
  [*] IA32 Emulation

}}

{{Warning/ja|このオプションを無効にすると、[[multilib|マルチライブラリ]]環境ではビルドに失敗してしまうかもしれません。}}

=== 32ビットより64ビットのシステムのほうが性能が高いですか? ===

これは簡単には答えきれない質問です。性能が向上する場合もあれば、そうならない場合もあります。日常的な利用であれば、64ビットと32ビットでは差がほとんどありません。マルチメディアアプリケーションや3Dレンダリングで通常利用される浮動小数点演算となると、64ビットのほうが一般的に高速です。Linux.comの記事 [https://www.linux.com/news/64-bit-performance-gentoo-linux 64-bit performance in Gentoo Linux] や [https://www.linux.com/news/64-bit-linux-and-bsd-are-maturing-steadily 64-bit Linux and BSD are maturing steadily] が参考になるかもしれません。また、フォーラム内の記事 [https://forums.gentoo.org/viewtopic-t-349691.html Article: 64-bit performance in Gentoo Linux] も良いでしょう。

=== マルチライブラリ(multilib) とは何ですか? 利用するにはどうしたらよいですか? ===

すべてのAMD64プロセッサは、64ビットのコードだけではなく32ビットのコードも実行可能です。しかしながら、32ビットアプリケーションには64ビットライブラリを適用することはできず、逆もまた同様です。ですが、必要なすべての共有ライブラリが32ビットオブジェクトで用意されていれば、32ビットアプリケーションをネイティブに（エミュレーションではなく）実行することができます。[[multilib|マルチライブラリ]]対応にするか否かは、所定のプロファイルで選べます。デフォルト値は、マルチライブラリ有効なプロファイルです。

{{Warning/ja|現在のところ、マルチライブラリ無効のプロファイルから有効のプロファイルに切換えることはできません。もしマルチライブラリ無効のプロファイルを選択したいのならば、もう一度よく考えてから判断しましょう。}}

=== 32ビットの chroot はどのように作成するのですか? ===

[[Project:AMD64/32-bit_Chroot_Guide|32ビット chroot ガイド]] を参照してください。

=== x86のシステムを AMD64 に、 emerge -e @world をしたら移行可能ですか? ===

{{keyword|x86}} と {{keyword|amd64}} ではインストール内容にある程度の相違があるため、この方法での移行は不可能です。[[Handbook:AMD64|AMD64 ハンドブック]]を読んで、インストールしなおしてください。

Note that binary files created on an x86 system most likely cannot be read by packages on an AMD64 system. In particular, some databases, such as OpenLDAP, cannot simply be copied as-is. You will need to dump the database into an architecture-independent format, such as a text file, before attempting to restore it on an AMD64 system.  Database files for MySQL, Berkley&nbsp;DB and SQLite are architecture-independent and can be moved freely when a related daemon, if any, is cleanly shut down.

== ハードウェア ==

=== NVIDIA/ATI のバイナリドライバは動作しますか? ===

Yes, NVIDIA and ATI provide drivers that work on AMD64. You can install either {{Package|x11-drivers/nvidia-drivers}} or {{Package|x11-drivers/xf86-video-ati}}. If you have more questions about these drivers, you should read the [[NVidia/nvidia-drivers|nvidia-drivers guide]] or the [[ATI FAQ]].

=== Cool'n'Quiet/PowerNow/SpeedStep 機能はどうしたら利用可能ですか? ===

これらの機能に対応したカーネルをコンパイルしなければなりません。有効にすべき機能は: 

{{KernelBox|title=Cool'n'Quiet/PowerNow/SpeedStep のためのカーネルオプション|1=
Power management and ACPI options --->
  [*] Device power management core functionality
  [*] ACPI (Advanced Configuration and Power Interface) Support --->
    <*>   Processor
    <*>     Thermal Zone
  CPU Frequency scaling --->
  [*] CPU Frequency scaling
         Default CPUFreq governor (ondemand) --->
  -*-   'performance' governor
  <*>   'userspace' governor for userspace frequency scaling
  -*-   'ondemand' cpufreq policy governor
  <*>   ACPI Processor P-States driver
  CPU Idle  --->
    -*- CPU idle PM support
}}

そして {{Package|sys-power/cpupower}} をインストールして、お好みのエディタで {{Path|/etc/conf.d/cpupower}} を編集しましょう。 

{{FileBox|filename=/etc/conf.d/cpupower|title=設定例|1=
# Options when starting cpufreq (given to the `cpupower` program)
START_OPTS="--governor ondemand"
  
# Options when stopping cpufreq (given to the `cpupower` program)
STOP_OPTS="--governor performance"
}}

あとは、{{c|rc-update add cpupower boot}} を実行してブート時に常に開始されるようにするだけです。 

{{Note/ja|さらなる CPU パワーマネジメントに関するテクニックは、[[Power management/Guide|パワーマネジメントガイド]]に載っています。}}

== アプリケーション ==

=== Adobe Flash は動作しますか? ===

はい。{{Package|www-plugins/adobe-flash}} をインストールしてください。emergeされたら、ebuild が表示するメッセージを一度読んでください。

=== あるパッケージをインストールしようとすると、emergeが (masked by: ~amd64) と出力します ===

このことはパッケージがまだ'testing'ツリーにあるということを示しています。詳しくはPortageのマニュアルページ（{{c|man portage}}）または[[Handbook:AMD64|AMD64 ハンドブック]]の「[[Handbook:AMD64/Portage/Branches|ソフトウェアのブランチを併用する]]」をお読みください。

=== あるパッケージをインストールしようとすると、emergeが (masked by: missing keyword) と出力します ===

これはパッケージがまだテストされていないということを示しています。パッケージが「必ずしも」動かないというわけではありません。別のアーキテクチャ（やアーキテクチャ群）を受けいれることでパッケージをマスク解除できます。続く例では、どのようなキーワードであってもインストールを受け入れるよう、Portageに設定できることを示しています。

{{RootCmd|echo "category/packagename **" >> /etc/portage/package.accept_keywords
|emerge packagename}}

もしこれでうまく動いたなら、[https://bugs.gentoo.org/ Gentoo's Bugzilla]までお報せくだされば、AMD64チームはパッケージをキーワードすることができ、あなたのテストが他のユーザーの役に立ちます。 

{{Warning/ja|{{c|ACCEPT_KEYWORDS{{=}}"~x86" emerge packagename}}のようなコマンドを実行しないでください。ほぼ確実にあなたのPortageツリーを壊してシステムを役立たずにしてしまいます。}}

== どうすればGentoo/AMD64プロジェクトを手助けできますか？ ==

=== どうすれば手助けできますか？ ===

{{Keyword|amd64}}アーキテクチャが広く使われるようになるにつれて、私達もより多くの助けを必要としています。Gentoo/AMD64の品質を向上させるためにまだまだ多くの仕事があります。一般的なユーザーは次のようにして私達を手助けできますː 

* 通常のバグ報告を行うこと
* {{Keyword|~amd64}}キーワードを持っていないパッケージをテストすること
* メーリングリストやフォーラム、IRCチャンネルで質問に答えること
* パッチを送ること
* [[Project:AMD64 Arch Testers|AMD64 Arch Testers project]] に参加すること

== Other resources ==

=== どこでGentoo/AMD64に関する助けや情報を入手できますか？ ===

もしあなたの質問にここで答えられていないのなら、[[Project:AMD64|私たちのプロジェクトのページ]]にある別の情報源を試してみてください。また、chat.freenode.netの{{IRC|gentoo-amd64}}、[https://forums.gentoo.org/viewforum-f-46.html Gentoo/AMD64 Forums]や{{Mail|gentoo-amd64@lists.gentoo.org}}メーリングリストで質問することもできます。

[[Category:Core system]] {{Migrated|originalauthors= Simon Stelling, Luis Medinas, Gerald J. Normandin Jr., Xavier Neys, {{Dev|nightmorph}}}}
