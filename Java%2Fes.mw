<languages />
{{InfoBox stack
|{{InfoBox wikipedia|Java_(programming_language)|header=true}}
|{{InfoBox project|Java}}
}}
Java es un lenguaje de programación desarrollado originalmente por Sun Microsystems que utilizan un ejecutable para permitir correr aplicaciones desarrolladas en Java en varias plataformas. Es una opción popular para los desarrolladores que desean crear aplicaciones multiplataforma.

== ¿Que es Java? ==

=== Visión general ===

Java es un lenguaje de programación desarrollado por ingenieros de Sun Microsystems. El lenguaje es totalmente orientado a objetos y diseñado para ser ejecutado en múltiples plataformas sin la necesidad de recompilar el código para cada una de ellas. Aunque Java puede ser compilado como un lenguaje nativo, mucha de la popularidad de Java se atribuye a su portabilidad, junto con otras características como recolección de basura. Para hacer posible esta independencia de plataforma, el compilador de Java compila el codigo Java hacia una representación intermedia denominada "Java bytecode" que es ejecutado en un JRE (Java Runtime Environment) y no directamente sobre el sistema operativo. 

Para ejecutar Java bytecode, es necesario tener un entorno JRE (Java Runtime Environment) instalado. Un JRE proporciona bibliotecas centrales, una maquina virtual de Java dependiente de plataforma, y extensiones para navegadores web entre otras cosas. Por otro lado un JDK (Java Development Kit) agrega herramientas de programación, tales como compilador de bytecode y un depurador de codigo.

== Instalando una máquina virtual ==

=== Opciones ===

Gentoo proporciona una variedad de entornos de ejecución de Java (JREs) y kits de desarrollo Java (JDKs). Las opciones actuales incluyen: 

{| class="table table-condensed table-stripe" style="text-align: left;" 
|- 
! Vendor
! JDK
! JRE
|- 
| Open Java SE de IcedTea (anteriormente icedtea6-bin)
| {{Package|dev-java/icedtea-bin}} y {{Package|dev-java/icedtea-bin}} 
| 
|- 
| Java 7 SE de Oracle
| {{Package|dev-java/oracle-jdk-bin}}
| {{Package|dev-java/oracle-jre-bin}}
|-
| El compilador Java GCC de GNU: GCJ IcedTea (actualmente IcedTea-7)
| {{Package|dev-java/icedtea}} {{Package|sys-devel/gcc}}  USE="gcj"
|}

=== Instalar un JRE/JDK ===

Para instalar el '''JDK''' por defecto del perfil lance:

{{Emerge|virtual/jdk}}

Para instalar el perfil '''JRE''' por defecto lanzar:

{{Emerge|virtual/jre}}

Algunos JDKs y JREs, incluyendo los paquetes de Oracle, requieren que el usuario acepte un Acuerdo de Licencia de Usuario o Eula. En el caso que esta licencia (por ejemplo dlj-1.1) no este incluida en la variable <var>ACCEPT_LICENSE</var> dentro de {{Path|/etc/portage/make.conf}} no será posible instalar el JDK/JRE. Para mayor información de como agregar licencias aceptadas en {{Path|make.conf}} puede consultarse el [[Handbook:X86/Working/Portage/es#Licencias|capítulo de licencias]] del manual de Portage. 

Para evitar cualquier restricción de licencias, considérese instalar icedtea-bin, el cual es una implementación abierta de Java del proyecto OpenJDK. 

{{Note|Tenga en cuenta que cada ''JDK'' incluye un ''JRE''. Por tanto no es necesario instalar un JRE si se ha hecho emerge de un JDK.}}

=== Instalar la máquina virtual GCJ IcedTea ===

Se ofrece el código fuente de la máquina virtual Icedtea el cual requiere la compilación por parte de un compilador de bytecodes Java. Esta secuencia de comienzo la puede ejecutar el compilador para Java de GNU. Este compilador está disponible cuando se construye GCC con el ajuste USE <code>gcj</code>. USE flag

Cuando se reconstruye GCC con este ajuste USE habilitado, se puede instalar el paquete {{Package|dev-java/icedtea}}:

{{Emerge|dev-java/icedtea}}

=== Instalando maquinas virtuales con descarga restringida ===

Algunos JDKs y JREs necesitan unos pasos adicionales para realizar sus configuraciones. Hacer emerge de los paquetes tal y como se realiza normalmente. Si son necesarios pasos adicionales, los ebuilds ofrecerán instrucciones para los usuarios acerca de dónde ir y qué descargar.

Descargar el archivo o archivos indicados en {{Path|/usr/portage/distfiles}}. Una vez los archivos están en el lugar indicado, lanzar de nuevo la orden {{c|emerge}}. En este punto la instalación de JRE/JDK se iniciará.

=== Configurar un JRE sin monitor ni teclado === 

A veces no hay necesidad de un JRE completo con todas las capacidades (capabilities) de java. Usar java en un servidor no suele requerir ninguna GUI ni ninguna característica gráfica, de sonido o incluso de impresión. Para instalar un JRE simplificad (a veces descrito como sin interfaz), se necesita cambiar algunos ajustes USE para el tipo de JRE seleccionado.

{{FileBox|filename=/etc/portage/package.use|title=Cambios necesarios en los ajustes USE|1=
dev-java/icedtea headless-awt -alsa -cups
dev-java/icedtea-bin headless-awt -alsa -cups
dev-java/oracle-jre-bin headless-awt -alsa -cups
}}

Dependiendo del perfil de Gentoo actual, este podría ser el caso. Como es habitual, se pueden comprobar los ajustes USE que se aplican a un determinado paquete lanzado {{c|emerge}} en el modo pretensión:

{{Cmd|emerge --pretend --verbose virtual/jre}}

== Configurar la máquina virtual de Java ==

=== Visión general ===

Gentoo posee la habilidad de instalar multiples JDKs y JREs sin causar conflictos. 

Utilizando la herramienta {{c|java-config}} es posible establecer una configuración para todo el sistema (requiere acceso como root). Los usuarios normales tambien pueden utilizar {{c|java-config}} para establecer su propia preferencia. 

{{Note|Es posible tambien utilizar {{c|eselect}} para cambiar la máquina virtual del sistema y del usuario. Lea {{c|eselect java-vm help}}.}}

=== Estableciendo una maquina virtual por defecto ===

Al lanzar la orden {{c|java-config --list-available-vms}} se mostrará una lista de los JREs y JDKs instalados en el sistema. A continuación se muestra un ejemplo de esta salida: 

{{RootCmd|java-config --list-available-vms|output=<pre>
The following VMs are available for generation-2:
1&41;      IcedTea JDK 7.2.6.3 [icedtea-7]
*&41;      IcedTea JDK 3.0.1 [icedtea-8]
</pre>
}}

{{Note| Las maquinas virtuales marcadas como 'Build Only' pueden contener vulnerabilidades o estar en el final de su ciclo de vida (EOL). Gentoo recomienda no definir estas VMs como las del sistema o las del usuario. Por favor, leer la sección sobre [[Java/es#Maquina_virtual_marcada_como_Build_Only|máquina marcada como Build Only]] para obtener más información.}}

El "*" indica cual es la JVM activa (system-vm o user-vm cuando ha sido configurada). El nombre dentro de las llaves  (''[]'') es el identificador de la maquina virtual en particular. Se puede utilzar el ID o el número en {{c|java-config --set-system-vm}} para definir la máquina virtual. El siguiente texto ofrece un ejemplo de cómo establecer la maquina virtual para todo el sistema.

Estableciendo la maquina virtual manualmente (modo preferido):

{{RootCmd|java-config --set-system-vm icedtea-7|output=<pre>
Now using icedtea-7 as your generation-2 system JVM
</pre>}}

Método alternativo: seleccionar la máquina virtual por número:

{{RootCmd|java-config --set-system-vm 3|output=<pre>
Now using icedtea-7 as your generation-2 system JVM
</pre>
}}

Como usuario normal, utilizar java-config <code>--set-user-vm</code>. 

{{Note|Normalmente no se necesita hacer {{c|source}} del perfil para las sesiones ya existentes del intérprete de órdenes cuando se cambia de usuario o de máquina virtual del sistema. La única excepción es que las variables como <var>JAVA_HOME</var> todavía apuntarán a la localización anterior después de ajustar por primera vez una máquina virtual de usuario o volver a la máquina virtual del sistema.}}

=== Maquina virtual marcada como Build Only ===

Algunas maquinas virtuales están marcadas como build-only ya sea por estar en el fin de su ciclo de vida de soporte y/o por contener vulnerabilidades de seguridad. Estas máquinas virtuales no serán utilizadas automáticamente por Gentoo para aquellas aplicaciones en ejecución utilizando los lanzadores de Gentoo  (El guión run-java-tool se diseñó para cambiar entre MVs), sin embargo seguirán disponibles para los entornos de compilación de Gentoo ya que algunos paquetes pueden necesitarlas para ser compiladas. No se recomienda configurar estas maquinas virtuales tanto para usuario como para el sistema ya que en este caso se utilizarán al lanzar los ejecutables {{Path|/usr/bin/{java,javac,..}}} y también serán utilizadas por cualquier otro paquete que no utilice los lanzadores de Gentoo.

== Estableciendo un CLASSPATH por defecto ==

{{Warning/es|Las opciones explicadas en esta sección debe ser consideradas como obsoletas y es probable que sean removidas en el futuro. Se recomienda encarecidamente evitarlas ya que cada proyecto o aplicación Java debe administrar sus propias rutas a las clases (classpaths). Cuando se decida especificar un valor por defecto <var>CLASSPATH</var> por defecto, algunas aplicaciones podrían comportarse de forma inesperada a causa de código no esperado en la ruta a las clases.}}

{{c|java-config}} también puede ser utilizado para establecer un <var>CLASSPATH</var> por defecto para todo el sistema, así como para especificar un <var>CLASSPATH</var> especifico para un usuario. 

Primero, deben listarse todas las bibliotecas Java instaladas en el sistema para posiblemente incluirlas en la variable <var>CLASSPATH</var>. Se muestra un ejemplo de la salida: 

{{RootCmd|java-config --list-available-packages|output=<pre>
[xerces-2] The next generation of high performance, fully compliant XML parsers in the Apache Xerces family (/usr/share/xerces-2/package.env)
[junit] Simple framework to write repeatable tests (/usr/share/junit/package.env)
[bsh] BeanShell: A small embeddable Java source interpreter (/usr/share/bsh/package.env)
[bcel] The Byte Code Engineering Library: analyze, create, manipulate Java class files (/usr/share/bcel/package.env)
[log4j] A low-overhead robust logging package for Java (/usr/share/log4j/package.env)
...
</pre>
}}

Los nombres dentro de las llaves ([]) son los identificadores que se deben pasar a {{c|java-config --set-system-classpath}}. Acá un ejemplo: 


{{RootCmd|java-config --set-system-classpath log4j,xerces-2}}

{{Note|El directorio actual ({{Path|.}}) no sera parte del classpath del sistema, ya que el mismo debe ser agregado al perfil de inicio de sesión del sistema.}}

Actualizar el entorno reiniciando la sesión o tecleando {{c|source {{Path|/etc/profile}}}}

Para los usuarios, java-config --set-user-classpath creará {{Path|~/.gentoo/java-env-classpath}}, que se podría lanzar desde perfile del intérprete de órdenes. 

{{CodeBox|title=Lanzar un classpath especifico del usuario|1=
if [[ -f "${HOME}/.gentoo/java-env-classpath" ]]; then
       source ${HOME}/.gentoo/java-env-classpath
fi
}}

Si desea un classpath para todo el sistema o por defecto para el usuario agregue algo como lo siguiente al perfil del intérprete de órdenes. No se recomienda lo siguiente: 

{{RootCmd|export CLASSPATH{{=}}"${CLASSPATH}:$(java-config --classpath log4j,xerces-2)"}}

== Complementos Java para el Navegador Web ==

El plugin Java para el navegador Web se solía gestionar a través de {{c|eselect java-nsplugin}}. Esto se ha eliminado en favor de una experiencia más sencilla y preparada para ser utilizada. Para un uso básico, simplemente haga emerge de la JVM elegida con el ajuste USE <code>nsplugin</code> habilitado. Observe que el plugin de Oracle únicamente está disponible para {{Keyword|amd64}} y {{Keyword|x86}}.

También tenga en cuenta que los navegadores Web basados en el proyecto Chromium ya no ofrecen soporte para plugins basadas en NPAPI debido a que se eliminó el código en septiembre de 2015. La lista de navegadores soportados está mermando pero aún incluye Firefox desde la versión 46.

Para más información, incluyendo la selección de JVM, Web Start y multilibrería, leer [https://gitweb.gentoo.org/repo/gentoo.git/plain/dev-java/icedtea-web/files/README.gentoo-r1 el fichero README instalado con icedtea-web].

== Ajustes USE para su uso con Java ==

=== Establecer los ajustes USE ===

Para más información en relación a los [[USE flag|ajustes USE]], consultar el capítulo correspondiente del  [[Handbook:X86/Working/USE/es|manual de Gentoo]].

=== Ajustes USE ===

* El ajuste [https://packages.gentoo.org/useflags/java <code>java</code>] añade soporte para Java en algunos programas
* El ajuste [https://packages.gentoo.org/useflags/nsplugin <code>nsplugin</code>] añade soporte para los navegadores de Mozilla (incluyendo Firefox). Esto es necesario para ver applets de Java en un navegador tipo Mozilla
* El ajuste [https://packages.gentoo.org/useflags/jce <code>jce</code>] añade soporte para el motor criptográfico de Java

Following USE flags go in [[Gentoo_Java_USE_flags|JAVA_PKG_IUSE]].
* The [https://packages.gentoo.org/useflags/source <code>source</code>] flag installs a zip of the source code of a package. This is traditionally used for IDEs to 'attach' source to the libraries that are being use;
* For Java packages, the [https://packages.gentoo.org/useflags/doc <code>doc</code>] flag will build API documentation using javadoc.

== Ver también ==

* [[Java Developer Guide]]
* [[Project:Java/Why_build_from_source]]
* [[Project:Java/Getting_Involved]]

== Recursos externos ==

* Los archivos de las listas de correo [http://news.gmane.org/gmane.linux.gentoo.java gentoo-java], [http://news.gmane.org/gmane.linux.gentoo.user gentoo-user] y [http://news.gmane.org/gmane.linux.gentoo.devel gentoo-dev]
* {{IRC|gentoo}} y {{IRC|gentoo-java}} en IRC
* [https://forums.gentoo.org/viewtopic-t-901036.html Java 7 and bootstrapping icedtea] en los foros de Gentoo

Se puede encontrar más información fuera de línea:

* {{c|man java-config}}
* {{c|java-config --help}}

Para aportar sugerencias o realizar preguntas acerca de este documento, por favor envíe un mensaje de correo electrónico al equipo Java de Gentoo: {{Mail|java@gentoo.org}}

[[Category:Programming_language]]

{{Migrated|originalauthors=Joshua Nichols, Karl Trygve Kalleberg, Joshua Saddler}}
