<languages />
{{InfoBox stack
|{{InfoBox wikipedia|Java_(programming_language)|header=true}}
|{{InfoBox gdoc|Java}}
}}
{{Metadata|abstract=This guide introduces the reader to Java and explains how to use Java with Gentoo Linux.}}
This guide introduces the reader to Java and explains how to use Java with Gentoo Linux.

== ¿Que es Java? ==

=== Visión general ===

Java es un lenguaje de programación desarrollado por ingenieros de Sun Microsystems. El lenguaje es totalmente orientado a objetos y diseñado para ser ejecutado en múltiples plataformas sin la necesidad de recompilar el código para cada una de ellas. Aunque Java puede ser compilado como un lenguaje nativo, mucha de la popularidad de Java se atribuye a su portabilidad, junto con otras características como recolección de basura. Para hacer posible esta independencia de plataforma, el compilador de Java compila el codigo Java hacia una representación intermedia denominada "Java bytecode" que es ejecutado en un JRE (Java Runtime Environment) y no directamente sobre el sistema operativo. 

Para ejecutar Java bytecode, es necesario tener un entorno JRE (Java Runtime Environment) instalado. Un JRE proporciona bibliotecas centrales, una maquina virtual de Java dependiente de plataforma, y extensiones para navegadores web entre otras cosas. Por otro lado un JDK (Java Development Kit) agrega herramientas de programación, tales como compilador de bytecode y un depurador de codigo. 

== Instalando una máquina virtual ==

=== Opciones ===

Gentoo proporciona una variedad de entornos de ejecución de Java (JREs) y kits de desarrollo Java (JDKs). Las opciones actuales incluyen: 

{| class="table table-condensed table-stripe" style="text-align: left;" 
|- 
! Vendor
! JDK
! JRE
|- 
| Open Java SE de IcedTea (anteriormente icedtea6-bin)
| {{Package|dev-java/icedtea-bin}} y {{Package|dev-java/icedtea-bin}} 
| 
|- 
| Java 7 SE de Oracle
| {{Package|dev-java/oracle-jdk-bin}}
| {{Package|dev-java/oracle-jre-bin}}
|- 
| Java SE de IBM
| {{Package|dev-java/ibm-jdk-bin}}
| {{Package|dev-java/ibm-jre-bin}}
|-
|}

=== Instalar un JRE/JDK ===

To install the profile's default '''JDK''' run:

{{Emerge|virtual/jdk}}

Para instalar el perfil '''JRE''' por defecto lanzar:

{{Emerge|virtual/jre}}

Some JDKs and JREs, including the Oracle packages, require accepting an End User License Agreement, or EULA. If its license (such as dlj-1.1) is not listed in the <var>ACCEPT_LICENSE</var> variable (found in {{Path|/etc/portage/make.conf}}), then the JDK/JRE will be unable to be installed. For more information on how to add acceptable licenses to {{Path|make.conf}} read the [[Handbook:X86/Working/Portage#Licenses|Licenses chapter]] of the Portage Handbook. 

Para evitar cualquier restricción de licencias, considérese instalar icedtea-bin, el cual es una implementación abierta de Java del proyecto OpenJDK. 

{{Note|Tenga en cuenta que cada ''JDK'' incluye un ''JRE''. Por tanto no es necesario instalar un JRE si se ha hecho emerge de un JDK.}}

=== Instalando maquinas virtuales con descarga restringida ===

Algunos JDKs y JREs necesitan unos pasos adicionales para realizar sus configuraciones. Hacer emerge de los paquetes tal y como se realiza normalmente. Si son necesarios pasos adicionales, los ebuilds ofrecerán instrucciones para los usuarios acerca de dónde ir y qué descargar.

Download the indicated file(s) into {{Path|/usr/portage/distfiles}} Once the files are in the right directories, rerun the {{c|emerge}} command, at which point the JRE/JDK will be begin to install.

=== Configurar un JRE sin monitor ni teclado === 

Sometimes there is no need for a full JRE with all the capabilities of java. Using java on a server often does not require any GUI, graphical, sound or even printer related features. To install a simplified (sometimes also referred to as headless) JRE, a few USE flags need to be changed. 

{{FileBox|filename=/etc/portage/package.use|title=Cambios necesarios en los ajustes USE|1=
virtual/jre headless-awt -alsa -cups
}}

Depending on the current Gentoo profile, this might already be the case. As usual, the USE flag settings that are applicable to a particular package can be checked by running {{c|emerge}} in pretend mode:

{{Cmd|emerge --pretend --verbose virtual/jre}}

== Configurar la máquina virtual de Java ==

=== Visión general ===

Gentoo posee la habilidad de instalar multiples JDKs y JREs sin causar conflictos. 

Using the {{c|java-config}} tool with root privileges, a system-wide default java virtual machine (VM) can be set. Users can also use java-config to custom set their personal VM on a user-by-user basis. 

{{Note|{{c|eselect}} can also be used to change the system and user VM. See {{c|eselect java-vm help}}.}}

=== Estableciendo una maquina virtual por defecto ===

Running the {{c|java-config}} command with the <code>--list-available-vms</code> option will output a list of all JREs and JDKs installed on the system. Here is an example of the output: 

{{RootCmd|java-config --list-available-vms|output=<pre>
The following VMs are available for generation-2:
1)      IcedTea JDK 7.2.6.3 [icedtea-7]
*)      IcedTea JDK 3.0.1 [icedtea-8]
</pre>
}}

{{Note| Las maquinas virtuales marcadas como 'Build Only' pueden contener vulnerabilidades o estar en el final de su ciclo de vida (EOL). Gentoo recomienda no definir estas VMs como las del sistema o las del usuario. Por favor, leer la sección sobre [[Java/es#Maquina_virtual_marcada_como_Build_Only|máquina marcada como Build Only]] para obtener más información.}}

The ''*'' indicates this is the current active JVM (system-vm or user-vm when set). The name in the brackets ([]) is the handle or ID for that particular VM. The handle or the number to {{c|java-config --set-system-vm}} can be used to set the VM. The following text provides an example of how to set the system VM.

Estableciendo la maquina virtual manualmente (modo preferido):

{{RootCmd|java-config --set-system-vm sun-jdk-1.6|output=<pre> Now using sun-jdk-1.6 as your generation-2 system JVM </pre>}}

Método alternativo: seleccionar la máquina virtual por número:

{{RootCmd|java-config --set-system-vm 3|output=<pre>
Now using icedtea-7 as your generation-2 system JVM
</pre>
}}

Como usuario normal, utilizar java-config <code>--set-user-vm</code>. 

{{Note|{{c|source}}-ing the profile for existing shell sessions is not usually needed when changing the user or system VM. The only exception is that variables such as <var>JAVA_HOME</var> will still point to the old location after setting a user VM for the first time or revert back to the system VM.}}

=== Build only VM ===

Some virtual machines are flagged as build-only due to being EOL and/or containing security vulnerabilities. These virtual machines will not automatically be used by Gentoo for the running of applications using Gentoo launchers (run-java-tool script designed for switching VMs), but will still be available for use by Gentoo's build environment as some packages may require them for building. The setting of these virtual machines as either the system or user VM is strongly discouraged as these VMs will then be used when running the {{Path|/usr/bin/{java,javac,..}}} executables, as well as used by any packages not using Gentoo's launcher scripts.

== Estableciendo un CLASSPATH por defecto ==

{{Warning|The options explained in this section should be considered deprecated and will most likely be removed in the future. It is strongly recommended against using these, because Java projects or applications should ideally manage their own classpaths. When choosing to specify a default <var>CLASSPATH</var>, some applications may behave unexpectedly, because classes they were not expecting to be on the classpath.}}

{{c|java-config}} can also be used to set a system-wide default <var>CLASSPATH</var>, as well a user-specific default <var>CLASSPATH</var>. 

First, list available Java libraries installed on the system to possibly put in the <var>CLASSPATH</var> variable. Here is an example of output: 

{{RootCmd|java-config --list-available-packages|output=<pre>
[xerces-2] The next generation of high performance, fully compliant XML parsers in the Apache Xerces family (/usr/share/xerces-2/package.env)
[junit] Simple framework to write repeatable tests (/usr/share/junit/package.env)
[bsh] BeanShell: A small embeddable Java source interpreter (/usr/share/bsh/package.env)
[bcel] The Byte Code Engineering Library: analyze, create, manipulate Java class files (/usr/share/bcel/package.env)
[log4j] A low-overhead robust logging package for Java (/usr/share/log4j/package.env)
...
</pre>
}}

Again, the names in brackets ([]) are the IDs to pass to {{c|java-config --set-system-classpath}}. Here is an example: 


{{RootCmd|java-config --set-system-classpath log4j,xerces-2}}

{{Note|El directorio actual ({{Path|.}}) no sera parte del classpath del sistema, ya que el mismo debe ser agregado al perfil de inicio de sesión del sistema.}}

Update the environment by logging out, then in again or by typing {{c|source {{Path|/etc/profile}}}} 

For users, java-config --set-user-classpath will create {{Path|~/.gentoo/java-env-classpath}}, which should then source from the shell's profile. 

{{CodeBox|title=Sourcing user specific classpath|1=
if [[ -f "${HOME}/.gentoo/java-env-classpath" ]]; then
       source ${HOME}/.gentoo/java-env-classpath
fi
}}

If desiring a system wide or user default classpath add something like the following to the shell's profile. This is advised against: 

{{RootCmd|export CLASSPATH{{=}}"${CLASSPATH}:$(java-config --classpath log4j,xerces-2)"}}

== Java browser plugins ==

The Java browser plugin used to be managed via {{c|eselect java-nsplugin}}. This has now been removed in favor of a simpler out-of-the-box experience. For basic usage, simply emerge the chosen JVM with the <code>nsplugin</code> USE flag enabled. Note that Oracle's plugin is only available for {{Keyword|amd64}} and {{Keyword|x86}}.

Also note that Chromium-based browsers no longer support NPAPI-based plugins since the code was removed in September 2015. The list of supporting browsers is shrinking but still includes Firefox as of version 46.

For more information, including JVM selection, Web Start, and multilib, see [https://gitweb.gentoo.org/repo/gentoo.git/plain/dev-java/icedtea-web/files/README.gentoo-r1 the README installed with icedtea-web].

== Ajustes USE para su uso con Java ==

=== Establecer los ajustes USE ===

For more information regarding [[USE flag]]s, refer to the USE flags chapter from the [[Handbook:X86/Working/USE|Gentoo Handbook]].

=== USE flags ===

* The [https://packages.gentoo.org/useflags/java <code>java</code>] flag adds support for Java in a variety of programs;
* The [https://packages.gentoo.org/useflags/nsplugin <code>nsplugin</code>] flag adds support for Mozilla-like browsers (including Firefox). This is needed for viewing Java applets in a Mozilla-like browser;
* The [https://packages.gentoo.org/useflags/jce <code>jce</code>] flag adds support for the Java Cryptography Engine;

Following USE flags go in [[Gentoo_Java_USE_flags|JAVA_PKG_IUSE]].
* The [https://packages.gentoo.org/useflags/source <code>source</code>] flag installs a zip of the source code of a package. This is traditionally used for IDEs to 'attach' source to the libraries that are being use;
* For Java packages, the [https://packages.gentoo.org/useflags/doc <code>doc</code>] flag will build API documentation using javadoc.

== Ver también ==

* The [[Project:Java/User_Guide|Java User Guide]] in the Java project

== Recursos externos ==

* The [http://news.gmane.org/gmane.linux.gentoo.java gentoo-java], [http://news.gmane.org/gmane.linux.gentoo.user gentoo-user], and [http://news.gmane.org/gmane.linux.gentoo.devel gentoo-dev] mailing list archives
* {{IRC|gentoo}} and {{IRC|gentoo-java}} on IRC
* [https://forums.gentoo.org/viewtopic-t-901036.html Java 7 and bootstrapping icedtea] on the Gentoo forums

More information can be found offline:

* {{c|man java-config}}
* {{c|java-config --help}}

Para aportar sugerencias o realizar preguntas acerca de este documento, por favor envíe un mensaje de correo electrónico al equipo Java de Gentoo: {{Mail|java@gentoo.org}}

[[Category:Programming_language]]

{{Migrated|originalauthors=Joshua Nichols, Karl Trygve Kalleberg, Joshua Saddler}}
