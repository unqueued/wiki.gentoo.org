<languages />


{{Metadata|abstract=本指南对Xfce进行了广泛的介绍。Xfce是一个快捷的、轻量级的，功能齐全的桌面环境。}}

本指南对Xfce进行了广泛的介绍。Xfce是一个快捷的、轻量级的，功能齐全的桌面环境。

=== 介绍 ===

=== Xfce桌面环境 ===

[http://www.xfce.org Xfce] 是类Unix操作系统上的一个快捷、轻量级的桌面环境。它是为生产力而设计的，并且具备很好的可配置性，同时还符合 [http://www.freedesktop.org Freedesktop]的规范。 

不像[http://www.gnome.org Gnome]和[http://www.kde.org KDE]等这些重量级的桌面环境，Xfce占用的系统资源要少得多。另外，它拥有更好的模块性和更少的依赖性；它将占用你更少的磁盘空间和更少的安装时间。 

这篇指南将不仅向你说明如何安装和配置一个最小化的Xfce环境，并且还将探索一些可用方案来创建一个功能齐全的桌面环境，保持与Xfce设计思想的一致：轻巧，快速和模块化。 

这篇指南的最后的部分列出了一些在升级到新的Xfce版本后需要运行的命令，如果你正在从旧版本升级，请务必遵循。 

== 安装Xfce ==

=== 基础 ===

首先，确定你已经按照[https://wiki.gentoo.org/wiki/Xorg/Configuration X服务器配置指南]一文所说的配置好了Xorg。 

接着，请反复检查{{Path|/etc/make.conf}}文件里的USE标记；你可能至少想要<code>USE="-gnome -kde -minimal -qt4 dbus jpeg lock session startup-notification thunar udev X"</xcode>。 

现在你已经在{{Path|/etc/portage/make.conf}}设置好了你的<code>USE</code>标记，是时候安装Xfce了。 

{{Emerge|xfce4-meta}}

然后，把你系统上的一般用户（们）加到<code>cdrom</code>，<code>cdrw</code>和<code>usb</code>组里，这样他/她们便能挂载和使用照相机、光驱和U盘等之类的设备。 

{{RootCmd|for x in cdrom cdrw usb ; do gpasswd -a username $x ; done}}

接着，更新你的环境变量： 

{{RootCmd|env-update && source /etc/profile}}

你还需要一个图形终端以继续你的桌面环境配置工作。<code>x11-terms/xfce4-terminal</code>是一个很好的选择，因为它是为Xfce定制的。使用如下命令安装终端： 

{{Emerge|x11-terms/xfce4-terminal}}

== 配置Xfce ==

=== 启动Xfce ===

现在Xfce已经安装完毕，接着我们将把它设置成我们默认的桌面环境，一旦我们执行<code>startx</code>便可进入。将你的root用户退出然后以普通用户的身份登录。 

{{Cmd|echo "exec startxfce4" > ~/.xinitrc}}

{{Note/zh-cn|如果你安装了ConsoleKit，你的{{Path|~/.xinitrc}}则应该包含<code>exec startxfce4 --with-ck-launch</code>。否则，某些应用程序将不能运行。你也需要把consolekit加入default运行级别。用root执行这个命令<code>rc-update add consolekit default</code>。}}

现在敲入<code>startx</code>来启动你的图形环境： 

{{Cmd|startx}}

恭喜！欢迎进入你新的Xfce桌面环境。继续看下去，再深入探索一点。接下去的部分将教你如何根据自己的要求来配置Xfce。 

=== Sessions & startup ===

如果你已经（或者打算）安装一些流行的Gnome或KDE软件，比如<code>k3b</code>、<code>nautilus</code>、<code>kmail</code>、<code>evolution</code>等等，那么你要确定Xfce在启动时为这些程序启动了相应的服务。依次点击Menu --> Settings --> Sessions & Startup。在"Advanced"标签里面，选择相应的复选框。这样可能会稍微增加Xfce启动的时间，但是会减少加载KDE和Gnome应用程序的时间。 

Xfce能够保存你每次会话所做设置和运行的程序，这根据你在Sessions & Startup菜单的"General"标签页的设置而定。当你退出登录时，既可以让Xfce自动保存也可以让Xfce每次都提示你是否要保存。当你想撤销错误的设置时这项功能尤其有用。意外关闭了面板该怎么办？只要在被问到是否要保存当前会话时选择否，那么下次你启动Xfce时，你原来的桌面就又回来了。想要在下次登录时自动加载你打开的浏览器、终端和邮件客户端吗？只要在退出时保存你的会话。 

你现在已经安装并配置了一个基本的工作环境。但如果你还有兴趣动手做更多的事情，请接着看下去！ 

== 附加的应用程序 ==

=== 面板插件 ===

在这一小节里面，我们将讨论一些在Xfce里面每天都会用到的有用插件和应用软件。 

Portage里面已经有许多可用的面板插件了；你用<code>emerge --search xfce</code>自己看看。尽管这些插件的名字中大部分都是带有自我解释含义的，但是有一些插件还是值得引起我们注意的，因为它们非常有用。要使用它们，只要简单的<code>emerge</code>它们。当你右击面板时便能看到它们已经被加到“Add New Item”菜单里的“Available Items”列表里面。 

* <code>xfce4-battery-plugin</code>对于笔记本用户来说，是非常完美的。它可以显示电池的使用率、剩余时间、电源（交流电还是电池）、风扇状态、警告，甚至可以被配置在一定的电能水平下执行命令。当电池快耗尽时，这个功能可以让笔记本进入休眠状态。
* <code>xfce4-verve-plugin</code>是嵌在面板上的一个小命令行。当你想运行一条命令时，用它会比另外打开一个终端还快。
* <code>xfce4-mount-plugin</code>让你可以通过点击鼠标，便能方便地获得{{Path|/etc/fstab}}中已挂载的设备的列表。
* <code>xfce4-sensors-plugin</code>让你监视你的硬件感应器，比如CPU温度、风扇转速、硬盘温度、主板电压等等。

=== 有用的程序 ===

现在我们应该<code>emerge</code>一些有用的应用程序和工具：<code>xfce4-mixer</code>、<code>xfce4-taskmanager</code> 、<code>xfwm4-themes</code> 、<code>orage</code> 、<code>mousepad</code>、<code>xfce4-power-manager</code> 、<code>x11-terms/xfce4-terminal</code>和 <code>thunar</code> 。 

<code>xfce4-mixer</code>是你的声卡的音量控制器。它也可以以面板applet的形式运行，让你可以快速的打开音量控制器。<code>xfce4-taskmanager</code>能列出所有正在运行的进程，以及每个进程的CPU和内存使用量。通过右键点击，你可以杀掉一个有问题的进程，暂停并重起它，甚至改变它的运行优先级，以使你可以调节这个进程对于系统资源的需求量。 

<code>xfwm4-themes</code>增加了几个窗口管理主题。你可以增加一个更全面的图标主题比如<code>tango-icon-theme</code>来装扮你的桌面。 

<code>orage</code> is a simple, handy calendar.<code>mousepad</code> is a barebones text editor that starts up extremely quickly. 

<code>xfce4-power-manager</code> is an application to monitor and manage power usage. This is especially important for laptops! The power manager allows you to adjust screen brightness, choose maximum performance or battery-saving modes, and setup hibernate, suspend, and shutdown actions when the lid is shut or buttons are pressed. You can set[http://goodies.xfce.org/projects/applications/xfce4-power-manager xfce4-power-manager] to warn you when your battery reaches certain levels, or even turn off your machine. The application comes with a couple of helpful panel plugins to display battery/charging status, and a brightness control. 

<code>x11-terms/xfce4-terminal</code> is an X11 terminal emulator, far more configurable and useful than the barebones<code>xterm</code> .<code>xfce4-terminal</code> supports Unicode text, color schemes, pseudo-transparency and hardware-accelerated transparency via Xfce's built-in compositor, all out-of-the-box. Just make sure that the default action on the terminal launcher of your panel runs {{Path|/usr/bin/Terminal}} instead of {{Path|xterm}} . Right-click the launcher and choose "Properties" to change the command. 

<code>thunar</code> is Xfce's default graphical file manager. It's fast yet quite powerful, can support several plugins for even more functionality; just install them with<code>emerge</code> . Let's take a look: 

*  <code>thunar-archive-plugin</code> lets you create and extract archive files using the right-click menu. It provides a handy [http://goodies.xfce.org/projects/thunar-plugins/thunar-archive-plugin front-end] for graphical archiving applications such as <code>xarchiver</code> and <code>file-roller</code> .
*  <code>tumbler</code> lets you preview certain types of files from within Thunar, such as images and fonts.
*  <code>thunar-volman</code> automatically [http://goodies.xfce.org/projects/thunar-plugins/thunar-volman manages] removable media and drives.

Next, let's see about adding some useful but lightweight desktop applications, in keeping with Xfce's philosophy. 

Though <code>mousepad</code> is nice enough as a basic text editor, if you need a full-featured word processor but don't want the bloat of LibreOffice, try emerging <code>abiword</code> . [http://www.abisource.com AbiWord] is lighter, faster, and is completely interoperable with industry-standard document types. 

Need a nice email client/newsreader that isn't as demanding as <code>thunderbird</code> or <code>evolution</code> ? Try emerging <code>claws-mail</code> . 

For your internet chat needs, <code>irssi</code> is an excellent, tiny, incredibly configurable IRC client that runs in your terminal. If you prefer a compact all-in-one client that handles nearly all chat protocols, you may want to <code>emerge pidgin</code> . 

If you need movie and music players, look no further than <code>mplayer</code> and [http://www.gentoo.org//proj/en/desktop/sound/decibel.xml decibel-audio-player] . They can play most every media format available quite nicely. 

Finally, you'll need a webbrowser. Nearly all graphical webbrowsers require more resources than most of your other desktop applications. Still, <code>firefox</code> and <code>midori</code> are always good choices. Alternatively, you may find <code>opera</code> to be quite fast. However, <code>opera</code> is not available on as many processor architectures as <code>firefox</code> , and it has more dependencies unless you override them with a few USE flags. 

{{Emerge|firefox}}

{{Emerge|midori}}

{{RootCmd|echo "www-client/opera gtk -kde" >> /etc/portage/package.use}}

{{Emerge|opera}}

Now that we've explored some good suggestions for rounding out your desktop applications, let's see what else we can do to enhance your Xfce experience. 

=== Graphical login ===

Remember when we added <code>startxfce4</code> to our {{Path|~/.xinitrc}} ? All you have to do to get into your desktop is type <code>startx</code> after logging in. This is fine if you prefer a completely text-based boot and login, but let's use a display manager that will automatically start Xfce after booting (so that you can login graphically). 

First, let's make sure Xfce loads at boot: 

{{RootCmd|rc-update add xdm default}}

We aren't quite finished yet. We have to pick a display manager and set the appropriate variable. Though there are a few choices available in Portage, for this guide, we'll stick with [http://slim.berlios.de SLiM] , the Simple Login Manager. 

<code>slim</code> is speedy and lightweight, with minimal dependencies. Perfect for Xfce! 

{{Emerge|x11-misc/slim}}

{{Note|The <code>branding</code> USE flag will pull in the <code>slim-themes</code> package, which will give you an assortment of login themes, including a Gentoo Linux theme.}}

Then edit the DISPLAYMANAGER variable in {{Path|/etc/conf.d/xdm}} : 

{{File|/etc/conf.d/xdm||<pre>
DISPLAYMANAGER="slim"
</pre>
}}

SLiM can automatically start your Xfce session if you add <code>XSESSION="Xfce4"</code> to {{Path|/etc/env.d/90xsession}} : 

{{RootCmd|echo XSESSION{{=}}\"Xfce4\" > /etc/env.d/90xsession
|env-update && source /etc/profile}}

=== Beautifying your desktop ===

A little customization of your desktop's appearance can go a long way. Xfce has all the options you'd expect from a modern desktop environment, font antialiasing settings, color schemes, dozens of window decorations, themes, and more. If these aren't enough, it's easy to install third-party themes, icon sets, mouse cursor themes, and wallpapers. 

A selection of nice Gentoo wallpapers in a variety of resolutions are hosted on the [http://www.gentoo.org//main/en/graphics.xml Gentoo website] . If you're looking for icon sets and complete Xfce themes, [http://www.xfce-look.org/ Xfce-Look] has a huge collection. The important thing to remember about any third-party eyecandy you download is that it will usually first need to be unpacked and then installed to the proper directory. Icon sets go in {{Path|/usr/share/icons/}} , and themes go to {{Path|/usr/share/themes/}} ; use these directories when you want all users to be able to access themes and icon sets. Individual users can install themes and icon sets to {{Path|~/.themes/}} and {{Path|~/.icons/}} . 

If you installed SLiM as your display manager, there are lots of themes in the <code>slim-themes</code> package available in Portage. Also, be sure to check the SLiM [http://slim.berlios.de/themes01.php themes page] for more themes. Creating your own SLiM theme is fairly easy; just read the [http://slim.berlios.de/themes_howto.php Themes HowTo] . Gentoo also ships a <code>slim-themes</code> package that you can <code>emerge</code> . 

Finally, Xfce has its own built-in compositor to manage window transparency. This option can be found in Menu --> Settings --> Window Manager. For best performance, you will need to be running a graphics card with drivers that support hardware-accelerated rendering. Make sure you emerged <code>xfwm4</code> with the <code>xcomposite</code> USE flag. Next, you will need to enable compositing in {{Path|/etc/X11/xorg.conf}} by adding the following section: 

{{File|xorg.conf|Enabling composite|<pre>
Section "Extensions"
    Option  "Composite"  "Enable"
EndSection
</pre>
}}

This is the bare minimum configuration required for Xfce and Xorg-X11. However, setting up hardware-accelerated rendering depends on your individual graphics card, and is beyond the scope of this guide. Please see the other guides in the [http://www.gentoo.org//doc/en/index.xml?catid=desktop Desktop Documentation Resources] list to learn about configuring hardware-accelerated rendering for your graphics card. 

Once you've finished setting up a beautiful Xfce desktop, the next thing to do is take a picture of it to share with other folks! Just install <code>xfce4-screenshooter</code> and post your pictures somewhere for all to admire. 

== Summary ==

Congratulations on making it this far! You've installed and configured a speedy desktop environment with a solid suite of applications for your computing needs. 

=== Upgrading Xfce ===

If you're upgrading Xfce from earlier major versions (4.x), then you will need to remove your old cached sessions and profiles as they are incompatible with new releases. For each of your users, run the following commands to remove your old incompatible cached sessions and profile: 

{{RootCmd|rm -r ~/.cache/sessions
|rm -r ~/.config/xfce*
|rm -r ~/.config/Thunar}}

Users will be greeted with a new and shiny interface, but will lose many of their individual settings. Sadly, no migration of configuration(s) exist that we know of. 

=== Resources ===

Need additional help on configuring and using Xfce? Need more lightweight application suggestions? Try checking out: 

* [http://forums.gentoo.org The Gentoo forums]
* #xfce on irc.freenode.net
* The installed help files and other documentation provided by Xfce: {{Path|/usr/share/xfce4/doc/C/index.html}} . Just point your browser at it and start reading. There are even a lot of "hidden" configuration options detailed in the help files.
* [http://www.xfce.org Xfce's home page]

== Acknowledgements ==

We would like to thank the following authors and editors for their contributions to this guide:


* nightmorph
