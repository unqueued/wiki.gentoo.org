<languages />


{{Metadata|abstract=本指南对Xfce进行了广泛的介绍。Xfce是一个快捷的、轻量级的，功能齐全的桌面环境。}}

{{InfoBox stack
|{{InfoBox homepage|http://www.xfce.org|header=true}}
|{{InfoBox wikipedia|Xfce}}
|{{InfoBox irc|xfce}}
|{{InfoBox project|Xfce}}
}}

本指南对Xfce进行了广泛的介绍。Xfce是一个快捷的、轻量级的，功能齐全的桌面环境。

=== 介绍 ===

=== Xfce桌面环境 ===

[http://www.xfce.org Xfce] 是类Unix操作系统上的一个快捷、轻量级的桌面环境。它是为生产力而设计的，并且具备很好的可配置性，同时还符合 [http://www.freedesktop.org Freedesktop]的规范。 

不像 [http://www.gnome.org Gnome] 和 [http://www.kde.org KDE] 等这些重量级的桌面环境，Xfce占用的系统资源要少得多。另外，它拥有更好的模块性和更少的依赖性；它将占用你更少的磁盘空间和更少的安装时间。 

这篇指南将不仅向你说明如何安装和配置一个最小化的Xfce环境，并且还将探索一些可用方案来创建一个功能齐全的桌面环境，保持与Xfce设计思想的一致：轻巧，快速和模块化。 

这篇指南的最后的部分列出了一些在升级到新的Xfce版本后需要运行的命令，如果你正在从旧版本升级，请务必遵循。 

== 安装 ==

=== 基础 ===

首先，确定你已经按照 [[Xorg/Guide|Xorg 指南]] 一文所说的配置好了Xorg。如果没有的话那么本指南下面的步骤可能无法正常工作。

接着，请反复检查 {{Path|/etc/portage/make.conf}} 文件里的 USE 标记；多数用户需要设置下面的 USE flags：

An example for the {{Keyword|amd64}} architecture:

{{RootCmd|eselect profile list|output=<pre>
Available profile symlink targets:
  [1]   default/linux/amd64/13.0
  [2]   default/linux/amd64/13.0/selinux
  [3]   default/linux/amd64/13.0/desktop *
  [4]   default/linux/amd64/13.0/desktop/gnome
  [5]   default/linux/amd64/13.0/desktop/gnome/systemd
  [6]   default/linux/amd64/13.0/desktop/kde
  [7]   default/linux/amd64/13.0/desktop/kde/systemd
  [8]   default/linux/amd64/13.0/desktop/plasma
  [9]   default/linux/amd64/13.0/desktop/plasma/systemd
  [10]  default/linux/amd64/13.0/developer
  [11]  default/linux/amd64/13.0/no-multilib
  [12]  default/linux/amd64/13.0/systemd
  [13]  default/linux/amd64/13.0/x32
  [14]  hardened/linux/amd64
  [15]  hardened/linux/amd64/selinux
  [16]  hardened/linux/amd64/no-multilib
  [17]  hardened/linux/amd64/no-multilib/selinux
  [18]  hardened/linux/amd64/x32
  [19]  hardened/linux/musl/amd64
  [20]  hardened/linux/musl/amd64/x32
  [21]  default/linux/uclibc/amd64
  [22]  hardened/linux/uclibc/amd64 
</pre>}}

=== 安装 ===

现在你已经在 {{Path|/etc/portage/make.conf}} 设置好了你的USE标志，是时候安装 Xfce 了。 

{{Emerge|xfce-base/xfce4-meta}}

如果需要，把系统上的一般用户（们）加到<code>cdrom</code>，<code>cdrw</code> 和 <code>usb</code> 组里，这样他/她们便能挂载和使用照相机、光驱和U盘等之类的设备。

{{RootCmd|for x in cdrom cdrw usb ; do gpasswd -a username $x ; done}}

更新系统的环境变量： 

{{RootCmd|env-update && source /etc/profile}}

要在新的桌面环境下继续工作，一个图形终端是有必要的。{{Package|x11-terms/xfce4-terminal}} 是一个很好的选择，因为它是为 Xfce 定制的。使用如下命令安装终端： 

{{Emerge|x11-terms/xfce4-terminal}}

== 配置 ==

=== 启动Xfce ===

现在 Xfce 已经安装完毕，接着我们将把它设置成我们默认的桌面环境，一旦我们执行{{c|startx}}便可进入。将你的 root 用户退出然后以普通用户的身份登录。 

{{Cmd|echo "exec startxfce4" > ~/.xinitrc}}

{{Note/zh-cn|如果你安装了 ConsoleKit，你的 {{Path|~/.xinitrc}} 则应该包含 {{c|exec startxfce4 --with-ck-launch}}.。否则，某些应用程序将不能运行。你也需要把 consolekit 加入 default 运行级别。用 root 执行这个命令： {{c|rc-update add consolekit default}}。}}

现在输入{{c|startx}}来启动你的图形环境： 

{{Cmd|startx}}

恭喜！欢迎进入你新的Xfce桌面环境。继续看下去，再深入探索一点。接下去的部分将教你如何根据自己的要求来配置Xfce。 

=== 会话和启动 ===

如果你已经（或者打算）安装一些流行的 Gnome 或 KDE 软件，比如 {{c|k3b}}, {{c|nautilus}}, {{c|kmail}}, {{c|evolution}} 等等，那么你要确定 Xfce 在启动时为这些程序启动了相应的服务。依次点击 {{Path|Menu --> Settings --> Sessions & Startup}}。在 {{Path|Advanced}} 标签里面，选择相应的复选框。这样可能会稍微增加 Xfce 启动的时间，但是会减少加载 KDE 和 Gnome 应用程序的时间。 

Xfce能够保存你每次会话所做设置和运行的程序，这根据你在{{Path|Sessions & Startup}} 菜单的{{Path|General}}标签页的设置而定。当你退出登录时，既可以让Xfce自动保存也可以让Xfce每次都提示你是否要保存。当你想撤销错误的设置时这项功能尤其有用。意外关闭了面板该怎么办？只要在被问到是否要保存当前会话时选择否，那么下次你启动Xfce时，你原来的桌面就又回来了。想要在下次登录时自动加载你打开的浏览器、终端和邮件客户端吗？只要在退出时保存你的会话。 

你现在已经安装并配置了一个基本的工作环境。但如果你还有兴趣动手做更多的事情，请接着看下去！ 

== 附加的应用程序 ==

每个用户应考虑安装以下有用的应用程序和实用程序中的一些或全部：

{{Emerge|xfce-extra/xfce4-mixer xfce-extra/xfce4-taskmanager x11-themes/xfwm4-themes app-office/orage app-editors/mousepad xfce-extra/xfce4-power-manager x11-terms/xfce4-terminal xfce-base/thunar}}

{| class="table table-condensed table-striped" style="width: auto;"
|-
! scope="col" width="25%" | Package 
! Description
|-
| {{Package|xfce-extra/xfce4-mixer}}
| 您的声卡的音量控制。 它也可以作为面板小程序运行，让您快速访问播放音量。
|-
| {{Package|xfce-extra/xfce4-taskmanager}}
| 显示所有正在运行的程序的列表，以及每个程序占用的CPU和内存消耗。 通过右键单击项目，您可以杀死运行异常的应用程序，暂停和重新启动它，甚至更改其运行时优先级，这可以调整其对系统资源的需求量。
|-
| {{Package|x11-themes/xfwm4-themes}}
| 添加几个窗口管理器主题。 您可能想要添加更全面的图标主题，例如 {{Package|x11-themes/tango-icon-theme}}只是为了整理您的桌面。 
|-
| {{Package|app-office/orage}}
| 一个简单，方便的日历。
|-
| {{Package|app-editors/mousepad}}
| 是一个简单的文本编辑器，启动非常快。
|-
| {{Package|xfce-extra/xfce4-power-manager}}
| 监视和管理电源使用情况的应用程序。 这对笔记本电脑特别重要！ 电源管理器允许用户调节屏幕亮度，选择最大性能或节电模式，并在盖子关闭或按下按钮时设置休眠，暂停和关闭操作。[http://goodies.xfce.org/projects/applications/xfce4-power-manager xfce4-power-manager] 可设置为在电池达到一定水平时提供警告，甚至关闭机器。 该应用程序配有一些有用的面板插件来显示电池/充电状态，以及亮度控制。
|-
| {{Package|x11-terms/xfce4-terminal}}
| 一个X11终端，比准系统更可配置和有用 {{c|xterm}}。xfce4终端支持Unicode文本，配色方案，伪透明度和硬件加速透明度，通过Xfce的内置合成器，所有开箱即用。 只需确保在面板的终端启动器上运行默认操作 {{Path|/usr/bin/Terminal}}取代 {{c|xterm}}。 右键单击启动器并选择{{Path|Properties}}来更改命令。
|-
| {{Package|xfce-base/thunar}}
|Xfce的默认图形文件管理器。 它速度快，功能强大，可以支持多个插件，实现更多功能；使用 {{c|emerge}}进行安装。他的组件包括{{Package|xfce-extra/thunar-archive-plugin}}他允许用户使用右键单击菜单创建和提取归档文件。他提供了一个图形化的[http://goodies.xfce.org/projects/thunar-plugins/thunar-archive-plugin front-end] 包：{{c|xarchiver}} 和{{c|file-roller}}.
|-
| {{Package|xfce-extra/tumbler}}
|允许用户从Thunar内预览某些类型的文件，例如图像和字体。
|-
| {{Package|xfce-extra/thunar-volman}}
|  [http://goodies.xfce.org/projects/thunar-plugins/thunar-volman manages]自动挂载可移动介质和驱动器。
|}
 
==== Desktop applications ====

接下来，让我们看看添加一些有用但轻量级的桌面应用程序，以保持Xfce的设计理念。 

尽管 {{Package|app-editors/mousepad}} 作为一个初级的文本编辑器已经是相当好了，但如果你需要一个功能齐全的文字处理器，同时又不想要臃肿的LibreOffice，那么装上{{Package|app-office/abiword}}试试。[http://www.abisource.com AbiWord]是一个更加轻快，并且与业界标准文档类型完全互通的文字处理工具。 

需要一个好用的电子邮件客户端／新闻阅读器，但又不需要像 {{Package|mail-client/thunderbird}}或者{{Package|mail-client/evolution}}这样庞大的？安装{{Package|mail-client/claws-mail}}试试。 

在网上聊天方面，{{Package|net-irc/irssi}} 是一个优秀的IRC客户端，它运行于终端里，小巧并且配置性极好。如果你更倾向于想要一个包含了所有聊天协议的客户端，那么你可能想要{{c|emerge}}{{Package|net-im/pidgin}}。 

如果你需要电影和音乐播放器，那没有比 {{Package|media-video/mplayer}} 和 {{Package|media-sound/exaile}}更好的了。几乎所有格式的多媒体文件它们都能很好地播放. 

最后，你还需要一个浏览器。几乎所有的图形化浏览器都要比你大多数的桌面应用程序需要更多的资源。尽管如此，Firefox和Midori依然是一个很好的选择。除此之外，你可能发现Opera速度也是相当快的。但是Opera并不像Firefox一样可在多种处理器架构上使用，并且它有更多的依赖关系，除非你用USE标记忽略它们。 

{{Emerge|www-client/firefox}}

{{Emerge|www-client/midori}}

{{RootCmd|echo "www-client/opera gtk -kde" >> /etc/portage/package.use}}

{{Emerge|www-client/opera}}

到这里，我们已经提出一些很好的建议来丰富你的桌面应用，接着，看看我们还可以做些什么来提升你的Xfce体验。

==== 面板插件 ====

在这一小节里面，我们将讨论一些在Xfce里面每天都会用到的有用插件和应用软件。 

Portage 里面已经有许多面板插件了；用 {{c|emerge --search xfce}}自己查看。尽管这些插件的名字中大部分都是带有自我解释含义的，但是有一些插件还是值得引起我们注意的，因为它们非常有用。要使用它们，只要简单的 {{c|emerge}}  它们。当你右击面板时便能看到它们已经被加到  {{Path|Add New Items}} 菜单里面。 

{| class="table table-condensed table-striped"  style="width: auto;"
|-
! scope="col" width="25%" | Package
! Description
|-
| {{Package|xfce-extra/xfce4-battery-plugin}}
| 适合笔记本电脑用户。 它显示电池百分比，剩余时间，电源（交流或电池），风扇状态，警告，甚至可以配置为在特定功率级别执行命令。 此功能可用于在电池电量几乎耗尽时将笔记本电脑置于休眠模式。
|-
| {{Package|xfce-extra/xfce4-verve-plugin}}
| 嵌入面板的一个小命令行。 它比打开终端运行命令更快。
|-
| {{Package|xfce-extra/xfce4-mount-plugin}}
| 提供一种方便的方法，只需点击鼠标即可安装{{Path|/etc/fstab}}中列出的设备。
|-
| {{Package|xfce-extra/xfce4-sensors-plugin}}
| 允许用户监视硬件传感器，例如CPU温度，风扇RPM，硬盘驱动器温度，主板电压等。
|}

=== 图形界面登录 ===

还记得我们添加{{c|startxfce4}}这一行到{{Path|~/.xinitrc}}文件的时候吗？要进入你的桌面，你所需要做的就是在登录以后敲入{{c|startx}} 。如果你喜欢完全基于文本启动和登录的话这种方法是很好的。否则，让我们使用一个显示管理器，它会在你系统引导后自动启动Xfce（这样你就能用图形化界面登录）。 

首先，让我们确定下系统启动后加载了Xfce： 

{{RootCmd|rc-update add xdm default}}

这还远没有结束。我们还要挑选一个显示管理器然后设置一些合适的变量。尽管在Portage中有若干显示管理器可以选择，但在这篇指南中，我们将坚持 [[SLiM]]——简单登录管理器。 

{{Package|x11-misc/slim}} 速度很快而且是轻量级的，只需很少的依赖关系。它对于Xfce实在是太完美了！ 

{{Emerge|x11-misc/slim}}

{{Note/zh-cn|加入USE标记<code>branding</code>将会安装{{Package|x11-themes/slim-themes}}包，它会给你一些可选的登录主题，包括Gentoo Linux主题。}}

然后在{{Path|/etc/conf.d/xdm}}中编辑<var>DISPLAYMANAGER</var> 变量： 

{{File|/etc/conf.d/xdm||<pre>
DISPLAYMANAGER="slim"
</pre>
}}

把<code>XSESSION="Xfce4"</code>添加到文件{{Path|/etc/env.d/90xsession}}，这样SLiM就能自动启动你的Xfce了。 

{{RootCmd|echo XSESSION{{=}}\"Xfce4\" > /etc/env.d/90xsession
|env-update && source /etc/profile}}

=== 美化桌面 ===

对桌面外观稍微设置下是大有裨益的。Xfce 拥有人们期望的一个现代桌面环境的全部设置选项，字体反锯齿设置、颜色模板、大量的窗体装饰物、主题，等等还有很多。如果这还不够，那安装第三方的主题、图标集、鼠标光标主题还有壁纸也很容易。 

[https://www.gentoo.org/inside-gentoo/artwork/#wallpapers Gentoo 网站]上面已收集了一批包含了各种分辨率的漂亮的 Gentoo 壁纸。如果你在寻找图标集和完整的 Xfce 主题，[http://www.xfce-look.org/ Xfce-Look]上面有很多。还有件重要的事情要记住，对于你下载的任何第三方美化包，通常需要先解压，然后再安装到合适的目录里。如果你想让你系统上所有的用户都能使用这些主题和图标集，那么把图标集安装到{{Path|/usr/share/icons/}}，主题安装到{{Path|/usr/share/themes/}}。如果仅供当前用户使用，那么把主题和图标集分别安装到{{Path|~/.themes}}/和{{Path|~/.icons/}}。 

如果你安装了 SLiM 作为你的显示管理器，在 Gentoo 官方源中的{{Path|x11-themes/slim-themes}} 包里还有很多它的主题。另外，更多主题可以去 SLiM [http://slim.berlios.de/themes01.php 主题页面]查找。创建自己的 SLiM 主题也是相当容易的，请阅读[http://slim.berlios.de/themes_howto.php 主题指南]。

最后，Xfce 还拥有自己内建的混色工具来管理窗口的透明化。你可以在 {{Path|Menu --> Settings --> Window Manager}} 这里找到这个选项。为了达到最好的效果，你需要让你的显卡使用支持硬件加速渲染的驱动。确认你安装 {{Package|xfce-base/xfwm4}} 时加入了 <code>xcomposite</code> 的 USE 标记。接着，你需要在 {{Path|/etc/X11/xorg.conf}} 中加入以下片断来打开混色开关： 

{{File|xorg.conf|Enabling composite|<pre>
Section "Extensions"
    Option  "Composite"  "Enable"
EndSection
</pre>
}}

这仅仅是 Xfce 和 Xorg-X11 所要求的最低限度配置。但是，对硬件加速渲染的设置则取决于系统的显卡，这已经超出本指南的范围。我们的WIKI有各种如何配置让各种显卡实现硬件加速渲染的方法。

当你配置完成一个漂亮的 Xfce 桌面后，下一步要做的是给它截个图，并分享给朋友们！只要安装 {{Package|xfce-extra/xfce4-screenshooter}} 就可以了。然后你就可以把你的图片发出去让所有人羡慕啦。

=== 总结 ===

祝贺你已经走到这么远了！你已经为你的计算需要安装配置了快捷的桌面环境和可靠的应用套件。

== 升级 ==

如果你正从 Xfce 的较早的主要版本（4.x）升级，那么你需要删除旧的缓存的 session 和配置文件，因为它们和新版本不兼容。运行下面的命令为你的每一个用户删除不兼容的缓存的 sessions 和配置文件： 

{{RootCmd
|rm -r ~/.cache/sessions
|rm -r ~/.config/xfce*
|rm -r ~/.config/Thunar
}}

用户会看到一个新的漂亮的界面，但是会丢失一些自己的配置。遗憾的是，还没有配置文件迁移工具…… 

== 外部资源 ==

对于配置和使用Xfce你还需要其它的帮助吗？还想得到更多轻量级应用程序的建议？试试到这里找找： 

* [http://forums.gentoo.org Gentoo论坛]
* Xfce提供的帮助文档和其它文档：安装在{{Path|/usr/share/xfce4/doc/C/index.html}}。用你的浏览器打开这页开始阅读。甚至还有许多配置选项的细节“隐藏”在这些帮助文档里面。

{{Migrated|originalauthors=nightmorph}}
