'''Gentoo Hardened is a Gentoo project that offers multiple additional security services on top of the all-known Gentoo Linux installation. Although each of them can be selected separately, Gentoo Hardened enables several risk-mitigating options in the toolchain, supports PaX, grSecurity, SELinux, TPE and more'''

Whether you are running an Internet-facing server or a flexible workstation, when you are dealing with multiple threats you will want to harden your system further than just automatically applying the latest security patches. ''Hardening'' a system means that you take additional countermeasures against attacks and other risks and is usually a combined set of activities you perform against the system.

Within Gentoo Hardened, several projects are active that help you further harden your Gentoo system through
* enabling specific options in the toolchain (compiler, linker ...) such as forcing position-independent executables (PIE), stack smashing protection and compile-time buffer checks
* enabling PaX extensions in the Linux kernel, which offer additional protection measures like address space layout randomization and non-executable memory
* enabling grSecurity extensions in the Linux kernel, including additional chroot restrictions, additional auditing, process restrictions, etc.
* enabling SELinux extensions in the Linux kernel, which offers a Mandatory Access Control system enhancing the standard Linux permission restrictions

Of course, this includes the necessary userspace utilities to manage these extensions.

== Toolchain ==
The hardened GCC profile is the one without a suffix. If you want to disable PIE or SSP, choose the relavent '''hardenedno'''('''pie'''|'''ssp''') or both, '''hardenednopiessp'''. The '''vanilla''' profile is of course the one with hardening disabled.
{{RootCmd|gcc-config -l
|output=<pre>[1] i686-pc-linux-gnu-4.5.3 *
[2] i686-pc-linux-gnu-4.5.3-hardenednopie
[3] i686-pc-linux-gnu-4.5.3-hardenednopiessp
[4] i686-pc-linux-gnu-4.5.3-hardenednossp
[5] i686-pc-linux-gnu-4.5.3-vanilla
</pre>}}

=== Per Package ===
{{Warning|This method is not supported by Gentoo.}}
Changing the GCC profile to deal with specific packages can be a pain. A way to avoid this is to set per-package C(XX)FLAGS using [[:/etc/portage/env|package.env]]. Create the file /etc/portage/env/nossp and add to that:
{{File|/etc/portage/env/nossp|Disable SSP|<pre>
CFLAGS="${CFLAGS} -fno-stack-protector"
CXXFLAGS="${CXXFLAGS} -fno-stack-protector"
</pre>}}
To allow for disabling PIE, create and add to /etc/portage/env/nopie:
{{File|/etc/portage/env/nopie|Disable PIE|<pre>
CFLAGS="${CFLAGS} -nopie"
CXXFLAGS="${CXXFLAGS} -nopie"
LDFLAGS="${LDFLAGS} -nopie"
</pre>}}

Finally add the package you want to disable either PIE or SSP for to /etc/portage/package.env and the relevant /etc/portage/env/<filename>, for this example {{Package|sys-libs/zlib}} is used here:
{{File|/etc/portage/package.env|Disable PIE for sys-libs/zlib|<pre>
sys-libs/zlib nopie
</pre>}}

== Tips & Tricks ==

=== [[Hardened Gentoo/Grsecurity|Grsecurity]] chroot ===

If you want to chroot to a copied environment where the CONFIG_GRKERNSEC_CHROOT is enabled you must use the cd grub and change the root(cd) kernel(cd) initrd(cd) setting to from (cd) to (hdx,y).
<br />
Now you can install the grub environment.

== Links ==
* [http://www.gentoo.org/proj/en/hardened/ Gentoo Hardened Project]
* [http://www.gentoo.org/proj/en/hardened/selinux/ Gentoo Hardened SELinux Project]

[[Category:Core system]]
