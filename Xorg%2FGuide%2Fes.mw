<languages />

Xorg es el servidor X Window que permite a los usuarios tener un entorno gráfico a su alcance. Este CÓMO explica lo que es Xorg, cómo instalarlo y qué opciones de configuración existen.

== ¿Qué es el Servidor X Window? ==

=== Gráfico vs Línea de Comandos ===

El usuario medio puede estar asustado si piensa que va a tener que teclear órdenes. ¿Porqué no apuntar y hacer clic a través de la libertad que ofrece Gentoo (y Linux en general)? Bien, naturalmente, ¡Puede hacer esto! Linux ofrece una amplia variedad de interfaces de usuario y entornos que puede instalar encima de su sistema actual. 

Esta es una de las sorpresas más grandes que encuentran los nuevos usuarios: una interfaz gráfica de usuario no es más que una aplicación que corre en su sistema. ''No'' es parte del núcleo Linux o cualquier otra parte interna del sistema. Es una herramienta poderosa que permite completamente capacidades gráficas en su estación de trabajo. 

Debido a la importancia de los estándares son importantes, un estándar para dibujar y mover ventanas en una pantalla, interactuar con el usuario a través del ratón y teclado y otros aspectos básicos pero importantes se han creado bajo el nombre "Sistema X Window", generalmente abreviado ''X11'' o simplemente ''X''. Se utiliza en Unix, Unix, Linux y sistemas operativos tipo Unix en todo el mundo. 

La aplicación que ofrece a los usuarios de Linux la capacidad de ejecutar interfaces gráficas de usuario y que utiliza el estándar X11 es Xorg-X11, una bifurcación del provecto XFree86. En su momento XFree86 decidió utilizar una licencia que podría ser incompatible con la licencia GPL, por tanto, se recomienda el uso de Xorg. El árbol oficial de Portage ya no ofrece el paquete XFree86. 

=== El Proyecto X.org  ===

El proyecto [http://www.x.org X.org] crea y mantiene una implementación del sistema X11 de código abierto y redistribuible libremente. Se trata, por tanto, de una infraestructura de escritorio basada en un sistema X11 de fuentes abiertas. 

Xorg ofrece una interfaz entre su hardware y el software gráfico que quiere correr. Además de esto, Xorg también trabaja en red, lo que implica que puede correr una aplicación en un sistema mientras la está viendo en otro. 

== Instalar *Xorg ==

Antes de que  pueda instalar Xorg,  necesitará preparar su sistema para ello. En primer lugar, configure el núcleo para que ofrezca soporte a dispositivos de entrada y tarjetas de vídeo. A continuación, prepararemos {{Path|/etc/portage/make.conf}} de modo que se construyan e instalen los controladores y paquetes Xorg correctos. 

=== Soporte para controladores de entrada ===

Por defecto, Xorg utiliza <code>evdev</code>, un controlador de entrada genérico. Necesitará activar el soporte para <code>evdev</code> realizando un cambio a la configuración de su núcleo. Lea la [http://www.gentoo.org/doc/es/kernel-config.xml Guía de Configuración del Núcleo] si no sabe cómo configurar su núcleo. 

{{Kernel|Habilitar evdev en el núcleo|<pre>
Device Drivers --->
 Input device support --->
  <*> Event interface
</pre>
}}

=== Ajuste del modo del núcleo ===

Los controladores de vídeo de código abierto actuales se apoyan en el ajuste del modo del núcleo (KMS o Kernel ModeSetting). KMS proporciona un arranque gráfico mejorado con menos parpadeo, mayor velocidad en el cambio a modo usuario, una consola framebuffer integrada, cambio rápido de la consola a Xorg y otras características. KMS entra en conflicto con los controladores heredados, que deben permanecer '''deshabilitados''' en la configuración de su núcleo. 

En primer lugar, prepare su núcleo para KMS.  Necesitará hacer esto independientemente del controlador de vídeo Xorg que esté utilizando. 

{{Kernel|Configurar framebuffers|<pre>
Device Drivers --->
 Graphics support --->
  Support for frame buffer devices --->
  ## (Deshabilitar todos los controladores, incluyendo VGA, Intel, nVidia, y ATI)
  ## (Más abajo, habilitar el soporte básico de la consola. KMS lo utiliza)
  Console display driver support --->
   <*> Framebuffer Console Support </pre>
}}

A continuación, configure su núcleo para utilizar el controlador MS apropiado para su tarjeta de vídeo. Intel, nVidia, y AMD/ATI son las tarjetas más comunes, siga el listado de códigos para su tarjeta mostrado abajo. 

Para tarjetas Intel: 

{{Kernel|Ajustes para Intel|<pre>
Device Drivers --->
 Graphics support --->
  /dev/agpgart (AGP Support) --->
  <*> Intel 440LX/BX/GX, I8xx and E7x05 chipset support
  Direct Rendering Manager (XFree86 4.1.0 and higher DRI support) --->
  <*> Intel 8xx/9xx/G3x/G4x/HD Graphics
  [*] Enable modesetting on intel by default
</pre>
}}

Para tarjetas nVidia: 

{{Kernel|Ajustes para nVidia settings|<pre>
Device Drivers --->
 Graphics support --->
  Direct Rendering Manager (XFree86 4.1.0 and higher DRI support) --->
   <*> Nouveau (nVidia) cards
</pre>
}}

Para las nuevas tarjetas AMD/ATI ([http://www.gentoo.org/doc/en/ati-faq.xml RadeonHD 2000 y superiores]), necesitará hacer emerge de <code>radeon-ucode</code> o <code>linux-firmware</code>. Una vez que haya instalado uno de estos paquetes, configure su núcleo tal y como se describe en la [https://wiki.gentoo.org/wiki/Radeon#Firmware sección sobre el firmware] de la [https://wiki.gentoo.org/wiki/Radeon página de Radeon]: 

{{Kernel|Ajustes AMD/ATI|<pre>
## (Configurar el núcleo para utilizar el firmware radeon-ucode)
Device Drivers --->
 Generic Driver Options --->
 [*] Include in-kernel firmware blobs in kernel binary
 ## # Específico de tarjetas ATI, (lea la página de Radeon para obtener detalles de qué firmware incluir)
 (radeon/<SU-MODELO>.bin ...)
 ## # Para todos:
 (/lib/firmware/) Directorio raíz de los objetos que contienen el Firmware

## (Habilitar el soporte KMS para Radeon)
Device Drivers --->
 Graphics support --->
  <*> Direct Rendering Manager --->
  <*> ATI Radeon
  [*] Enable modesetting on radeon by default
  [ ] Enable userspace modesetting on radeon (DEPRECATED)
</pre>
}}

{{Note|Las antiguas tarjetas Radeon (las series X1900 y anteriores) no necesitan el paquete <code>radeon-ucode</code> ni ninguna configuración del firmware. Simplemente habilite el Gestor de Renderizado Directo (Direct Rendering Manager) y el ajuste del modo ATI.}}

{{Note|Los núcleos Linux >{{=}} 3.9 no tienen activado el ajuste de modo radeon por defecto (''Enable modesetting on radeon by default'' ) ya que se implica por defecto}}

Ahora que ya ha configurado KMS, continúe con la preparación de  {{Path|/etc/portage/make.conf}} en la siguiente sección.

=== Configuración de make.conf ===

Ahora que su núcleo está preparado,  tiene que configurar dos variables importantes en el fichero {{Path|/etc/portage/make.conf}} antes de instalar Xorg. 

La primera variable es <code>VIDEO_CARDS</code>. Se utiliza para definir los controladores de vídeo que pretende utilizar y su valor, normalmente, está basado en el tipo de tarjeta que tiene instalada en su sistema. Los valores más comunes son <code>nouveau</code> para tarjetas nVidia o <code>radeon</code> para tarjetas ATI. Ambos son controladores de código abierto con buen soporte y desarrollados activamente. 

{{Note|You may also try the proprietary drivers from nVidia and AMD/ATI, <code>nvidia</code> and <code>fglrx</code> respectively. However, setting up the proprietary drivers is beyond the scope of this guide. Please read the [https://wiki.gentoo.org/wiki/NVidia/nvidia-drivers Gentoo Linux nVidia Guide] and [http://www.gentoo.org//doc/en/ati-faq.xml Gentoo Linux ATI FAQ] . If you don't know which drivers you should choose, refer to these guides for more information.}}

El controlador <code>intel</code> se puede utilizar en ordenadores de escritorio o portátiles con chipsets gráficos comunes de Intel. 

{{Note|<code>VIDEO_CARDS</code> may contain more than one driver, each separated with a space.}}

The second variable is <code>INPUT_DEVICES</code> and is used to determine which drivers are to be built for input devices. In most cases setting it to <code>evdev</code> should work just fine. If you use alternative input devices, such as a Synaptics touchpad for a laptop, be sure to add it to <code>INPUT_DEVICES</code> . 

Now you should decide which drivers you will use and add necessary settings to the {{Path|/etc/portage/make.conf}} file: 

{{Code|Entradas ejemplo de make.conf|<pre>
## (Para tener soporte del ratón, el teclado y el panel táctil Synaptics)
INPUT_DEVICES="evdev synaptics"
## (Para tarjetas nVidia)
VIDEO_CARDS="nouveau"
## (Para tarjetas AMD/ATI)
VIDEO_CARDS="radeon"
</pre>
}}

If the suggested settings don't work for you, you should run <code>emerge -pv xorg-drivers</code> , check all the options available and choose those which apply to your system. This example is for a system with a keyboard, mouse, Synaptics touchpad, and a Radeon video card. 

{{RootCmd|emerge -pv xorg-drivers|output=<pre>

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild R ] x11-base/xorg-drivers-1.9 INPUT_DEVICES="evdev synaptics -acecad -aiptek -elographics% -fpit% -joystick -keyboard -mouse -penmount -tslib -virtualbox -vmmouse -void -wacom" VIDEO_CARDS="radeon -apm -ark -ast -chips -cirrus -dummy -epson -fbdev -fglrx (-geode) -glint -i128 (-i740) (-impact) -intel -mach64 -mga -neomagic (-newport) -nouveau -nv -nvidia -r128 -rendition -s3 -s3virge -savage -siliconmotion -sis -sisusb (-sunbw2) (-suncg14) (-suncg3) (-suncg6) (-sunffb) (-sunleo) (-suntcx) -tdfx -tga -trident -tseng -v4l -vesa -via -virtualbox -vmware (-voodoo) (-xgi)" 0 kB
</pre>
}}

After setting all the necessary variables you can install the Xorg package. 

En primer lugar, asegúrese de que udev está presente en sus opciones USE:

{{RootCmd|echo "x11-base/xorg-server udev" &gt;&gt; /etc/portage/package.use}}

A continuación, instale Xorg:

{{Emerge|xorg-server}}

{{Note|Podría instalar el metapaquete <code>xorg-x11</code> en lugar del más ligero <code>xorg-server</code>. Funcionalmente hablando, <code>xorg-x11</code> y <code>xorg-server</code> son iguales. Sin embargo, <code>xorg-x11</code> incorpora más paquetes que probablemente no necesitab, como una cantidad enorme de fuentes en muchos idiomas diferentes. Éstas no son necesarias para un escritorio funcional.}}

Cuándo la instalación haya finalizado, necesitará reinicializar algunas variables de entorno antes de continuar: 

{{RootCmd|env-update |source /etc/profile}}

== Configurar Xorg ==

El servidor X está diseñado para funcionar automáticamente, no es necesario editar los ficheros de configuración de Xorg. Se deberían detectar y configurara sin problemas dispositivos tales como pantallas, teclados, y ratones. 

You should first try [[#using_startx]] without editing any configuration files. If Xorg won't start, or there's some other problem, then you'll need to manually configure Xorg as shown in the next section. 

=== El directorio xorg.conf.d  ===

{{Note|Configuring files in {{Path|xorg.conf.d}} should be seen as a "last resort" option. It really desirable to run without any special configuration if possible. If you still can't get a working configuration, then read on.}}

The configuration files of Xorg are stored in {{Path|/etc/X11/xorg.conf.d/}} . Each file is given a unique name and ends in {{Path|.conf}} . If the filenames start with a number, then Xorg will read the files in numeric order. {{Path|10-evdev.conf}} will be read before {{Path|20-synaptics.conf}} , and so on. You don't ''have'' to give them numbers, but it may help you organize them. 

{{Note|Xorg provides example configurations in {{Path|/usr/share/doc/xorg-server-${version}/xorg.conf.example.bz2}} . You can use these to create your own configuration files in {{Path|/etc/X11/xorg.conf.d/}} . The examples are heavily commented, but if you are in need of more documentation regarding the syntax, read <code>man xorg.conf</code> . Other examples can be found in the [[#Resources|Resources]] chapter at the end of this guide.}}

=== Usar startx ===

Now try <code>startx</code> to start up your X server. <code>startx</code> is a script that executes an ''X session'' ; that is, it starts the X server and some graphical applications on top of it. It decides which applications to run using the following logic: 

* If a file named {{Path|.xinitrc}} exists in the home directory, it will execute the commands listed there.

* Otherwise, it will read the value of the XSESSION variable and will execute one of the sessions available in {{Path|/etc/X11/Sessions/}} accordingly. You can set the value of XSESSION in {{Path|/etc/env.d/90xsession}} to make it a default for all the users on the system. For example, as root, run <code>echo XSESSION="Xfce4" > /etc/env.d/90xsession</code> . This will create the {{Path|90xsession}} file and set the default X session to [http://www.gentoo.org//doc/en/xfce-config.xml Xfce] . Remember to run <code>env-update</code> after changing {{Path|90xsession}} .

{{Cmd|startx}}

If you haven't yet installed a window manager, all you'll see is a black screen. Since this can also be a sign that something's wrong, you may want to emerge <code>twm</code> and <code>xterm</code> ''only to test X'' . 

Once those two programs are installed, run <code>startx</code> again. A few <code>xterm</code> windows should appear, making it easier to verify that X is working correctly. Once you're satisfied with the results, run <code>emerge --unmerge twm xterm</code> as root to get rid of the testing packages. You won't need them once you've setup a proper desktop environment. 

== Ajustando la configuración X ==

=== Definir su Resolución ===

If you feel that the screen resolution is wrong, you will need to check two sections in your {{Path|xorg.conf.d}} configuration. First of all, you have the ''Screen'' section which lists the resolutions that your X server will run at. This section might not list any resolutions at all. If this is the case, Xorg will estimate the resolutions based on the information in the second section, ''Monitor'' . 

Now let us change the resolution. In the next example from {{Path|/etc/X11/xorg.conf.d/40-monitor.conf}} we add the <code>PreferredMode</code> line so that our X server starts at 1440x900 by default. The <code>Option</code> in the <code>Device</code> section must match the name of your monitor ( <code>DVI-0</code> ), which can be obtained by running <code>xrandr</code> . You'll need to <code>emerge xrandr</code> just long enough to get this information. The argument after the monitor name (in the <code>Device</code> section) must match the <code>Identifier</code> in the <code>Monitor</code> section. 

{{RootCmd|nano -w /etc/X11/xorg.conf.d/40-monitor.conf|output=<pre>
Section "Device"
  Identifier  "RadeonHD 4550"
  Option      "Monitor-DVI-0" "DVI screen"
EndSection
Section "Monitor"
  Identifier  "DVI screen"
  Option      "PreferredMode" "1440x900"
EndSection
</pre>
}}

Run X ( <code>startx</code> ) to discover it uses the resolution you want. 

=== Múltiples monitores  ===

Puede configurar más de un monitor en {{Path|/etc/X11/xorg.conf.d/}}. Todo lo que tiene que hacer es asignar a cada monitor un identificador e indicar su posición física, por ejemplo, "RightOf" (a la derecha) o "Above"(encima) de otro monitor. El siguiente ejmplo muestra como configurar un monitor DVI y uno VGA siendo el monitor VGA el que está a la derecha: 

{{RootCmd|nano -w /etc/X11/xorg.conf.d/40-monitor.conf|output=<pre>
Section "Device"
 Identifier "RadeonHD 4550"
 Option "Monitor-DVI-0" "DVI screen"
 Option "Monitor-VGA-0" "VGA screen"
EndSection
Section "Monitor"
 Identifier "DVI screen"
EndSection
Section "Monitor"
 Identifier "VGA screen"
 Option "RightOf" "DVI screen"
EndSection
</pre>
}}

=== Configurar su teclado ===

Para configurar X en el uso de un teclado internacional, tendrá que crear el fichero de configuración
apropiado en {{Path|/etc/X11/xorg.conf.d/}}. El siguiente ejemplo muestra el uso de una disposición de teclado Checo: 

{{RootCmd|nano -w /etc/X11/xorg.conf.d/30-keyboard.conf|output=<pre>
Section "InputClass"
    Identifier "keyboard-all"
    Driver "evdev"
    Option "XkbLayout" "us,cz"
    Option "XkbModel" "logitech_g15"
    Option "XkbRules" "xorg"
    Option "XkbOptions" "grp:alt_shift_toggle,grp:switch,grp_led:scroll,compose:rwin,terminate:ctrl_alt_bksp"
    Option "XkbVariant" ",qwerty"
    MatchIsKeyboard "on"
EndSection
</pre>
}}

La orden "terminate" (<code>terminate:ctrl_alt_bksp</code> ) le permite matar la sesión X mediante la combinación de teclas Ctrl-Alt-Supr. Esto, sin embargo, hará que X no termine de buena forma, algo que no es deseable. Puede ser de utilidad cuando los programas han congelado su pantalla completamente, o cuando está configurando o ajustando su entorno Xorg. Tenga cuidado cuando mate su escritorio con esta combinación de teclas; terminar de esta forma no le gustará a la mayoría de los programas y podría perder parte (o todo) de lo que esté realizando en ese momento. 

=== Terminar ===

Lance <code>startx</code> y alégrese del resultado. ¡Enhorabuena!, ahora (seguramente) tendrá un sistema Xorg funcionando en su sistema. El siguiente paso es instalar un gestor de ventanas funcional como KDE, GNOME, o Xfce, pero eso no forma parte de esta guía. Se puede encontrar información sobre la instalación de estos entornos de escritorio en nuestros [http://www.gentoo.org//doc/es/?catid=desktop Recursos de Documentación del Escritorio de Gentoo]. 

=== Recursos ===

=== Crear y editar los ficheros de configuración ===

En primer lugar, <code>man xorg.conf</code> y <code>man evdev</code> ofrecen referencias rápidas y completas sobre la sintaxis utilizada en estos ficheros de configuración. ¡Asegúrese de tenerlos abiertos en un terminal cuando edite sus ficheros de configuración! 

También existen muchos recursos en línea sobre la edición de ficheros de configuración en {{Path|/etc/X11/}}. Únicamente listamos algunos de ellos, asegúrese de buscar más en [http://www.google.com Google]. 

=== Otros recursos ===

Se puede encontrar más información sobre la instalación y configuración de diversos entornos de escritorio y aplicaciones en la sección de [http://www.gentoo.org//doc/es/?catid=desktop Recursos de Documentación del Escritorio de Gentoo] de nuestra documentación. 

Si está actualizando a <code>xorg-server</code> 1.9 desde una versión anterior, entonces asegúrese de leer la [http://www.gentoo.org//proj/es/desktop/x/x11/xorg-server-1.9-upgrade-guide.xml guía de migración ] . 

X.org ofrece muchas [http://www.x.org/wiki/FAQ FAQs] en su sitio Web, además de su documentación. 

== Agradecimientos ==

Nos gustaría dar las gracias a los siguientes autores y editores por sus contribuciones a esta guía:

* swift

* nightmorph


[[Category:X.Org]]
