<languages />
В этой статье описывается удаление старых [[Special:MyLanguage/Kernel|ядер]].

== Удаление исходных текстов ядра ==

<span class="mw-translate-fuzzy">
После установки и тестирования нового ядра и если оно работает удовлетворительно, старое ядро ​​можно удалить. Чтобы удалить старые исходники ядра [[Special:MyLanguage/emerge|emerge]] ''--depclean'' модификатор (укороченная форма - ''-c'') может быть использована для удаления всех старых или неиспользуемых версий пакета, на примере  {{Package|sys-kernel/gentoo-sources}}.
{{RootCmd|emerge --depclean --ask gentoo-sources}}
</span>

{{Emerge|params+=--depclean|gentoo-sources}}

<span class="mw-translate-fuzzy">
Пожалуйста убедитесь что вы не удаляете исходники ядра на котором работает. Посмотрите [[Special:MyLanguage/Kernel/Upgrade| эту статью]] по обновлению ядра
</span>

=== Protecting kernel sources ===

If newer kernel sources has been merged and you run ''--depclean'' before switching to the newer sources, the current sources will be removed. But if you want to stay with the current sources, this removal is not wanted, because you may need the sources e.g. for updating external kernel modules. It's therefore good practice to add the specific kernel version to your world file to protect it from ''--depclean'' operations.

{{Emerge|params+=--noreplace|gentoo-sources:3.3.8}}

Note the slot notation, using a colon instead of a dash. Every kernel version is its own slot.

== Удаление остатков ядра ==

=== Using eclean-kernel ===

{{Package|app-portage/eclean-kernel}} is a simple tool for old kernel cleanup/removal. It removes both built kernel files and build directories if they're no longer reference by any preserved kernel.

For example, to keep three newest kernels around:

{{RootCmd|eclean-kernel -n 3}}

=== Manual removal ===

Portage,  удаляет только те файлы, которые он установил - файлы, созданные во время сборки ядра и установки остаются. Они могут быть безопасно удалены.

<span class="mw-translate-fuzzy">
* После сборки ядра, файлы созданные во время компиляции остаются и не удаляются предидущей командой, поэтому выполняем:
: {{RootCmd|rm -r /usr/src/linux-2.6.XY}}
</span>

: {{RootCmd|rm -r /usr/src/linux-3.X.Y}}

<span class="mw-translate-fuzzy">
* Во время установки ядра, модули ядра скопируются в подкаталоги <tt>/lib/modules/</tt>, откуда их тоже можно удалить:
: {{RootCmd|rm -r /lib/modules/2.6.XY}}
</span>

: {{RootCmd|rm -r /lib/modules/3.X.Y}}

<span class="mw-translate-fuzzy">
* Старые файлы в <tt>/boot</tt> также могут быть удалены:
: {{RootCmd|rm /boot/kernel-2.6.XY|rm /boot/System.map-2.6.XY|rm /boot/config-2.6.XY}}
</span>

: {{RootCmd|rm /boot/kernel-3.X.Y|rm /boot/System.map-3.X.Y|rm /boot/config-3.X.Y}}

* И наконец, удалите все оставшиеся записи из файла конфигурации вашего загрузчика.

[[Category:Kernel]]
