{{InfoBox stack
|{{InfoBox homepage|https://freedesktop.org/wiki/Software/libinput/|header=true}}
|{{InfoBox wikipedia|Wayland_(display_server_protocol)#libinput}}
|{{InfoBox bugs|https://bugs.freedesktop.org/buglist.cgi?component{{=}}libinput&product{{=}}Wayland&resolution{{=}}---}}
|{{InfoBox gitweb|https://cgit.freedesktop.org/wayland/libinput|raw=true}}

}}

libinput is an input device driver for [[Wayland]] compositors and [[Xorg|X.org]] window system. It is a drop-in replacement for the slowly deprecating evdev and synaptics input drivers. It provides device detection, device handling, input device event processing and abstraction so minimize the amount of custom input code compositors need to provide the common set of functionality that users expect.<ref>https://freedesktop.org/wiki/Software/libinput/</ref>

== Installation ==

=== USE flags ===

Add [https://packages.gentoo.org/useflags/input_devices_libinput <code>libinput</code>] to the [[:/etc/portage/make.conf#INPUT_DEVICES|<var>INPUT_DEVICES</var>]] variable:

{{INPUT_DEVICES|libinput}}

After the update the packages {{Package|dev-libs/libinput}} and {{Package|x11-drivers/xf86-input-libinput}} should be installed. 

=== Additional software ===

Actions gestures on the touchpad using the libinput driver.

Follow the install notes from the official project page [https://github.com/bulletmark/libinput-gestures LIBINPUT-GESTURES] on GitHub.

Install dependencies:

{{Emerge|x11-misc/xdotool x11-misc/wmctrl}}

== Configuration ==

=== Xorg ===

By default, when libinput is the ''only'' available input driver for Xorg, no additional configuration is needed. Simply (re)start the graphical environment for the changes to take effect.

If ''multiple'' input drivers are available on the system ({{Package|x11-drivers/xf86-input-evdev}} and {{Package|x11-drivers/xf86-input-synaptics}} for example), then additional configuration is required.

==== Selecting libinput ====

When multiple drivers are available on the system, Xorg must be instructed to use libinput before trying to use other input drivers. This can be simply performed by symlinking the {{Path|40-libinput.conf}} file into the {{Path|/etc/X11/xorg.conf.d/}} directory:

{{RootCmd|ln -s /usr/share/X11/xorg.conf.d/40-libinput.conf /etc/X11/xorg.conf.d/}}

Xorg gives priority to the files in the {{Path|/etc/X11/xorg.conf.d/}} directory.

Restart (re)start the graphical environment for the changes to take effect.

== Troubleshooting ==

=== Removing another input driver from INPUT_DEVICES does not prevent Xorg from loading it ===

This issue can occur in a variety of situations, but it is most prominent when migrating from evdev to libinput.

Be sure the {{Package|x11-drivers/xf86-input-evdev}} package is no longer installed on the system. If the {{Path|10-evdev.conf}} file available under the {{Path|/usr/share/X11/xorg.conf.d/}} directory, then Xorg will still reference it.

Verify the evdev driver is no longer referenced anywhere by Portage (check {{Path|make.conf}} and {{Path|package.use}}), then depclean the system:

{{Emerge|--depclean}}

== See also ==

* [[Wayland]] - A simpler replacement for X.
* [[Xorg]] - The long standing display server for Linux.

== External resources ==

* [https://wayland.freedesktop.org/libinput/doc/latest/modules.html Latest API documentation]
* [https://forums.gentoo.org/viewtopic-t-1048230-highlight-libinput.html Gentoo forums discussion on libinput]
* https://wiki.archlinux.org/index.php/Libinput
* [https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=d3ac878318dd96a88190a13b5ac7572ec0c56380 profiles: Switch default INPUT_DEVICES to libinput on Linux.]

== References ==

{{reflist}}

[[Category:Input devices]]
