Dracut is an initramfs infrastructure and aims to have as little as possible hard-coded into the initramfs. It originated from the [http://fedoraproject.org/wiki/Dracut Fedora Project] and was ported to Gentoo in the [http://www.google-melange.com/gsoc/project/google/gsoc2010/aidecoe/2 2010 Google Summer of Code]. For more detailed information, refer to the [http://www.kernel.org/pub/linux/utils/boot/dracut/dracut.html#dracut.kernel documentation] at kernel.org.

== Installation ==
Dracut works through its modules (not kernel modules). The modules take care of various common [[Tasks|tasks]] during the boot process. By default, the optional modules are not installed. Installation of those can be controlled using the {{Highlight|DRACUT_MODULES}} variable in /etc/make.conf.

{{File|/etc/make.conf||<pre>
...
DRACUT_MODULES="gensplash nfs"
...
</pre>}}


Since Dracut is not yet stable in Portage, add it to the package keywords first.
{{RootCmd|echo "sys-kernel/dracut" >> /etc/portage/package.keywords}}
{{Emerge|sys-kernel/dracut}}


== Tasks ==
The tasks below are meant as use cases for Dracut. Although you can specify the kernel verion manually, by default it uses the currently active kernel.

=== NFS Boot ===
For an NFS boot, you need only 3 modules and the nfs dracut module. 
{{USEflag
|dracut_modules_nfs++yes+Support NFS.}}
{{RootCmd|dracut -m "nfs network base" initramfs-nfs-only.img}}


Booting is done with the following line in your [[Syslinux_Bootloader|PXE config]]. The rd.ip=auto let's it auto detect the NFS settings through DHCP. The NFS boot path is provided to the client through the DHCP option "root-path" with the following value: <SERVER>:<NFS Export>
{{File|/var/lib/tftpboot/pxelinux.cfg/default||<pre>
...
 APPEND initrd=initramfs-nfs-only.img rd.ip=auto root=dhcp
...
</pre>}}



[[Category:Core system]]
[[Category:Google Summer of Code]]
