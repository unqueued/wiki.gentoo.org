{{InfoBox stack
|{{InfoBox homepage|http://mmonit.com/monit/|header=true}}
|{{InfoBox wikipedia|Monit}}
}}

{{Package|app-admin/monit}}[http://mmonit.com/monit/] is a utility for managing and monitoring processes, programs, files, directories and filesystems on a UNIX system. 

== Installation ==
=== Useflags ===

{{USEflag
|package=app-admin/monit
|pam++yes
|ssl++yes
}}

=== Emerge ===
{{emerge|monit}}

== Configuration ==
Config file of monit resides in {{Path|${EROOT}/etc/monitrc}}. And there is a item to specify a config directory. Uncomment if needed.

{{File|${EROOT}/etc/monitrc|config dir|<pre>
## It is possible to include additional configuration parts from other files or
## directories.                                                                                                                                                                                                     
#                                                                                                                                                                                                                   
#  include /etc/monit.d/*
#
</pre>}}

{{important|for security purposes change this entry}}

{{file|/etc/monitrc||
allow admin:monit}}

Start the service & load at boot.
{{RootCmd|/etc/init.d/monit start}}
{{RootCmd|rc-update add monit default}}

== Squid memory example ==
{{Package|net-proxy/squid}} is a caching proxy that is memory hungry. It can control its memory consumption by itself in the configuration file, while we can make an redundent check here.

{{File|${EROOT}/etc/monitrc|check squid|<pre>
 check process squid with pidfile /run/squid.pid
   start program = "rc-service squid start"
   stop  program = "rc-service squid stop"
   if totalmem > 30 MB then alert
</pre>}}

We can run monit foreground and see the effect.

{{RootCmd|monit -Ivv|output=<pre>
...
'squid' total mem amount of 30848kB matches resource limit [total mem amount>30720kB]
</pre>}}

== pidfile check ==
monit relies on the pidfile convention, it can only monitor background daemons. For daemons that do not create a pidfile, [http://mmonit.com/wiki/Monit/FAQ#pidfile a trick] is needed.

pidfile approach is [http://mywiki.wooledge.org/ProcessManagement intrinsically broken] for monitforing process. Monit can overcome this by checking the pidfile frequently enough to be reliable, though.

== Web interface ==

Navigate to http://localhost:2812/ & login using your edited configuration line or admin / monit if you have not changed it yet.

[[Category:Monitoring]]
