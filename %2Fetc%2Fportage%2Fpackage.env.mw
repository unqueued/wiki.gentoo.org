'''{{Path|/etc/portage/env}}''' and '''{{Path|/etc/portage/package.env}}''' are [[Article description::used for modifying Portage's environmental variables, such as those specified in the {{Path|[[:/etc/portage/make.conf]]}} file, on a per-package basis.]]

* The {{Path|/etc/portage/env}} ''directory'' contains files that have the same syntax as {{Path|make.conf}}. The filename will be used as the key to override settings.
* The {{Path|/etc/portage/package.env}} file describes which of these files will be used on a per-package basis.

Be aware certain variables in {{Path|[[:/etc/portage/make.conf]]}} are ''incremental'' variables. This means if the variable is already specified in {{Path|/etc/portage/make.conf}} then Portage will read the values set in {{Path|make.conf}}, and ''then'' read the values set in files beneath the {{Path|/etc/portage/env}} directory.

In other words if <code>FEATURES="ccache"</code> in {{Path|make.conf}}, and <code>FEATURES="-ccache"</code> in {{Path|package/env/disable-ccache.conf}}, then Portage will see <var>FEATURES</var> as set to <code>FEATURES="ccache -ccache"</code> at emerge time for any packages which {{Path|disable-ccache.conf}} is applied. This ultimately results in ccache being ''disabled'' for packages referencing {{Path|disable-ccache.conf}} in the {{Path|/etc/portage/package.env}} file.

== Example 1: Enable debug information for a specific package ==

Suppose a user would like to build GIMP with debug information because the user wants a development version and would like to report any crashes to GIMP upstream.

Create a file in {{Path|/etc/portage/env}} that contains the desired changes:

{{FileBox|filename=/etc/portage/env/debug.conf|lang=bash|1=
CFLAGS{{=}}"${CFLAGS} -g"
CXXFLAGS{{=}}"${CXXFLAGS} -g"
FEATURES{{=}}"splitdebug"
}}

Next, add an entry to {{Path|package.env}} followed by the name of the file created in the previous step:

{{FileBox|filename=/etc/portage/package.env|1=
media-gfx/gimp  debug.conf
}}

== Example 2: Build certain packages in a different location ==

Suppose the Portage build directory is in [[Portage TMPDIR on tmpfs|tmpfs]], but some packages are too large, and run out of space. The <var>PORTAGE_TMPDIR</var> can be modified to exclude the packages that are too large.

Create a file in {{Path|/etc/portage/env}} that modifies <var>PORTAGE_TMPDIR</var> variable and sets it to an on-disk directory:

{{FileBox|filename=/etc/portage/env/no-tmpfs.conf|lang=bash|1=
PORTAGE_TMPDIR{{=}}"/var/tmp/portage-ondisk"
}}

Add large packages to {{Path|package.env}}:

{{FileBox|filename=[[:/etc/portage/package.env]]|1=
app-emulation/qemu-kvm  no-tmpfs.conf
app-office/libreoffice  no-tmpfs.conf debug.conf
www-client/firefox      no-tmpfs.conf
}}

Notice that it is possible to reference several files in {{Path|/etc/portage/env}} for each package.
<small>(Tip originally blogged by [http://blog.jolexa.net/2011/09/16/gentoo-per-package-portage_tmpdir-settings/ Jeremy Olexa])</small>

== See also ==

* [[:/etc/portage]]
* [[Knowledge Base:Overriding environment variables per package|Overriding environment variables per package]]

== External resources ==

* [http://dev.gentoo.org/~zmedico/portage/doc/man/portage.5.html Portage man page]

[[Category:Portage]]
