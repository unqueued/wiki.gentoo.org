The basic idea is rather simple: replace CPU feature flags with matching flags from profiles/desc/cpu_flags_x86.desc. Few notes though:

# make sure not to accidentally change the option name, e.g. $(use_enable mmx) -> $(use_enable cpu_flags_x86_mmx mmx).
# The list of packages may be incomplete, esp. wrt packages that use custom local flag names. It may also contain extraneous packages, e.g. we need to check all uses of USE=aes.
# Some flags were renamed, e.g. aes-ni -> cpu_flags_x86_aes.
# Some flags are incorrect, e.g. sse4 doesn't exist. It's either sse4_1, sse4_2, see4a or some combination of the three.
# If you need extra flags, please bring it up for discussion first. '''Do not introduce more local flags, we have enough mess with them.'''
# Flags should be used when code (e.g. assembly) is compiled conditionally. When used only to control -mfoo options, the flags should be removed.
# Remember to update metadata.xml. If descriptions are generic, remove them. If they're not, rename them to cpu_flags_x86_*.

== Packages ==
Here's my list of packages that still need to be converted. Please remove packages once you convert them.

{{PreBox|title=List of packages to convert|1=
dev-haskell/hashable
dev-haskell/hashtables
dev-libs/marisa # https://bugs.gentoo.org/538104
media-libs/freeverb3
media-libs/libpostproc
media-libs/mlt
media-libs/netpbm
media-libs/openal
media-libs/opencolorio
media-libs/qimageblitz
media-libs/sdl-gfx
media-libs/sdl2-gfx
media-libs/smpeg
media-libs/smpeg2
media-libs/spandsp
media-libs/speex
media-libs/x264
media-plugins/audacious-plugins
media-plugins/swh-plugins
media-sound/ardour
media-sound/audacious
media-sound/jack-audio-connection-kit
media-sound/lame
media-sound/mac
media-sound/mpg123
media-sound/qtractor
media-sound/wavpack
media-tv/xawtv
media-tv/xbmc
media-video/avidemux
media-video/cinelerra
media-video/dirac
media-video/ffmpeg
media-video/libav
media-video/mjpegtools
media-video/mplayer
media-video/mplayer2
media-video/projectx
media-video/recmpeg
media-video/transcode
media-video/vlc
net-misc/bfgminer
net-misc/freerdp
sci-biology/fasta
sci-biology/fasttree
sci-biology/hmmer
sci-biology/raxml
sci-biology/shrimp
sci-chemistry/avogadro
sci-chemistry/gromacs
sci-libs/arprec
sci-libs/fcl
sci-libs/fftw
sci-libs/libcmatrix
sci-libs/lis
sci-libs/pcl
sci-mathematics/gretl
}}
