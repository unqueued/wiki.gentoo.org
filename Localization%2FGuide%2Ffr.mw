<languages />

{{Metadata|abstract=Ce guide devrait aider les utilisateurs à localiser/traduire leur distribution Gentoo Linux dans n'importe quelle locale européenne. L'Allemand est simplement pris comme  exemple et vous devez adapter les instructions à votre locale. Il inclut l'utilisation de l'Euro.}}

== Fuseau horaire ==

In order to keep the system time properly according to the present location, the timezone needs to be set.  Instructions how to do this for [[System_time#OpenRC|OpenRC based systems]] and [[System_time#systemd|systemd based systems]] can be found in the [[System_time|system time]] article.

== Fonctionnement des locales ==

=== Que sont les locales ? ===

A locale is a set of information that most programs use for determining country and language specific settings. The locales and their data are part of the system library and can be found at {{Path|/usr/share/i18n/locales/}} on most systems. A locale name is generally named <code>ab_CD</code> where <code>ab</code> is your two (or three) letter language code (as specified in ISO-639) and <code>CD</code> is your two letter country code (as specified in ISO-3166). Variants are often appended to locale names, e.g. <code>en_GB.UTF-8</code> or <code>de_DE@euro</code>. Please explore [http://en.wikipedia.org/wiki/Locale Wikipedia] to read more about locales and related articles.

=== Variables d'environnement pour les locales ===

Les variables qui contrôlent les différents aspects du réglage des locales sont présentées ci-dessous. Toutes prennent un nom de locale de la forme <code>ab_CD</code> indiquée ci-dessus. 

{| class="table table-striped" style="text-align: left;" 
|- 
! scope=col width=25% | Variable name
! scope=col width=75% | Explanation
|- 
| <var>LANG</var>
| Defines all locale settings at once, while allowing further individual customization via the LC_* settings below.
|- 
| <var>LC_COLLATE</var>
| Define alphabetical ordering of strings. This affects e.g. output of sorted directory listing.
|- 
| <var>LC_CTYPE</var>
| Define the character handling properties for the system. This determines which characters are seen as part of alphabet, numeric and so on. This also determines the character set used, if applicable.
|- 
| <var>LC_MESSAGES</var>
| Programs' localizations stored in {{Path|/usr/share/locale/}} for applications that use message based localization scheme (majority of Gnu programs, see next chapters for closer information which do, and how to get the programs, that don't, to work).
|- 
| <var>LC_MONETARY</var>
| Defines currency units and formatting of currency type numeric values.
|- 
| <var>LC_NUMERIC</var>
| Defines formatting of numeric values which aren't monetary. Affects things such as thousand separator and decimal separator.
|- 
| <var>LC_TIME</var>
| Defines formatting of dates and times.
|- 
| <var>LC_PAPER</var>
| Defines default paper size.
|- 
| <var>LC_ALL</var>
| A special variable for overriding all other settings.
|-
|}

{{Note|Certains programmes sont écrits d'une manière telle qu'ils s'attendent à un ordre alphabétique basé sur l'anglais, alors que certaines locales comme l'Estonien, utilisent un ordre différent. En conséquence, il est recommandé de  définir  LC_COLLATE à C pour des paramètres intéressant le système entier.}}

{{Warning|Using <var>LC_ALL</var> is strongly discouraged as it automatically overrides all other <var>LC_*</var> variables (<var>LANG</var> is not affected). This means that changes made by other means will be hidden until <var>LC_ALL</var> is set to a null string. It is probably best not to set it in a startup file.}}

La plupart du temps, les utilisateurs ne définissent la variable LANG qu'à une échelle globale.

=== Générer des locales spécifiques ===

Vous n'utiliserez probablement qu'une, ou peut-être deux, locales sur votre système. Vous pouvez spécifier les locales dont vous aurez besoin dans {{Path|/etc/locale.gen}}. 

{{Code|Ajouter des locales à /etc/locale.gen|<pre>
en_GB ISO-8859-1
en_GB.UTF-8 UTF-8
de_DE ISO-8859-1
de_DE@euro ISO-8859-15
</pre>
}}

The next step is to run {{c|locale-gen}}. It will generate all the locales specified in the {{Path|/etc/locale.gen}} file and write them to the locale-archive ({{Path|/usr/lib/locale/locale-archive}}). 

{{RootCmd|locale-gen|output=<pre>
 * Generating 4 locales (this might take a while) with 1 jobs
 *  (1/4) Generating en_GB.ISO-8859-1 ...                       [ ok ]
 *  (2/4) Generating en_GB.UTF-8 ...                            [ ok ]
 *  (3/4) Generating de_DE.ISO-8859-1 ...                       [ ok ]
 *  (4/4) Generating de_DE.ISO-8859-15@euro ...                 [ ok ]
 * Generation complete
</pre>}}

{{Note|<code>locale-gen</code> est disponible dans <code>glibc-2.3.6-r4</code> et dans les versions postérieures. Si vous disposez d'une version plus ancienne de  glibc, vous devriez la mettre à jour maintenant.}}

Vous pouvez vérifier que les locales que vous avez sélectionnées sons disponibles en exécutant <code>locale -a</code>.

{{Cmd|locale -a|output=<pre>
C
POSIX
de_DE
de_DE.iso88591
de_DE.iso885915@euro
de_DE@euro
deutsch
en_GB
en_GB.iso88591
en_GB.utf8
german
</pre>}}

The {{Path|/usr/lib/locale/locale-archive}} file can be displayed using the strings command.

{{Cmd|strings /usr/lib/locale/locale-archive {{!}} less}}

=== Configurer une  locale ===

==== OpenRC ==== 

When using OpenRC locale settings are stored in environment variables. These are typically set in the {{Path|/etc/env.d/02locale}} (for system-wide settings) and {{Path|~/.bashrc}} (for user-specific settings) file.  More details can be found in the [[UTF-8#Setting_the_locale|UTF-8]] article.  The system wide settings ({{Path|/etc/env.d/02locale}}) can be managed through {{c|eselect locale}}. For instance, to set the <var>LANG</var> variable to the <code>C</code> value:

{{RootCmd|eselect locale list|output=<pre>
Available targets for the LANG variable:
  [1]   C 
  [2]   POSIX
  [3]   en_US
  [4]   en_US.iso885915
  [5]   en_US.utf8
  [ ]   (free form)
</pre>}}

{{RootCmd|eselect locale set 1}}

Bien-sûr, vous pouvez éditer le fichier à la main et diversifier les variables de la locale.

{{FileBox|filename=/etc/env.d/02locale|title=Setting the default system locale in /etc/env.d/02locale|lang=bash|1=
LANG="de_DE.UTF-8"
LC_COLLATE="C"
}}

{{Note|Utilisez <code>de_DE@euro</code> pour LANG si vous voulez utiliser le symbole de l'Euro(â‚¬) sur des locales non basées sur l'UTF-8.}}

Il est également possible, et très courant en particulier dans un environnement UNIX traditionnel, de laisser la configuration globale inchangée, c.à.d. dans la locale  "<code>C</code>". Les utilisateurs peuvent toujours spécifier leur locale préférée dans leur propre fichier rc de shell : 

{{FileBox|filename=~/.bashrc|title=Setting the user locale|lang=bash|1=
export LANG="de_DE.UTF-8"
export LC_COLLATE="C"
}}

Une autre manière de configurer le système, c'est de le laisser dans la locale par défaut C, mais d'activer la représentation UTF-8 des caractères en même temps. Cette option se met en place en utilisant les réglages suivants dans {{Path|/etc/env.d/02locale}} : 

{{Code|Utiliser la locale traditionnelle C tout en spécifiant UTF-8|<pre>
LC_CTYPE=de_DE.UTF-8
</pre>
}}

En utilisant l'extrait de code ci-dessus, les utilisateurs seront en mesure de voir les noms de fichiers correctement localisés, sans être forcés d'adopter votre langue préférée. 

Une fois que vous avez définie la locale correcte, assurez-vous de mettre à jour vos variables d'environnement pour que votre système les prenne en compte.

Pour une locale au niveau du système entier :

{{RootCmd|env-update && source /etc/profile}}

Pour une locale spécifique à l'utilisateur :

{{Cmd|source ~/.bashrc}}

Après cela, vous devez tuer votre serveur X en pressant  {{Key|Ctrl}} + {{Key|Alt}} + {{Key|Backspace}}, vous déconnecter, puis vous reconnecter en tant qu'utilisateur. 

Vérifiez maintenant si les changements sont effectifs : 

{{Cmd|locale}}

==== systemd ====

Si vous utilisez systemd, vous devriez définir votre locale avec la commande <code>localectl</code>. Consultez la liste des locales disponibles avec :

{{RootCmd|localectl list-locales}}

Puis, définissez la locale dont vous avez besoin :

{{RootCmd|<nowiki>localectl set-locale LANG=de_DE.utf8</nowiki>}}

Pour terminer, vérifiez si le résultat est correct :

{{RootCmd|<nowiki>localectl | grep "System Locale"</nowiki>|output=<pre>
   System Locale: LANG=de_DE.utf8
</pre>}}

== Agencement de clavier pour la console ==

=== OpenRC ===

L'agencement de clavier utilisé par la console est défini dans le fichier {{Path|/etc/conf.d/keymaps}} par la variable  <code>keymap</code>. Les valeurs acceptables peuvent être trouvées dans {{Path|/usr/share/keymaps/YOUR_ARCH/}}. {{Path|i386}} possède des subdivisions supplémentaire pour les agencements({{Path|qwerty/}}, {{Path|azerty/}}, etc.). Quelques langues possèdent des options multiples, et vous devrez peut-être faire des essais pour déterminer laquelle vous convient le mieux. 

{{FileBox|filename=/etc/conf.d/keymaps|title=Setting the console keymap|lang=bash|1=
keymap="de"
#keymap="de-latin1"
#keymap="de-latin1-nodeadkeys"
}}

=== systemd ===

Avec systemd, l'agencement de clavier utilisé par la console peut être défini en utilisant la commande <code>localectl</code>. Commencez par vérifier les agencements disponibles :

{{RootCmd|localectl list-keymaps}}

Puis, définissez quel agencement vous voulez pour la console :

{{RootCmd|localectl set-keymap it}}

Pour terminer, vérifiez si l'agencement a été correctement pris en compte :

{{RootCmd|<nowiki>localectl | grep "VC Keymap"</nowiki>|output=<pre>
       VC Keymap: it
</pre>}}

== Agencement de clavier pour le serveur  X  ==

=== OpenRC ===

The keyboard layout to be used by the X server is specified in {{Path|/etc/X11/xorg.conf.d/30-keyboard.conf}} by the <var>XkbLayout</var> option. For details visit the [[Xorg/Guide#Configuring_the_keyboard|Xorg guide]].

=== systemd ===

Avec systemd, l'agencement de clavier pour le serveur X11 peut être défini en utilisant la commande <code>localectl</code>. Commencez par consulter les agencements disponibles pour X11 :

{{RootCmd|localectl list-x11-keymap-layouts}}

Puis définissez l'agencement que vous voulez pour X11 :

{{RootCmd|localectl set-x11-keymap it}}

Pour terminer, vérifiez si l'agencement de clavier pour le serveur X11 a été correctement pris en compte :

{{RootCmd|<nowiki>localectl | grep "X11 Layout"</nowiki>|output=<pre>
      X11 Layout: it
</pre>}}

== Le symbole de l'Euro pour la Console ==

=== OpenRC ===

Pour que votre console puisse afficher le symbole de l'Euro, vous devez définir <code>consolefont</code> dans {{Path|/etc/conf.d/consolefont}} comme étant un fichier qui se trouve dans {{Path|/usr/share/consolefonts/}} (sans le  <code>.psfu.gz</code> ). <code>lat9w-16</code> comporte le symbole de l'Euro. 

{{Code|Définir la police de la  console|<pre>
consolefont="lat9w-16"
</pre>
}}

Vous devriez vérifier que <code>consolefont</code> est dans le niveau d'exécution ''boot'' : 

{{RootCmd|rc-update -v show {{!}} grep consolefont}}

Si aucun niveau d'exécution n'est affiché pour <code>consolefont</code> , alors ajouté la au niveau approprié : 

{{RootCmd|rc-update add consolefont boot}}

== Le symbole de l'Euro dans  X ==

=== La plupart des applications ===

Pouvoir utiliser l'Euro correctement dans X est un peu plus difficile. La première chose à faire est de changer la définition de <code>fixed</code> et de <code>variable</code> dans {{Path|/usr/share/fonts/misc/fonts.alias}} pour vous retrouver dans <code>iso8859-15</code> au lieu de <code>iso8859-1</code> . 

{{Code|Setting default X fonts|<pre>
fixed        -misc-fixed-medium-r-semicondensed--13-120-75-75-c-60-iso8859-15
variable     -*-helvetica-bold-r-normal-*-*-120-*-*-*-*-iso8859-15
</pre>
}}

Quelques applications utilisent leurs propres polices, et vous devez leur demander à chacune d'utiliser une police comprenant le symbole de l'euro. Vous pouvez le faire au niveau utilisateur dans {{Path|.Xdefaults}} (vous pouvez copier ce fichier dans {{Path|/etc/skel/}} pour une utilisation par de nouveaux utilisateurs), ou à un niveau global pour n'importe quelle application avec un fichier de ressources dans {{Path|/usr/share/X11/app-defaults/}} (tel que xterm). Dans ces fichiers, vous devez généralement modifier une ligne existante, plutôt que d'en ajouter une nouvelle. Par exemple, pour modifier votre ''xterm'' : 

{{Cmd|echo 'XTerm*font: fixed' >> ~/.Xresources 
|xrdb -merge ~/.Xresources}}

=== Le symbole de l'euro dans  (X)Emacs ===

Pour utiliser le symbole de l'euro dans (X)Emacs, ajoutez la ligne suivante à {{Path|.Xdefaults}} : 

{{Code|définir la police pour emacs|<pre>
Emacs.default.attributeFont: -*-courier-medium-r-*-*-*-120-*-*-*-*-iso8859-15
</pre>
}}

Pour XEmacs (pas l'Emacs simple), vous devez en faire un peu plus. Dans {{Path|/home/user/.xemacs/init.el}} , ajoutez : 

{{Code|définir la police pour  xemacs|<pre>
(define-key global-map '(EuroSign) '[€])
</pre>
}}

== NLS ==

For message based localization to work in programs that support it and have the <code>nls</code> (Native language support) USE flag, you will probably need to have the programs compiled with this flag set. Message strings are installed in {{Path|/usr/share/locale/<locale>/LC_MESSAGES/<package>.mo}} files. Most of the programs using nls also need the gettext library to extract and use localized messages. Of course, Portage will automatically install it when needed.

Après avoir activé l'option  <code>nls</code> de la variable USE, il peut être nécessaire de réinstaller certains paquets :

{{Emerge|params+=--newuse --deep --with-bdeps=y|@world}}

== LINGUAS ==

There is also an additional localization variable called <var>[https://devmanual.gentoo.org/general-concepts/linguas/ LINGUAS]</var>, which affects the localization files that get installed in gettext-based programs, and decides which GUI language packs should be downloaded and installed for some specific software packages, such as [[Firefox]], [[Thunderbird]], [[KDE#Localization|kde-base/kde-l10n]] or [[LibreOffice|app-office/libreoffice-l10n]]. The variable takes in ''space''-separated list of language codes, and a suggested place to set it is {{Path|[[:/etc/portage/make.conf]]}}: 

{{RootCmd|nano -w /etc/portage/make.conf|output=<pre>
## (Ajout de la variable  LINGUAS. Par exemple pour l'allemand, le finnois et l'anglais:)
LINGUAS="de fi en"
</pre>}}

With <code>LINGUAS=""</code>, most ebuilds would install only the packages' default language but none of the <code>LC_MESSAGES</code> files. They would also not download and install any of the further language packs. For instance, the currently stable [[LibreOffice|app-office/libreoffice]] receives further language support through {{Package|app-office/libreoffice-l10n}} which supports download and installation of the language packs defined in <code>LINGUAS</code>. Since the origin language of libreoffice is <code>en_US</code>, it does not have <code>en_US</code> flag in {{Package|app-office/libreoffice-l10n}}. So with <code>LINGUAS=""</code>, libreoffice still supports <code>en_US</code>.

To see the status of GUI translation, hyphenation, spell checking and other localisations on your language, please refer to the [https://translations.documentfoundation.org/ LibreOffice translation web site].

For finer grained control it can be set per package in {{Path|[[:/etc/portage/package.use]]}}: 

{{FileBox|filename=/etc/portage/package.use|lang=bash|1=
www-client/firefox linguas_de linguas_pt_BR linguas_en_GB
}}

A list of installed programs making use of the <var>LINGUAS</var> variable and their supported languages can be shown as follows:

{{Cmd|eix -I -U linguas}}

A list of <var>LINGUAS</var> values that can be used is provided as {{Path|/usr/portage/profiles/desc/linguas.desc}}: 

{{Cmd|grep -i french /usr/portage/profiles/desc/linguas.desc|output=<pre>
fr - French locale
fr_CA - French locale for Canada
fr_FR - French locale for France
</pre>
}}

After setting the <code>linguas</code> USE flag it may be necessary to re-emerge some packages:

{{Emerge|params+=--newuse --deep --with-bdeps=y|@world}}

== See also ==


* [[Handbook:AMD64/Installation/Base#Configure_locales|Configuring locales]] (Gentoo Handbooks)
* [[Evdev#Keyboard_layout|Keyboard layout]] inside the Evdev article
* [[X resources]]

== External resources == 

* [http://www.gnu.org/software/libc/manual/html_node/Locales.html Locales and Internationalization] (gnu.org)

[[Category:Localization]] {{Migrated|originalauthors=Alexander Holler, Steven Lucy, Benny Chuang, Lars Weiler, Tobias Scherbaum, Flammie Pirinen, nightmorph, klondike}}
