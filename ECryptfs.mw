{{stub}}
{{InfoBox stack
|{{InfoBox homepage|http://ecryptfs.org|header=true}}
|{{InfoBox wikipedia|ECryptfs}}
|{{InfoBox ohloh|eCryptfs}}
}}

'''eCryptfs''' is [[Article description::an in-kernel file encryption suite.]]

== Installation ==

=== Kernel ===

{{KernelBox|title=Enable eCryptfs support|1=
File systems  --->
    [*] Miscellaneous filesystems  --->
        <M>   eCrypt filesystem layer support
Security options  --->
    [*] Enable access key retention support
}}

=== USE flags ===

{{USEflag|package=sys-fs/ecryptfs-utils}}

=== Emerge ===

Install {{Package|sys-fs/ecryptfs-utils}}:

{{Emerge|sys-fs/ecryptfs-utils}}

Note, the USE flags above are not up to date. {{Package|sys-fs/ecryptfs-utils}} must be compiled with the USE flag <nowiki>suid</nowiki> in order to use the auto-mount capabilities of PAM as described below.

{{Cmd|USE{{=}}"suid" emerge sys-fs/ecryptsfs-utils}}

== See Also ==

[[Mount_Encrypted_Ubuntu_Home/Guide]]


== Required Changed to /etc/pam.d/ ==
{{GenericCmd| diff -u /etc/pam.d/system-auth.orig /etc/pam.d/system-auth |output=<pre>
--- /etc/pam.d/system-auth.orig	2018-04-26 08:50:31.655717985 +0200
+++ /etc/pam.d/system-auth	2018-04-26 09:34:01.581616342 +0200
@@ -1,12 +1,15 @@
 auth		required	pam_env.so 
 auth		required	pam_unix.so try_first_pass likeauth nullok 
+auth            required        pam_ecryptfs.so unwrap
 auth		optional	pam_permit.so
 account		required	pam_unix.so 
 account		optional	pam_permit.so
 password	required	pam_cracklib.so difok=2 minlen=8 dcredit=2 ocredit=2 retry=3 
+password        optional        pam_ecryptfs.so
 password	required	pam_unix.so try_first_pass use_authtok nullok sha512 shadow 
 password	optional	pam_permit.so
 session		required	pam_limits.so 
 session		required	pam_env.so 
 session		required	pam_unix.so 
+session         optional        pam_ecryptfs.so
 session		optional	pam_permit.so
</pre>
}}

== External resources ==

* [https://wiki.archlinux.org/index.php/ECryptfs eCryptfs on the Arch wiki]

[[Category:Filesystems]]
[[Category:Security]]
