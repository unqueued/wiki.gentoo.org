<languages />

{{Confused|Genkernel}}

{{InfoBox stack
|{{InfoBox homepage|https://wiki.gentoo.org/wiki/Project:Portage-Tools|header=true}}
|{{InfoBox wikipedia|gentoolkit}}
|{{InfoBox gitweb|gentoolkit.git/}}
}}

{{Metadata|abstract=Gentoolkit は、 Gentoo のシステムの管理を容易にするためのツールセットです。この文書は、 Gentoolkit にあるいくつかのツールについての基本的部分を述べています。}}

Gentoolkit は、 Gentoo のシステムの管理を容易にするためのツールセットです。この文書は、 Gentoolkit にあるいくつかのツールについての基本的部分を述べています。

== はじめに ==

=== Gentoolkit とは何ですか？ ===

Gentooはユニークなディストリビューションであり、他のディストリビューションには全然存在しないような複雑なところがあります。Gentooの開発者や貢献者はそうした複雑さを見つけると、それらに対処するユーザーや管理者を補助するためのツールを作成しました。多くのツールが Gentoo Project に寄贈され、 {{Package|app-portage/gentoolkit}} に含まれています。 

{{Note|いまのところ、Gentoolkit には2つのバージョンがあります: {{Package|app-portage/gentoolkit}} と {{Package|app-portage/gentoolkit-dev}} です。前者は管理用のスクリプトを含むのに対し、後者はGentooの''開発''の補助に特化したスクリプトを含んでいます。Gentooの開発者は Gentoolkit のメンテナーに連絡することで自身のスクリプトを {{Package|app-portage/gentoolkit-dev}} に含めることができます。この文書の残りの部分では {{Package|app-portage/gentoolkit}} のみについて触れます。}}

{{Note|バージョン0.4.0から、{{Package|app-portage/gentoolkit-dev}} は {{Package|app-portage/gentoolkit}} に統合されました。}}

Gentoolkit は、ユーザーのパッケージ管理や彼らのシステムで起こっている事の追跡を補助するための有用なツールを非常にたくさん含んでいます。多くのユーザー - 特にシステムをしばしばアップデートするユーザー - は Gentoolkit をインストールしておくことで恩恵を受けるでしょう。

== インストール ==

=== Emerge ===

他の多くの Gentoo パッケージと同様に、インストールは {{c|emerge}} するだけとシンプルです: 

{{Emerge|app-portage/gentoolkit}}

{{Note|Gentoolkit のツールの多くはインストールされているシステムについての重要な情報を表示するものか、あるいはルート権限を必要とするものです。そのため、いくつかのプログラムはルート権限を持つユーザーによってのみ実行可能(あるいは正常に機能させることが可能)です。}}

=== ドキュメントを探す ===

プログラムのすべてのドキュメント(manページを除く)は {{Path|/usr/share/doc/gentoolkit-[version]/[program-name]/}} に保存されています。

== euse ==

{{c|euse}} は様々な場所のUSEフラグを見たり、セット・アンセットするためのツールです。USEフラグの詳細については [[Handbook:X86/Working/USE|USE Flags]] を参照してください。完全なヘルプとすべてのオプションについては {{c|euse -h}} をご覧ください。

=== USEフラグを表示、セット、アンセットする ===

{{c|euse -a}} コマンドは現在有効なUSEフラグを読み込んで表示します。 

{{Note|現在、{{c|euse}} はフラグがセットされているか否か、またフラグがセットされているすべての場所を表示するために5つの行を使用します。各行は以下のとおりです -- +/-、'''E'''nvironmentでセットされているか、{{Path|make.'''C'''onf}}でセットされているか、{{Path|make.'''D'''efaults}}でセットされれているか、{{Path|make.'''G'''lobals}}でセットされているか。出力は[+ECDG]のようになります。}}

{{RootCmd|euse -a|output=<pre>
X                   [+ CD ]
aalib               [+    ]
acpi                [+ C  ]
alsa                [+ C  ]
apache2             [+ C  ]
apm                 [+  D ]
avi                 [+  D ]
berkdb              [+  D ]
bitmap-fonts        [+  D ]
bonobo              [+    ]
cdr                 [+ C  ]
crypt               [+ CD ]
cscope              [+ C  ]
cups                [+ CD ]
curl                [+    ]
emboss              [+  D ]
encode              [+  D ]
esd                 [+    ]
fam                 [+    ]
fbcon               [+ C  ]
firefox             [+ C  ]
font-server         [+  D ]
foomaticdb          [+  D ]
fortran             [+  D ]
gd                  [+ C  ]
gdbm                [+  D ]
gif                 [+ CD ]
gimpprint           [+ C  ]
gnome               [+ CD ]
gphoto2             [+    ]
gpm                 [+ CD ]
gstreamer           [+ C  ]
gtk                 [+  D ]
gtkhtml             [+ C  ]
guile               [+    ]
imagemagick         [+    ]
imlib               [+ CD ]
innodb              [+    ]
ipv6                [+  D ]
javascript          [+ C  ]
jpeg                [+ CD ]
kde                 [+  D ]
ldap                [+    ]
libg++              [+ CD ]
libwww              [+ CD ]
mad                 [+ CD ]
mbox                [+ C  ]
md5sum              [+ C  ]
mikmod              [+ CD ]
mmx                 [+ C  ]
motif               [+ CD ]
mp3                 [+    ]
mpeg                [+ CD ]
mpeg4               [+ C  ]
mysql               [+ C  ]
ncurses             [+ CD ]
nls                 [+  D ]
nvidia              [+ C  ]
odbc                [+    ]
offensive           [+    ]
ogg                 [+ CD ]
opengl              [+ CD ]
oss                 [+  D ]
pam                 [+ CD ]
pdflib              [+ CD ]
perl                [+ CD ]
png                 [+ CD ]
python              [+ CD ]
qt                  [+  D ]
quicktime           [+ CD ]
readline            [+ CD ]
ruby                [+    ]
sdl                 [+ CD ]
slang               [+  D ]
spell               [+ CD ]
sse                 [+ C  ]
ssl                 [+ CD ]
svga                [+ CD ]
tcltk               [+ C  ]
tcpd                [+  D ]
tiff                [+ C  ]
truetype            [+ CD ]
usb                 [+ C  ]
vanilla             [+ C  ]
x86                 [+ C  ]
xml                 [+    ]
xosd                [+ C  ]
xv                  [+ CD ]
xvid                [+ C  ]
zlib                [+ CD ]
</pre>
}}

同様に、有効なグローバルUSEフラグを表示するには {{c|euse -a -g}} コマンドが使用されます。{{c|euse -a -l}} コマンドは有効なローカルUSEフラグについて同様にします。<code>-g</code> や <code>-l</code> は {{c|euse}} のサブオプションであり、正しく動作するにはこれらの前に(<code>-a</code>のような)オプションが必要です。 

{{RootCmd|euse -a -l|output=<pre>
bitmap-fonts        [+  D ]
font-server         [+  D ]
fortran             [+  D ]
gimpprint           [+ C  ]
md5sum              [+ C  ]
mpeg4               [+ C  ]
nvidia              [+ C  ]
offensive           [+    ]
truetype            [+ CD ]
</pre>
}}

{{c|euse}} はUSEフラグをセットまたはアンセットすることができます。このために使われるコマンドは {{c|euse -E flagname}} (フラグを有効化) および {{c|euse -D flagname}} (フラグを無効化)です。 

{{Warning|{{c|euse -E}} や {{c|euse -D}} コマンドそれ自体を(フラグなしで)使用してはいけません。 {{Path|/etc/portage/make.conf}} 内で'''すべてのUSEフラグをセット/アンセットしてしまいます'''。バックアップが {{Path|/etc/portage/make.conf.euse_backup}} に保存されはしますが、{{c|euse -E}} や {{c|euse -D}} を使用する際は注意を払ってください！}}

USEフラグを有効化する:

{{RootCmd|euse -E 3dfx|output=<pre>
/etc/portage/make.conf was modified, a backup copy has been placed at /etc/portage/make.conf.euse_backup
</pre>}}

コマンドが実行された後の {{Path|/etc/portage/make.conf}} ファイルはこのようになります:

{{FileBox|filename=make.conf|title=3dfx USEフラグを有効化した後|lang=bash|1=
USE="alsa acpi apache2 -arts cups cdr crypt cscope -doc fbcon \
     firefox gd gif gimpprint gnome gpm gstreamer gtkhtml imlib \
     innodb -java javascript jpeg libg++ libwww mad mbox md5sum \
     mikmod mmx motif mpeg mpeg4 mysql ncurses nvidia \
     ogg odbc offensive opengl pam pdflib perl png python \
     quicktime readline sdl spell sse ssl svga tcltk tiff truetype usb \
     vanilla X xosd xv xvid x86 zlib 3dfx"
}}

USEフラグを無効化する:

{{RootCmd|euse -D 3dfx|output=<pre>
/etc/portage/make.conf was modified, a backup copy has been placed at /etc/portage/make.conf.euse_backup
</pre>}}

コマンドの後の {{Path|/etc/portage/make.conf}}:

{{FileBox|filename=make.conf|title=3dfx USEフラグを無効化した後|lang=bash|1=
USE="alsa acpi apache2 -arts cups cdr crypt cscope -doc fbcon \
     firefox gd gif gimpprint gnome gpm gstreamer gtkhtml imlib \
     innodb -java javascript jpeg libg++ libwww mad mbox md5sum \
     mikmod mmx motif mpeg mpeg4 mysql ncurses nvidia \
     ogg odbc offensive opengl pam pdflib perl png python \
     quicktime readline sdl spell sse ssl svga tcltk tiff truetype usb \
     vanilla X xosd xv xvid x86 zlib -3dfx"
}}

{{Note|{{c|euse}} はフラグを {{Path|/etc/portage/make.conf}} から物理的に除去しません。{{c|euse}} は<code>-</code> (マイナス) をフラグの前に追加してフラグをアンセットします。不要な変数を避けるため、{{Path|/etc/portage/make.conf}} を手動でクリーンアップする必要があるかもしれません。あるいは、<code>-P</code> (purge)オプションを使用してフラグを取り除きます。たとえば、{{c|euse -P 3dfx}} は <code>3dfx</code> フラグを取り除きます。}}

== そのほかのツール ==

=== revdep-rebuild ===

このツールはGentooのリバース依存関係を再構築します。これは依存パッケージの更新の結果壊れたパッケージを探すため、インストールされている ebuild をスキャンします。それらのパッケージをユーザーのために自動的にemergeすることもできますが、一定のパッケージは現在インストールされている依存関係の下では正しく動作しないこともあり、こうした場合にはその壊れたパッケージをより最近のバージョンにアップグレードしなければなりません。{{c|revdep-rebuild}} はフラグを {{c|emerge}} に渡すので、<code>--pretend</code> フラグを使用して何が再度emergeされるのか事前に確認することができます。 

{{RootCmd|revdep-rebuild -p|output=<pre>
 * Configuring search environment for revdep-rebuild
  
 * Checking reverse dependencies
 * Packages containing binaries and libraries broken by a package update
 * will be emerged.
  
 * Collecting system binaries and libraries
 * Generated new 1_files.rr
 * Collecting complete LD_LIBRARY_PATH
 * Generated new 2_ldpath.rr
 * Checking dynamic linking consistency
[ 48% ]  *   broken /usr/lib/gstreamer-0.10/libgsttaglib.la (requires /usr/lib/libtag.la)
[ 64% ]  *   broken /usr/lib/libgdkglext-x11-1.0.la (requires /usr/lib/libGLU.la)
[ 67% ]  *   broken /usr/lib/libgtkglext-x11-1.0.la (requires /usr/lib/libGLU.la)
[ 85% ]  *   broken /usr/lib/python2.6/site-packages/gtk-2.0/gtk/gdkgl/_gdkgl.la (requires /usr/lib/libGLU.la)
 *   broken /usr/lib/python2.6/site-packages/gtk-2.0/gtk/gtkgl/_gtkgl.la (requires /usr/lib/libGLU.la)
[ 97% ]  *   broken /usr/qt/3/lib/libqt-mt.la (requires -lpng)
[ 100% ]
 * Generated new 3_broken.rr
 * Assigning files to packages
 *   /usr/lib/gstreamer-0.10/libgsttaglib.la -> media-plugins/gst-plugins-taglib
 *   /usr/lib/libgdkglext-x11-1.0.la -> x11-libs/gtkglext
 *   /usr/lib/libgtkglext-x11-1.0.la -> x11-libs/gtkglext
 *   /usr/lib/python2.6/site-packages/gtk-2.0/gtk/gdkgl/_gdkgl.la -> dev-python/pygtkglext
 *   /usr/lib/python2.6/site-packages/gtk-2.0/gtk/gtkgl/_gtkgl.la -> dev-python/pygtkglext
 *   /usr/qt/3/lib/libqt-mt.la -> x11-libs/qt
 * Generated new 4_raw.rr and 4_owners.rr
 * Cleaning list of packages to rebuild
 * Generated new 4_pkgs.rr
 * Assigning packages to ebuilds
 * Generated new 4_ebuilds.rr
 * Evaluating package order
 * Generated new 5_order.rr
 * All prepared. Starting rebuild
emerge --oneshot --pretend  dev-python/pygtkglext:0
media-plugins/gst-plugins-taglib:0.10
x11-libs/gtkglext:0
x11-libs/qt:3
  
These are the packages that would be merged, in order:
  
Calculating dependencies... done!
[ebuild   R   ] media-plugins/gst-plugins-taglib-0.10.17
[ebuild   R   ] x11-libs/gtkglext-1.2.0
[ebuild   R   ] x11-libs/qt-3.3.8b-r2
[ebuild   R   ] dev-python/pygtkglext-1.1.0
 * Now you can remove -p (or --pretend) from arguments and re-run revdep-rebuild.
</pre>
}}

パッケージを再ビルドするには {{c|revdep-rebuild}} を <code>-p</code> フラグなしで実行します。これで、リストされたパッケージが再度emergeされます。 

=== glsa-check ===

<tt>[https://www.gentoo.org/support/security/ glsa-check]</tt> はさまざまな [https://security.gentoo.org/glsa/ GLSA] (Gentoo Linux Security Advisory)を追跡する主にテスト目的のツールであり、やがては {{c|emerge}} や {{c|equery}} に統合されるでしょう。

=== eread ===

{{c|eread}} はバージョン2.1以降の Portage によって生成されるelogファイルを表示するシンプルなユーティリティーです。elogファイルの保存は、2つの変数を {{Path|/etc/portage/make.conf}} でセットすることで有効化できます: 

{{FileBox|filename=make.conf|title=elogを有効化する|lang=bash|1=
PORTAGE_ELOG_CLASSES="log"
PORTAGE_ELOG_SYSTEM="save"
}}

{{Note|これは elog メッセージを保存する唯一の方法です。Portage の elog システムがどのように動作するかについての詳細は [[Handbook:X86/Portage/Files#Logging_features|Portage Handbook]] 内の適切なページを参照してください。}}

elog を思うように設定できたら、{{c|eread}} を実行してログファイルを表示します。 

{{Cmd|eread|output=<pre>
This is a list of portage log items. Choose a number to view that file or type
q to quit.
  
1) app-portage:gentoolkit-0.2.4_pre2:20070320-000256.log
2) app-portage:gentoolkit-0.2.4_pre2:20070320-000258.log
3) app-portage:gentoolkit-0.2.4_pre2:20070320-000319.log
4) app-portage:gentoolkit-0.2.3:20070320-000408.log
Choice?
</pre>
}}

番号を選択すると <var>PAGER</var> 環境変数で指定されているページングプログラムを使用してファイルが表示されます。<var>PAGER</var> がセットされていない場合には {{c|less}} が使用されます。<var>PAGER</var> 環境変数は {{c|eselect}} (<code>pager</code> モジュール)を使用してセットできます。

elog アイテムを表示した後、ファイルを削除するかどうか尋ねられます。

=== eclean ===

{{c|eclean}} は古いソースファイルや古いバイナリパッケージをシステムから削除するツールです。 

パッケージをビルド・インストールする際にはソースファイルがダウンロードされ <var>DISTDIR</var> 、通常は {{Path|/usr/portage/distfiles}} に保存されます。これらは、定期的に掃除しないと時間とともに数ギガバイトのデータが蓄積してしまうこともあります。ユーザーは、{{c|eclean-dist}}を実行して <var>DISTDIR</var> のソースファイルをクリーンアップする必要があります。

It is possible to create archives of installed packages by using {{c|quickpkg}} or <code>FEATURES="buildpkg"</code>. These archived packages are kept in <var>PKGDIR</var>, usually {{Path|/usr/portage/packages}}. When they are no longer needed, or if they are too old, {{c|eclean-pkg}} can be ran to remove them from <var>PKGDIR</var>. It is a good way to ensure that any binary packages on the system are only the latest versions. 

For more information on {{c|eclean}} and tips on maintaining a cruft-free system, please read {{c|man eclean}} or check the [[eclean]] article.

== 参考 ==

* [[equery]]
* [[eclean]]
* [[epkginfo]]
* [[q applets]]

{{Migrated|originalauthors=Matt Butcher, John P. Davis, Erwin, Shyam Mani, Xavier Neys, Karl Trygve, José Luis Rivero, Joshua Saddler, Douglas Anderson}}
