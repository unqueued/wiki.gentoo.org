<languages />

Эта статья описывает удаление и очистку [[KDE/ru|KDE]].

== Введение ==

В целях минимизации проблем рекомендуется начать с чистого окружения, особенно если речь идет о следующих действиях:

* Понижение версии KDE (например, со снимков/live сборок до версии, находящейся в Portage).
* Полное обновление KDE 3 до KDE 4.
* Переход с одного [[overlay/ru|оверлея]] на другой или на официальные пакеты.

== Удаление KDE ==

=== Удаление всех пакетов удаленно зависящих от KDE ===

Один из возможных путей полного удаления старой инсталляции KDE, явное удаление всех пакетов из kde-base и зависимостей от {{Package|kde-base/kdelibs}}:

{{Emerge|params+=--depclean|kde-base/kdelibs $(qlist -IC 'kde-base/*') $(for name in $(qlist -IC {{!}} grep -v '^kde-base/') ; do ( qdepends -C $name {{!}} grep -q kdelibs ) && echo $name ; done)}}

Обратите внимание, что эта команда удалит не только KDE, но также все пакеты, которые от него зависят (безусловно, либо посредством USE-флага), например, libreoffice[kde].

=== Удаление пакетов KDE, предоставленных KDE-оверлеем ===

KDE также можно удалить через sets (как это описывалось в [[KDE/Overlay/ru|kde overlay]]):

{{Emerge|params+=-C|@kde-4.X @kdebase-4.X @kde-3.5}}

=== Удаление оверлеев ===

If any old overlays are still defined, deselect them so that there are no conflicts with the KDE ebuilds.

=== Clean up Portage definitions ===

Look in {{Path|/etc/portage}} for any KDE specific settings in {{Path|package.mask}}, {{Path|package.unmask}}, {{Path|package.keywords}} and {{Path|package.accept_keywords}}. Clean up those definitions pertaining to KDE packages.

=== Удаление ненужных зависимостей ===

After uninstalling KDE packages, ask Portage to uninstall any now unneeded dependencies:

{{Emerge|params+=--depclean|&nbsp;}}

== Clean up KDE remains ==

If the system uses the ''desktop/kde'' [[Profile (Portage)|profile]], change to the ''desktop'' profile. Also check in {{Path|/etc/portage/make.conf}} and other configurations files what the active USE flags are.

Remove the remaining KDE configuration files and app data in the following folders:

* {{Path|~/.kde}} - Configuration files and app data of KDE 3.
* {{Path|~/.kde4}} - Configuration files and app data of KDE 4.
* {{Path|/usr/kde/}} - App data of KDE 3.
* {{Path|/var/lib/kde}} - Configuration files of KDE 4.
* {{Path|/var/lib/kdm}} - Configuration files of KDM.
* {{Path|/var/log/kdm.log}} - KDM log file.

The following folders are shared folders. Only remove the KDE related files:

* {{Path|~/.config}} - Configuration files of KDE apps.
* {{Path|~/.local}} - App data of KDE apps.
* {{Path|/etc/conf.d/xdm}} - XDM configuration file.

[[Category:KDE]]
