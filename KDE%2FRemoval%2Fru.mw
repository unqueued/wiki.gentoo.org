<languages />

Эта статья описывает удаление и очистку [[KDE/ru|KDE]].

== Введение ==

В целях минимизации проблем рекомендуется начать с чистого окружения, особенно если речь идет о следующих действиях:

* Понижение версии KDE (например, со снимков/live сборок до версии, находящейся в Portage).
* Полное обновление KDE 3 до KDE 4.
* Переход с одного [[overlay/ru|оверлея]] на другой или на официальные пакеты.

== Удаление KDE ==

=== Удаление всех пакетов удаленно зависящих от KDE ===

Один из возможных путей полного удаления старой инсталляции KDE, явное удаление всех пакетов из kde-base и зависимостей от {{Package|kde-base/kdelibs}}:

{{Emerge|params+=--depclean|kde-base/kdelibs $(qlist -IC 'kde-base/*') $(for name in $(qlist -IC {{!}} grep -v '^kde-base/') ; do ( qdepends -C $name {{!}} grep -q kdelibs ) && echo $name ; done)}}

Обратите внимание, что эта команда удалит не только KDE, но также все пакеты, которые от него зависят (безусловно, либо посредством USE-флага), например, libreoffice[kde].

=== Удаление пакетов KDE, предоставленных KDE-оверлеем ===

KDE также можно удалить через sets (как это описывалось в [[KDE/Overlay/ru|kde overlay]]):

{{Emerge|params+=-C|@kde-4.X @kdebase-4.X @kde-3.5}}

=== Удаление оверлеев ===

Удалите старые оверлеи, чтобы избежать потенциальных конфликтов с файлами ebuild KDE.

=== Очистка файлов Portage ===

Удалите все строки, относящиеся к пакетам KDE, из файлов {{Path|package.mask}}, {{Path|package.unmask}}, {{Path|package.keywords}} и {{Path|package.accept_keywords}}, находящихся в каталоге {{Path|/etc/portage}}.

=== Удаление ненужных зависимостей ===

После удаления пакетов KDE удалите ненужные зависимости:

{{Emerge|params+=--depclean|&nbsp;}}

== Очистка системы ==

Если система использует [[Profile (Portage)|профиль]] ''desktop/kde'', переключитесь на профиль ''desktop''. Также проверьте USE-флаги в {{Path|/etc/portage/make.conf}} и других конфигурационных файлах.

Remove the remaining KDE configuration files and app data in the following folders:

* {{Path|~/.kde}} - Configuration files and app data of KDE 3.
* {{Path|~/.kde4}} - Configuration files and app data of KDE 4.
* {{Path|/usr/kde/}} - App data of KDE 3.
* {{Path|/var/lib/kde}} - Configuration files of KDE 4.
* {{Path|/var/lib/kdm}} - Configuration files of KDM.
* {{Path|/var/log/kdm.log}} - KDM log file.

The following folders are shared folders. Only remove the KDE related files:

* {{Path|~/.config}} - Configuration files of KDE apps.
* {{Path|~/.local}} - App data of KDE apps.
* {{Path|/etc/conf.d/xdm}} - XDM configuration file.

[[Category:KDE]]
