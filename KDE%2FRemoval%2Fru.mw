<languages />

Эта статья описывает удаление и очистку [[KDE/ru|KDE]].

== Введение ==

В целях минимизации проблем рекомендуется начать с чистого окружения, особенно если речь идет о следующих действиях:

* Понижение версии KDE (например, со снимков/live сборок до версии, находящейся в Portage).
* Полное обновление KDE 3 до KDE 4.
* Переход с одного [[overlay/ru|оверлея]] на другой или на официальные пакеты.

== Удаление KDE ==

=== Удаление всех пакетов удаленно зависящих от KDE ===

Один из возможных путей полного удаления старой инсталляции KDE, явное удаление всех пакетов из kde-base и зависимостей от {{Package|kde-base/kdelibs}}:

{{Emerge|params+=--depclean|kde-base/kdelibs $(qlist -IC 'kde-base/*') $(for name in $(qlist -IC {{!}} grep -v '^kde-base/') ; do ( qdepends -C $name {{!}} grep -q kdelibs ) && echo $name ; done)}}

Обратите внимание, что эта команда удалит не только KDE, но также все пакеты, которые от него зависят (безусловно, либо посредством USE-флага), например, libreoffice[kde].

=== Удаление пакетов KDE, предоставленных KDE-оверлеем ===

KDE также можно удалить через sets (как это описывалось в [[KDE/Overlay/ru|kde overlay]]):

{{Emerge|params+=-C|@kde-4.X @kdebase-4.X @kde-3.5}}

=== Удаление оверлеев ===

Если старые оверлеи все еще используются, удалите их, чтобы избежать потенциальных конфликтов с KDE-ebuild.

=== Очистка файлов Portage ===

Удалите все строки, относящиеся к пакетам KDE, из файлов {{Path|package.mask}}, {{Path|package.unmask}}, {{Path|package.keywords}} и {{Path|package.accept_keywords}}, находящихся в каталоге {{Path|/etc/portage}}.

=== Удаление ненужных зависимостей ===

После удаления пакетов KDE удалите ненужные зависимости:

{{Emerge|params+=--depclean|&nbsp;}}

== Очистка остатков KDE ==

Если система использует [[Profile (Portage)|профиль]] ''desktop/kde'', переключитесь на профиль ''desktop''. Также проверьте какие используются USE-флаги в {{Path|/etc/portage/make.conf}} и других конфигурационных файлах.

Удалите оставшиеся конфигурационные файлы KDE и данные приложений в следующих каталогах:

* {{Path|~/.kde}} — Конфигурационные файлы и данные приложений KDE 3.
* {{Path|~/.kde4}} — Конфигурационные файлы и данные приложений KDE 4.
* {{Path|/usr/kde/}} — Данные приложений KDE 3.
* {{Path|/var/lib/kde}} — Конфигурационные файлы KDE 4.
* {{Path|/var/lib/kdm}} — Конфигурационные файлы KDM.
* {{Path|/var/log/kdm.log}} — журнал KDM.

Следующие папки являются общими. Удалите только файлы, относящиеся к KDE:

* {{Path|~/.config}} — Конфигурационные файлы приложений KDE.
* {{Path|~/.local}} — Данные приложений KDE.
* {{Path|/etc/conf.d/xdm}} — конфигурационный файл XDM.

[[Category:KDE]]
