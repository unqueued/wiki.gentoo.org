<noinclude><languages/></noinclude>
{{Path|/etc/portage/repos.conf}} это каталог файлов или файл, который определяет месторасположение и настройки репозиториев используемые системой. Там определяется [https://gitweb.gentoo.org/repo/gentoo.git/tree/ репозиторий Gentoo] и, возможно, различные [[Overlay/ru|оверлеи]].

== Формат ==

{{Note|Пока Portage может обрабатывать {{Path|repos.conf}} как файл или каталог файлов. Предпочтительным способом для использования является '''каталог''', другие инструменты, такие как {{c|layman}} и {{c|mirrorselect}} требуют и ожидают, что это каталог. layman создает и управляет своим собственным файлом {{Path|layman.conf}} для регистрации установленных оверлеев в Portage. {{c|mirrorselect}} ищет файл {{Path|repos.conf/gentoo.conf}} для того чтобы изменить <code>sync-uri</code> параметр для репозитория Gentoo.
}}

* Имена файлов могут быть произвольными, с добавлением или без добавления суффикса, за исключением файла {{Path|repos.conf/gentoo.conf}}, который ожидает найти {{c|[[mirrorselect]]}}.
* Комментарии начинаются с <code>#</code> (нет встроенных комментариев).
* Конфигурация каждого репозитория указывается в отдельном файле или разделе, начинающийся с <code>[repository_name]</code>. Рекомендуется, чтобы  <code>[repository_name]</code> было таким же, как и имя, данное в [[Repository_format|repo_name]] файле.
* Атрибуты указываются в формате <code>attribute = value</code>.

== Поддерживаемые атрибуты в секции default ==

; <code>main-repo</code>
: Указывает главный репозиторий.
; <code>eclass-overrides</code>
: Заставляет все репозитории (inherit) наследовать eclass из указанных репозиториев. Установка этого атрибута, как правило, не рекомендуется, так как в результате изменения наследования в eclass может вызвать проблемы с производительностью из-за недействительности кэша метаданных.
: Утилиты {{c|egencache}}, {{c|emirrordist}} и {{c|repoman}} по умолчанию игнорируют этот параметр, так как для операции, выполняемых с помощью этих утилит, наследование не специфично (их операции сфокусированы на глобальных, не специфичных аспектах работы Portage и Gentoo репозитория). Такое поведение изменить с помощью <code>force = eclass-overrides</code>.
; <code>force</code>
: Задает имена атрибутов, которые должны быть принудительно соблюдены {{c|egencache}}, {{c|emirrordist}} и {{c|repoman}}. Допустимые значения: <code>aliases</code>, <code>eclass-overrides</code>, и <code>masters</code>.

== Поддерживаемые атрибуты в секции для репозиториев ==

; <code>aliases</code>
:  Specifies aliases of given repository. Setting this attribute is generally not recommended since resulting changes in eclass inheritance may trigger performance issues due to invalidation of metadata cache.
: The {{c|egencache}}, {{c|emirrordist}} and {{c|repoman}} tools ignore this parameter by default as their operations are generally not site-specific (their operations are focused on the global, non-customized aspects of portage and the Gentoo repository). This behavior can be overruled by setting <code>force = aliases</code>.
; <code>auto-sync</code>
: This setting determines if the repo will be synced during {{c|emerge --sync}} or {{c|emaint sync --auto}} runs. This allows for repositories to be synced only when desired via {{c|emaint sync --repo foo}}. Valid values: <code>yes</code>, <code>no</code>, <code>true</code>, <code>false</code>. If unset, the repo will be treated as set <code>yes</code>, <code>true</code>.
; <code>eclass-overrides</code>
: Makes all repositories inherit eclasses from specified repositories. Setting this attribute is generally not recommended since resulting changes in eclass inheritance may trigger performance issues due to invalidation of metadata cache.
: The {{c|egencache}}, {{c|emirrordist}} and {{c|repoman}} tools ignore this parameter by default as their operations are generally not site-specific (their operations are focused on the global, non-customized aspects of portage and the Gentoo repository). This behavior can be overruled by setting <code>force = eclass-overrides</code>.
; <code>force</code>
: Specifies names of attributes, which should be forcefully respected by {{c|egencache}}, {{c|emirrordist}}, and {{c|repoman}}. Valid values: <code>aliases</code>, <code>eclass-overrides</code>, and <code>masters</code>.
; <code>location</code>
:  Specifies location of given repository.
; <code>masters</code>
: Specifies master repositories of given repository. Setting this attribute is generally not recommended since resulting changes in eclass inheritance may trigger performance issues due to invalidation of metadata cache.
: The {{c|egencache}}, {{c|emirrordist}} and {{c|repoman}} tools ignore this parameter by default as their operations are generally not site-specific (their operations are focused on the global, non-customized aspects of portage and the Gentoo repository). This behavior can be overruled by setting <code>force = masters</code>.
; <code>priority</code>
: Specifies [[Ebuild repository#Priorities|priority]] of given repository.
; <code>sync-cvs-repo</code>
: Specifies CVS repository.
; <code>clone-depth</code>
: Specifies  clone  depth to use for DVCS repositories. Defaults to <code>1</code> (only the newest commit). If set to <code>0</code>, the depth is unlimited.
; <code>sync-type</code>
: Specifies type of synchronization performed by {{c|emerge --sync}}. Valid non-empty values: <code>cvs</code>, <code>git</code>, <code>rsync</code>, <code>svn</code>, <code>websync</code> (<=portage-2.2.18), <code>webrsync</code> (>=portage-2.2.19). This attribute can be set to empty value to disable synchronization of given repository. Empty value is default.
; <code>sync-umask</code>
: Specifies umask used to synchronize the repository. Takes an octal permission mask, e.g. <code>022</code>.
; <code>sync-uri</code>
: Specifies URI of repository used for synchronization performed by {{c|emerge --sync}}. This attribute can be set to empty value to disable synchronization of given repository. Empty value is default.
<pre style="margin-left:2em">Syntax:
cvs: [cvs://]:access_method:[username@]hostname[:port]:/path
git: (git|git+ssh|http|https)://[username@]hostname[:port]/path
rsync: (rsync|ssh)://[username@]hostname[:port]/(module|path)
</pre>
; <code>sync-user</code>
: Specifies the credentials used to perform the synchronization. If only user is provided, the primary group of the user will be used.  If only group is  provided, the current user will be preserved and only the group id will be changed. This key takes precedence over <code>FEATURES=userpriv</code>. If user or group id is provided, Portage no longer uses owner of the directory.
<pre style="margin-left:2em">Syntax: [user][:group]</pre>

== Примеры ==

=== Основной репозиторий Gentoo ===

{{:/etc/portage/repos.conf/gentoo.conf}}

=== Пользовательский репозиторий ===

{{:/etc/portage/repos.conf/local.conf}}

Для получения дополнительной информации смотрите статью [[custom repository]].

=== Внешний overlay ===

{{:/etc/portage/repos.conf/brother-overlay.conf/en}}

=== repos.conf в виде одного файла ===

Чтобы увидеть пример {{Path|repos.conf}} в виде одного файла, запустите эту команду и поищите раздел {{Path|repos.conf}}:

{{Cmd|man 5 portage}}

== Список репозиториев ==

Чтобы увидеть компактный список репозиториев, отсортированных по приоритету и отформатированных для легкого чтения:

{{Cmd|emerge --info --verbose {{!}} sed -n '/^Repo/,/^ABI/p' {{!}} head -n -1}}

Чтобы увидеть детализированный список репозиториев без какого-либо форматирования:

{{Cmd|portageq repos_config /}}

== Смотрите также ==

*[[Handbook:Parts/Working/Features/ru#Проверенные снимки Gentoo репозитория|Проверенные снимки Gentoo репозитория]] в [[Handbook:Main_Page/ru|Gentoo Handbook]]
* [[Project:Portage/Sync|Обзор новой системы синхронизации Portage]]
* [[Layman#repos.conf_method_.28default.29|Layman - Используя метод 'repos.conf']] в статье [[Layman]]
* [[Project:Overlays/Overlays_guide|Оверлеи руководство пользователя]]
* [[Repository_format|Формат репозитория]]
* [[Project:Repository mirror and CI|Зеркало репозитория и Непрерывная интеграция]]
* [[Portageq#Query repository information|Запрос информации о репозитории]] в статье [[Portageq]]
* [[Gentoo_git_workflow#Using the gentoo git checkout as your local tree|Using the gentoo git checkout as your local tree]]

== Внешние ресурсы ==

* [https://www.gentoo.org/support/news-items/2015-02-04-portage-sync-changes.html Portage Sync объявление новостей (2015-02-04)]
* [https://archives.gentoo.org/gentoo-dev-announce/message/651feb859ae9669dfeaa19547fa698dc rsync.gentoo.org rsync modules: gentoo-repo-changelog added, gentoo-x86-portage & gentoo-sec discontinued.]


[[Category:Portage]]
