= Installing Gentoo Linux on Asus Transformer Infinity (TF700T) =

Since i bought the amazing Infinity (Asus TF700T) with the keyboard dock, i started wondering how to put a real OS on it, which is my beloved Gentoo.

Finally i managed to get to the point and achieve something usable.

In this wiki page i will be describing what i did and provide both instructions AND the final product.

== Preliminary notes ==

dock mandatory
install on microsd
speed issues
low ram issues

== Step 1: Android steps ==
The first steps must be executed from your existing Android. You *must* have root enabled on your device. 

=== Unlock and root ===
You must unlock your bootloader first, follow these instructions:
--link to unlock thread on XDA--

Then make sure you have root on your Android, how to obtain it is left to your browsing capabilities of the XDA forunm-


=== Setting up dual-boot ===
Dual-booting the tablet is done using a kexec method which is just brilliant. You need to install <this>, please refer to <here>.
Download the kernel: <here>.

=== Prepare the storage ===
I don't advise to install Gentoo on the internal memory, due to the tear-and-wear that might kill it ahead of time. Gentoo, compared to Android, required a lot more writes to disk, so maybe if you want to use internal memory make sure all your portage builds and logs are stored somewhere else. I suggest to plug in a very fast microSD (class 6/10 if supported, mine supports only up to class6 but some get to class10, YMMV), on this mSD prepare two partirions: one, the first, format as EXT4 on a pc, the second keep as VFAT. Get at least 16gb for Gentoo, the more the better. 
You can also use a loopback root-fs on the internal image if you like.

== Step 2: prepare the root image ==

=== Download stage3 for ARM-hf ===
Download and extract (tar cjvfp) the ARM stage3 select the hard-fp (arm-hf) or the tegra binary drivers will not work

=== do the usual gentoo initial stuff ===
chroot into the uncompressed stage3 and follow the gentoo handbook to install it. Just bear in mind your only network interface is wlan0, you do want to specify the "xxx,noatime" mount option to ensure maximum life and speed from your solid state memories (either mSD or internal).
Also, remember you must NOT install any bootloader (lilo, grub, etc) and you CANNOT install a linux kernel, you must use the same kernel you are using in the dual boot we have set up.
Since some stuff will need the kernel sources to compile, just emerge git and download there sources <xxx> to /usr/src and make a symlink called /usr/src/linux to them.
You can now reboot android and try out the dual boot, if all goes well, you will get to a grentoo login and you can login as root.

=== Mask and unmask packages ===
The provided tegra drivers works only with X up to 1.14 (which is not very stable) and since 1.13 has been masked due to security flaws, you must mask any xorg-server above or equal to 1.13. I recomend the following accept_keywords and mask:
<here files...>

=== Install Tegra packages ===
Download the NVIDIA binary package for Tegra3 <here>
DEcompress.... copy the following files:
<....>

=== Install touchscreen and touchpad drivers ===
from here <> and here <>

=== Suggested configuration from here ===
You have only 1gb of ram and swap file is strongly discouraged. So i suggest you install lxde-meta and the nice XDM replacement °slim°. 
I usually configure it for auto-login due to some strange long delays in the login.

=== Fine tuning some things ===
Video standby simply hangs 75% of the times, so forget it. Disable any screen blanking from your screensaver. Instead, use this script:
<------------>

install xbindkeys and the following scripts:
<------------->

In this way you can lock the screen and put the brightness to 0 by pressing the power button. If you don'y do this, well, simply the metal dock will keep pressing randomly your touchscreen all the time... and this is NOT what you want!
