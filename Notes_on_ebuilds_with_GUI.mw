== Reasoning ==
When this wiki page was started (2017-11-13), there was a lot confusion about how to write clean ebuilds for desktop applications.
As result, there are many ebuilds which use obsolete eclasses, or even worse do not install, update and remove the icons and menus.
The eclasses are hardly documented and the documentation has mistakes. Many for loops for icons miss the definition of the local variable.

This page is still work in progress. It would be nice, if we could extract a howto wiki page from it afterwards and improve the documentation of the eclasses.

== Eclasses ==

=== xdg.eclass ===
xdg inherits xdg-utils
eclass reference: [https://devmanual.gentoo.org/eclass-reference/xdg.eclass/ xdg.eclass]

=== xdg-utils.eclass ===
eclass reference: [https://devmanual.gentoo.org/eclass-reference/xdg-utils.eclass/ xdg-utils.eclass]
=== gnome2-utils.eclass ===

=== fdo-mime.eclass (obsolete) ===
eclass reference: [https://devmanual.gentoo.org/eclass-reference/fdo-mime.eclass/ fdo-mime.eclass]
fdo-mime is obsolete since 2017-06-19 see mail "[gentoo-dev] [PATCH] fdo-mime.eclass: Mark the eclass as deprecated". 


See also {{Bug|621914}}

* '''Packages''' which are still using the fdo-mime https://qa-reports.gentoo.org/output/eclass-usage/fdo-mime.txt
* '''Ebuilds''' which are still using the fdo-mime '''sorted by Maintainer or Package''' http://gentoo.levelnine.at/simplechecks/fdo-mime-check/

== What repoman QA can detect ==

{{CodeBox|1=
 * QA Notice: .desktop files with MimeType= were found installed
 * but desktop mimeinfo cache has not been updated:
 *   /usr/share/applications/SciTE.desktop
 * Please make sure to call xdg_desktop_database_update()
 * in pkg_postinst() and pkg_postrm() phases of appropriate pkgs.
}}

== Code examples to create icons ==

{{CodeBox|lang=bash|1=
src_install() {
    local i
    for i in 16x16 22x22 32x32 48x48 64x64 128x128; do
        newicon -s ${i} utilities/${PN}${i}.png ${PN}.png
    done
}
}}

== .desktop files ==
* Open question: Why are they sometimes executable?
(TODO: paste URL to former discussions here.)


== brainstorming section (delete later, when merged in the text) ==
https://wiki.gentoo.org/wiki/User:MGorny/Draft:Triggers (Needs to be updated since some savelists are not needed)
