<languages />
{{InfoBox stack
|{{InfoBox homepage|https://wiki.gentoo.org/wiki/Project:Portage-Tools|header=true}}
}}


{{Lowercase title}}

<tt>eclean</tt> は、Portage が使用したソースファイルやバイナリパッケージを削除するツールです。 {{Package|app-portage/gentoolkit}} パッケージの一部であり、  [[Project:Portage-Tools|Portage-Tools プロジェクト]] が担当しています。

__TOC__


== インストール ==

<tt>eclean</tt> をインストールするには:

{{Emerge|app-portage/gentoolkit}}

{{Note/ja|[[Gentoolkit|Gentoolkit の記事]]に、{{Package|app-portage/gentoolkit}} パッケージ内の他のユーティリティーも含んだ情報が記載されています。}}

== 使い方 ==

By default, source files are located in the {{Path|/usr/portage/distfiles}} directory, while binary packages are located in the {{Path|/usr/portage/packages}} directory. The locations for each can be changed by altering the <code>DISTDIR</code> and the <code>PKGDIR</code> variables respectively in {{Path|/etc/portage/make.conf}}. Both locations can grow quite big if not periodically cleaned; this is the reason <tt>eclean</tt> was created.

=== オプションの全リスト ===

Use <tt>eclean --help</tt> to see full action summary, options list, and usage breakdown:

{{Cmd|eclean --help|output=<pre>
Usage:
 eclean [global-option] ... <action> [action-option] ...
 eclean-dist [global-option, distfiles-option] ...
 eclean-pkg [global-option, packages-option] ...
 eclean(-dist,-pkg) [--help, --version]
 
Available global options:
 -C, --nocolor             - turn off colors on output
 -d, --deep                - only keep the minimum for a reinstallation
 -e, --exclude-file=<path> - path to the exclusion file
 -i, --interactive         - ask confirmation before deletions
 -n, --package-names       - protect all versions (when --deep
 -p, --pretend             - only display what would be cleaned
 -q, --quiet               - be as quiet as possible
 -t, --time-limit=<time>   - don't delete files modified since <time>
   <time> is a duration: "1y" is "one year", "2w" is "two weeks", etc.
   Units are: y (years), m (months), w (weeks), d (days) and h (hours).
 -h, --help                - display the help screen
 -V, --version             - display version info
 
Available actions:
 packages     - clean outdated binary packages from PKGDIR
 distfiles    - clean outdated packages sources files from DISTDIR
 
Available options for the packages action:
 NONE  :)
 
Available options for the distfiles action:
 -f, --fetch-restricted   - protect fetch-restricted files (when --deep)
 -s, --size-limit=<size>  - don't delete distfiles bigger than <size>
   <size> is a size specification: "10M" is "ten megabytes", "200K" is
   "two hundreds kilobytes", etc.  Units are: G, M, K and B.
 
More detailed instruction can be found in `man eclean`
</pre>}}

=== distfiles の削除 ===

Clean the source files directory by passing the <code>distfiles</code> argument:

{{RootCmd|eclean distfiles}}

Or by running the short option:

{{RootCmd|eclean-dist}}

=== バイナリパッケージの削除 ===

For the directory with the binary packages use the following command instead:

{{RootCmd|eclean packages}}

Or by running the short option:

{{RootCmd|eclean-pkg}}

By default, source files and binary packages corresponding to any ebuild in the current Portage tree will '''not''' be deleted. This way, system administrators can easily downgrade a package or install a previously removed package, provided the package is still in the current Portage tree.

As an example, suppose packages <tt>foo-1.0</tt> and <tt>foo-1.1</tt> are both in the Portage tree. After updating from <tt>foo-1.0</tt> to <code>foo-1.1</code>, run <tt>eclean distfiles</tt>: source files for both versions will be kept, so if a problem occurs with <tt>foo-1.1</tt> then the user can easily re-install <tt>foo-1.0</tt> without re-downloading anything.

The other possible case is installing a previously removed package. Suppose that a package <tt>foo</tt> (any version) is installed on the system. After (inadvertently) removing it and running <tt>eclean distfiles</tt>, the source files for <tt>foo</tt> will be kept, so it can be re-installed without re-downloading anything.

The same examples also apply for binary packages.

To save more disk space, add the <code>--destructive</code> option: every source file or binary package that does not correspond to some ''currently installed'' package with version will be deleted. Please notice that this way users will not be protected in case they need to downgrade a package or re-install a previously removed package.

As an alternative, use both the <code>--destructive</code> and the <code>--package-names</code> options: every source file or binary package that does not correspond to some currently installed package (version does not matter) will be deleted. This still will not protect in case a re-install of a previously removed package is needed, but it will protect the sources if the package needs to be downgraded later.

詳しくは eclean(1) のマニュアルページを読んでください:

{{Cmd|man 1 eclean}}

== 参考 ==

* [[Gentoolkit]]


[[Category:Portage tools]]
