== Configuration ==

{{FileBox|filename=/etc/portage/make.conf|1=
CHOST="x86_64-pc-linux-gnu"
CFLAGS="-march=corei7 -O2 -pipe"
CXXFLAGS="${CFLAGS}"
CPU_FLAGS_X86="aes avx mmx mmxext popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3"
VIDEO_CARDS="intel i965"
INPUT_DEVICES="evdev synaptics"
}}

== Fan control ==

Fan control needs to be explicitly allowed:

{{FileBox|filename=/etc/modprobe.d/thinkpad_acpi.conf|1=
options thinkpad_acpi fan_control=1
}}

Turn off:

{{RootCmd|echo level 0 > /proc/acpi/ibm/fan}}

Maximum measured speed:

{{RootCmd|echo level 7 > /proc/acpi/ibm/fan}}

Automatic speed (default):

{{RootCmd|echo level auto > /proc/acpi/ibm/fan}}

Maximum speed:

{{RootCmd|echo level disengaged > /proc/acpi/ibm/fan}}

[[Category:Laptops]]

== Hardware ==

{{FileBox|filename=lenovo-thinkpad-t420s.config|1=
# From lspci output:
#
# 00:00.0 Host bridge: Intel Corporation 2nd Generation Core Processor Family DRAM Controller (rev 09)
# 00:02.0 VGA compatible controller: Intel Corporation 2nd Generation Core Processor Family Integrated Graphics Controller (rev 09)
CONFIG_DRM_I915
CONFIG_DRM_I915_KMS
# 00:16.0 Communication controller: Intel Corporation 6 Series/C200 Series Chipset Family MEI Controller #1 (rev 04)
# 00:16.3 Serial controller: Intel Corporation 6 Series/C200 Series Chipset Family KT Controller (rev 04)
CONFIG_SERIAL_CORE
# 00:19.0 Ethernet controller: Intel Corporation 82579LM Gigabit Network Connection (rev 04)
CONFIG_E1000E
# 00:1a.0 USB controller: Intel Corporation 6 Series/C200 Series Chipset Family USB Enhanced Host Controller #2 (rev 04)
CONFIG_USB_EHCI_PCI
# 00:1b.0 Audio device: Intel Corporation 6 Series/C200 Series Chipset Family High Definition Audio Controller (rev 04)
CONFIG_SND_HDA_INTEL
# 00:1c.0 PCI bridge: Intel Corporation 6 Series/C200 Series Chipset Family PCI Express Root Port 1 (rev b4)
# 00:1c.1 PCI bridge: Intel Corporation 6 Series/C200 Series Chipset Family PCI Express Root Port 2 (rev b4)
# 00:1c.3 PCI bridge: Intel Corporation 6 Series/C200 Series Chipset Family PCI Express Root Port 4 (rev b4)
# 00:1c.4 PCI bridge: Intel Corporation 6 Series/C200 Series Chipset Family PCI Express Root Port 5 (rev b4)
# 00:1d.0 USB controller: Intel Corporation 6 Series/C200 Series Chipset Family USB Enhanced Host Controller #1 (rev 04)
CONFIG_USB_EHCI_PCI
# 00:1f.0 ISA bridge: Intel Corporation QM67 Express Chipset Family LPC Controller (rev 04)
# 00:1f.2 SATA controller: Intel Corporation 6 Series/C200 Series Chipset Family 6 port SATA AHCI Controller (rev 04)
CONFIG_SATA_AHCI
# 00:1f.3 SMBus: Intel Corporation 6 Series/C200 Series Chipset Family SMBus Controller (rev 04)
CONFIG_I2C_I801
# 03:00.0 Network controller: Intel Corporation Centrino Ultimate-N 6300 (rev 3e)
CONFIG_IWLWIFI
# 05:00.0 System peripheral: Ricoh Co Ltd MMC/SD Host Controller (rev 07)
CONFIG_MMC_SDHCI
CONFIG_MMC_SDHCI_PCI
# 0d:00.0 USB controller: NEC Corporation uPD720200 USB 3.0 Host Controller (rev 04)
}}

You can use the above file with [https://github.com/pavlix/kernelconfig the kernelconfig script] to verify your kernel configuration or build a new kernel with the right configuration.
