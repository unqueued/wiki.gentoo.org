<languages />


{{Metadata|abstract=Данная статья покажет вам, как начать использование мощного текстового клиента электронной почты mutt.}}

Данная статья покажет вам, как начать использование мощного текстового клиента электронной почты mutt.

== Введение ==

Если вы не являетесь фанатом клиентов электронной почты с красивыми графическими интерфейсами пользователя, либо хотите быстро прочитать какую-то почту через соединение SSH, то консольные почтовые клиенты могут вам подойти. 

Mutt является одним из консольных клиентов электронной почты, который все еще активно разрабатывается и у которого есть множество активных разработчиков (и пользователей). Он мощный, широко настраиваемый, маленький и эффективный. 

Хотя изначально Mutt был разработан, чтобы читать почту из локального почтового ящика (например,  {{Path|/var/spool/mail/}} ), сегодня у него есть полная поддержка каталогов Maildir, удаленного подключения к серверам POP3, и полная поддержка аккаунтов IMAP. Для полного описания того, что может делать Mutt, пожалуйста, прочитайте его документацию, и посетите его веб-сайт по адресу [http://www.mutt.org/ http://www.mutt.org/] . 

== Установка ==

Чтобы начать ваше приключение с Mutt, вам нужно просто установить его. Однако у Mutt есть много различных опций, которые включают или выключают различные его возможности. Ниже мы кратко обсудим большинство важных USE-флагов, которые вы можете захотеть включить, в зависимости от того, как вы собираетесь использовать Mutt. Заметьте, что включение большинства из них не повредит данной программе, но заставить делать ее больше, чем может захотеть опытный пользователь Mutt. 

{{Emerge|params+=--verbose|mail-client/mutt}}

Прежде всего, для новичков, USE флаг <code>imap</code>, наверное, является самым важным. Если вы его включите, ничего не сломается, поэтому если вы не уверены, какой аккаунт вы будете использовать с Mutt, просто включите его. Большинство провайдеров электронной почты, даже бесплатные, вроде GMail, сегодня используют IMAP, так как это самый удобный способ сохранять почту, к которой обращаются из нескольких клиентов в одно и то же время и/или из разных мест. Так как IMAP хранит всю почту на сервере, Mutt просто скачивает те сообщения, которые вы хотите видеть. 

Часто вам нужно прочитать несколько сообщений несколько раз практически друг за другом, что приведет к тому, что придется скачивать те же самые сообщения снова и снова. Так как это просто пустая трата, Mutt использует штуку, которая называется "кэш заголовков" (hcache), чтобы хранить наиболее важные части сообщений для своих нужд. Данный hcache сохраняется с помощью библиотеки базы данных, из которых поддерживаются четыре: <code>gdbm</code> , <code>berkdb</code> , <code>qdbm</code> и <code>tokyocabinet</code>. Если вы не знаете, какая для вас лучше, выберите gdbm, либо berkdb. Скорее всего, обе из них уже установлены на вашей системе. Если включить USE флаги для более чем одной системы hcache, то Mutt выберет ту, которая ему понравится больше. Он всегда будет использовать только одну (либо вообще ни одной) системы. 

Хотя IMAP важен для чтения почты, для отправки почты необходим почтовый сервер. Mutt может общаться с почтовым сервером, если он есть на локальной системе, но часто это не вариант, либо просто не очень хорошее решения, например для ноутбуков, которые часто перемещаются. В Mutt есть поддержка SMTP, которая включается USE флагом <code>smtp</code> USE-flag. Опять же, включив этот флаг, если вы не уверены в нем, вы не повредите вашу систему. Поддержка SMTP в Mutt просто позволяет вам отправить почту через почтовый сервер по вашему выбору, обычно это тот, который даст вам ваш провайдер электронной почты. 

Сегодня как IMAP, так и SMTP в основном передаются через защищенные каналы, поэтому если вы еще не включили ни одного из таких флагов, будет разумным включить либо USE-флаг <code>ssl</code>, либо <code>gnutls</code>. Оба из них добавляют безопасные варианты (imaps и smtps) к списку поддерживаемых Mutt протоколов, используя либо реализацию OpenSSL, либо GNUTLS. Если у вас нет строгого предубеждения на этот счет, просто выберите <code>ssl</code> . Скорее всего, он уже есть в ваших глобальных USE флагах в любом случае. Если вы хотите аутентифицировать себя при передаче почты, также добавьте к вашим USE флагам <code>sasl</code>, так как это необходимо для данного действия. 

Последнее, но не менее важное, существует USE-флаг <code>sidebar</code>. Он включает расширение Mutt, чтобы он мог показывать панель навигации из существующих почтовых ящиков в левой части экрана. Хотя это не рекомендуется для полных новичков (данная возможность нигде не описана в официальной документации, так как она не является официальной), более продвинутые пользователи могут захотеть воспользоваться данной функциональностью. К счастью, если вы просто включите USE флаг, вы не заметите никакой разницы в том смысле, что вы даже не заметите, что он включен. 

== Конфигурация ==

After you emerged Mutt with your USE flags of choice, the only necessary step is to create a {{Path|.muttrc}} file in your home directory. Muttrc's are to be found in many places on the web and in Mutt's documentation. In {{Path|/usr/share/doc/mutt-<version>/samples}} you can find some muttrc samples that are from the official distribution. We discuss a very minimal {{Path|.muttrc}} for an IMAP based account with SMTP mail delivery below. 

{{FileBox|filename=~/.muttrc|title=Пример файла .muttrc|1=
# Кодовая страница для отправляемых нами сообщений
set send_charset="utf-8"
# Если для входящих сообщений не задано кодовой страницы, то, скорее всего, это windows
set assumed_charset="iso-8859-1"
  
# Удостоверьтесь что Vim знает о том, что mutt это почтовый клиент и укажем ему, что создаем сообщений в UTF-8
set editor="vim -c 'set syntax=mail ft=mail enc=utf-8'"
  
# Скроллинг по одной строке, а не по странице
set menu_scroll=yes
  
# Мы хотим смотреть некоторые MIME-типы не выходя из программы, смотри ниже (после этого листинга кода) объяснения
auto_view application/msword
auto_view application/pdf
  
# Шаблон по умолчанию для поиска в To, Cc и Subject
set simple_search="~f %s {{!}} ~C %s {{!}} ~s %s"
  
# Настройки потоков, сортировать по потокам
set sort=threads
set strict_threads=yes
  
# Показываем очки спама (только из SpamAssassin) при чтении сообщения
spam "X-Spam-Score: ([0-9\\.]+).*" "SA: %1"
set pager_format = " %C - %[%H:%M] %.20v, %s%* %?H? [%H] ?"
  
# Не показывать все заголовки, только некоторые
ignore          *
unignore        From To Cc Bcc Date Subject
# в таком порядке
unhdr_order     *
hdr_order       From: To: Cc: Bcc: Date: Subject:
  
# Раскрасим все цветами, для примеров раскраски смотри сайт
# http://aperiodic.net/phil/configs/mutt/colors
color normal      white          black
color hdrdefault  green          default
color quoted      green          default
color quoted1     yellow         default
color quoted2     red            default
color signature   cyan           default
color indicator   brightyellow   red
color error       brightred      default
color status      brightwhite    blue
color tree        brightmagenta  black
color tilde       blue           default
color attachment  brightyellow   default
color markers     brightred      default
color message     white          black
color search      brightwhite    magenta
color bold        brightyellow   default
# Если вы не любите черный прогрессбар внизу экрана,
# закомментируйте следующую строку
color progress    white          black
  
# Настройки пользователя
set realname = "Andrew Dalziel"
set from = "andy@mail.server"
alternates "andrew@mail.server{{!}}andrew.dalziel@mail.server"
# Данный файл должен существовать, и в нем должна быть ваша подпись. Закомментируйте его, если вы 
# не хотите использовать подпись
set signature = ~/.signature
  
# Алиасы (что-то вроде адресной книги)
source ~/.aliases
  
# Настройки соединения IMAP
set mail_check=60
set imap_keepalive=300
  
# Настройки аккаунта IMAP
set folder=imaps://andy@imap.mail.server/
set spoolfile=imaps://andy@imap.mail.server/
set record=imaps://andy@imap.mail.server/Sent
set postponed=imaps://andy@imap.mail.server/Drafts
  
# Использовать headercache для IMAP (проверьте, что это каталог для большего быстродействия!)
set header_cache=/var/tmp/.mutt
  
# Почтовые ящики для проверки на новую почту
mailboxes "="
mailboxes "=Lists"
  
# Почтовые рассылки, на которые мы подписаны (используются регулярные выражения!)
subscribe "gentoo-.*@gentoo\\.org"
  
# Конфигурация SMTP для отправки почты
set smtp_url=smtp://mail.server/
}}

{{Note|Будет хорошей практикой разобраться со всеми настройками из примера выше. Есть гораздо больше настроек, а некоторые настройки могут не совпадать с вашими. Помните это, когда сначала вам покажется, что Mutt работает не так, как вам хочется.}}

Пример {{Path|.muttrc}}, показанный выше, настраивает ваш аккаунт IMAP, использует SMTP сервер для передачи почты, сохраняет ее в кэше в {{Path|/var/tmp/.mutt}} , читает известные алиасы адресов (думайте об этом как об адресной книге) из файла {{Path|~/.aliases}} и добавляет подпись из {{Path|~/.signature}} при создании новой почты. Для серверов IMAP может быть необходимо изменить каталоги для отправляемой, полученной и задержанной почты, так как каталоги {{Path|Sent}} и {{Path|Drafts}} могут находиться внутри каталога, называемого {{Path|INBOX}} . Просто попробовав Mutt, вы без труда определите, так ли это в вашем случае. 

Как только вы настроили ваш {{Path|.muttrc}}, вы готовы запустить Mutt, просто набрав {{c|mutt}}. Если вы ввели правильный адрес для сервера IMAP, Mutt запросит ваш пароль, а затем загрузит для вас сообщения. Заметьте, что в первый раз вход в ваш почтовый ящик может занять много времени, если у вас есть много сообщений, так как кэш заголовков Mutt пока пуст. Если все получится, то вы окажетесь в вашем почтовом ящике IMAP, готовом к работе. 

Navigation is intuitive, as is reading messages by just pressing the {{Key|Enter}} key or {{Key|Space}} bar. Mutt is quite Vim alike in that it uses key strokes to perform most of its actions. You best read Mutt's manual on the web to get yourself known with all existing functions (or press {{Key|?}} in Mutt) and what key they are bound to, or better, what key you like it to be bound to. Some essential keys are {{Key|m}} (for message) to start composing a new message, {{Key|q}} for quit, {{Key|r}} for reply, {{Key|s}} for save and {{Key|p}} for print. 

Одна из возможностей, которые есть в Mutt, но которой все еще нет в сегодняшних самых продвинутых клиентов электронной почты - это возможность отображать вложения прямо в самой программе, с помощью какого-либо просмотрщика. Директива auto_view в файле {{Path|.muttrc}} говорит Mutt, какие вложения (согласно их типу MIME) нужно таким образом отображать. Чтобы определить, как это сделать, Mutt использует файлы mailcap, где находит, как отображать конкретные типы MIME. Обычно общесистемного файла mailcap здесь недостаточно, так что вы можете создать свой файл {{Path|~/.mailcap}}, и поместить туда что-либо для <code>copiousoutput</code>, чтобы Mutt мог отображать их в самой программе. 

В примере выше для файла {{Path|.muttrc}}, <code>auto_view</code> включен для файлов <code>application/msword</code> и <code>application/pdf</code>. Эти два вида файлов показывают большую полезность данной возможности, так как это означает, что заметки, присланные вам в виде файлов doc теперь полностью читаемы без необходимости сохранять вложение, и открывать его в LibreOffice. Вместо этого, текст показывается в прямо в программе чтения сообщений, если, конечно, у вас есть соответствующая запись в вашем файле {{Path|~/.mailcap}}.

{{FileBox|filename=~/.mailcap|title=Пример файла .mailcap|1=
application/msword; antiword '%s'; copiousoutput; description=Word Document;
nametemplate=%s.doc
application/pdf; pdftotext '%s' -; copiousoutput; description=PDF Document;
nametemplate=%s.pdf
}}

The above {{Path|.mailcap}} example tells Mutt what to do to "view" <code>msword</code> and <code>pdf</code> files. For the former it should run a program called {{c|antiword}} (emerge <code>app-text/antiword</code>), for the latter the program {{c|pdftotext}} ({{c|emerge app-text/poppler}}). You can go wild with these to for example display rendered HTML (give {{Package|app-text/vilistextum}} a try), render vcards, or show ASCII representation of attached images. All you need to do is define how to call the program in your {{Path|.mailcap}}, and tell Mutt to try to view it inline using the <code>auto_view</code> directive.

== Заключение ==

Mutt это очень настраиваемый консольный клиент электронной почты. Если вам понравилась концепция, то Mutt можно изменять любым способом через его конфигурационный файл. Поищите в Интернете, чтобы найти, как другие люди сделали "это", либо найдите один из многих существующих патчей, чтобы Mutt стал делать еще больше. Gentoo применяет несколько очень популярных патчей для Mutt, так что проверьте {{c|mutt -v}}, если вы хотите чего-то еще (вполне возможно, оно уже есть). Хотя выучить Mutt это не обязательно легко, но как только вы это сделаете, он может сделать ваше общение с почтой гораздо быстрее и эффективнее, чем остальные клиенты. Поиск примеров это очень мощная вещь, если вы знаете, как использовать правильные флаги, и знаете, как регулярные выражения помогут вам ограничить круг поиска. Наслаждайтесь программой Mutt! 


[[Category:Server and Security]] {{Migrated|originalauthors=Fabian Groffen}}
