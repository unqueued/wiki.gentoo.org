<languages/>

{{Metadata|abstract=Приложение efibootmgr взаимодействует с прошивкой UEFI в вашей системе, и является популярным приложением для изменения настроек EFI с целью создания и изменения загрузочных записей, с помощью которых можно загрузить Linux (или другие операционные системы).}}

Приложение <tt>efibootmgr</tt> взаимодействует с прошивкой UEFI в вашей системе, и является популярным приложением для изменения настроек EFI с целью создания и изменения загрузочных записей, с помощью которых можно загрузить Linux (или другие операционные системы).

{{InfoBox stack
|{{InfoBox homepage|https://github.com/vathpela/efibootmgr|header=true}}
}}

== EFIbootmgr это не начальный загрузчик ==

Приложение {{Package|sys-boot/efibootmgr}} это не начальный загрузчик. Это устройство, которое взаимодействует с прошивкой EFI на вашей системе, которая работает в качестве начального загрузчика. С помощью приложения <tt>efibootmgr</tt> загрузочные записи можно создавать, менять местами и обновлять.

== Настройка ==

Приложение {{Package|sys-boot/efibootmgr}} не нуждается в какой-либо настройке. Все что нужно сделать - это установить его.

{{Emerge|sys-boot/efibootmgr}}

However, in order to successfully use the <tt>efibootmgr</tt> application, the EFI variables file system must be accessible. This requires that the system is already booted with EFI (and not through the BIOS) as otherwise the EFI variables themselves are not accessible.

{{RootCmd|mount {{!}} grep efivars|output=<pre>
efivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)
</pre>}}

If it is not mounted yet (it should be mounted through the {{Path|sysfs}} init script), it is possible to manually mount it like so:

{{RootCmd|mount -t efivars efivars /sys/firmware/efi/efivars}}

== Managing EFI boot entries ==

=== Listing boot entries ===

To list the current boot entries, just use <kbd>efibootmgr</kbd>. Use the <kbd>--verbose (-v)</kbd> option to get some additional information:

{{RootCmd|efibootmgr -v|output=<pre>
BootCurrent: 0002
Timeout: 3 seconds
BootOrder: 0003,0003,0002,0000,0004
Boot0000* CD/DVD Drive  BIOS(3,0,00)
Boot0001* Hard Drive    BIOS(2,0,00)
Boot0002* Gentoo        HD(1,800,61800,6d98f360-cb3e-4727-8fed-5ce0c040365d)File(\EFI\boot\bootx64.efi)
Boot0003* Hard Drive    BIOS(2,0,00)P0: ST1500DM003-9YN16G
</pre>}}

=== Creating a boot entry ===

To create an EFI boot entry, a couple of arguments are passed to <tt>efibootmgr</tt>:

* <code>--create (-c)</code> to create a new entry
* <code>--part (-p)</code> followed by the partition number on which the EFI System Partition is hosted
* <code>--disk (-d)</code> followed by the disk on which the EFI System Partition is hosted
* <code>--label (-L)</code> followed by the label to use as the boot entry
* <code>--loader (-l)</code> followed by the path of the EFI image to boot

{{Important|The path of the EFI image to boot must use {{Key|\}} instead of {{Key|/}} as path separator.}}

Например:

{{RootCmd|efibootmgr -c -d /dev/sda -p 2 -L "Gentoo" -l "\efi\boot\bootx64.efi"}}

=== Удаление загрузочной записи ===

Перед удалением записи, сначала определите, какой ID был у записи.

To delete the Gentoo entry as shown above (which has ''Boot0002'' as the identifier), ask <tt>efibootmgr</tt> to delete the entry with id 2, passing the arguments <kbd>--bootnum (-b)</kbd> with the identifier, and <kbd>--delete-bootnum (-B)</kbd> to delete the entry:

{{RootCmd|efibootmgr -b 2 -B}}

=== Смотри также ===

* Статья [[EFI_stub_kernel|EFI stub kernel]] объясняет, как настроить ядро Linux, чтобы его можно было загрузить непосредственно из EFI.
